function t(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}const e="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(t,e,i=null)=>{for(;e!==i;){const i=e.nextSibling;t.removeChild(e),e=i}},n=`{{lit-${String(Math.random()).slice(2)}}}`,o=`\x3c!--${n}--\x3e`,r=new RegExp(`${n}|${o}`);class s{constructor(t,e){this.parts=[],this.element=e;const i=[],o=[],s=document.createTreeWalker(e.content,133,null,!1);let l=0,u=-1,h=0;const{strings:p,values:{length:g}}=t;for(;h<g;){const t=s.nextNode();if(null!==t){if(u++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:i}=e;let n=0;for(let t=0;t<i;t++)a(e[t].name,"$lit$")&&n++;for(;n-- >0;){const e=p[h],i=d.exec(e)[2],n=i.toLowerCase()+"$lit$",o=t.getAttribute(n);t.removeAttribute(n);const s=o.split(r);this.parts.push({type:"attribute",index:u,name:i,strings:s}),h+=s.length-1}}"TEMPLATE"===t.tagName&&(o.push(t),s.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(n)>=0){const n=t.parentNode,o=e.split(r),s=o.length-1;for(let e=0;e<s;e++){let i,r=o[e];if(""===r)i=c();else{const t=d.exec(r);null!==t&&a(t[2],"$lit$")&&(r=r.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),i=document.createTextNode(r)}n.insertBefore(i,t),this.parts.push({type:"node",index:++u})}""===o[s]?(n.insertBefore(c(),t),i.push(t)):t.data=o[s],h+=s}}else if(8===t.nodeType)if(t.data===n){const e=t.parentNode;null!==t.previousSibling&&u!==l||(u++,e.insertBefore(c(),t)),l=u,this.parts.push({type:"node",index:u}),null===t.nextSibling?t.data="":(i.push(t),u--),h++}else{let e=-1;for(;-1!==(e=t.data.indexOf(n,e+1));)this.parts.push({type:"node",index:-1}),h++}}else s.currentNode=o.pop()}for(const t of i)t.parentNode.removeChild(t)}}const a=(t,e)=>{const i=t.length-e.length;return i>=0&&t.slice(i)===e},l=t=>-1!==t.index,c=()=>document.createComment(""),d=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function u(t,e){const{element:{content:i},parts:n}=t,o=document.createTreeWalker(i,133,null,!1);let r=p(n),s=n[r],a=-1,l=0;const c=[];let d=null;for(;o.nextNode();){a++;const t=o.currentNode;for(t.previousSibling===d&&(d=null),e.has(t)&&(c.push(t),null===d&&(d=t)),null!==d&&l++;void 0!==s&&s.index===a;)s.index=null!==d?-1:s.index-l,r=p(n,r),s=n[r]}c.forEach((t=>t.parentNode.removeChild(t)))}const h=t=>{let e=11===t.nodeType?0:1;const i=document.createTreeWalker(t,133,null,!1);for(;i.nextNode();)e++;return e},p=(t,e=-1)=>{for(let i=e+1;i<t.length;i++){const e=t[i];if(l(e))return i}return-1};const g=new WeakMap,f=t=>(...e)=>{const i=t(...e);return g.set(i,!0),i},m=t=>"function"==typeof t&&g.has(t),_={},v={};class y{constructor(t,e,i){this.__parts=[],this.template=t,this.processor=e,this.options=i}update(t){let e=0;for(const i of this.__parts)void 0!==i&&i.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=e?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],n=this.template.parts,o=document.createTreeWalker(t,133,null,!1);let r,s=0,a=0,c=o.nextNode();for(;s<n.length;)if(r=n[s],l(r)){for(;a<r.index;)a++,"TEMPLATE"===c.nodeName&&(i.push(c),o.currentNode=c.content),null===(c=o.nextNode())&&(o.currentNode=i.pop(),c=o.nextNode());if("node"===r.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(c.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,r.name,r.strings,this.options));s++}else this.__parts.push(void 0),s++;return e&&(document.adoptNode(t),customElements.upgrade(t)),t}}const b=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),E=` ${n} `;class T{constructor(t,e,i,n){this.strings=t,this.values=e,this.type=i,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",i=!1;for(let r=0;r<t;r++){const t=this.strings[r],s=t.lastIndexOf("\x3c!--");i=(s>-1||i)&&-1===t.indexOf("--\x3e",s+1);const a=d.exec(t);e+=null===a?t+(i?E:o):t.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+n}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==b&&(e=b.createHTML(e)),t.innerHTML=e,t}}const x=t=>null===t||!("object"==typeof t||"function"==typeof t),k=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class S{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let t=0;t<i.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new C(this)}_getValue(){const t=this.strings,e=t.length-1,i=this.parts;if(1===e&&""===t[0]&&""===t[1]){const t=i[0].value;if("symbol"==typeof t)return String(t);if("string"==typeof t||!k(t))return t}let n="";for(let o=0;o<e;o++){n+=t[o];const e=i[o];if(void 0!==e){const t=e.value;if(x(t)||!k(t))n+="string"==typeof t?t:String(t);else for(const e of t)n+="string"==typeof e?e:String(e)}}return n+=t[e],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class C{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===_||x(t)&&t===this.value||(this.value=t,m(t)||(this.committer.dirty=!0))}commit(){for(;m(this.value);){const t=this.value;this.value=_,t(this)}this.value!==_&&this.committer.commit()}}class w{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(c()),this.endNode=t.appendChild(c())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=c()),t.__insert(this.endNode=c())}insertAfterPart(t){t.__insert(this.startNode=c()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;m(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=_,t(this)}const t=this.__pendingValue;t!==_&&(x(t)?t!==this.value&&this.__commitText(t):t instanceof T?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):k(t)?this.__commitIterable(t):t===v?(this.value=v,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=i:this.__commitNode(document.createTextNode(i)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof y&&this.value.template===e)this.value.update(t.values);else{const i=new y(e,t.processor,this.options),n=i._clone();i.update(t.values),this.__commitNode(n),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,n=0;for(const o of t)i=e[n],void 0===i&&(i=new w(this.options),e.push(i),0===n?i.appendIntoPart(this):i.insertAfterPart(e[n-1])),i.setValue(o),i.commit(),n++;n<e.length&&(e.length=n,this.clear(i&&i.endNode))}clear(t=this.startNode){i(this.startNode.parentNode,t.nextSibling,this.endNode)}}class I{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;m(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=_,t(this)}if(this.__pendingValue===_)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=_}}class R extends S{constructor(t,e,i){super(t,e,i),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new A(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class A extends C{}let O=!1;(()=>{try{const t={get capture(){return O=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class D{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;m(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=_,t(this)}if(this.__pendingValue===_)return;const t=this.__pendingValue,e=this.value,i=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=null!=t&&(null==e||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=N(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=_}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const N=t=>t&&(O?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);function M(t){let e=L.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},L.set(t.type,e));let i=e.stringsArray.get(t.strings);if(void 0!==i)return i;const o=t.strings.join(n);return i=e.keyString.get(o),void 0===i&&(i=new s(t,t.getTemplateElement()),e.keyString.set(o,i)),e.stringsArray.set(t.strings,i),i}const L=new Map,P=new WeakMap;const B=new class{handleAttributeExpressions(t,e,i,n){const o=e[0];if("."===o){return new R(t,e.slice(1),i).parts}if("@"===o)return[new D(t,e.slice(1),n.eventContext)];if("?"===o)return[new I(t,e.slice(1),i)];return new S(t,e,i).parts}handleTextExpression(t){return new w(t)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const F=(t,...e)=>new T(t,e,"html",B),H=(t,e)=>`${t}--${e}`;let U=!0;void 0===window.ShadyCSS?U=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),U=!1);const V=t=>e=>{const i=H(e.type,t);let o=L.get(i);void 0===o&&(o={stringsArray:new WeakMap,keyString:new Map},L.set(i,o));let r=o.stringsArray.get(e.strings);if(void 0!==r)return r;const a=e.strings.join(n);if(r=o.keyString.get(a),void 0===r){const i=e.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(i,t),r=new s(e,i),o.keyString.set(a,r)}return o.stringsArray.set(e.strings,r),r},G=["html","svg"],W=new Set,z=(t,e,i)=>{W.add(t);const n=i?i.element:document.createElement("template"),o=e.querySelectorAll("style"),{length:r}=o;if(0===r)return void window.ShadyCSS.prepareTemplateStyles(n,t);const s=document.createElement("style");for(let t=0;t<r;t++){const e=o[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}(t=>{G.forEach((e=>{const i=L.get(H(e,t));void 0!==i&&i.keyString.forEach((t=>{const{element:{content:e}}=t,i=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{i.add(t)})),u(t,i)}))}))})(t);const a=n.content;i?function(t,e,i=null){const{element:{content:n},parts:o}=t;if(null==i)return void n.appendChild(e);const r=document.createTreeWalker(n,133,null,!1);let s=p(o),a=0,l=-1;for(;r.nextNode();)for(l++,r.currentNode===i&&(a=h(e),i.parentNode.insertBefore(e,i));-1!==s&&o[s].index===l;){if(a>0){for(;-1!==s;)o[s].index+=a,s=p(o,s);return}s=p(o,s)}}(i,s,a.firstChild):a.insertBefore(s,a.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(i){a.insertBefore(s,a.firstChild);const t=new Set;t.add(s),u(i,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const j={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},X=(t,e)=>e!==t&&(e==e||t==t),Y={attribute:!0,type:String,converter:j,reflect:!1,hasChanged:X};class K extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,i)=>{const n=this._attributeNameForProperty(i,e);void 0!==n&&(this._attributeToPropertyMap.set(n,i),t.push(n))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=Y){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const i="symbol"==typeof t?Symbol():`__${t}`,n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const o=this[t];this[e]=n,this.requestUpdateInternal(t,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||Y}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const i of e)this.createProperty(i,t[i])}}static _attributeNameForProperty(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,i=X){return i(t,e)}static _propertyValueFromAttribute(t,e){const i=e.type,n=e.converter||j,o="function"==typeof n?n:n.fromAttribute;return o?o(t,i):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const i=e.type,n=e.converter;return(n&&n.toAttribute||j.toAttribute)(t,i)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,i){e!==i&&this._attributeToProperty(t,i)}_propertyToAttribute(t,e,i=Y){const n=this.constructor,o=n._attributeNameForProperty(t,i);if(void 0!==o){const t=n._propertyValueToAttribute(e,i);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(o):this.setAttribute(o,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const i=this.constructor,n=i._attributeToPropertyMap.get(t);if(void 0!==n){const t=i.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=i._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,i){let n=!0;if(void 0!==t){const o=this.constructor;i=i||o.getPropertyOptions(t),o._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==i.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}K.finalized=!0;const J=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(i){i.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};function $(t){return(e,i)=>void 0!==i?((t,e,i)=>{e.constructor.createProperty(i,t)})(t,e,i):J(t,e)}function q(t){return $({attribute:!1,hasChanged:null==t?void 0:t.hasChanged})}function Z(t,e){return(i,n)=>{const o={get(){return this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};if(e){const e="symbol"==typeof n?Symbol():`__${n}`;o.get=function(){return void 0===this[e]&&(this[e]=this.renderRoot.querySelector(t)),this[e]}}return void 0!==n?tt(o,i,n):et(o,i)}}function Q(t){return(e,i)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(t)},enumerable:!0,configurable:!0};return void 0!==i?tt(n,e,i):et(n,e)}}const tt=(t,e,i)=>{Object.defineProperty(e,i,t)},et=(t,e)=>({kind:"method",placement:"prototype",key:e.key,descriptor:t});function it(t){return(e,i)=>void 0!==i?((t,e,i)=>{Object.assign(e[i],t)})(t,e,i):((t,e)=>Object.assign(Object.assign({},e),{finisher(i){Object.assign(i.prototype[e.key],t)}}))(t,e)}const nt=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ot=Symbol();class rt{constructor(t,e){if(e!==ot)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(nt?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const st=(t,...e)=>{const i=e.reduce(((e,i,n)=>e+(t=>{if(t instanceof rt)return t.cssText;if("number"==typeof t)return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)})(i)+t[n+1]),t[0]);return new rt(i,ot)};(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const at={};class lt extends K{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,i)=>t.reduceRight(((t,i)=>Array.isArray(i)?e(i,t):(t.add(i),t)),i),i=e(t,new Set),n=[];i.forEach((t=>n.unshift(t))),this._styles=n}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>{if(t instanceof CSSStyleSheet&&!nt){const e=Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"");return new rt(String(e),ot)}return t}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?nt?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==at&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return at}}function ct(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}lt.finalized=!0,lt.render=(t,e,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const o=n.scopeName,r=P.has(e),s=U&&11===e.nodeType&&!!e.host,a=s&&!W.has(o),l=a?document.createDocumentFragment():e;if(((t,e,n)=>{let o=P.get(e);void 0===o&&(i(e,e.firstChild),P.set(e,o=new w(Object.assign({templateFactory:M},n))),o.appendInto(e)),o.setValue(t),o.commit()})(t,l,Object.assign({templateFactory:V(o)},n)),a){const t=P.get(l);P.delete(l);const n=t.value instanceof y?t.value.template:void 0;z(o,l,n),i(e,e.firstChild),e.appendChild(l),P.set(e,t)}!r&&s&&window.ShadyCSS.styleElement(e.host)};const dt=t=>t.nodeType===Node.ELEMENT_NODE;function ut(t,e){for(const i of t.assignedNodes({flatten:!0}))if(dt(i)){const t=i;if(ct(t,e))return t}return null}function ht(t){return{addClass:e=>{t.classList.add(e)},removeClass:e=>{t.classList.remove(e)},hasClass:e=>t.classList.contains(e)}}const pt=()=>{},gt={get passive(){return!1}};document.addEventListener("x",pt,gt),document.removeEventListener("x",pt);const ft=(t=window.document)=>{let e=t.activeElement;const i=[];if(!e)return i;for(;e&&(i.push(e),e.shadowRoot);)e=e.shadowRoot.activeElement;return i},mt=t=>{const e=ft();if(!e.length)return!1;const i=e[e.length-1],n=new Event("check-if-focused",{bubbles:!0,composed:!0});let o=[];const r=t=>{o=t.composedPath()};return document.body.addEventListener("check-if-focused",r),i.dispatchEvent(n),document.body.removeEventListener("check-if-focused",r),-1!==o.indexOf(t)};class _t extends lt{click(){if(this.mdcRoot)return this.mdcRoot.focus(),void this.mdcRoot.click();super.click()}createFoundation(){void 0!==this.mdcFoundation&&this.mdcFoundation.destroy(),this.mdcFoundationClass&&(this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init())}firstUpdated(){this.createFoundation()}}const vt=t=>(e,i)=>{if(e.constructor._observers){if(!e.constructor.hasOwnProperty("_observers")){const t=e.constructor._observers;e.constructor._observers=new Map,t.forEach(((t,i)=>e.constructor._observers.set(i,t)))}}else{e.constructor._observers=new Map;const t=e.updated;e.updated=function(e){t.call(this,e),e.forEach(((t,e)=>{const i=this.constructor._observers.get(e);void 0!==i&&i.call(this,this[e],t)}))}}e.constructor._observers.set(i,t)};var yt=function(t,e){return(yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var bt=function(){return(bt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Et=function(){function t(t){void 0===t&&(t={}),this.adapter=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),Tt={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},xt={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},kt={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},St=Tt.OPENING,Ct=Tt.OPEN,wt=Tt.CLOSING,It=xt.REASON_ACTION,Rt=xt.REASON_DISMISS,At=function(t){function e(i){var n=t.call(this,bt(bt({},e.defaultAdapter),i))||this;return n.isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.autoDismissTimer_=0,n.autoDismissTimeoutMs_=kt.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape_=!0,n}return function(t,e){function i(){this.constructor=t}yt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Tt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return xt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return kt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter.removeClass(St),this.adapter.removeClass(Ct),this.adapter.removeClass(wt)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.removeClass(wt),this.adapter.addClass(St),this.adapter.announce(),this.runNextAnimationFrame_((function(){t.adapter.addClass(Ct),t.animationTimer_=setTimeout((function(){var e=t.getTimeoutMs();t.handleAnimationTimerEnd_(),t.adapter.notifyOpened(),e!==kt.INDETERMINATE&&(t.autoDismissTimer_=setTimeout((function(){t.close(Rt)}),e))}),kt.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},e.prototype.close=function(t){var e=this;void 0===t&&(t=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Tt.CLOSING),this.adapter.removeClass(Tt.OPEN),this.adapter.removeClass(Tt.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){e.handleAnimationTimerEnd_(),e.adapter.notifyClosed(t)}),kt.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.isOpen_},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},e.prototype.setTimeoutMs=function(t){var e=kt.MIN_AUTO_DISMISS_TIMEOUT_MS,i=kt.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(t===kt.INDETERMINATE||t<=i&&t>=e))throw new Error("\n        timeoutMs must be an integer in the range "+e+"â€“"+i+"\n        (or "+kt.INDETERMINATE+" to disable), but got '"+t+"'");this.autoDismissTimeoutMs_=t},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape_=t},e.prototype.handleKeyDown=function(t){("Escape"===t.key||27===t.keyCode)&&this.getCloseOnEscape()&&this.close(Rt)},e.prototype.handleActionButtonClick=function(t){this.close(It)},e.prototype.handleActionIconClick=function(t){this.close(Rt)},e.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},e.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(Tt.OPENING),this.adapter.removeClass(Tt.CLOSING)},e.prototype.runNextAnimationFrame_=function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)}))},e}(Et);class Ot{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const e=(t.getAttribute("class")||"").split(/\s+/);for(const t of e)this.classes.add(t)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach((e=>t+=e+" ")),this.element.setAttribute("class",t)}}}const Dt=new WeakMap,Nt=f((t=>e=>{if(!(e instanceof C)||e instanceof A||"class"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:i}=e,{element:n}=i;let o=Dt.get(e);void 0===o&&(n.setAttribute("class",i.strings.join(" ")),Dt.set(e,o=new Set));const r=n.classList||new Ot(n);o.forEach((e=>{e in t||(r.remove(e),o.delete(e))}));for(const e in t){const i=t[e];i!=o.has(e)&&(i?(r.add(e),o.add(e)):(r.remove(e),o.delete(e)))}"function"==typeof r.commit&&r.commit()}));let Mt,Lt,Pt=t=>t;const{ARIA_LIVE_LABEL_TEXT_ATTR:Bt}=At.strings,{ARIA_LIVE_DELAY_MS:Ft}=At.numbers,Ht=new WeakMap,Ut=f(((t,e)=>i=>{if(!e)return;let n=Ht.get(i);if(void 0===n){const e=document.createElement("div");return e.setAttribute("class","mdc-snackbar__label"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.textContent=t,i.endNode.parentNode.insertBefore(e,i.endNode),n={labelEl:e,timerId:null},void Ht.set(i,n)}const o=n,r=o.labelEl;r.setAttribute("aria-live","off"),r.textContent="",r.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',r.setAttribute(Bt,t),null!==o.timerId&&clearTimeout(o.timerId),o.timerId=window.setTimeout((()=>{o.timerId=null,r.setAttribute("aria-live","polite"),r.removeAttribute(Bt),r.textContent=t}),Ft)})),{OPENING_EVENT:Vt,OPENED_EVENT:Gt,CLOSING_EVENT:Wt,CLOSED_EVENT:zt}=At.strings;class jt extends _t{constructor(){super(...arguments),this.mdcFoundationClass=At,this.open=!1,this.timeoutMs=5e3,this.closeOnEscape=!1,this.labelText="",this.stacked=!1,this.leading=!1,this.reason=""}render(){const t={"mdc-snackbar--stacked":this.stacked,"mdc-snackbar--leading":this.leading};return F(Mt||(Mt=Pt` <div class="mdc-snackbar ${0}" @keydown="${0}"> <div class="mdc-snackbar__surface"> ${0} <div class="mdc-snackbar__actions"> <slot name="action" @click="${0}"></slot> <slot name="dismiss" @click="${0}"></slot> </div> </div> </div>`),Nt(t),this._handleKeydown,Ut(this.labelText,this.open),this._handleActionClick,this._handleDismissClick)}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{announce:()=>{},notifyClosed:t=>{this.dispatchEvent(new CustomEvent(zt,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyClosing:t=>{this.open=!1,this.dispatchEvent(new CustomEvent(Wt,{bubbles:!0,cancelable:!0,detail:{reason:t}}))},notifyOpened:()=>{this.dispatchEvent(new CustomEvent(Gt,{bubbles:!0,cancelable:!0}))},notifyOpening:()=>{this.open=!0,this.dispatchEvent(new CustomEvent(Vt,{bubbles:!0,cancelable:!0}))}})}show(){this.open=!0}close(t=""){this.reason=t,this.open=!1}firstUpdated(){super.firstUpdated(),this.open&&this.mdcFoundation.open()}_handleKeydown(t){this.mdcFoundation.handleKeyDown(t)}_handleActionClick(t){this.mdcFoundation.handleActionButtonClick(t)}_handleDismissClick(t){this.mdcFoundation.handleActionIconClick(t)}}t([Z(".mdc-snackbar")],jt.prototype,"mdcRoot",void 0),t([Z(".mdc-snackbar__label")],jt.prototype,"labelElement",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){this.mdcFoundation&&(t?this.mdcFoundation.open():(this.mdcFoundation.close(this.reason),this.reason=""))}))],jt.prototype,"open",void 0),t([vt((function(t){this.mdcFoundation.setTimeoutMs(t)})),$({type:Number})],jt.prototype,"timeoutMs",void 0),t([vt((function(t){this.mdcFoundation.setCloseOnEscape(t)})),$({type:Boolean})],jt.prototype,"closeOnEscape",void 0),t([$({type:String})],jt.prototype,"labelText",void 0),t([$({type:Boolean})],jt.prototype,"stacked",void 0),t([$({type:Boolean})],jt.prototype,"leading",void 0);const Xt=st(Lt||(Lt=Pt`.mdc-snackbar{z-index:8;margin:8px;display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:transparent}.mdc-snackbar__surface{background-color:#333}.mdc-snackbar__label{color:rgba(255,255,255,.87)}.mdc-snackbar__surface{min-width:344px}@media(max-width:480px),(max-width:344px){.mdc-snackbar__surface{min-width:100%}}.mdc-snackbar__surface{max-width:672px}.mdc-snackbar__surface{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mdc-snackbar__surface{border-radius:4px;border-radius:var(--mdc-shape-small,4px)}.mdc-snackbar--closing,.mdc-snackbar--open,.mdc-snackbar--opening{display:flex}.mdc-snackbar--open .mdc-snackbar__actions,.mdc-snackbar--open .mdc-snackbar__label{visibility:visible}.mdc-snackbar--leading{justify-content:flex-start}.mdc-snackbar--stacked .mdc-snackbar__label{padding-left:16px;padding-right:8px;padding-bottom:12px}.mdc-snackbar--stacked .mdc-snackbar__label[dir=rtl],[dir=rtl] .mdc-snackbar--stacked .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mdc-snackbar--stacked .mdc-snackbar__surface{flex-direction:column;align-items:flex-start}.mdc-snackbar--stacked .mdc-snackbar__actions{align-self:flex-end;margin-bottom:8px}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(.8);opacity:0}.mdc-snackbar__surface[dir=rtl],[dir=rtl] .mdc-snackbar__surface{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto;transition:opacity 150ms 0s cubic-bezier(0,0,.2,1),transform 150ms 0s cubic-bezier(0,0,.2,1)}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1);transition:opacity 75ms 0s cubic-bezier(.4,0,1,1)}.mdc-snackbar__label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}.mdc-snackbar__label[dir=rtl],[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action:not(:disabled){color:#bb86fc}.mdc-snackbar__action::after,.mdc-snackbar__action::before{background-color:#bb86fc;background-color:var(--mdc-ripple-color,#bb86fc)}.mdc-snackbar__action.mdc-ripple-surface--hover::before,.mdc-snackbar__action:hover::before{opacity:.08;opacity:var(--mdc-ripple-hover-opacity,.08)}.mdc-snackbar__action.mdc-ripple-upgraded--background-focused::before,.mdc-snackbar__action:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity,.24)}.mdc-snackbar__action:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-snackbar__action:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity,.24)}.mdc-snackbar__action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss{color:rgba(255,255,255,.87)}.mdc-snackbar__dismiss::after,.mdc-snackbar__dismiss::before{background-color:rgba(255,255,255,.87);background-color:var(--mdc-ripple-color,rgba(255,255,255,.87))}.mdc-snackbar__dismiss.mdc-ripple-surface--hover::before,.mdc-snackbar__dismiss:hover::before{opacity:.08;opacity:var(--mdc-ripple-hover-opacity,.08)}.mdc-snackbar__dismiss.mdc-ripple-upgraded--background-focused::before,.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity,.24)}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-snackbar__dismiss:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity,.24)}.mdc-snackbar__dismiss.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-snackbar__dismiss.mdc-snackbar__dismiss{width:36px;height:36px;padding:9px;font-size:18px}.mdc-snackbar__dismiss.mdc-snackbar__dismiss img,.mdc-snackbar__dismiss.mdc-snackbar__dismiss svg{width:18px;height:18px}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl],[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:0;margin-right:8px}slot[name=action]::slotted(mwc-button){--mdc-theme-primary:var(--mdc-snackbar-action-color, #bb86fc)}slot[name=dismiss]::slotted(mwc-icon-button){--mdc-icon-size:18px;--mdc-icon-button-size:36px;color:rgba(255,255,255,.87);margin-left:8px;margin-right:0}[dir=rtl] slot[name=dismiss]::slotted(mwc-icon-button),slot[name=dismiss]::slotted(mwc-icon-button)[dir=rtl]{margin-left:0;margin-right:8px}`));class Yt extends jt{}Yt.styles=Xt;const Kt=new WeakMap,Jt=f((t=>e=>{const i=Kt.get(e);if(void 0===t&&e instanceof C){if(void 0!==i||!Kt.has(e)){const t=e.committer.name;e.committer.element.removeAttribute(t)}}else t!==i&&e.setValue(t);Kt.set(e,t)})),$t=new WeakMap,qt=f((t=>e=>{if(!(e instanceof C)||e instanceof A||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:i}=e,{style:n}=i.element;let o=$t.get(e);void 0===o&&(n.cssText=i.strings.join(" "),$t.set(e,o=new Set)),o.forEach((e=>{e in t||(o.delete(e),-1===e.indexOf("-")?n[e]=null:n.removeProperty(e))}));for(const e in t)o.add(e),-1===e.indexOf("-")?n[e]=t[e]:n.setProperty(e,t[e])}));let Zt,Qt,te,ee,ie=t=>t;class ne extends lt{constructor(){super(...arguments),this.indeterminate=!1,this.progress=0,this.density=0,this.closed=!1,this.ariaLabel=""}open(){this.closed=!1}close(){this.closed=!0}render(){const t={"mdc-circular-progress--closed":this.closed,"mdc-circular-progress--indeterminate":this.indeterminate},e=48+4*this.density,i={width:`${e}px`,height:`${e}px`};return F(Zt||(Zt=ie` <div class="mdc-circular-progress ${0}" style="${0}" role="progressbar" aria-label="${0}" aria-valuemin="0" aria-valuemax="1" aria-valuenow="${0}"> ${0} ${0} </div>`),Nt(t),qt(i),this.ariaLabel,Jt(this.indeterminate?void 0:this.progress),this.renderDeterminateContainer(),this.renderIndeterminateContainer())}renderDeterminateContainer(){const t=48+4*this.density,e=t/2,i=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,n=6.2831852*i,o=(1-this.progress)*n,r=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return F(Qt||(Qt=ie` <div class="mdc-circular-progress__determinate-container"> <svg class="mdc-circular-progress__determinate-circle-graphic" viewBox="0 0 ${0} ${0}"> <circle class="mdc-circular-progress__determinate-track" cx="${0}" cy="${0}" r="${0}" stroke-width="${0}"></circle> <circle class="mdc-circular-progress__determinate-circle" cx="${0}" cy="${0}" r="${0}" stroke-dasharray="${0}" stroke-dashoffset="${0}" stroke-width="${0}"></circle> </svg> </div>`),t,t,e,e,i,r,e,e,i,6.2831852*i,o,r)}renderIndeterminateContainer(){return F(te||(te=ie` <div class="mdc-circular-progress__indeterminate-container"> <div class="mdc-circular-progress__spinner-layer"> ${0} </div> </div>`),this.renderIndeterminateSpinnerLayer())}renderIndeterminateSpinnerLayer(){const t=48+4*this.density,e=t/2,i=this.density>=-3?18+11*this.density/6:12.5+5*(this.density+3)/4,n=6.2831852*i,o=.5*n,r=this.density>=-3?4+this.density*(1/3):3+(this.density+3)*(1/6);return F(ee||(ee=ie` <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-left"> <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 ${0} ${0}"> <circle cx="${0}" cy="${0}" r="${0}" stroke-dasharray="${0}" stroke-dashoffset="${0}" stroke-width="${0}"></circle> </svg> </div> <div class="mdc-circular-progress__gap-patch"> <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 ${0} ${0}"> <circle cx="${0}" cy="${0}" r="${0}" stroke-dasharray="${0}" stroke-dashoffset="${0}" stroke-width="${0}"></circle> </svg> </div> <div class="mdc-circular-progress__circle-clipper mdc-circular-progress__circle-right"> <svg class="mdc-circular-progress__indeterminate-circle-graphic" viewBox="0 0 ${0} ${0}"> <circle cx="${0}" cy="${0}" r="${0}" stroke-dasharray="${0}" stroke-dashoffset="${0}" stroke-width="${0}"></circle> </svg> </div>`),t,t,e,e,i,n,o,r,t,t,e,e,i,n,o,.8*r,t,t,e,e,i,n,o,r)}update(t){super.update(t),t.has("progress")&&(this.progress>1&&(this.progress=1),this.progress<0&&(this.progress=0))}}t([$({type:Boolean,reflect:!0})],ne.prototype,"indeterminate",void 0),t([$({type:Number,reflect:!0})],ne.prototype,"progress",void 0),t([$({type:Number,reflect:!0})],ne.prototype,"density",void 0),t([$({type:Boolean,reflect:!0})],ne.prototype,"closed",void 0),t([$({type:String})],ne.prototype,"ariaLabel",void 0);let oe;const re=st(oe||(oe=(t=>t)`.mdc-circular-progress__determinate-circle,.mdc-circular-progress__indeterminate-circle-graphic{stroke:#6200ee;stroke:var(--mdc-theme-primary,#6200ee)}.mdc-circular-progress__determinate-track{stroke:transparent}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;transition:opacity 250ms 0s cubic-bezier(.4,0,.6,1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:transparent}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset .5s 0s cubic-bezier(0,0,.2,1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1.568s linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdc-circular-progress--closed{opacity:0}:host{display:inline-flex}.mdc-circular-progress__determinate-track{stroke:transparent;stroke:var(--mdc-circular-progress-track-color,transparent)}`));class se extends ne{}se.styles=re;class ae{constructor(t){this.startPress=e=>{t().then((t=>{t&&t.startPress(e)}))},this.endPress=()=>{t().then((t=>{t&&t.endPress()}))},this.startFocus=()=>{t().then((t=>{t&&t.startFocus()}))},this.endFocus=()=>{t().then((t=>{t&&t.endFocus()}))},this.startHover=()=>{t().then((t=>{t&&t.startHover()}))},this.endHover=()=>{t().then((t=>{t&&t.endHover()}))}}}let le;const ce=st(le||(le=(t=>t)`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:0;background-color:transparent;fill:currentColor;color:inherit;font-size:24px;text-decoration:none;cursor:pointer;user-select:none;width:48px;height:48px;padding:12px}.mdc-icon-button img,.mdc-icon-button svg{width:24px;height:24px}.mdc-icon-button:disabled{color:rgba(0,0,0,.38);color:var(--mdc-theme-text-disabled-on-light,rgba(0,0,0,.38))}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}:host{display:inline-block;outline:0;--mdc-ripple-color:currentcolor;-webkit-tap-highlight-color:transparent}:host([disabled]){pointer-events:none}.mdc-icon-button,:host{vertical-align:top}.mdc-icon-button{width:var(--mdc-icon-button-size,48px);height:var(--mdc-icon-button-size,48px);padding:calc((var(--mdc-icon-button-size,48px) - var(--mdc-icon-size,24px))/ 2)}.mdc-icon-button>i{position:absolute;top:0;padding-top:inherit}.mdc-icon-button ::slotted(*),.mdc-icon-button i,.mdc-icon-button img,.mdc-icon-button svg{display:block;width:var(--mdc-icon-size,24px);height:var(--mdc-icon-size,24px)}`)),de=new WeakMap;function ue(t){return e=>{if(function(t,e){let i=e;for(;i;){if(de.get(i)===t)return!0;i=Object.getPrototypeOf(i)}return!1}(t,e))return e;const i=t(e);return de.set(i,t),i}}class he{constructor(t){this._parent=t,this._cache=new Map}has(t){return!!(this._cache.has(t)||this._parent&&this._parent._cache.has(t))}set(t,e){return this._cache.set(t,e),this}get(t){return this._cache.get(t)||this._parent&&this._parent._cache.get(t)}}let pe=Math.round(1e5*Math.random());const ge=new RegExp("[a-z](-|\\.|[0-9]|[a-z])*-(-|\\.|[0-9]|[a-z])*"),fe=(t,e)=>{const i=`${t}-${pe+=1}`;return((t,e)=>!!e.get(t))(i,e)?fe(t,e):i};function me(t,e=customElements){if(i=t,null===ge.exec(i))throw new Error("tagName is invalid");var i;return fe(t,e)}const _e=new WeakMap,ve=(t,e)=>_e.set(e,t),ye=(t,e,i=customElements)=>{ve(t,e),i.define(t,class extends e{})},be=(t,e,i)=>{const n=customElements;if(!(t=>Object.prototype.isPrototypeOf.call(HTMLElement,t))(e))return((t,e,i)=>{const n=me(t,e);if(!i)throw new Error("Lazy scoped elements requires the use of tags cache");return i.set(t,n),n})(t,n,i);if(e===customElements.get(t))return ve(t,e),t;const o=me(t,n);return ye(o,e,n),o};function Ee(t,e,i){return(t=>_e.get(t))(e)||i&&i.get(t)||be(t,e,i)}const Te="-|\\.|[0-9]|[a-z]",xe=new RegExp(`<\\/?([a-z](${Te})*-(${Te})*)`,"g"),ke=new he,Se=(t,e,i,n)=>{const o=t.map((t=>{let i=t;const o=(t=>{const e=[];let i;for(;null!==(i=xe.exec(t));)e.push(i);return e})(t);for(let t=o.length-1;t>=0;t-=1){const r=o[t],[s,a]=r,l=Ee(a,e[a],n),c=r.index+s.length-a.length,d=c+a.length,u=0===s.indexOf("</");i=i.slice(0,c)+(u?l:`${l} data-tag-name="${a}"`)+i.slice(d)}return i}));return i.set(t,o),o};let Ce=!0;const{ShadyCSS:we}=window;(void 0===we||void 0===we.prepareTemplateDom)&&(Ce=!1);const Ie=new WeakMap,Re=new WeakMap,Ae=t=>(Re.has(t)||Re.set(t,new he(Re.get(t.constructor))),Re.get(t)),Oe=(t,e,i,n)=>t.map((t=>t instanceof T?De(t,e,i,n):Array.isArray(t)?Oe(t,e,i,n):t)),De=(t,e,i,n)=>new T(function(t,e,i=ke,n){return i.get(t)||Se(t,e,i,n)}(t.strings,e,i,n),Oe(t.values,e,i,n),t.type,t.processor),Ne=(t,e,i,o)=>r=>{const a=De(r,e,i,o);return(t=>e=>{const i=((t,e)=>`${t}--${e}`)(e.type,t);let o=L.get(i);void 0===o&&(o={stringsArray:new WeakMap,keyString:new Map},L.set(i,o));let r=o.stringsArray.get(e.strings);if(void 0!==r)return r;const a=e.strings.join(n);if(r=o.keyString.get(a),void 0===r){const i=e.getTemplateElement();Ce&&we.prepareTemplateDom(i,t),r=new s(e,i),o.keyString.set(a,r)}return o.stringsArray.set(e.strings,r),r})(t)(a)},Me=ue((t=>class extends t{static get scopedElements(){return{}}static render(t,e,i){if(!i||"object"!=typeof i||!i.scopeName)throw new Error("The `scopeName` option is required.");const{scopeName:n,eventContext:o}=i,r=(s=o,Ie.has(s)||Ie.set(s,new he(Ie.get(s.constructor))),Ie.get(s));var s;const a=Ae(o),{scopedElements:l}=this;return super.render(t,e,{...i,templateFactory:Ne(n,l,r,a)})}defineScopedElement(t,e){return function(t,e,i){const n=i.get(t);n?void 0===customElements.get(n)&&ye(n,e,customElements):i.set(t,Ee(t,e,i))}(t,e,Ae(this))}static getScopedTagName(t){const e=this.scopedElements[t];return e?Ee(t,e,Ae(this)):Ae(this).get(t)}getScopedTagName(t){const e=this.constructor.scopedElements[t];return e?Ee(t,e,Ae(this)):Ae(this).get(t)}}));var Le=function(t,e){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Pe=function(){return(Pe=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Be={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Fe={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},He={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var Ue=["touchstart","pointerdown","mousedown","keydown"],Ve=["touchend","pointerup","mouseup","contextmenu"],Ge=[],We=function(t){function e(i){var n=t.call(this,Pe(Pe({},e.defaultAdapter),i))||this;return n.activationAnimationHasEnded_=!1,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.fgScale_="0",n.frame_={width:0,height:0},n.initialSize_=0,n.layoutFrame_=0,n.maxRadius_=0,n.unboundedCoords_={left:0,top:0},n.activationState_=n.defaultActivationState_(),n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.activateHandler_=function(t){return n.activate_(t)},n.deactivateHandler_=function(){return n.deactivate_()},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n}return function(t,e){function i(){this.constructor=t}Le(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Be},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Fe},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return He},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var n=e.cssClasses,o=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){t.adapter.addClass(o),t.adapter.isUnbounded()&&(t.adapter.addClass(r),t.layoutInternal_())}))}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(e.cssClasses.FG_DEACTIVATION));var i=e.cssClasses,n=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){t.adapter.removeClass(n),t.adapter.removeClass(o),t.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},e.prototype.activate=function(t){this.activate_(t)},e.prototype.deactivate=function(){this.deactivate_()},e.prototype.layout=function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){t.layoutInternal_(),t.layoutFrame_=0}))},e.prototype.setUnbounded=function(t){var i=e.cssClasses.UNBOUNDED;t?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame((function(){return t.adapter.addClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame((function(){return t.adapter.removeClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},e.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers_=function(t){var e=this;t&&(Ue.forEach((function(t){e.adapter.registerInteractionHandler(t,e.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},e.prototype.registerDeactivationHandlers_=function(t){var e=this;"keydown"===t.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):Ve.forEach((function(t){e.adapter.registerDocumentInteractionHandler(t,e.deactivateHandler_)}))},e.prototype.deregisterRootHandlers_=function(){var t=this;Ue.forEach((function(e){t.adapter.deregisterInteractionHandler(e,t.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},e.prototype.deregisterDeactivationHandlers_=function(){var t=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),Ve.forEach((function(e){t.adapter.deregisterDocumentInteractionHandler(e,t.deactivateHandler_)}))},e.prototype.removeCssVars_=function(){var t=this,i=e.strings;Object.keys(i).forEach((function(e){0===e.indexOf("VAR_")&&t.adapter.updateCssVariable(i[e],null)}))},e.prototype.activate_=function(t){var e=this;if(!this.adapter.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var n=this.previousActivationEvent_;if(!(n&&void 0!==t&&n.type!==t.type))i.isActivated=!0,i.isProgrammatic=void 0===t,i.activationEvent=t,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==t&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type)),void 0!==t&&Ge.length>0&&Ge.some((function(t){return e.adapter.containsEventTarget(t)}))?this.resetActivationState_():(void 0!==t&&(Ge.push(t.target),this.registerDeactivationHandlers_(t)),i.wasElementMadeActive=this.checkElementMadeActive_(t),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){Ge=[],i.wasElementMadeActive||void 0===t||" "!==t.key&&32!==t.keyCode||(i.wasElementMadeActive=e.checkElementMadeActive_(t),i.wasElementMadeActive&&e.animateActivation_()),i.wasElementMadeActive||(e.activationState_=e.defaultActivationState_())})))}}},e.prototype.checkElementMadeActive_=function(t){return void 0===t||"keydown"!==t.type||this.adapter.isSurfaceActive()},e.prototype.animateActivation_=function(){var t=this,i=e.strings,n=i.VAR_FG_TRANSLATE_START,o=i.VAR_FG_TRANSLATE_END,r=e.cssClasses,s=r.FG_DEACTIVATION,a=r.FG_ACTIVATION,l=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",d="";if(!this.adapter.isUnbounded()){var u=this.getFgTranslationCoordinates_(),h=u.startPoint,p=u.endPoint;c=h.x+"px, "+h.y+"px",d=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(n,c),this.adapter.updateCssVariable(o,d),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(s),this.adapter.computeBoundingRect(),this.adapter.addClass(a),this.activationTimer_=setTimeout((function(){return t.activationTimerCallback_()}),l)},e.prototype.getFgTranslationCoordinates_=function(){var t,e=this.activationState_,i=e.activationEvent;return{startPoint:t={x:(t=e.wasActivatedByPointer?function(t,e,i){if(!t)return{x:0,y:0};var n,o,r=e.x,s=e.y,a=r+i.left,l=s+i.top;if("touchstart"===t.type){var c=t;n=c.changedTouches[0].pageX-a,o=c.changedTouches[0].pageY-l}else{var d=t;n=d.pageX-a,o=d.pageY-l}return{x:n,y:o}}(i,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:t.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},e.prototype.runDeactivationUXLogicIfReady_=function(){var t=this,i=e.cssClasses.FG_DEACTIVATION,n=this.activationState_,o=n.hasDeactivationUXRun,r=n.isActivated;(o||!r)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){t.adapter.removeClass(i)}),He.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses_=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter.removeClass(t),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},e.prototype.resetActivationState_=function(){var t=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return t.previousActivationEvent_=void 0}),e.numbers.TAP_DELAY_MS)},e.prototype.deactivate_=function(){var t=this,e=this.activationState_;if(e.isActivated){var i=Pe({},e);e.isProgrammatic?(requestAnimationFrame((function(){return t.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(i),t.resetActivationState_()})))}},e.prototype.animateDeactivation_=function(t){var e=t.wasActivatedByPointer,i=t.wasElementMadeActive;(e||i)&&this.runDeactivationUXLogicIfReady_()},e.prototype.layoutInternal_=function(){var t=this;this.frame_=this.adapter.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?i:Math.sqrt(Math.pow(t.frame_.width,2)+Math.pow(t.frame_.height,2))+e.numbers.PADDING;var n=Math.floor(i*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&n%2!=0?this.initialSize_=n-1:this.initialSize_=n,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},e.prototype.updateLayoutCssVars_=function(){var t=e.strings,i=t.VAR_FG_SIZE,n=t.VAR_LEFT,o=t.VAR_TOP,r=t.VAR_FG_SCALE;this.adapter.updateCssVariable(i,this.initialSize_+"px"),this.adapter.updateCssVariable(r,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(n,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(o,this.unboundedCoords_.top+"px"))},e}(Et);let ze,je,Xe=t=>t;class Ye extends _t{constructor(){super(...arguments),this.primary=!1,this.accent=!1,this.unbounded=!1,this.disabled=!1,this.activated=!1,this.selected=!1,this.hovering=!1,this.bgFocused=!1,this.fgActivation=!1,this.fgDeactivation=!1,this.fgScale="",this.fgSize="",this.translateStart="",this.translateEnd="",this.leftPos="",this.topPos="",this.mdcFoundationClass=We}get isActive(){return(this.parentElement||this).matches(":active")}createAdapter(){return{browserSupportsCssVars:()=>!0,isUnbounded:()=>this.unbounded,isSurfaceActive:()=>this.isActive,isSurfaceDisabled:()=>this.disabled,addClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!0;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!0;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!0}},removeClass:t=>{switch(t){case"mdc-ripple-upgraded--background-focused":this.bgFocused=!1;break;case"mdc-ripple-upgraded--foreground-activation":this.fgActivation=!1;break;case"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation=!1}},containsEventTarget:()=>!0,registerInteractionHandler:()=>{},deregisterInteractionHandler:()=>{},registerDocumentInteractionHandler:()=>{},deregisterDocumentInteractionHandler:()=>{},registerResizeHandler:()=>{},deregisterResizeHandler:()=>{},updateCssVariable:(t,e)=>{switch(t){case"--mdc-ripple-fg-scale":this.fgScale=e;break;case"--mdc-ripple-fg-size":this.fgSize=e;break;case"--mdc-ripple-fg-translate-end":this.translateEnd=e;break;case"--mdc-ripple-fg-translate-start":this.translateStart=e;break;case"--mdc-ripple-left":this.leftPos=e;break;case"--mdc-ripple-top":this.topPos=e}},computeBoundingRect:()=>(this.parentElement||this).getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})}}startPress(t){this.waitForFoundation((()=>{this.mdcFoundation.activate(t)}))}endPress(){this.waitForFoundation((()=>{this.mdcFoundation.deactivate()}))}startFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleFocus()}))}endFocus(){this.waitForFoundation((()=>{this.mdcFoundation.handleBlur()}))}startHover(){this.hovering=!0}endHover(){this.hovering=!1}waitForFoundation(t){this.mdcFoundation?t():this.updateComplete.then(t)}render(){const t=this.activated&&(this.primary||!this.accent),e=this.selected&&(this.primary||!this.accent),i={"mdc-ripple-surface--accent":this.accent,"mdc-ripple-surface--primary--activated":t,"mdc-ripple-surface--accent--activated":this.accent&&this.activated,"mdc-ripple-surface--primary--selected":e,"mdc-ripple-surface--accent--selected":this.accent&&this.selected,"mdc-ripple-surface--disabled":this.disabled,"mdc-ripple-surface--hover":this.hovering,"mdc-ripple-surface--primary":this.primary,"mdc-ripple-surface--selected":this.selected,"mdc-ripple-upgraded--background-focused":this.bgFocused,"mdc-ripple-upgraded--foreground-activation":this.fgActivation,"mdc-ripple-upgraded--foreground-deactivation":this.fgDeactivation,"mdc-ripple-upgraded--unbounded":this.unbounded};return F(ze||(ze=Xe` <div class="mdc-ripple-surface mdc-ripple-upgraded ${0}" style="${0}"></div>`),Nt(i),qt({"--mdc-ripple-fg-scale":this.fgScale,"--mdc-ripple-fg-size":this.fgSize,"--mdc-ripple-fg-translate-end":this.translateEnd,"--mdc-ripple-fg-translate-start":this.translateStart,"--mdc-ripple-left":this.leftPos,"--mdc-ripple-top":this.topPos}))}}t([Z(".mdc-ripple-surface")],Ye.prototype,"mdcRoot",void 0),t([$({type:Boolean})],Ye.prototype,"primary",void 0),t([$({type:Boolean})],Ye.prototype,"accent",void 0),t([$({type:Boolean})],Ye.prototype,"unbounded",void 0),t([$({type:Boolean})],Ye.prototype,"disabled",void 0),t([$({type:Boolean})],Ye.prototype,"activated",void 0),t([$({type:Boolean})],Ye.prototype,"selected",void 0),t([q()],Ye.prototype,"hovering",void 0),t([q()],Ye.prototype,"bgFocused",void 0),t([q()],Ye.prototype,"fgActivation",void 0),t([q()],Ye.prototype,"fgDeactivation",void 0),t([q()],Ye.prototype,"fgScale",void 0),t([q()],Ye.prototype,"fgSize",void 0),t([q()],Ye.prototype,"translateStart",void 0),t([q()],Ye.prototype,"translateEnd",void 0),t([q()],Ye.prototype,"leftPos",void 0),t([q()],Ye.prototype,"topPos",void 0);const Ke=st(je||(je=Xe`.mdc-ripple-surface{--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;-webkit-tap-highlight-color:transparent;will-change:transform,opacity;position:relative;outline:0;overflow:hidden}.mdc-ripple-surface::after,.mdc-ripple-surface::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-ripple-surface::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index,1)}.mdc-ripple-surface::after{z-index:0;z-index:var(--mdc-ripple-z-index,0)}.mdc-ripple-surface.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale,1))}.mdc-ripple-surface.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-ripple-surface.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top,0);left:var(--mdc-ripple-left,0)}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-ripple-surface.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-ripple-surface::after,.mdc-ripple-surface::before{background-color:#000;background-color:var(--mdc-ripple-color,#000)}.mdc-ripple-surface.mdc-ripple-surface--hover::before,.mdc-ripple-surface:hover::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-ripple-surface.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-ripple-surface:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-ripple-surface.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface::after,.mdc-ripple-surface::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-ripple-surface.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded],.mdc-ripple-upgraded--unbounded{overflow:visible}.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::after,.mdc-ripple-surface[data-mdc-ripple-is-unbounded]::before,.mdc-ripple-upgraded--unbounded::after,.mdc-ripple-upgraded--unbounded::before{top:calc(50% - 50%);left:calc(50% - 50%);width:100%;height:100%}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::before,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::before{top:var(--mdc-ripple-top,calc(50% - 50%));left:var(--mdc-ripple-left,calc(50% - 50%));width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-ripple-surface[data-mdc-ripple-is-unbounded].mdc-ripple-upgraded::after,.mdc-ripple-upgraded--unbounded.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}:host{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:block}:host .mdc-ripple-surface{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;will-change:unset}.mdc-ripple-surface--primary::after,.mdc-ripple-surface--primary::before{background-color:#6200ee;background-color:var(--mdc-ripple-color,var(--mdc-theme-primary,#6200ee))}.mdc-ripple-surface--primary.mdc-ripple-surface--hover::before,.mdc-ripple-surface--primary:hover::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-ripple-surface--primary.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-ripple-surface--primary.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--primary--activated::before{opacity:.12;opacity:var(--mdc-ripple-activated-opacity,.12)}.mdc-ripple-surface--primary--activated::after,.mdc-ripple-surface--primary--activated::before{background-color:#6200ee;background-color:var(--mdc-ripple-color,var(--mdc-theme-primary,#6200ee))}.mdc-ripple-surface--primary--activated.mdc-ripple-surface--hover::before,.mdc-ripple-surface--primary--activated:hover::before{opacity:.16;opacity:var(--mdc-ripple-hover-opacity,.16)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity,.24)}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity,.24)}.mdc-ripple-surface--primary--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--primary--selected::before{opacity:.08;opacity:var(--mdc-ripple-selected-opacity,.08)}.mdc-ripple-surface--primary--selected::after,.mdc-ripple-surface--primary--selected::before{background-color:#6200ee;background-color:var(--mdc-ripple-color,var(--mdc-theme-primary,#6200ee))}.mdc-ripple-surface--primary--selected.mdc-ripple-surface--hover::before,.mdc-ripple-surface--primary--selected:hover::before{opacity:.12;opacity:var(--mdc-ripple-hover-opacity,.12)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.2;opacity:var(--mdc-ripple-focus-opacity,.2)}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--primary--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.2;opacity:var(--mdc-ripple-press-opacity,.2)}.mdc-ripple-surface--primary--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--accent::after,.mdc-ripple-surface--accent::before{background-color:#018786;background-color:var(--mdc-ripple-color,var(--mdc-theme-secondary,#018786))}.mdc-ripple-surface--accent.mdc-ripple-surface--hover::before,.mdc-ripple-surface--accent:hover::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-ripple-surface--accent.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-ripple-surface--accent.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-ripple-surface--accent--activated::before{opacity:.12;opacity:var(--mdc-ripple-activated-opacity,.12)}.mdc-ripple-surface--accent--activated::after,.mdc-ripple-surface--accent--activated::before{background-color:#018786;background-color:var(--mdc-ripple-color,var(--mdc-theme-secondary,#018786))}.mdc-ripple-surface--accent--activated.mdc-ripple-surface--hover::before,.mdc-ripple-surface--accent--activated:hover::before{opacity:.16;opacity:var(--mdc-ripple-hover-opacity,.16)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-focus-opacity,.24)}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--activated:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.24;opacity:var(--mdc-ripple-press-opacity,.24)}.mdc-ripple-surface--accent--activated.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.24)}.mdc-ripple-surface--accent--selected::before{opacity:.08;opacity:var(--mdc-ripple-selected-opacity,.08)}.mdc-ripple-surface--accent--selected::after,.mdc-ripple-surface--accent--selected::before{background-color:#018786;background-color:var(--mdc-ripple-color,var(--mdc-theme-secondary,#018786))}.mdc-ripple-surface--accent--selected.mdc-ripple-surface--hover::before,.mdc-ripple-surface--accent--selected:hover::before{opacity:.12;opacity:var(--mdc-ripple-hover-opacity,.12)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded--background-focused::before,.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.2;opacity:var(--mdc-ripple-focus-opacity,.2)}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-ripple-surface--accent--selected:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.2;opacity:var(--mdc-ripple-press-opacity,.2)}.mdc-ripple-surface--accent--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.2)}.mdc-ripple-surface--disabled{opacity:0}`));class Je extends(Me(Ye)){}Je.styles=Ke;let $e,qe,Ze,Qe=t=>t;class ti extends lt{constructor(){super(...arguments),this.disabled=!1,this.icon="",this.label="",this.shouldRenderRipple=!1,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple)))}renderRipple(){return this.shouldRenderRipple?F($e||($e=Qe` <mwc-ripple .disabled="${0}" unbounded> </mwc-ripple>`),this.disabled):""}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return F(qe||(qe=Qe`<button class="mdc-icon-button" aria-label="${0}" ?disabled="${0}" @focus="${0}" @blur="${0}" @mousedown="${0}" @mouseenter="${0}" @mouseleave="${0}" @touchstart="${0}" @touchend="${0}" @touchcancel="${0}"> ${0} <i class="material-icons">${0}</i> <span class="default-slot-container"> <slot></slot> </span> </button>`),this.label||this.icon,this.disabled,this.handleRippleFocus,this.handleRippleBlur,this.handleRippleMouseDown,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleTouchStart,this.handleRippleDeactivate,this.handleRippleDeactivate,this.renderRipple(),this.icon)}handleRippleMouseDown(t){const e=()=>{window.removeEventListener("mouseup",e),this.handleRippleDeactivate()};window.addEventListener("mouseup",e),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}t([$({type:Boolean,reflect:!0})],ti.prototype,"disabled",void 0),t([$({type:String})],ti.prototype,"icon",void 0),t([$({type:String})],ti.prototype,"label",void 0),t([Z("button")],ti.prototype,"buttonElement",void 0),t([Q("mwc-ripple")],ti.prototype,"ripple",void 0),t([q()],ti.prototype,"shouldRenderRipple",void 0),t([it({passive:!0})],ti.prototype,"handleRippleMouseDown",null),t([it({passive:!0})],ti.prototype,"handleRippleTouchStart",null);class ei extends(Me(ti)){static get scopedElements(){return{"mwc-ripple":Je}}renderRipple(){return this.shouldRenderRipple?F(Ze||(Ze=Qe` <mwc-ripple class="ripple" .disabled="${0}" unbounded> </mwc-ripple>`),this.disabled):""}}ei.styles=ce,t([Q(".ripple")],ei.prototype,"ripple",void 0);const ii=ue((t=>class extends t{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._injectedContexts=new Map;for(const t of this.constructor.inject)this._injectContext(t)}_injectContext(t){const e=new CustomEvent("context.connectEvent",{bubbles:!0,cancelable:!0,composed:!0,detail:{key:t,connected:!1,callback:(e,i)=>{this._contextValueChanged(t,e,i)}}});this.dispatchEvent(e),e.detail.connected&&this._injectedContexts.set(t,{unsubscribe:e.detail.unsubscribe})}_contextValueChanged(t,e,i){e!==i&&(this[t]=e)}disconnectedCallback(){for(const t of this._injectedContexts.values())t.unsubscribe();super.disconnectedCallback&&super.disconnectedCallback()}})),ni=ue((t=>class extends t{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._providedContexts=new Map;for(const t of this.constructor.provide)this._provideContext(t)}_provideContext(t){const e=e=>{const{detail:i}=e;if(i.key===t){e.stopPropagation();const n=this._providedContexts.get(t);n.callbacks.add(i.callback),i.connected=!0,i.unsubscribe=()=>{n.callbacks.delete(i.callback)},i.callback(this[t])}};this.addEventListener("context.connectEvent",e),this._providedContexts.set(t,{listener:e,callbacks:new Set})}_updateContextValue(t,e,i){if(this._providedContexts.has(t)){const n=this._providedContexts.get(t);for(const t of n.callbacks)t(e,i)}}shouldUpdate(t){const e=super.shouldUpdate(t);for(const[e,i]of t.entries())this.constructor.provide.includes(e)&&this._updateContextValue(e,this[e],i);return e}disconnectedCallback(){for(const t of this._providedContexts.values())this.removeEventListener("context.connectEvent",t.listener);super.disconnectedCallback&&super.disconnectedCallback()}}));var oi,ri,si,ai,li;function ci(t){const e=[];return e.push({type:ri.RegisterAgentActivity,header:t.signed_header}),e.push({type:ri.StoreElement,header:t.signed_header,maybe_entry:t.entry}),t.signed_header.header.content.type==oi.Update?(e.push({type:ri.RegisterUpdatedContent,header:t.signed_header}),e.push({type:ri.RegisterUpdatedElement,header:t.signed_header}),e.push({type:ri.StoreEntry,header:t.signed_header,entry:t.entry})):t.signed_header.header.content.type==oi.Create?e.push({type:ri.StoreEntry,header:t.signed_header,entry:t.entry}):t.signed_header.header.content.type==oi.Delete?(e.push({type:ri.RegisterDeletedBy,header:t.signed_header}),e.push({type:ri.RegisterDeletedEntryHeader,header:t.signed_header})):t.signed_header.header.content.type==oi.DeleteLink?e.push({type:ri.RegisterRemoveLink,header:t.signed_header}):t.signed_header.header.content.type==oi.CreateLink&&e.push({type:ri.RegisterAddLink,header:t.signed_header}),e}!function(t){t.Dna="Dna",t.AgentValidationPkg="AgentValidationPkg",t.InitZomesComplete="InitZomesComplete",t.CreateLink="CreateLink",t.DeleteLink="DeleteLink",t.OpenChain="OpenChain",t.CloseChain="CloseChain",t.Create="Create",t.Update="Update",t.Delete="Delete"}(oi||(oi={})),function(t){t.StoreElement="StoreElement",t.StoreEntry="StoreEntry",t.RegisterAgentActivity="RegisterAgentActivity",t.RegisterUpdatedContent="RegisterUpdatedContent",t.RegisterUpdatedElement="RegisterUpdatedElement",t.RegisterDeletedBy="RegisterDeletedBy",t.RegisterDeletedEntryHeader="RegisterDeletedEntryHeader",t.RegisterAddLink="RegisterAddLink",t.RegisterRemoveLink="RegisterRemoveLink"}(ri||(ri={})),ri.RegisterAgentActivity,ri.StoreEntry,ri.StoreElement,ri.RegisterUpdatedContent,ri.RegisterUpdatedElement,ri.RegisterDeletedEntryHeader,ri.RegisterDeletedBy,ri.RegisterAddLink,ri.RegisterRemoveLink,function(t){t[t.Entry=0]="Entry",t[t.Element=1]="Element"}(si||(si={})),function(t){t[t.Empty=0]="Empty",t[t.Valid=1]="Valid",t[t.Forked=2]="Forked",t[t.Invalid=3]="Invalid"}(ai||(ai={})),function(t){t[t.Live=0]="Live",t[t.Dead=1]="Dead",t[t.Pending=2]="Pending",t[t.Rejected=3]="Rejected",t[t.Abandoned=4]="Abandoned",t[t.Conflict=5]="Conflict",t[t.Withdrawn=6]="Withdrawn",t[t.Purged=7]="Purged"}(li||(li={}));const di="function"==typeof btoa,ui="function"==typeof Buffer,hi=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder&&new TextEncoder,[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="]),pi=((t=>{let e={};hi.forEach(((t,i)=>e[t]=i))})(),String.fromCharCode.bind(String)),gi=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/[+\/]/g,(t=>"+"==t?"-":"_")).replace(/=+$/m,"")),fi=t=>{let e,i,n,o,r="";const s=t.length%3;for(let s=0;s<t.length;){if((i=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(o=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=i<<16|n<<8|o,r+=hi[e>>18&63]+hi[e>>12&63]+hi[e>>6&63]+hi[63&e]}return s?r.slice(0,s-3)+"===".substring(s):r},mi=di?t=>btoa(t):ui?t=>Buffer.from(t,"binary").toString("base64"):fi,_i=ui?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let i=0,n=t.length;i<n;i+=4096)e.push(pi.apply(null,t.subarray(i,i+4096)));return mi(e.join(""))},vi=(t,e=!1)=>e?gi(_i(t)):_i(t),yi=vi;function bi(t){return 1e3*t[0]+Math.floor(t[1]/1e3)}function Ei(){return t=Date.now(),[Math.floor(t/1e3),t%1e3*1e3];var t}var Ti="object"==typeof global&&global&&global.Object===Object&&global,xi="object"==typeof self&&self&&self.Object===Object&&self,ki=Ti||xi||Function("return this")(),Si=ki.Symbol,Ci=Object.prototype,wi=Ci.hasOwnProperty,Ii=Ci.toString,Ri=Si?Si.toStringTag:void 0;var Ai=Object.prototype.toString;var Oi=Si?Si.toStringTag:void 0;function Di(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Oi&&Oi in Object(t)?function(t){var e=wi.call(t,Ri),i=t[Ri];try{t[Ri]=void 0;var n=!0}catch(t){}var o=Ii.call(t);return n&&(e?t[Ri]=i:delete t[Ri]),o}(t):function(t){return Ai.call(t)}(t)}function Ni(t){return null!=t&&"object"==typeof t}var Mi=Array.isArray;function Li(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pi(t){if(!Li(t))return!1;var e=Di(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Bi,Fi=ki["__core-js_shared__"],Hi=(Bi=/[^.]+$/.exec(Fi&&Fi.keys&&Fi.keys.IE_PROTO||""))?"Symbol(src)_1."+Bi:"";var Ui=Function.prototype.toString;function Vi(t){if(null!=t){try{return Ui.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Gi=/^\[object .+?Constructor\]$/,Wi=Function.prototype,zi=Object.prototype,ji=Wi.toString,Xi=zi.hasOwnProperty,Yi=RegExp("^"+ji.call(Xi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ki(t){return!(!Li(t)||(e=t,Hi&&Hi in e))&&(Pi(t)?Yi:Gi).test(Vi(t));var e}function Ji(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Ki(i)?i:void 0}var $i=Ji(ki,"WeakMap"),qi=Object.create,Zi=function(){function t(){}return function(e){if(!Li(e))return{};if(qi)return qi(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();var Qi=function(){try{var t=Ji(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function tn(t){return t!=t}function en(t,e){return!!(null==t?0:t.length)&&function(t,e,i){return e==e?function(t,e,i){for(var n=i-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,i):function(t,e,i,n){for(var o=t.length,r=i+(n?1:-1);n?r--:++r<o;)if(e(t[r],r,t))return r;return-1}(t,tn,i)}(t,e,0)>-1}var nn=/^(?:0|[1-9]\d*)$/;function on(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&nn.test(t))&&t>-1&&t%1==0&&t<e}function rn(t,e,i){"__proto__"==e&&Qi?Qi(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function sn(t,e){return t===e||t!=t&&e!=e}var an=Object.prototype.hasOwnProperty;function ln(t,e,i){var n=t[e];an.call(t,e)&&sn(n,i)&&(void 0!==i||e in t)||rn(t,e,i)}function cn(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),o?rn(i,a,l):ln(i,a,l)}return i}function dn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function un(t){return null!=t&&dn(t.length)&&!Pi(t)}var hn=Object.prototype;function pn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||hn)}function gn(t){return Ni(t)&&"[object Arguments]"==Di(t)}var fn=Object.prototype,mn=fn.hasOwnProperty,_n=fn.propertyIsEnumerable,vn=gn(function(){return arguments}())?gn:function(t){return Ni(t)&&mn.call(t,"callee")&&!_n.call(t,"callee")};var yn="object"==typeof exports&&exports&&!exports.nodeType&&exports,bn=yn&&"object"==typeof module&&module&&!module.nodeType&&module,En=bn&&bn.exports===yn?ki.Buffer:void 0,Tn=(En?En.isBuffer:void 0)||function(){return!1},xn={};function kn(t){return function(e){return t(e)}}xn["[object Float32Array]"]=xn["[object Float64Array]"]=xn["[object Int8Array]"]=xn["[object Int16Array]"]=xn["[object Int32Array]"]=xn["[object Uint8Array]"]=xn["[object Uint8ClampedArray]"]=xn["[object Uint16Array]"]=xn["[object Uint32Array]"]=!0,xn["[object Arguments]"]=xn["[object Array]"]=xn["[object ArrayBuffer]"]=xn["[object Boolean]"]=xn["[object DataView]"]=xn["[object Date]"]=xn["[object Error]"]=xn["[object Function]"]=xn["[object Map]"]=xn["[object Number]"]=xn["[object Object]"]=xn["[object RegExp]"]=xn["[object Set]"]=xn["[object String]"]=xn["[object WeakMap]"]=!1;var Sn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cn=Sn&&"object"==typeof module&&module&&!module.nodeType&&module,wn=Cn&&Cn.exports===Sn&&Ti.process,In=function(){try{var t=Cn&&Cn.require&&Cn.require("util").types;return t||wn&&wn.binding&&wn.binding("util")}catch(t){}}(),Rn=In&&In.isTypedArray,An=Rn?kn(Rn):function(t){return Ni(t)&&dn(t.length)&&!!xn[Di(t)]},On=Object.prototype.hasOwnProperty;function Dn(t,e){var i=Mi(t),n=!i&&vn(t),o=!i&&!n&&Tn(t),r=!i&&!n&&!o&&An(t),s=i||n||o||r,a=s?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=a.length;for(var c in t)!e&&!On.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||on(c,l))||a.push(c);return a}function Nn(t,e){return function(i){return t(e(i))}}var Mn=Nn(Object.keys,Object),Ln=Object.prototype.hasOwnProperty;function Pn(t){return un(t)?Dn(t):function(t){if(!pn(t))return Mn(t);var e=[];for(var i in Object(t))Ln.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}var Bn=Object.prototype.hasOwnProperty;function Fn(t){if(!Li(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=pn(t),i=[];for(var n in t)("constructor"!=n||!e&&Bn.call(t,n))&&i.push(n);return i}function Hn(t){return un(t)?Dn(t,!0):Fn(t)}var Un=Ji(Object,"create");var Vn=Object.prototype.hasOwnProperty;var Gn=Object.prototype.hasOwnProperty;function Wn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function zn(t,e){for(var i=t.length;i--;)if(sn(t[i][0],e))return i;return-1}Wn.prototype.clear=function(){this.__data__=Un?Un(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(Un){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return Vn.call(e,t)?e[t]:void 0},Wn.prototype.has=function(t){var e=this.__data__;return Un?void 0!==e[t]:Gn.call(e,t)},Wn.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Un&&void 0===e?"__lodash_hash_undefined__":e,this};var jn=Array.prototype.splice;function Xn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,i=zn(e,t);return!(i<0)&&(i==e.length-1?e.pop():jn.call(e,i,1),--this.size,!0)},Xn.prototype.get=function(t){var e=this.__data__,i=zn(e,t);return i<0?void 0:e[i][1]},Xn.prototype.has=function(t){return zn(this.__data__,t)>-1},Xn.prototype.set=function(t,e){var i=this.__data__,n=zn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};var Yn=Ji(ki,"Map");function Kn(t,e){var i,n,o=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof e?"string":"hash"]:o.map}function Jn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function $n(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t}Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Yn||Xn),string:new Wn}},Jn.prototype.delete=function(t){var e=Kn(this,t).delete(t);return this.size-=e?1:0,e},Jn.prototype.get=function(t){return Kn(this,t).get(t)},Jn.prototype.has=function(t){return Kn(this,t).has(t)},Jn.prototype.set=function(t,e){var i=Kn(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};var qn=Nn(Object.getPrototypeOf,Object);function Zn(t){var e=this.__data__=new Xn(t);this.size=e.size}Zn.prototype.clear=function(){this.__data__=new Xn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Xn){var n=i.__data__;if(!Yn||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Jn(n)}return i.set(t,e),this.size=i.size,this};var Qn="object"==typeof exports&&exports&&!exports.nodeType&&exports,to=Qn&&"object"==typeof module&&module&&!module.nodeType&&module,eo=to&&to.exports===Qn?ki.Buffer:void 0,io=eo?eo.allocUnsafe:void 0;function no(){return[]}var oo=Object.prototype.propertyIsEnumerable,ro=Object.getOwnPropertySymbols,so=ro?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,o=0,r=[];++i<n;){var s=t[i];e(s,i,t)&&(r[o++]=s)}return r}(ro(t),(function(e){return oo.call(t,e)})))}:no;var ao=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)$n(e,so(t)),t=qn(t);return e}:no;function lo(t,e,i){var n=e(t);return Mi(t)?n:$n(n,i(t))}function co(t){return lo(t,Pn,so)}function uo(t){return lo(t,Hn,ao)}var ho=Ji(ki,"DataView"),po=Ji(ki,"Promise"),go=Ji(ki,"Set"),fo=Vi(ho),mo=Vi(Yn),_o=Vi(po),vo=Vi(go),yo=Vi($i),bo=Di;(ho&&"[object DataView]"!=bo(new ho(new ArrayBuffer(1)))||Yn&&"[object Map]"!=bo(new Yn)||po&&"[object Promise]"!=bo(po.resolve())||go&&"[object Set]"!=bo(new go)||$i&&"[object WeakMap]"!=bo(new $i))&&(bo=function(t){var e=Di(t),i="[object Object]"==e?t.constructor:void 0,n=i?Vi(i):"";if(n)switch(n){case fo:return"[object DataView]";case mo:return"[object Map]";case _o:return"[object Promise]";case vo:return"[object Set]";case yo:return"[object WeakMap]"}return e});var Eo=bo,To=Object.prototype.hasOwnProperty;var xo=ki.Uint8Array;function ko(t){var e=new t.constructor(t.byteLength);return new xo(e).set(new xo(t)),e}var So=/\w*$/;var Co=Si?Si.prototype:void 0,wo=Co?Co.valueOf:void 0;function Io(t,e,i){var n,o,r,s=t.constructor;switch(e){case"[object ArrayBuffer]":return ko(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return function(t,e){var i=e?ko(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var i=e?ko(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,i);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return(r=new(o=t).constructor(o.source,So.exec(o))).lastIndex=o.lastIndex,r;case"[object Set]":return new s;case"[object Symbol]":return n=t,wo?Object(wo.call(n)):{}}}var Ro=In&&In.isMap,Ao=Ro?kn(Ro):function(t){return Ni(t)&&"[object Map]"==Eo(t)};var Oo=In&&In.isSet,Do=Oo?kn(Oo):function(t){return Ni(t)&&"[object Set]"==Eo(t)},No={};function Mo(t,e,i,n,o,r){var s,a=1&e,l=2&e,c=4&e;if(i&&(s=o?i(t,n,o,r):i(t)),void 0!==s)return s;if(!Li(t))return t;var d=Mi(t);if(d){if(s=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&To.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!a)return function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(t,s)}else{var u=Eo(t),h="[object Function]"==u||"[object GeneratorFunction]"==u;if(Tn(t))return function(t,e){if(e)return t.slice();var i=t.length,n=io?io(i):new t.constructor(i);return t.copy(n),n}(t,a);if("[object Object]"==u||"[object Arguments]"==u||h&&!o){if(s=l||h?{}:function(t){return"function"!=typeof t.constructor||pn(t)?{}:Zi(qn(t))}(t),!a)return l?function(t,e){return cn(t,ao(t),e)}(t,function(t,e){return t&&cn(e,Hn(e),t)}(s,t)):function(t,e){return cn(t,so(t),e)}(t,function(t,e){return t&&cn(e,Pn(e),t)}(s,t))}else{if(!No[u])return o?t:{};s=Io(t,u,a)}}r||(r=new Zn);var p=r.get(t);if(p)return p;r.set(t,s),Do(t)?t.forEach((function(n){s.add(Mo(n,e,i,n,t,r))})):Ao(t)&&t.forEach((function(n,o){s.set(o,Mo(n,e,i,o,t,r))}));var g=d?void 0:(c?l?uo:co:l?Hn:Pn)(t);return function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););}(g||t,(function(n,o){g&&(n=t[o=n]),ln(s,o,Mo(n,e,i,o,t,r))})),s}No["[object Arguments]"]=No["[object Array]"]=No["[object ArrayBuffer]"]=No["[object DataView]"]=No["[object Boolean]"]=No["[object Date]"]=No["[object Float32Array]"]=No["[object Float64Array]"]=No["[object Int8Array]"]=No["[object Int16Array]"]=No["[object Int32Array]"]=No["[object Map]"]=No["[object Number]"]=No["[object Object]"]=No["[object RegExp]"]=No["[object Set]"]=No["[object String]"]=No["[object Symbol]"]=No["[object Uint8Array]"]=No["[object Uint8ClampedArray]"]=No["[object Uint16Array]"]=No["[object Uint32Array]"]=!0,No["[object Error]"]=No["[object Function]"]=No["[object WeakMap]"]=!1;function Lo(t){return Mo(t,5)}function Po(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Jn;++e<i;)this.add(t[e])}function Bo(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function Fo(t,e){return t.has(e)}Po.prototype.add=Po.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Po.prototype.has=function(t){return this.__data__.has(t)};function Ho(t,e,i,n,o,r){var s=1&i,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(t),d=r.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,p=2&i?new Po:void 0;for(r.set(t,e),r.set(e,t);++u<a;){var g=t[u],f=e[u];if(n)var m=s?n(f,g,u,e,t,r):n(g,f,u,t,e,r);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!Bo(e,(function(t,e){if(!Fo(p,e)&&(g===t||o(g,t,i,n,r)))return p.push(e)}))){h=!1;break}}else if(g!==f&&!o(g,f,i,n,r)){h=!1;break}}return r.delete(t),r.delete(e),h}function Uo(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function Vo(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var Go=Si?Si.prototype:void 0,Wo=Go?Go.valueOf:void 0;var zo=Object.prototype.hasOwnProperty;var jo=Object.prototype.hasOwnProperty;function Xo(t,e,i,n,o,r){var s=Mi(t),a=Mi(e),l=s?"[object Array]":Eo(t),c=a?"[object Array]":Eo(e),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h=l==c;if(h&&Tn(t)){if(!Tn(e))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new Zn),s||An(t)?Ho(t,e,i,n,o,r):function(t,e,i,n,o,r,s){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new xo(t),new xo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return sn(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Uo;case"[object Set]":var l=1&n;if(a||(a=Vo),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=2,s.set(t,e);var d=Ho(a(t),a(e),n,o,r,s);return s.delete(t),d;case"[object Symbol]":if(Wo)return Wo.call(t)==Wo.call(e)}return!1}(t,e,l,i,n,o,r);if(!(1&i)){var p=d&&jo.call(t,"__wrapped__"),g=u&&jo.call(e,"__wrapped__");if(p||g){var f=p?t.value():t,m=g?e.value():e;return r||(r=new Zn),o(f,m,i,n,r)}}return!!h&&(r||(r=new Zn),function(t,e,i,n,o,r){var s=1&i,a=co(t),l=a.length;if(l!=co(e).length&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in e:zo.call(e,d)))return!1}var u=r.get(t),h=r.get(e);if(u&&h)return u==e&&h==t;var p=!0;r.set(t,e),r.set(e,t);for(var g=s;++c<l;){var f=t[d=a[c]],m=e[d];if(n)var _=s?n(m,f,d,e,t,r):n(f,m,d,t,e,r);if(!(void 0===_?f===m||o(f,m,i,n,r):_)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(p=!1)}return r.delete(t),r.delete(e),p}(t,e,i,n,o,r))}function Yo(t,e,i,n,o){return t===e||(null==t||null==e||!Ni(t)&&!Ni(e)?t!=t&&e!=e:Xo(t,e,i,n,Yo,o))}function Ko(t,e,i){for(var n=-1,o=null==t?0:t.length;++n<o;)if(i(e,t[n]))return!0;return!1}function Jo(t,e){return Yo(t,e)}var $o=go&&1/Vo(new go([,-0]))[1]==1/0?function(t){return new go(t)}:function(){};function qo(t){return t&&t.length?function(t,e,i){var n=-1,o=en,r=t.length,s=!0,a=[],l=a;if(i)s=!1,o=Ko;else if(r>=200){var c=e?null:$o(t);if(c)return Vo(c);s=!1,o=Fo,l=new Po}else l=e?[]:a;t:for(;++n<r;){var d=t[n],u=e?e(d):d;if(d=i||0!==d?d:0,s&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue t;e&&l.push(u),a.push(d)}else o(l,u,i)||(l!==a&&l.push(u),a.push(d))}return a}(t):[]}function Zo(t){return(4294967296+t).toString(16).substring(1)}var Qo={normalizeInput:function(t){var e;if(t instanceof Uint8Array)e=t;else if(t instanceof Buffer)e=new Uint8Array(t);else{if("string"!=typeof t)throw new Error("Input must be an string, Buffer or Uint8Array");e=new Uint8Array(Buffer.from(t,"utf8"))}return e},toHex:function(t){return Array.prototype.map.call(t,(function(t){return(t<16?"0":"")+t.toString(16)})).join("")},debugPrint:function(t,e,i){for(var n="\n"+t+" = ",o=0;o<e.length;o+=2){if(32===i)n+=Zo(e[o]).toUpperCase(),n+=" ",n+=Zo(e[o+1]).toUpperCase();else{if(64!==i)throw new Error("Invalid size "+i);n+=Zo(e[o+1]).toUpperCase(),n+=Zo(e[o]).toUpperCase()}o%6==4?n+="\n"+new Array(t.length+4).join(" "):o<e.length-2&&(n+=" ")}console.log(n)},testSpeed:function(t,e,i){for(var n=(new Date).getTime(),o=new Uint8Array(e),r=0;r<e;r++)o[r]=r%256;var s=(new Date).getTime();for(console.log("Generated random input in "+(s-n)+"ms"),n=s,r=0;r<i;r++){var a=t(o),l=(new Date).getTime(),c=l-n;n=l,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}};function tr(t,e,i){var n=t[e]+t[i],o=t[e+1]+t[i+1];n>=4294967296&&o++,t[e]=n,t[e+1]=o}function er(t,e,i,n){var o=t[e]+i;i<0&&(o+=4294967296);var r=t[e+1]+n;o>=4294967296&&r++,t[e]=o,t[e+1]=r}function ir(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function nr(t,e,i,n,o,r){var s=ar[o],a=ar[o+1],l=ar[r],c=ar[r+1];tr(sr,t,e),er(sr,t,s,a);var d=sr[n]^sr[t],u=sr[n+1]^sr[t+1];sr[n]=u,sr[n+1]=d,tr(sr,i,n),d=sr[e]^sr[i],u=sr[e+1]^sr[i+1],sr[e]=d>>>24^u<<8,sr[e+1]=u>>>24^d<<8,tr(sr,t,e),er(sr,t,l,c),d=sr[n]^sr[t],u=sr[n+1]^sr[t+1],sr[n]=d>>>16^u<<16,sr[n+1]=u>>>16^d<<16,tr(sr,i,n),d=sr[e]^sr[i],u=sr[e+1]^sr[i+1],sr[e]=u>>>31^d<<1,sr[e+1]=d>>>31^u<<1}var or=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),rr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),sr=new Uint32Array(32),ar=new Uint32Array(32);function lr(t,e){var i=0;for(i=0;i<16;i++)sr[i]=t.h[i],sr[i+16]=or[i];for(sr[24]=sr[24]^t.t,sr[25]=sr[25]^t.t/4294967296,e&&(sr[28]=~sr[28],sr[29]=~sr[29]),i=0;i<32;i++)ar[i]=ir(t.b,4*i);for(i=0;i<12;i++)nr(0,8,16,24,rr[16*i+0],rr[16*i+1]),nr(2,10,18,26,rr[16*i+2],rr[16*i+3]),nr(4,12,20,28,rr[16*i+4],rr[16*i+5]),nr(6,14,22,30,rr[16*i+6],rr[16*i+7]),nr(0,10,20,30,rr[16*i+8],rr[16*i+9]),nr(2,12,22,24,rr[16*i+10],rr[16*i+11]),nr(4,14,16,26,rr[16*i+12],rr[16*i+13]),nr(6,8,18,28,rr[16*i+14],rr[16*i+15]);for(i=0;i<16;i++)t.h[i]=t.h[i]^sr[i]^sr[i+16]}function cr(t,e){if(0===t||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t},n=0;n<16;n++)i.h[n]=or[n];var o=e?e.length:0;return i.h[0]^=16842752^o<<8^t,e&&(dr(i,e),i.c=128),i}function dr(t,e){for(var i=0;i<e.length;i++)128===t.c&&(t.t+=t.c,lr(t,!1),t.c=0),t.b[t.c++]=e[i]}function ur(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;lr(t,!0);for(var e=new Uint8Array(t.outlen),i=0;i<t.outlen;i++)e[i]=t.h[i>>2]>>8*(3&i);return e}function hr(t,e,i){i=i||64,t=Qo.normalizeInput(t);var n=cr(i,e);return dr(n,t),ur(n)}var pr={blake2b:hr,blake2bHex:function(t,e,i){var n=hr(t,e,i);return Qo.toHex(n)},blake2bInit:cr,blake2bUpdate:dr,blake2bFinal:ur};function gr(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function fr(t,e,i,n,o,r){yr[t]=yr[t]+yr[e]+o,yr[n]=mr(yr[n]^yr[t],16),yr[i]=yr[i]+yr[n],yr[e]=mr(yr[e]^yr[i],12),yr[t]=yr[t]+yr[e]+r,yr[n]=mr(yr[n]^yr[t],8),yr[i]=yr[i]+yr[n],yr[e]=mr(yr[e]^yr[i],7)}function mr(t,e){return t>>>e^t<<32-e}var _r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),yr=new Uint32Array(16),br=new Uint32Array(16);function Er(t,e){var i=0;for(i=0;i<8;i++)yr[i]=t.h[i],yr[i+8]=_r[i];for(yr[12]^=t.t,yr[13]^=t.t/4294967296,e&&(yr[14]=~yr[14]),i=0;i<16;i++)br[i]=gr(t.b,4*i);for(i=0;i<10;i++)fr(0,4,8,12,br[vr[16*i+0]],br[vr[16*i+1]]),fr(1,5,9,13,br[vr[16*i+2]],br[vr[16*i+3]]),fr(2,6,10,14,br[vr[16*i+4]],br[vr[16*i+5]]),fr(3,7,11,15,br[vr[16*i+6]],br[vr[16*i+7]]),fr(0,5,10,15,br[vr[16*i+8]],br[vr[16*i+9]]),fr(1,6,11,12,br[vr[16*i+10]],br[vr[16*i+11]]),fr(2,7,8,13,br[vr[16*i+12]],br[vr[16*i+13]]),fr(3,4,9,14,br[vr[16*i+14]],br[vr[16*i+15]]);for(i=0;i<8;i++)t.h[i]^=yr[i]^yr[i+8]}function Tr(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");var i=e?e.length:0;if(e&&!(i>0&&i<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(_r),b:new Uint32Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^i<<8^t,i>0&&(xr(n,e),n.c=64),n}function xr(t,e){for(var i=0;i<e.length;i++)64===t.c&&(t.t+=t.c,Er(t,!1),t.c=0),t.b[t.c++]=e[i]}function kr(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Er(t,!0);for(var e=new Uint8Array(t.outlen),i=0;i<t.outlen;i++)e[i]=t.h[i>>2]>>8*(3&i)&255;return e}function Sr(t,e,i){i=i||32,t=Qo.normalizeInput(t);var n=Tr(i,e);return xr(n,t),kr(n)}var Cr,wr={blake2s:Sr,blake2sHex:function(t,e,i){var n=Sr(t,e,i);return Qo.toHex(n)},blake2sInit:Tr,blake2sUpdate:xr,blake2sFinal:kr},Ir={blake2b:pr.blake2b,blake2bHex:pr.blake2bHex,blake2bInit:pr.blake2bInit,blake2bUpdate:pr.blake2bUpdate,blake2bFinal:pr.blake2bFinal,blake2s:wr.blake2s,blake2sHex:wr.blake2sHex,blake2sInit:wr.blake2sInit,blake2sUpdate:wr.blake2sUpdate,blake2sFinal:wr.blake2sFinal};!function(t){t[t.AGENT=0]="AGENT",t[t.ENTRY=1]="ENTRY",t[t.DHTOP=2]="DHTOP",t[t.HEADER=3]="HEADER",t[t.DNA=4]="DNA"}(Cr||(Cr={}));function Rr(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,o=t.length;n<o;n++)i[n]=t.charCodeAt(n);return e}const Ar={};function Or(t,e){const i="string"==typeof t?t:JSON.stringify(t);if(Ar[i])return Ar[i];const n=new Uint8Array(Rr(i)),o=function(t){return`u${yi(t,!0)}`}(Ir.blake2b(n,null,32)),r=`u${function(t){switch(t){case Cr.AGENT:return"hCAk";case Cr.ENTRY:return"hCEk";case Cr.DHTOP:return"hCQk";case Cr.HEADER:return"hCkk";case Cr.DNA:return"hC0k"}}(e)}${o.slice(1)}`;return Ar[i]=r,r}const Dr={};function Nr(t){if(Dr[t])return Dr[t];const e=new Uint8Array(Rr(t.slice(5))),i=Ir.blake2b(e,null,16),n=[i[0],i[1],i[2],i[3]];for(let t=4;t<16;t+=4)n[0]^=i[t],n[1]^=i[t+1],n[2]^=i[t+2],n[3]^=i[t+3];const o=Lr(new DataView(new Uint8Array(n).buffer,0).getUint32(0,!1));return Dr[t]=o,o}function Mr(t,e){return function(t,e){const i=Lr(t-e),n=Lr(e-t);return Math.min(i,n)}(Nr(t),Nr(e))+1}function Lr(t){return t<0?4294967296+t:t>4294967295?t-4294967295:t}function Pr(t){const e=t.slice(1,5);if("hCAk"===e)return Cr.AGENT;if("hC0k"===e)return Cr.DNA;if("hCQk"===e)return Cr.DHTOP;if("hCkk"===e)return Cr.HEADER;if("hCEk"===e)return Cr.ENTRY;throw new Error("Could not get hash type")}var Br,Fr,Hr;function Ur(t,e){const i={};for(const n of Object.keys(t.validationLimbo)){const o=t.validationLimbo[n];o.status===e&&(i[n]=o)}return i}function Vr(t,e){const i=t.metadata.system_meta[e];return i?i.map((e=>{const i=(n=e).NewEntry?n.NewEntry:n.Update?n.Update:n.Delete?n.Delete:n.Activity?n.Activity:void 0;var n;if(i)return t.CAS[i]})).filter((t=>!!t)):[]}function Gr(t,e){const i=t.CAS[e],n=Vr(t,e),o=function(t,e){const i=t.metadata.misc_meta[e];return i?i.EntryStatus:void 0}(t,e),r={},s={},a={};for(const t of n){const i=t.header.content;i.original_entry_address&&i.original_entry_address===e?s[t.header.hash]=t:i.entry_hash&&i.entry_hash===e?r[t.header.hash]=t:i.deletes_entry_address===e&&(a[t.header.hash]=t)}return{entry:i,headers:n,entry_dht_status:o,updates:Object.values(s),deletes:Object.values(a),rejected_headers:[]}}function Wr(t){return qo(Object.values(t.integratedDHTOps).filter((t=>t.op.type===ri.StoreEntry)).map((t=>t.op.header)).map((t=>t.header.content.entry_hash)))}function zr(t,e){const i=jr(t,e),n=[],o=[];for(const e of i){const i=t.CAS[e.link_add_hash];i&&n.push(i);const r=Xr(t,e.link_add_hash);for(const e of r){const i=t.CAS[e];o.push(i)}}return{link_adds:n,link_removes:o}}function jr(t,e){return t.metadata.link_meta.filter((({key:t,value:i})=>Jo(t.base,e))).map((({key:t,value:e})=>e))}function Xr(t,e){const i=t.metadata.system_meta[e];if(!i)return[];const n=[];for(const t of i)t.DeleteLink&&n.push(t.DeleteLink);return n}function Yr(t){const e={};for(const i of t)for(const t of i.link_adds)e[t.header.hash]=t.header.content;for(const i of t)for(const t of i.link_removes){const i=t.header.content.link_add_address;e[i]&&(e[i]=void 0)}const i=[];for(const t of Object.values(e))t&&i.push({base:t.base_address,target:t.target_address,tag:t.tag});return i}!function(t){t[t.Latest=0]="Latest",t[t.Contents=1]="Contents"}(Br||(Br={})),function(t){t[t.Valid=0]="Valid",t[t.Rejected=1]="Rejected",t[t.Abandoned=2]="Abandoned"}(Fr||(Fr={})),function(t){t[t.Pending=0]="Pending",t[t.AwaitingSysDeps=1]="AwaitingSysDeps",t[t.SysValidated=2]="SysValidated",t[t.AwaitingAppDeps=3]="AwaitingAppDeps"}(Hr||(Hr={}));class Kr{constructor(t,e){this.state=t,this.p2p=e}async handle_get_entry(t,e){const i=this.state.CAS[t];if(!i)return;const n=Vr(this.state,t),o=Gr(this.state,t),r=n.find((t=>t.header.content.entry_type));let s;return r&&(s=r.header.content.entry_type),{entry:i,entry_type:s,deletes:o.deletes,updates:o.updates,live_headers:o.headers}}async handle_get_element(t,e){if("StoreElement"!==this.state.metadata.misc_meta[t])return;const i=this.state.CAS[t];let n,o=Fr.Valid;if(i){if(i.header.content.entry_hash){const t=i.header.content.entry_hash;n=this.state.CAS[t]}}else o=Fr.Rejected;const r=function(t,e){const i=t.metadata.system_meta[e];return i?{updates:i.filter((t=>t.Update)).map((e=>t.CAS[e.Update])),deletes:i.filter((t=>t.Delete)).map((e=>t.CAS[e.Delete]))}:{updates:[],deletes:[]}}(this.state,t);return{deletes:r.deletes,updates:r.updates,signed_header:i,validation_status:o,maybe_entry:n}}async handle_get_links(t,e){return zr(this.state,t)}}class Jr{constructor(t,e){this.state=t,this.p2p=e}async dht_get(t,e){new Kr(this.state,this.p2p);if(this.state.CAS[t]&&e.strategy===Br.Contents){const e=Pr(t);if(e===Cr.ENTRY){return{entry:this.state.CAS[t],signed_header:Object.values(this.state.CAS).find((e=>e.header&&e.header.content.entry_hash===t))}}if(e===Cr.HEADER){const e=this.state.CAS[t];return{entry:this.state.CAS[e.header.content.entry_hash],signed_header:e}}}const i=await this.p2p.get(t,e);return i.signed_header?{entry:i.maybe_entry,signed_header:i.signed_header}:{signed_header:i.live_headers[0],entry:i.entry}}async dht_get_details(t,e){if(Pr(t)===Cr.ENTRY){const i=await this.getEntryDetails(t,e);if(!i)return;return{type:si.Entry,content:i}}if(Pr(t)===Cr.HEADER){const i=await this.getHeaderDetails(t,e);if(!i)return;return{type:si.Element,content:i}}}async dht_get_links(t,e){return Yr(await this.p2p.get_links(t,e))}async getEntryDetails(t,e){const i=await this.p2p.get(t,e);if(!i)return;if(void 0===i.live_headers)throw new Error("Unreachable");const n=i,o=[...n.deletes,...n.updates,...n.live_headers],{rejected_headers:r,entry_dht_status:s}=function(t){const e={},i=[];for(const i of t)i.header.content.type===oi.Create&&(e[i.header.hash]=i);for(const n of t)n.header.content.type!==oi.Update&&n.header.content.type!==oi.Delete||(e[n.header.hash]&&i.push(e[n.header.hash]),e[n.header.hash]=void 0);return{entry_dht_status:Object.values(e).some((t=>void 0!==t))?li.Live:li.Dead,rejected_headers:i}}(o);return{entry:n.entry,headers:n.live_headers,deletes:n.deletes,updates:n.updates,rejected_headers:r,entry_dht_status:s}}async getHeaderDetails(t,e){const i=await this.p2p.get(t,e);if(!i)return;if(void 0===i.validation_status)throw new Error("Unreachable");const n=i;return{element:{entry:n.maybe_entry,signed_header:n.signed_header},deletes:n.deletes,updates:n.updates,validation_status:n.validation_status}}}const $r=(t,e)=>i=>{i.validationLimbo[t]=e},qr=t=>e=>{delete e.validationLimbo[t]},Zr=(t,e)=>i=>{i.integrationLimbo[t]=e},Qr=t=>async e=>{const i=t.header.header.hash;e.CAS[i]=t.header;const n=function(t){return t.type===ri.StoreEntry?t.entry:t.type===ri.StoreElement?t.maybe_entry:void 0}(t);n&&(e.CAS[t.header.header.content.entry_hash]=n)},ts=t=>e=>{const i=t.header.header.hash;if(t.type===ri.StoreElement)e.metadata.misc_meta[i]="StoreElement";else if(t.type===ri.StoreEntry){const n=t.header.header.content.entry_hash;t.header.header.content.type===oi.Update&&(is(i,t.header)(e),is(n,t.header)(e)),is(n,t.header)(e),es(n)(e)}else if(t.type===ri.RegisterAgentActivity)e.metadata.misc_meta[i]={ChainItem:t.header.header.content.timestamp},e.metadata.misc_meta[t.header.header.content.author]={ChainStatus:ai.Valid};else if(t.type===ri.RegisterUpdatedContent||t.type===ri.RegisterUpdatedElement)is(t.header.header.content.original_header_address,t.header)(e),is(t.header.header.content.original_entry_address,t.header)(e),es(t.header.header.content.original_entry_address)(e);else if(t.type===ri.RegisterDeletedBy||t.type===ri.RegisterDeletedEntryHeader)is(t.header.header.content.deletes_address,t.header)(e),is(t.header.header.content.deletes_entry_address,t.header)(e),es(t.header.header.content.deletes_entry_address)(e);else if(t.type===ri.RegisterAddLink){const n={base:t.header.header.content.base_address,header_hash:i,tag:t.header.header.content.tag,zome_id:t.header.header.content.zome_id},o={link_add_hash:i,tag:t.header.header.content.tag,target:t.header.header.content.target_address,timestamp:t.header.header.content.timestamp,zome_id:t.header.header.content.zome_id};e.metadata.link_meta.push({key:n,value:o})}else if(t.type===ri.RegisterRemoveLink){const n={DeleteLink:i};ns(t.header.header.content.link_add_address,n)(e)}};const es=t=>e=>{const i=Vr(e,t).some((t=>function(t,e){const i=t.metadata.system_meta[e];if(i)return!i.find((t=>t.Delete));return!0}(e,t.header.hash)));e.metadata.misc_meta[t]={EntryStatus:i?li.Live:li.Dead}},is=(t,e)=>i=>{let n;const o=e.header.content.type;o===oi.Create?n={NewEntry:e.header.hash}:o===oi.Update?n={Update:e.header.hash}:o===oi.Delete&&(n={Delete:e.header.hash}),n&&ns(t,n)(i)},ns=(t,e)=>i=>{i.metadata.system_meta[t]||(i.metadata.system_meta[t]=[]),i.metadata.system_meta[t].push(e)},os=(t,e)=>i=>{i.integratedDHTOps[t]=e};function rs(t){return t.sourceChain.map((e=>t.CAS[e]))}function ss(t){return"Agent"===t.entry_type?t.content:Or(t.content,Cr.ENTRY)}function as(t){if(t.App)return t.App}function ls(t,e){const i=as(e);if(i){return t.getSimulatedDna().zomes[i.zome_id].entry_defs[i.id].id}return e}function cs(t){switch(t.type){case ri.StoreElement:return t.header.header.hash;case ri.StoreEntry:return t.header.header.content.entry_hash;case ri.RegisterUpdatedContent:return t.header.header.content.original_entry_address;case ri.RegisterAgentActivity:return t.header.header.content.author;case ri.RegisterAddLink:case ri.RegisterRemoveLink:return t.header.header.content.base_address;case ri.RegisterDeletedBy:return t.header.header.content.deletes_address;case ri.RegisterDeletedEntryHeader:return t.header.header.content.deletes_entry_address;default:return}}const ds=t=>e=>{const i=t.signed_header.header.hash;if(e.CAS[i]=t.signed_header,t.entry){const i=ss(t.entry);e.CAS[i]=t.entry}e.sourceChain.unshift(i)};function us(t){return t.sourceChain[0]}function hs(t){return function(t,e){const i=t.sourceChain[e];return t.CAS[i]}(t,0).header.content.author}function ps(t,e){const i=t.CAS[e];let n;return i.header.content.type!=oi.Create&&i.header.content.type!=oi.Update||(n=t.CAS[i.header.content.entry_hash]),{signed_header:i,entry:n}}function gs(t){const e=hs(t);return[function(t){const e=t.sourceChain[t.sourceChain.length-1];return t.CAS[e].header.content.hash}(t),e]}function fs(t){const e=t.header.content;return!(!e.entry_hash||"CapGrant"!==e.entry_type)}function ms(t){return{header:{content:t,hash:Or(t,Cr.HEADER)},signature:Uint8Array.from([])}}function _s(t,e,i){const n=ss(e);return{...vs(t),entry_hash:n,entry_type:i,type:oi.Create}}function vs(t){return{author:hs(t),header_seq:t.sourceChain.length,prev_header:us(t),timestamp:Ei()}}var ys;function bs(t){switch(t){case ys.GENESIS:return 0;case ys.CALL_ZOME:return 1;default:return 10}}!function(t){t.CALL_ZOME="Call Zome Function",t.SYS_VALIDATION="System Validation",t.PUBLISH_DHT_OPS="Publish DHT Ops",t.PRODUCE_DHT_OPS="Produce DHT Ops",t.APP_VALIDATION="App Validation",t.INTEGRATE_DHT_OPS="Integrate DHT Ops",t.GENESIS="Genesis",t.INCOMING_DHT_OPS="Incoming DHT Ops"}(ys||(ys={}));function Es(){return{type:ys.INTEGRATE_DHT_OPS,details:void 0,task:t=>(async t=>{const e=function(t){const e=t.integrationLimbo;return t.integrationLimbo={},e}(t.state);for(const i of Object.keys(e)){const n=e[i],o=n.op;await Qr(o)(t.state),ts(o)(t.state);const r={op:o,validation_status:n.validation_status,when_integrated:Date.now()};os(i,r)(t.state)}return{result:void 0,triggers:[]}})(t)}}function Ts(){return{type:ys.APP_VALIDATION,details:void 0,task:t=>(async t=>{const e=Ur(t.state,Hr.SysValidated);for(const i of Object.keys(e)){qr(i)(t.state);const n={op:e[i].op,validation_status:Fr.Valid};Zr(i,n)(t.state)}return{result:void 0,triggers:[Es()]}})(t)}}const xs=async t=>{const e=function(t){const e={};for(const i of Object.keys(t.authoredDHTOps)){const n=t.authoredDHTOps[i];void 0===n.last_publish_time&&(e[i]=n.op)}return e}(t.state),i={};for(const t of Object.keys(e)){const n=e[t],o=cs(n);i[o]||(i[o]={}),i[o][t]=n}const n=Object.entries(i).map((async([e,i])=>{await t.p2p.publish(e,i);for(const e of Object.keys(i))t.state.authoredDHTOps[e].last_publish_time=Date.now()}));return await Promise.all(n),{result:void 0,triggers:[]}};const ks=async t=>{const e=function(t){const e=Object.values(t.authoredDHTOps).map((t=>t.op.header.header.hash));return t.sourceChain.filter((t=>!e.includes(t)))}(t.state);for(const i of e){const e=ci(ps(t.state,i));for(const i of e){const e=Or(i,Cr.DHTOP),n={op:i,last_publish_time:void 0,receipt_count:0};t.state.authoredDHTOps[e]=n}}return{result:void 0,triggers:[{type:ys.PUBLISH_DHT_OPS,details:void 0,task:t=>xs(t)}]}};function Ss(){return{type:ys.PRODUCE_DHT_OPS,details:void 0,task:t=>ks(t)}}const Cs=(t,e,i,n,o)=>async r=>{if(!function(t,e,i,n,o){if(n===gs(t)[1])return!0;const r={},s=rs(t);for(const t of s)fs(t)&&(r[t.header.hash]=t);for(const t of s){const e=t.header.content;e.original_header_address&&r[e.original_header_address]&&delete r[e.original_header_address],e.deletes_address&&r[e.deletes_address]&&delete r[e.deletes_address]}return!!Object.values(r).map((e=>t.CAS[e.header.content.entry_hash].content)).find((t=>function(t,e,i,n,o){return!!t.functions.find((t=>t.fn_name===i&&t.zome===e))&&("Unrestricted"===t.access||(t.access.Assigned?t.access.Assigned.assignees.includes(n):t.access.Transferable.secret===o))}(t,e,i,n,o)))}(r.state,t,e,n,o))throw new Error("Unauthorized Zome Call");const s=us(r.state),a=r.dna.zomes.findIndex((e=>e.name===t));if(a<0)throw new Error(`There is no zome with the name ${t} in this DNA`);if(!r.dna.zomes[a].zome_functions[e])throw new Error(`There isn't a function with the name ${e} in this zome with the name ${t}`);if(!r.zomeFnContext)throw new Error("Internal error: no zome function context was provided");const l=await r.dna.zomes[a].zome_functions[e].call(r.zomeFnContext)(i);let c=[];return us(r.state)!=s&&c.push(Ss()),{result:Lo(l),triggers:c}};const ws=(t,e,i)=>async n=>{const o=function(t,e){return{author:e,hash:t,timestamp:Ei(),type:oi.Dna}}(e,t);ds({signed_header:ms(o),entry:void 0})(n.state);const r=function(t,e){return{...vs(t),membrane_proof:e,type:oi.AgentValidationPkg}}(n.state,i);ds({signed_header:ms(r),entry:void 0})(n.state);const s={content:t,entry_type:"Agent"},a=_s(n.state,s,"Agent");return ds({signed_header:ms(a),entry:s})(n.state),{result:void 0,triggers:[Ss()]}};function Is(){return{type:ys.SYS_VALIDATION,details:void 0,task:t=>(async t=>{const e=Ur(t.state,Hr.Pending);for(const i of Object.keys(e)){const n=e[i];n.status=Hr.SysValidated,$r(i,n)(t.state)}return{result:void 0,triggers:[Ts()]}})(t)}}function Rs(t,e,i){return{type:ys.INCOMING_DHT_OPS,details:{from_agent:t,dht_hash:e,ops:i},task:n=>((t,e,i)=>async n=>{for(const o of Object.keys(e))if(!n.state.integratedDHTOps[o]&&!n.state.integrationLimbo[o]&&!n.state.validationLimbo[o]){const r=e[o],s={basis:t,from_agent:i,last_try:void 0,num_tries:0,op:r,status:Hr.Pending,time_added:Date.now()};$r(o,s)(n.state)}return{result:void 0,triggers:[Is()]}})(e,i,t)(n)}}class As{constructor(){this._beforeMiddlewares=[],this._successMiddlewares=[],this._errorMiddlewares=[]}async execute(t,e){for(const t of this._beforeMiddlewares)await t(e);try{const i=await t();for(const t of this._successMiddlewares)await t(e,i);return i}catch(t){for(const i of this._errorMiddlewares)await i(e,t);throw t}}before(t){return this._addListener(t,this._beforeMiddlewares)}success(t){return this._addListener(t,this._successMiddlewares)}error(t){return this._addListener(t,this._errorMiddlewares)}_addListener(t,e){return e.unshift(t),{unsubscribe:()=>{const i=e.findIndex((e=>e===t));e.splice(i,1)}}}}function Os(t,e,i){const n={signed_header:ms(_s(t.state,e,i)),entry:e};return ds(n)(t.state),n.signed_header.header.hash}const Ds=(t,e)=>async i=>{const n={entry_type:"App",content:i.content},o=t.dna.zomes[e].entry_defs.findIndex((t=>t.id===i.entry_def_id));if(o<0)throw new Error(`Given entry def id ${i.entry_def_id} does not exist in this zome`);const r={App:{id:o,zome_id:e,visibility:t.dna.zomes[e].entry_defs[o].visibility}};return Os(t,n,r)},Ns=t=>async e=>{if(e.access.Assigned.assignees.find((t=>!!t&&"string"!=typeof t)))throw new Error("Tried to assign a capability to an invalid agent");return Os(t,{entry_type:"CapGrant",content:e},"CapGrant")},Ms=(t,e)=>async i=>{const n={signed_header:ms(function(t,e,i,n,o){return{...vs(t),base_address:i,target_address:n,tag:o,zome_id:e,type:oi.CreateLink}}(t.state,e,i.base,i.target,i.tag)),entry:void 0};return ds(n)(t.state),n.signed_header.header.hash};async function Ls(t,e){const i=await t.cascade.dht_get(e,{strategy:Br.Contents});if(!i)throw new Error("Could not find element to be deleted");const n=i.signed_header.header.content.entry_hash;var o,r,s;const a={signed_header:ms((o=t.state,r=e,s=n,{...vs(o),type:oi.Delete,deletes_address:r,deletes_entry_address:s})),entry:void 0};return ds(a)(t.state),a.signed_header.header.hash}const Ps=t=>async e=>Ls(t,e),Bs=t=>async e=>{const i=await t.cascade.dht_get(e,{strategy:Br.Contents});if(!i)throw new Error("Could not find element to be deleted");const n=i.signed_header.header.content.base_address;if(!n)throw new Error("Header for the given hash is not a CreateLink header");var o,r,s;const a={signed_header:ms((o=t.state,r=n,s=e,{...vs(o),type:oi.DeleteLink,base_address:r,link_add_address:s})),entry:void 0};return ds(a)(t.state),a.signed_header.header.hash};async function Fs(t,e,i,n){const o=await t.cascade.dht_get(e,{strategy:Br.Contents});if(!o)throw new Error("Could not find element to be deleted");const r=o.signed_header.header.content.entry_hash,s={signed_header:ms(function(t,e,i,n,o){const r=ss(e);return{...vs(t),entry_hash:r,entry_type:i,original_entry_address:n,original_header_address:o,type:oi.Update}}(t.state,i,n,r,e)),entry:i};return ds(s)(t.state),s.signed_header.header.hash}const Hs=(t,e)=>async(i,n)=>{const o={entry_type:"App",content:n.content},r=t.dna.zomes[e].entry_defs.findIndex((t=>t.id===n.entry_def_id));if(r<0)throw new Error(`Given entry def id ${n.entry_def_id} does not exist in this zome`);const s={App:{id:r,zome_id:e,visibility:t.dna.zomes[e].entry_defs[r].visibility}};return Fs(t,i,o,s)},Us=t=>async()=>{const e=gs(t.state)[1];return{agent_initial_pubkey:e,agent_latest_pubkey:e}},Vs=t=>async e=>t.p2p.call_remote(e.agent,e.zome,e.fn_name,e.cap_secret,e.payload),Gs=t=>async(e,i)=>{if(!e)throw new Error("Cannot get with undefined hash");return i=i||{strategy:Br.Contents},t.cascade.dht_get(e,i)},Ws=t=>async(e,i)=>{if(!e)throw new Error("Cannot get with undefined hash");return i=i||{strategy:Br.Contents},t.cascade.dht_get_details(e,i)},zs=t=>async(e,i)=>{if(!e)throw new Error("Cannot get with undefined hash");return i=i||{strategy:Br.Contents},t.cascade.dht_get_links(e,i)},js=t=>async e=>rs(t.state).map((e=>{let i;return e.header.content.entry_hash&&(i=t.state.CAS[e.header.content.entry_hash]),{signed_header:e,entry:i}}));const Xs={ensure:async function t(e,i){await i.create_entry({content:e,entry_def_id:"path"});const n=e.split(".");if(n.length>1){n.splice(n.length-1,1);const o=n.join(".");await t(o,i);const r=await i.hash_entry({content:e}),s=await i.hash_entry({content:o});await i.create_link({base:s,target:r,tag:e})}}};class Ys{constructor(t,e,i){this._state=t,this.conductor=e,this.p2p=i,this._pendingWorkflows={},this.workflowExecutor=new As,setTimeout((()=>{this.p2p.join(this)}))}get cellId(){return[this._state.dnaHash,this._state.agentPubKey]}get agentPubKey(){return this.cellId[1]}get dnaHash(){return this.cellId[0]}getState(){return Lo(this._state)}getSimulatedDna(){return this.conductor.registeredDnas[this.dnaHash]}getCascade(){return new Jr(this._state,this.p2p)}static async create(t,e,i){const n={dnaHash:e[0],agentPubKey:e[1],CAS:{},integrationLimbo:{},metadata:{link_meta:[],misc_meta:{},system_meta:{}},validationLimbo:{},integratedDHTOps:{},authoredDHTOps:{},sourceChain:[]},o=t.network.createP2pCell(e),r=new Ys(n,t,o);return await r._runWorkflow(function(t,e){return{type:ys.GENESIS,details:{cellId:t,membrane_proof:e},task:i=>ws(t[1],t[0],e)(i)}}(e,i)),r}callZomeFn(t){return this._runWorkflow((e=t.zome,i=t.fnName,n=t.payload,o=t.provenance,{type:ys.CALL_ZOME,details:{fnName:i,payload:n,zome:e},task:t=>Cs(e,i,n,o,"")(t)}));var e,i,n,o}async handle_new_neighbor(t){this.p2p.addNeighbor(t)}handle_publish(t,e,i){return this._runWorkflow(Rs(t,e,i))}async handle_get(t,e){const i=new Kr(this._state,this.p2p),n=Pr(t);return n===Cr.ENTRY||n===Cr.AGENT?i.handle_get_entry(t,e):n===Cr.HEADER?i.handle_get_element(t,e):void 0}async handle_get_links(t,e){return new Kr(this._state,this.p2p).handle_get_links(t,e)}async handle_call_remote(t,e,i,n,o){return this.callZomeFn({zome:e,cap:n,fnName:i,payload:o,provenance:t})}triggerWorkflow(t){this._pendingWorkflows[t.type]=t,setTimeout((()=>this._runPendingWorkflows()),20)}async _runPendingWorkflows(){const t=this._pendingWorkflows;this._pendingWorkflows={};const e=Object.values(t).map((t=>this._runWorkflow(t)));await Promise.all(e)}async _runWorkflow(t){let e;if(t.type===ys.CALL_ZOME){const i=t.details.zome,n=this.getSimulatedDna().zomes.findIndex((t=>t.name===i));n>=0&&(e=n)}const i=await this.workflowExecutor.execute((()=>t.task(this.buildWorkspace(e))),t);return i.triggers.forEach((t=>this.triggerWorkflow(t))),i.result}buildWorkspace(t){let e;if(void 0!==t){const r={cascade:this.getCascade(),state:this._state,dna:this.getSimulatedDna(),p2p:this.p2p};e={create_entry:Ds(i=r,n=t),delete_entry:(o=i,async t=>Ls(o,t)),update_entry:Hs(i,n),hash_entry:async t=>ss({entry_type:"App",content:t.content}),get:Gs(i),get_details:Ws(i),create_link:Ms(i,n),delete_link:Bs(i),get_links:zs(i),create_cap_grant:Ns(i),delete_cap_grant:Ps(i),call_remote:Vs(i),agent_info:Us(i),query:js(i),path:Xs}}var i,n,o;return{state:this._state,p2p:this.p2p,dna:this.getSimulatedDna(),zomeFnContext:e}}}var Ks;!function(t){t.CALL_REMOTE="Call Remote",t.ADD_NEIGHBOR="Add Neighbor",t.PUBLISH_REQUEST="Publish Request",t.GET_REQUEST="Get Request"}(Ks||(Ks={}));class Js{constructor(t,e,i){this.cellId=e,this.network=i,this.networkRequestsExecutor=new As,this.neighbors=t.neighbors,this.farKnownPeers=t.farKnownPeers,this.redundancyFactor=t.redundancyFactor,this.neighborNumber=t.neighborNumber}getState(){return{neighbors:this.neighbors,farKnownPeers:this.farKnownPeers,redundancyFactor:this.redundancyFactor,neighborNumber:this.neighborNumber}}async join(t){this.network.bootstrapService.announceCell(this.cellId,t),await this.syncNeighbors()}async leave(){}async publish(t,e){await this.network.kitsune.rpc_multi(this.cellId[0],this.cellId[1],t,this.redundancyFactor,(i=>this._executeNetworkRequest(i,Ks.PUBLISH_REQUEST,{dhtOps:e},(i=>i.handle_publish(this.cellId[1],t,e)))))}async get(t,e){return(await this.network.kitsune.rpc_multi(this.cellId[0],this.cellId[1],t,1,(i=>this._executeNetworkRequest(i,Ks.GET_REQUEST,{hash:t,options:e},(i=>i.handle_get(t,e)))))).find((t=>!!t))}async get_links(t,e){return this.network.kitsune.rpc_multi(this.cellId[0],this.cellId[1],t,1,(i=>this._executeNetworkRequest(i,Ks.GET_REQUEST,{hash:t,options:e},(i=>i.handle_get_links(t,e)))))}async call_remote(t,e,i,n,o){return this.network.kitsune.rpc_single(this.cellId[0],this.cellId[1],t,(t=>this._executeNetworkRequest(t,Ks.CALL_REMOTE,{},(t=>t.handle_call_remote(this.cellId[1],e,i,n,o)))))}getNeighbors(){return this.neighbors}addNeighbor(t){t===this.cellId[1]||this.neighbors.includes(t)||this.syncNeighbors()}async syncNeighbors(){const t=this.cellId[0],e=this.cellId[1];this.farKnownPeers=this.network.bootstrapService.getFarKnownPeers(t,e).map((t=>t.agentPubKey));const i=this.network.bootstrapService.getNeighborhood(t,e,this.neighborNumber).filter((t=>t.agentPubKey!=e)),n=i.filter((t=>!this.neighbors.includes(t.agentPubKey)));this.neighbors=i.map((t=>t.agentPubKey));const o=n.map((t=>this._executeNetworkRequest(t,Ks.ADD_NEIGHBOR,{},(t=>t.handle_new_neighbor(e)))));await Promise.all(o),this.neighbors.length<this.neighborNumber&&setTimeout((()=>this.syncNeighbors()),400)}_executeNetworkRequest(t,e,i,n){const o={fromAgent:this.cellId[1],toAgent:t.agentPubKey,dnaHash:this.cellId[0],type:e,details:i};return this.networkRequestsExecutor.execute((()=>n(t)),o)}}class $s{constructor(t){this.network=t,this.discover=new qs(t)}async rpc_single(t,e,i,n){return n(await this.discover.peer_discover(t,e,i))}async rpc_multi(t,e,i,n,o){return this.discover.message_neighborhood(t,e,i,n,o)}}class qs{constructor(t){this.network=t}async peer_discover(t,e,i){return this.network.bootstrapService.cells[t][i]}async message_neighborhood(t,e,i,n,o){const r=(await this.search_for_agents(t,i,n)).map((t=>o(t)));return Promise.all(r)}async search_for_agents(t,e,i){return this.network.bootstrapService.getNeighborhood(t,e,i)}}class Zs{constructor(t,e,i){this.conductor=e,this.bootstrapService=i,this.p2pCells={};for(const[e,i]of Object.entries(t.p2pCellsState)){this.p2pCells[e]||this.p2pCells[e];for(const[t,n]of Object.entries(i))this.p2pCells[e][t]=new Js(n,[e,t],this)}this.kitsune=new $s(this)}getState(){const t={};for(const[e,i]of Object.entries(this.p2pCells)){t[e]||(t[e]={});for(const[n,o]of Object.entries(i))t[e][n]=o.getState()}return{p2pCellsState:t}}getAllP2pCells(){const t=Object.values(this.p2pCells).map((t=>Object.values(t)));return[].concat(...t)}createP2pCell(t){const e=t[0],i=new Js({neighbors:[],farKnownPeers:[],redundancyFactor:3,neighborNumber:5},t,this);return this.p2pCells[e]||(this.p2pCells[e]={}),this.p2pCells[e][t[1]]=i,i}sendRequest(t,e,i,n){const o=this.conductor.cells[t]&&this.conductor.cells[t][i];return n(o||this.bootstrapService.cells[t][i])}}class Qs{constructor(t,e){this.network=new Zs(t.networkState,this,e),this.registeredDnas=t.registeredDnas,this.registeredTemplates=t.registeredTemplates,this.cells={};for(const[e,i]of Object.entries(t.cellsState)){this.cells[e]||(this.cells[e]={});for(const[t,n]of Object.entries(i))this.cells[e][t]=new Ys(n,this,this.network.createP2pCell(gs(n)))}}static async create(t){return new Qs({cellsState:{},networkState:{p2pCellsState:{}},registeredDnas:{},registeredTemplates:{}},t)}getState(){const t={};for(const[e,i]of Object.entries(this.cells))for(const[n,o]of Object.entries(i))t[e][n]=o.getState();return{networkState:this.network.getState(),cellsState:t,registeredDnas:this.registeredDnas,registeredTemplates:this.registeredTemplates}}getAllCells(){const t=Object.values(this.cells).map((t=>Object.values(t)));return[].concat(...t)}getCells(t){const e=this.cells[t];return e?Object.values(e):[]}getCell(t,e){return this.cells[t]?this.cells[t][e]:void 0}async registerDna(t){const e=Or(t,Cr.DNA);return this.registeredTemplates[e]=t,e}async installApp(t,e,i,n){const o=Or(`${Math.random().toString()}/${Date.now()}`,Cr.AGENT),r=this.registeredTemplates[t];if(!r)throw new Error("The given dna is not registered on this conductor");const s={...r,properties:i,uuid:n},a=Or(s,Cr.DNA);this.registeredDnas[a]=s;const l=[a,o],c=await Ys.create(this,l,e);return this.cells[c.dnaHash]||(this.cells[c.dnaHash]={}),this.cells[c.dnaHash][c.agentPubKey]=c,c}callZomeFn(t){const e=t.cellId[0],i=t.cellId[1],n=this.cells[e][i];if(!n)throw new Error(`No cells existst with cellId ${e}:${i}`);return n.callZomeFn({zome:t.zome,cap:t.cap,fnName:t.fnName,payload:t.payload,provenance:i})}}const ta={name:"demo_entries",entry_defs:[{id:"demo_entry",visibility:"Public"},{id:"path",visibility:"Public"}],zome_functions:{create_entry:{call:({hash_entry:t,create_entry:e})=>async({content:i})=>(await e({content:i,entry_def_id:"demo_entry"}),t({content:i})),arguments:[{name:"content",type:"any"}]},get:{call:({get:t})=>({hash:e})=>t(e,{strategy:Br.Latest}),arguments:[{name:"hash",type:"AnyDhtHash"}]},get_details:{call:({get_details:t})=>({hash:e})=>t(e,{strategy:Br.Latest}),arguments:[{name:"hash",type:"AnyDhtHash"}]},update_entry:{call:({update_entry:t})=>({original_header_address:e,new_content:i})=>t(e,{content:i,entry_def_id:"demo_entry"}),arguments:[{name:"original_header_address",type:"HeaderHash"},{name:"new_content",type:"String"}]},delete_entry:{call:({delete_entry:t})=>({deletes_address:e})=>t(e),arguments:[{name:"deletes_address",type:"HeaderHash"}]}}},ea={name:"demo_links",entry_defs:[],zome_functions:{create_link:{call:({create_link:t})=>({base:e,target:i,tag:n})=>t({base:e,target:i,tag:n}),arguments:[{name:"base",type:"EntryHash"},{name:"target",type:"EntryHash"},{name:"tag",type:"any"}]},get_links:{call:({get_links:t})=>({base:e})=>t(e),arguments:[{name:"base",type:"EntryHash"}]},delete_link:{call:({delete_link:t})=>({add_link_header:e})=>t(e),arguments:[{name:"add_link_header",type:"HeaderHash"}]}}};function ia(){return{zomes:[ta,ea]}}const na=t=>new Promise((e=>setTimeout((()=>e()),t)));class oa{constructor(){this.cells={}}announceCell(t,e){const i=t[0],n=t[1];this.cells[i]||(this.cells[i]={}),this.cells[i][n]=e}getNeighborhood(t,e,i){return function(t,e,i){return t.sort(((t,i)=>Mr(t,e)-Mr(i,e))).slice(0,i)}(Object.keys(this.cells[t]),e,i).map((e=>this.cells[t][e]))}getFarKnownPeers(t,e){return function(t,e){const i=t.sort(((t,i)=>Lr(Nr(t)-Nr(e))-Lr(Nr(i)-Nr(e)))),n=Math.floor(.35*i.length),o=Math.floor(i.length/2),r=Math.floor(.65*i.length);return qo([i[n],i[o],i[r]].filter((t=>!!t)))}(Object.keys(this.cells[t]).filter((t=>t!==e)),e).map((e=>this.cells[t][e]))}}async function ra(t,e,i){const n=0===e.length?new oa:e[0].network.bootstrapService,o=[];for(let e=0;e<t;e++){const t=Qs.create(n);o.push(t)}const r=await Promise.all(o),s=[...e,...r];return await Promise.all(s.map((async t=>{const e=await t.registerDna(i);await t.installApp(e,null,null,"")}))),s}var sa=function(t,e){return(sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var aa=function(){return(aa=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},la={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},ca={NOTCH_ELEMENT_PADDING:8},da={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},ua=function(t){function e(i){return t.call(this,aa(aa({},e.defaultAdapter),i))||this}return function(t,e){function i(){this.constructor=t}sa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"strings",{get:function(){return la},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return da},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ca},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),e.prototype.notch=function(t){var i=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=ca.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(t),this.adapter.addClass(i)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(t),this.adapter.removeNotchWidthProperty()},e}(Et);let ha,pa,ga=t=>t;class fa extends _t{constructor(){super(...arguments),this.mdcFoundationClass=ua,this.width=0,this.open=!1,this.lastOpen=this.open}createAdapter(){return{addClass:t=>this.mdcRoot.classList.add(t),removeClass:t=>this.mdcRoot.classList.remove(t),setNotchWidthProperty:t=>this.notchElement.style.setProperty("width",`${t}px`),removeNotchWidthProperty:()=>this.notchElement.style.removeProperty("width")}}openOrClose(t,e){this.mdcFoundation&&(t&&void 0!==e?this.mdcFoundation.notch(e):this.mdcFoundation.closeNotch())}render(){this.openOrClose(this.open,this.width);const t=Nt({"mdc-notched-outline--notched":this.open});return F(ha||(ha=ga` <span class="mdc-notched-outline ${0}"> <span class="mdc-notched-outline__leading"></span> <span class="mdc-notched-outline__notch"> <slot></slot> </span> <span class="mdc-notched-outline__trailing"></span> </span>`),t)}}t([Z(".mdc-notched-outline")],fa.prototype,"mdcRoot",void 0),t([$({type:Number})],fa.prototype,"width",void 0),t([$({type:Boolean,reflect:!0})],fa.prototype,"open",void 0),t([Z(".mdc-notched-outline__notch")],fa.prototype,"notchElement",void 0);const ma=st(pa||(pa=ga`.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}.mdc-notched-outline[dir=rtl],[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}.mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}.mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / .75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl],[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}:host{display:block;position:absolute;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}:host[dir=rtl],[dir=rtl] :host{text-align:right}::slotted(.mdc-floating-label){display:inline-block;position:relative;top:17px;bottom:auto;max-width:100%}::slotted(.mdc-floating-label--float-above){text-overflow:clip}.mdc-notched-outline--upgraded ::slotted(.mdc-floating-label--float-above){max-width:calc(100% / .75)}.mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}.mdc-notched-outline .mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}@supports(top:max(0%)){.mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small,4px))}}@supports(top:max(0%)){.mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small,4px)) * 2)}}.mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}.mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-color:var(--mdc-notched-outline-border-color,var(--mdc-theme-primary,#6200ee));border-width:1px;border-width:var(--mdc-notched-outline-stroke-width,1px)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0;padding-top:var(--mdc-notched-outline-notch-offset,0)}`));var _a=function(t,e){return(_a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var va=function(){return(va=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ya={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},ba=function(t){function e(i){var n=t.call(this,va(va({},e.defaultAdapter),i))||this;return n.shakeAnimationEndHandler_=function(){return n.handleShakeAnimationEnd_()},n}return function(t,e){function i(){this.constructor=t}_a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return ya},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},e.prototype.getWidth=function(){return this.adapter.getWidth()},e.prototype.shake=function(t){var i=e.cssClasses.LABEL_SHAKE;t?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.float=function(t){var i=e.cssClasses,n=i.LABEL_FLOAT_ABOVE,o=i.LABEL_SHAKE;t?this.adapter.addClass(n):(this.adapter.removeClass(n),this.adapter.removeClass(o))},e.prototype.setRequired=function(t){var i=e.cssClasses.LABEL_REQUIRED;t?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.handleShakeAnimationEnd_=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter.removeClass(t)},e}(Et),Ea=function(t,e){return(Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Ta=function(){return(Ta=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},xa={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},ka=function(t){function e(i){var n=t.call(this,Ta(Ta({},e.defaultAdapter),i))||this;return n.transitionEndHandler_=function(t){return n.handleTransitionEnd(t)},n}return function(t,e){function i(){this.constructor=t}Ea(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return xa},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler_)},e.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler_)},e.prototype.activate=function(){this.adapter.removeClass(xa.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(xa.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter.addClass(xa.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var e=this.adapter.hasClass(xa.LINE_RIPPLE_DEACTIVATING);"opacity"===t.propertyName&&e&&(this.adapter.removeClass(xa.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(xa.LINE_RIPPLE_DEACTIVATING))},e}(Et);let Sa=class extends fa{};Sa.styles=ma,Sa=t([],Sa);const Ca=new WeakMap,wa=f((t=>e=>{if(!Ca.get(e)){const i=e.committer.element;i.classList.add("mdc-floating-label");const n=(t=>({addClass:e=>t.classList.add(e),removeClass:e=>t.classList.remove(e),getWidth:()=>t.scrollWidth,registerInteractionHandler:(e,i)=>{t.addEventListener(e,i)},deregisterInteractionHandler:(e,i)=>{t.removeEventListener(e,i)}}))(i),o=new ba(n);o.init(),e.setValue(o),Ca.set(e,{label:t,foundation:o})}})),Ia=new WeakMap,Ra=f((()=>t=>{if(!Ia.get(t)){const e=t.committer.element;e.classList.add("mdc-line-ripple");const i=(t=>({addClass:e=>t.classList.add(e),removeClass:e=>t.classList.remove(e),hasClass:e=>t.classList.contains(e),setStyle:(e,i)=>t.style.setProperty(e,i),registerEventHandler:(e,i)=>{t.addEventListener(e,i)},deregisterEventHandler:(e,i)=>{t.removeEventListener(e,i)}}))(e),n=new ka(i);n.init(),t.setValue(n),Ia.set(t,n)}}));class Aa extends _t{createRenderRoot(){return this.attachShadow({mode:"open",delegatesFocus:!0})}click(){this.formElement&&(this.formElement.focus(),this.formElement.click())}setAriaLabel(t){this.formElement&&this.formElement.setAttribute("aria-label",t)}firstUpdated(){super.firstUpdated(),this.mdcRoot.addEventListener("change",(t=>{this.dispatchEvent(new Event("change",t))}))}}var Oa=function(t,e){return(Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Da=function(){return(Da=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Na={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},Ma={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},La={LABEL_SCALE:.75},Pa=["pattern","min","max","required","step","minlength","maxlength"],Ba=["color","date","datetime-local","month","range","time","week"],Fa=["mousedown","touchstart"],Ha=["click","keydown"],Ua=function(t){function e(i,n){void 0===n&&(n={});var o=t.call(this,Da(Da({},e.defaultAdapter),i))||this;return o.isFocused_=!1,o.receivedUserInput_=!1,o.isValid_=!0,o.useNativeValidation_=!0,o.validateOnValueChange_=!0,o.helperText_=n.helperText,o.characterCounter_=n.characterCounter,o.leadingIcon_=n.leadingIcon,o.trailingIcon_=n.trailingIcon,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.handleInput()},o.setPointerXOffset_=function(t){return o.setTransformOrigin(t)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.validationAttributeChangeHandler_=function(t){return o.handleValidationAttributeChange(t)},o}return function(t,e){function i(){this.constructor=t}Oa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Ma},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Na},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return La},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat_",{get:function(){var t=this.getNativeInput_().type;return Ba.indexOf(t)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.adapter.hasLabel()&&this.getNativeInput_().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler_():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating_(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler_),Fa.forEach((function(e){t.adapter.registerInputInteractionHandler(e,t.setPointerXOffset_)})),Ha.forEach((function(e){t.adapter.registerTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},e.prototype.destroy=function(){var t=this;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler_),Fa.forEach((function(e){t.adapter.deregisterInputInteractionHandler(e,t.setPointerXOffset_)})),Ha.forEach((function(e){t.adapter.deregisterTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)})),this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter.getNativeInput();t&&t.disabled||(this.receivedUserInput_=!0)},e.prototype.handleValidationAttributeChange=function(t){var e=this;t.some((function(t){return Pa.indexOf(t)>-1&&(e.styleValidity_(!0),e.adapter.setLabelRequired(e.getNativeInput_().required),!0)})),t.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},e.prototype.notchOutline=function(t){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(t){var e=this.adapter.getLabelWidth()*La.LABEL_SCALE;this.adapter.notchOutline(e)}else this.adapter.closeOutline()},e.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText_||!this.helperText_.isPersistent()&&this.helperText_.isValidation()&&this.isValid_||this.helperText_.showToScreenReader()},e.prototype.setTransformOrigin=function(t){if(!this.isDisabled()&&!this.adapter.hasOutline()){var e=t.touches,i=e?e[0]:t,n=i.target.getBoundingClientRect(),o=i.clientX-n.left;this.adapter.setLineRippleTransformOrigin(o)}},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter.deactivateLineRipple();var t=this.isValid();this.styleValidity_(t),this.styleFocused_(this.isFocused_),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},e.prototype.getValue=function(){return this.getNativeInput_().value},e.prototype.setValue=function(t){if(this.getValue()!==t&&(this.getNativeInput_().value=t),this.setCharacterCounter_(t.length),this.validateOnValueChange_){var e=this.isValid();this.styleValidity_(e)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.validateOnValueChange_&&this.adapter.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},e.prototype.setValid=function(t){this.isValid_=t,this.styleValidity_(t);var e=!t&&!this.isFocused_&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(e)},e.prototype.setValidateOnValueChange=function(t){this.validateOnValueChange_=t},e.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange_},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation_=t},e.prototype.isDisabled=function(){return this.getNativeInput_().disabled},e.prototype.setDisabled=function(t){this.getNativeInput_().disabled=t,this.styleDisabled_(t)},e.prototype.setHelperTextContent=function(t){this.helperText_&&this.helperText_.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon_&&this.leadingIcon_.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon_&&this.trailingIcon_.setContent(t)},e.prototype.setCharacterCounter_=function(t){if(this.characterCounter_){var e=this.getNativeInput_().maxLength;if(-1===e)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(t,e)}},e.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},e.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},e.prototype.styleValidity_=function(t){var i=e.cssClasses.INVALID;if(t?this.adapter.removeClass(i):this.adapter.addClass(i),this.helperText_){if(this.helperText_.setValidity(t),!this.helperText_.isValidation())return;var n=this.helperText_.isVisible(),o=this.helperText_.getId();n&&o?this.adapter.setInputAttr(Na.ARIA_DESCRIBEDBY,o):this.adapter.removeInputAttr(Na.ARIA_DESCRIBEDBY)}},e.prototype.styleFocused_=function(t){var i=e.cssClasses.FOCUSED;t?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.styleDisabled_=function(t){var i=e.cssClasses,n=i.DISABLED,o=i.INVALID;t?(this.adapter.addClass(n),this.adapter.removeClass(o)):this.adapter.removeClass(n),this.leadingIcon_&&this.leadingIcon_.setDisabled(t),this.trailingIcon_&&this.trailingIcon_.setDisabled(t)},e.prototype.styleFloating_=function(t){var i=e.cssClasses.LABEL_FLOATING;t?this.adapter.addClass(i):this.adapter.removeClass(i)},e.prototype.getNativeInput_=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(Et);const Va=f((t=>e=>{let i;if(e instanceof D||e instanceof w)throw new Error("The `live` directive is not allowed on text or event bindings");if(e instanceof I)Ga(e.strings),i=e.element.hasAttribute(e.name),e.value=i;else{const{element:n,name:o,strings:r}=e.committer;if(Ga(r),e instanceof A){if(i=n[o],i===t)return}else e instanceof C&&(i=n.getAttribute(o));if(i===String(t))return}e.setValue(t)})),Ga=t=>{if(2!==t.length||""!==t[0]||""!==t[1])throw new Error("`live` bindings can only contain a single expression")};let Wa,za,ja,Xa,Ya,Ka,Ja,$a,qa,Za,Qa=t=>t;const tl=["touchstart","touchmove","scroll","mousewheel"],el=(t={})=>{const e={};for(const i in t)e[i]=t[i];return Object.assign({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1},e)};class il extends Aa{constructor(){super(...arguments),this.mdcFoundationClass=Ua,this.value="",this.type="text",this.placeholder="",this.label="",this.icon="",this.iconTrailing="",this.disabled=!1,this.required=!1,this.minLength=-1,this.maxLength=-1,this.outlined=!1,this.helper="",this.validateOnInitialRender=!1,this.validationMessage="",this.autoValidate=!1,this.pattern="",this.min="",this.max="",this.step=null,this.size=null,this.helperPersistent=!1,this.charCounter=!1,this.endAligned=!1,this.prefix="",this.suffix="",this.name="",this.readOnly=!1,this.autocapitalize="",this.outlineOpen=!1,this.outlineWidth=0,this.isUiValid=!0,this.focused=!1,this._validity=el(),this._outlineUpdateComplete=null,this.validityTransform=null}get validity(){return this._checkValidity(this.value),this._validity}get willValidate(){return this.formElement.willValidate}get selectionStart(){return this.formElement.selectionStart}get selectionEnd(){return this.formElement.selectionEnd}focus(){const t=new CustomEvent("focus");this.formElement.dispatchEvent(t),this.formElement.focus()}blur(){const t=new CustomEvent("blur");this.formElement.dispatchEvent(t),this.formElement.blur()}select(){this.formElement.select()}setSelectionRange(t,e,i){this.formElement.setSelectionRange(t,e,i)}update(t){t.has("autoValidate")&&this.mdcFoundation&&this.mdcFoundation.setValidateOnValueChange(this.autoValidate),t.has("value")&&"string"!=typeof this.value&&(this.value=`${this.value}`),super.update(t)}render(){const t=this.charCounter&&-1!==this.maxLength,e=!!this.helper||!!this.validationMessage||t,i={"mdc-text-field--disabled":this.disabled,"mdc-text-field--no-label":!this.label,"mdc-text-field--filled":!this.outlined,"mdc-text-field--outlined":this.outlined,"mdc-text-field--with-leading-icon":this.icon,"mdc-text-field--with-trailing-icon":this.iconTrailing,"mdc-text-field--end-aligned":this.endAligned};return F(Wa||(Wa=Qa` <label class="mdc-text-field ${0}"> ${0} ${0} ${0} ${0} ${0} ${0} ${0} ${0} </label> ${0} `),Nt(i),this.renderRipple(),this.outlined?this.renderOutline():this.renderLabel(),this.renderLeadingIcon(),this.renderPrefix(),this.renderInput(e),this.renderSuffix(),this.renderTrailingIcon(),this.renderLineRipple(),this.renderHelperText(e,t))}updated(t){t.has("value")&&void 0!==t.get("value")&&(this.mdcFoundation.setValue(this.value),this.autoValidate&&this.reportValidity())}renderRipple(){return this.outlined?"":F(za||(za=Qa` <span class="mdc-text-field__ripple"></span> `))}renderOutline(){return this.outlined?F(ja||(ja=Qa` <mwc-notched-outline .width="${0}" .open="${0}" class="mdc-notched-outline"> ${0} </mwc-notched-outline>`),this.outlineWidth,this.outlineOpen,this.renderLabel()):""}renderLabel(){return this.label?F(Xa||(Xa=Qa` <span .floatingLabelFoundation="${0}" id="label">${0}</span> `),wa(this.label),this.label):""}renderLeadingIcon(){return this.icon?this.renderIcon(this.icon):""}renderTrailingIcon(){return this.iconTrailing?this.renderIcon(this.iconTrailing,!0):""}renderIcon(t,e=!1){return F(Ya||(Ya=Qa`<i class="material-icons mdc-text-field__icon ${0}">${0}</i>`),Nt({"mdc-text-field__icon--leading":!e,"mdc-text-field__icon--trailing":e}),t)}renderPrefix(){return this.prefix?this.renderAffix(this.prefix):""}renderSuffix(){return this.suffix?this.renderAffix(this.suffix,!0):""}renderAffix(t,e=!1){return F(Ka||(Ka=Qa`<span class="mdc-text-field__affix ${0}"> ${0}</span>`),Nt({"mdc-text-field__affix--prefix":!e,"mdc-text-field__affix--suffix":e}),t)}renderInput(t){const e=-1===this.minLength?void 0:this.minLength,i=-1===this.maxLength?void 0:this.maxLength,n=this.autocapitalize?this.autocapitalize:void 0,o=this.validationMessage&&!this.isUiValid,r=t?"helper-text":void 0,s=this.focused||this.helperPersistent||o?"helper-text":void 0,a=o?"helper-text":void 0;return F(Ja||(Ja=Qa` <input aria-labelledby="label" aria-controls="${0}" aria-describedby="${0}" aria-errortext="${0}" class="mdc-text-field__input" type="${0}" .value="${0}" ?disabled="${0}" placeholder="${0}" ?required="${0}" ?readonly="${0}" minlength="${0}" maxlength="${0}" pattern="${0}" min="${0}" max="${0}" step="${0}" size="${0}" name="${0}" inputmode="${0}" autocapitalize="${0}" @input="${0}" @focus="${0}" @blur="${0}">`),Jt(r),Jt(s),Jt(a),this.type,Va(this.value),this.disabled,this.placeholder,this.required,this.readOnly,Jt(e),Jt(i),Jt(this.pattern?this.pattern:void 0),Jt(""===this.min?void 0:this.min),Jt(""===this.max?void 0:this.max),Jt(null===this.step?void 0:this.step),Jt(null===this.size?void 0:this.size),Jt(""===this.name?void 0:this.name),Jt(this.inputMode),Jt(n),this.handleInputChange,this.onInputFocus,this.onInputBlur)}renderLineRipple(){return this.outlined?"":F($a||($a=Qa` <span .lineRippleFoundation="${0}"></span> `),Ra())}renderHelperText(t,e){const i=this.validationMessage&&!this.isUiValid,n={"mdc-text-field-helper-text--persistent":this.helperPersistent,"mdc-text-field-helper-text--validation-msg":i},o=this.focused||this.helperPersistent||i?void 0:"true",r=i?this.validationMessage:this.helper;return t?F(qa||(qa=Qa` <div class="mdc-text-field-helper-line"> <div id="helper-text" aria-hidden="${0}" class="mdc-text-field-helper-text ${0}">${0}</div> ${0} </div>`),Jt(o),Nt(n),r,this.renderCharCounter(e)):""}renderCharCounter(t){const e=Math.min(this.value.length,this.maxLength);return t?F(Za||(Za=Qa` <span class="mdc-text-field-character-counter">${0} / ${0}</span>`),e,this.maxLength):""}onInputFocus(){this.focused=!0}onInputBlur(){this.focused=!1,this.reportValidity()}checkValidity(){const t=this._checkValidity(this.value);if(!t){const t=new Event("invalid",{bubbles:!1,cancelable:!0});this.dispatchEvent(t)}return t}reportValidity(){const t=this.checkValidity();return this.mdcFoundation.setValid(t),this.isUiValid=t,t}_checkValidity(t){const e=this.formElement.validity;let i=el(e);if(this.validityTransform){const e=this.validityTransform(t,i);i=Object.assign(Object.assign({},i),e),this.mdcFoundation.setUseNativeValidation(!1)}else this.mdcFoundation.setUseNativeValidation(!0);return this._validity=i,this._validity.valid}setCustomValidity(t){this.validationMessage=t,this.formElement.setCustomValidity(t)}handleInputChange(){this.value=this.formElement.value}createFoundation(){void 0!==this.mdcFoundation&&this.mdcFoundation.destroy(),this.mdcFoundation=new this.mdcFoundationClass(this.createAdapter()),this.mdcFoundation.init()}createAdapter(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getRootAdapterMethods()),this.getInputAdapterMethods()),this.getLabelAdapterMethods()),this.getLineRippleAdapterMethods()),this.getOutlineAdapterMethods())}getRootAdapterMethods(){return Object.assign({registerTextFieldInteractionHandler:(t,e)=>this.addEventListener(t,e),deregisterTextFieldInteractionHandler:(t,e)=>this.removeEventListener(t,e),registerValidationAttributeChangeHandler:t=>{const e=new MutationObserver((e=>{t((t=>t.map((t=>t.attributeName)).filter((t=>t)))(e))}));return e.observe(this.formElement,{attributes:!0}),e},deregisterValidationAttributeChangeHandler:t=>t.disconnect()},ht(this.mdcRoot))}getInputAdapterMethods(){return{getNativeInput:()=>this.formElement,setInputAttr:()=>{},removeInputAttr:()=>{},isFocused:()=>!!this.shadowRoot&&this.shadowRoot.activeElement===this.formElement,registerInputInteractionHandler:(t,e)=>this.formElement.addEventListener(t,e,{passive:t in tl}),deregisterInputInteractionHandler:(t,e)=>this.formElement.removeEventListener(t,e)}}getLabelAdapterMethods(){return{floatLabel:t=>this.labelElement&&this.labelElement.floatingLabelFoundation.float(t),getLabelWidth:()=>this.labelElement?this.labelElement.floatingLabelFoundation.getWidth():0,hasLabel:()=>Boolean(this.labelElement),shakeLabel:t=>this.labelElement&&this.labelElement.floatingLabelFoundation.shake(t),setLabelRequired:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.setRequired(t)}}}getLineRippleAdapterMethods(){return{activateLineRipple:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.activate()},deactivateLineRipple:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.deactivate()},setLineRippleTransformOrigin:t=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.setRippleCenter(t)}}}async _getUpdateComplete(){await super._getUpdateComplete(),await this._outlineUpdateComplete}async firstUpdated(){const t=this.outlineElement;t&&(this._outlineUpdateComplete=t.updateComplete,await this._outlineUpdateComplete),super.firstUpdated(),this.mdcFoundation.setValidateOnValueChange(this.autoValidate),this.validateOnInitialRender&&this.reportValidity()}getOutlineAdapterMethods(){return{closeOutline:()=>this.outlineElement&&(this.outlineOpen=!1),hasOutline:()=>Boolean(this.outlineElement),notchOutline:t=>{this.outlineElement&&!this.outlineOpen&&(this.outlineWidth=t,this.outlineOpen=!0)}}}async layout(){await this.updateComplete;const t=this.labelElement;if(!t)return void(this.outlineOpen=!1);const e=!!this.label&&!!this.value;if(t.floatingLabelFoundation.float(e),!this.outlined)return;this.outlineOpen=e,await this.updateComplete;const i=t.floatingLabelFoundation.getWidth();this.outlineOpen&&(this.outlineWidth=i)}}t([Z(".mdc-text-field")],il.prototype,"mdcRoot",void 0),t([Z("input")],il.prototype,"formElement",void 0),t([Z(".mdc-floating-label")],il.prototype,"labelElement",void 0),t([Z(".mdc-line-ripple")],il.prototype,"lineRippleElement",void 0),t([Z("mwc-notched-outline")],il.prototype,"outlineElement",void 0),t([Z(".mdc-notched-outline__notch")],il.prototype,"notchElement",void 0),t([$({type:String})],il.prototype,"value",void 0),t([$({type:String})],il.prototype,"type",void 0),t([$({type:String})],il.prototype,"placeholder",void 0),t([$({type:String}),vt((function(t,e){void 0!==e&&this.label!==e&&this.layout()}))],il.prototype,"label",void 0),t([$({type:String})],il.prototype,"icon",void 0),t([$({type:String})],il.prototype,"iconTrailing",void 0),t([$({type:Boolean,reflect:!0})],il.prototype,"disabled",void 0),t([$({type:Boolean})],il.prototype,"required",void 0),t([$({type:Number})],il.prototype,"minLength",void 0),t([$({type:Number})],il.prototype,"maxLength",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t,e){void 0!==e&&this.outlined!==e&&this.layout()}))],il.prototype,"outlined",void 0),t([$({type:String})],il.prototype,"helper",void 0),t([$({type:Boolean})],il.prototype,"validateOnInitialRender",void 0),t([$({type:String})],il.prototype,"validationMessage",void 0),t([$({type:Boolean})],il.prototype,"autoValidate",void 0),t([$({type:String})],il.prototype,"pattern",void 0),t([$({type:String})],il.prototype,"min",void 0),t([$({type:String})],il.prototype,"max",void 0),t([$({type:Number})],il.prototype,"step",void 0),t([$({type:Number})],il.prototype,"size",void 0),t([$({type:Boolean})],il.prototype,"helperPersistent",void 0),t([$({type:Boolean})],il.prototype,"charCounter",void 0),t([$({type:Boolean})],il.prototype,"endAligned",void 0),t([$({type:String})],il.prototype,"prefix",void 0),t([$({type:String})],il.prototype,"suffix",void 0),t([$({type:String})],il.prototype,"name",void 0),t([$({type:String})],il.prototype,"inputMode",void 0),t([$({type:Boolean})],il.prototype,"readOnly",void 0),t([$({type:String})],il.prototype,"autocapitalize",void 0),t([$({type:Boolean})],il.prototype,"outlineOpen",void 0),t([$({type:Number})],il.prototype,"outlineWidth",void 0),t([$({type:Boolean})],il.prototype,"isUiValid",void 0),t([q()],il.prototype,"focused",void 0),t([it({passive:!0})],il.prototype,"handleInputChange",null);class nl extends fa{}nl.styles=ma;let ol;const rl=st(ol||(ol=(t=>t)`.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform;transition:transform 150ms cubic-bezier(.4,0,.2,1),color 150ms cubic-bezier(.4,0,.2,1)}.mdc-floating-label[dir=rtl],[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0;content:"*"}.mdc-floating-label--required[dir=rtl]::after,[dir=rtl] .mdc-floating-label--required::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(.75)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0)) translateY(-106%) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-106%) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-106%) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-106%) scale(.75)}}.mdc-line-ripple::after,.mdc-line-ripple::before{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px;z-index:1}.mdc-line-ripple::after{transform:scaleX(0);border-bottom-width:2px;opacity:0;z-index:2}.mdc-line-ripple::after{transition:transform 180ms cubic-bezier(.4,0,.2,1),opacity 180ms cubic-bezier(.4,0,.2,1)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}.mdc-notched-outline[dir=rtl],[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}.mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}.mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / .75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl],[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}.mdc-text-field--filled{--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;-webkit-tap-highlight-color:transparent;will-change:transform,opacity}.mdc-text-field--filled .mdc-text-field__ripple::after,.mdc-text-field--filled .mdc-text-field__ripple::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-text-field--filled .mdc-text-field__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index,1)}.mdc-text-field--filled .mdc-text-field__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index,0)}.mdc-text-field--filled.mdc-ripple-upgraded .mdc-text-field__ripple::before{transform:scale(var(--mdc-ripple-fg-scale,1))}.mdc-text-field--filled.mdc-ripple-upgraded .mdc-text-field__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-text-field--filled.mdc-ripple-upgraded--unbounded .mdc-text-field__ripple::after{top:var(--mdc-ripple-top,0);left:var(--mdc-ripple-left,0)}.mdc-text-field--filled.mdc-ripple-upgraded--foreground-activation .mdc-text-field__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-text-field--filled.mdc-ripple-upgraded--foreground-deactivation .mdc-text-field__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-text-field--filled .mdc-text-field__ripple::after,.mdc-text-field--filled .mdc-text-field__ripple::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-text-field--filled.mdc-ripple-upgraded .mdc-text-field__ripple::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-text-field__ripple{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-floating-label{color:rgba(0,0,0,.6)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__input{color:rgba(0,0,0,.87)}@media all{.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:rgba(0,0,0,.54)}}@media all{.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:rgba(0,0,0,.54)}}.mdc-text-field .mdc-text-field__input{caret-color:#6200ee;caret-color:var(--mdc-theme-primary,#6200ee)}.mdc-text-field:not(.mdc-text-field--disabled)+.mdc-text-field-helper-line .mdc-text-field-helper-text{color:rgba(0,0,0,.6)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field-character-counter,.mdc-text-field:not(.mdc-text-field--disabled)+.mdc-text-field-helper-line .mdc-text-field-character-counter{color:rgba(0,0,0,.6)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon--leading{color:rgba(0,0,0,.54)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon--trailing{color:rgba(0,0,0,.54)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--prefix{color:rgba(0,0,0,.6)}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__affix--suffix{color:rgba(0,0,0,.6)}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);height:28px;transition:opacity 150ms cubic-bezier(.4,0,.2,1);width:100%;min-width:0;border:none;border-radius:0;background:0 0;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:0}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(.4,0,.2,1);opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(.4,0,.2,1);opacity:0}}@media all{.mdc-text-field--focused .mdc-text-field__input::placeholder,.mdc-text-field--no-label .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}}@media all{.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}}.mdc-text-field__affix{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);height:28px;transition:opacity 150ms cubic-bezier(.4,0,.2,1);opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens:none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}.mdc-text-field__affix--prefix[dir=rtl],[dir=rtl] .mdc-text-field__affix--prefix{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl],[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix[dir=rtl],[dir=rtl] .mdc-text-field__affix--suffix{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl],[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled .mdc-text-field__ripple::after,.mdc-text-field--filled .mdc-text-field__ripple::before{background-color:rgba(0,0,0,.87);background-color:var(--mdc-ripple-color,rgba(0,0,0,.87))}.mdc-text-field--filled.mdc-ripple-surface--hover .mdc-text-field__ripple::before,.mdc-text-field--filled:hover .mdc-text-field__ripple::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#f5f5f5}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.42)}.mdc-text-field--filled:not(.mdc-text-field--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.87)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-color:#6200ee;border-bottom-color:var(--mdc-theme-primary,#6200ee)}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}.mdc-text-field--filled .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens:none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(.75)}.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-34.75px) scale(.75)}}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.38)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.87)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:#6200ee;border-color:var(--mdc-theme-primary,#6200ee)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}@supports(top:max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small,4px))}}@supports(top:max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small,4px)) * 2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}@supports(top:max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}@supports(top:max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small,4px))}}@supports(top:max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}@supports(top:max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small,4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top:max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small,4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl],[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:0}@supports(top:max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl],[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:max(16px,var(--mdc-shape-small,4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top:max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl],[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:0}@supports(top:max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl],[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-text-field__ripple::after,.mdc-text-field--outlined .mdc-text-field__ripple::before{content:none}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}.mdc-text-field--outlined .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none!important;background-color:transparent}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0;transition:none}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px;line-height:1.5rem}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0)) translateY(-10.25px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-10.25px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-10.25px) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-10.25px) scale(.75)}}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0)) translateY(-24.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-24.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-24.75px) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-24.75px) scale(.75)}}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl],[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input{transform:translateX(1px) translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}.mdc-text-field--with-leading-icon[dir=rtl],[dir=rtl] .mdc-text-field--with-leading-icon{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / .75 - 64px / .75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl],[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(32px) scale(.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(.75)}}.mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(.75)}}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}.mdc-text-field--with-trailing-icon[dir=rtl],[dir=rtl] .mdc-text-field--with-trailing-icon{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / .75 - 64px / .75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / .75 - 96px / .75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused:not(.mdc-text-field--disabled) .mdc-floating-label{color:rgba(98,0,238,.87)}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid .mdc-text-field__input{caret-color:#b00020;caret-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__icon--trailing{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}.mdc-text-field--disabled .mdc-text-field__input{color:rgba(0,0,0,.38)}@media all{.mdc-text-field--disabled .mdc-text-field__input::placeholder{color:rgba(0,0,0,.38)}}@media all{.mdc-text-field--disabled .mdc-text-field__input:-ms-input-placeholder{color:rgba(0,0,0,.38)}}.mdc-text-field--disabled .mdc-floating-label{color:rgba(0,0,0,.38)}.mdc-text-field--disabled+.mdc-text-field-helper-line .mdc-text-field-helper-text{color:rgba(0,0,0,.38)}.mdc-text-field--disabled .mdc-text-field-character-counter,.mdc-text-field--disabled+.mdc-text-field-helper-line .mdc-text-field-character-counter{color:rgba(0,0,0,.38)}.mdc-text-field--disabled .mdc-text-field__icon--leading{color:rgba(0,0,0,.3)}.mdc-text-field--disabled .mdc-text-field__icon--trailing{color:rgba(0,0,0,.3)}.mdc-text-field--disabled .mdc-text-field__affix--prefix{color:rgba(0,0,0,.38)}.mdc-text-field--disabled .mdc-text-field__affix--suffix{color:rgba(0,0,0,.38)}.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.06)}.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.06)}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__input::placeholder{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__input:-ms-input-placeholder{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-floating-label{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled+.mdc-text-field-helper-line .mdc-text-field-helper-text{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field-character-counter,.mdc-text-field--disabled+.mdc-text-field-helper-line .mdc-text-field-character-counter{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__icon--leading{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__icon--trailing{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__affix--prefix{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-text-field__affix--suffix{color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:GrayText}}@media screen and (-ms-high-contrast:active){.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:GrayText}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled{background-color:#fafafa}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl],[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input{text-align:left}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input{direction:ltr}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading{order:1}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix{order:2}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input{order:3}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix{order:4}.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing{order:5}.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix,[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-right:12px}.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix,[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px}.mdc-text-field-helper-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-caption-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.75rem;font-size:var(--mdc-typography-caption-font-size,.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight,400);letter-spacing:.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing,.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform,inherit);display:block;margin-top:0;line-height:normal;margin:0;opacity:0;will-change:opacity;transition:opacity 150ms cubic-bezier(.4,0,.2,1)}.mdc-text-field-helper-text::before{display:inline-block;width:0;height:16px;content:"";vertical-align:0}.mdc-text-field-helper-text--persistent{transition:none;opacity:1;will-change:initial}.mdc-text-field-character-counter{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-caption-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.75rem;font-size:var(--mdc-typography-caption-font-size,.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight,400);letter-spacing:.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing,.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform,inherit);display:block;margin-top:0;line-height:normal;margin-left:auto;margin-right:0;padding-left:16px;padding-right:0;white-space:nowrap}.mdc-text-field-character-counter::before{display:inline-block;width:0;height:16px;content:"";vertical-align:0}.mdc-text-field-character-counter[dir=rtl],[dir=rtl] .mdc-text-field-character-counter{margin-left:0;margin-right:auto}.mdc-text-field-character-counter[dir=rtl],[dir=rtl] .mdc-text-field-character-counter{padding-left:0;padding-right:16px}.mdc-text-field__icon{align-self:center;cursor:pointer}.mdc-text-field__icon:not([tabindex]),.mdc-text-field__icon[tabindex="-1"]{cursor:default;pointer-events:none}.mdc-text-field__icon svg{display:block}.mdc-text-field__icon--leading{margin-left:16px;margin-right:8px}.mdc-text-field__icon--leading[dir=rtl],[dir=rtl] .mdc-text-field__icon--leading{margin-left:8px;margin-right:16px}.mdc-text-field__icon--trailing{padding:12px;margin-left:0;margin-right:0}.mdc-text-field__icon--trailing[dir=rtl],[dir=rtl] .mdc-text-field__icon--trailing{margin-left:0;margin-right:0}.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{display:inline-flex;flex-direction:column;outline:0}.mdc-text-field{width:100%}.mdc-text-field:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.42);border-bottom-color:var(--mdc-text-field-idle-line-color,rgba(0,0,0,.42))}.mdc-text-field:not(.mdc-text-field--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.87);border-bottom-color:var(--mdc-text-field-hover-line-color,rgba(0,0,0,.87))}.mdc-text-field.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.06);border-bottom-color:var(--mdc-text-field-disabled-line-color,rgba(0,0,0,.06))}.mdc-text-field.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-text-field-outlined-idle-border-color, rgba(0, 0, 0, 0.38))}:host(:not([disabled]):hover) :not(.mdc-text-field--invalid):not(.mdc-text-field--focused) mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-text-field-outlined-hover-border-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-text-field:not(.mdc-text-field--outlined){background-color:var(--mdc-text-field-fill-color,#f5f5f5)}:host(:not([disabled])) .mdc-text-field.mdc-text-field--invalid mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-text-field-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-text-field.mdc-text-field--invalid .mdc-text-field__icon,:host(:not([disabled])) .mdc-text-field.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-character-counter{color:var(--mdc-text-field-error-color,var(--mdc-theme-error,#b00020))}:host(:not([disabled])) .mdc-text-field:not(.mdc-text-field--invalid):not(.mdc-text-field--focused) .mdc-floating-label,:host(:not([disabled])) .mdc-text-field:not(.mdc-text-field--invalid):not(.mdc-text-field--focused) .mdc-floating-label::after{color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6))}:host(:not([disabled])) .mdc-text-field.mdc-text-field--focused mwc-notched-outline{--mdc-notched-outline-stroke-width:2px}:host(:not([disabled])) .mdc-text-field.mdc-text-field--focused:not(.mdc-text-field--invalid) mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-text-field-focused-label-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)))}:host(:not([disabled])) .mdc-text-field.mdc-text-field--focused:not(.mdc-text-field--invalid) .mdc-floating-label{color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}:host(:not([disabled])) .mdc-text-field .mdc-text-field__input{color:var(--mdc-text-field-ink-color,rgba(0,0,0,.87))}:host(:not([disabled])) .mdc-text-field .mdc-text-field__input::placeholder{color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6))}:host(:not([disabled])) .mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg),:host(:not([disabled])) .mdc-text-field-helper-line:not(.mdc-text-field--invalid) .mdc-text-field-character-counter{color:var(--mdc-text-field-label-ink-color,rgba(0,0,0,.6))}:host([disabled]) .mdc-text-field:not(.mdc-text-field--outlined){background-color:var(--mdc-text-field-disabled-fill-color,#fafafa)}:host([disabled]) .mdc-text-field.mdc-text-field--outlined mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-text-field-outlined-disabled-border-color, rgba(0, 0, 0, 0.06))}:host([disabled]) .mdc-text-field:not(.mdc-text-field--invalid):not(.mdc-text-field--focused) .mdc-floating-label,:host([disabled]) .mdc-text-field:not(.mdc-text-field--invalid):not(.mdc-text-field--focused) .mdc-floating-label::after{color:var(--mdc-text-field-disabled-ink-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-text-field .mdc-text-field__input,:host([disabled]) .mdc-text-field .mdc-text-field__input::placeholder{color:var(--mdc-text-field-disabled-ink-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-text-field-helper-line .mdc-text-field-character-counter,:host([disabled]) .mdc-text-field-helper-line .mdc-text-field-helper-text{color:var(--mdc-text-field-disabled-ink-color,rgba(0,0,0,.38))}`));class sl extends(Me(il)){static get scopedElements(){return{"mwc-notched-outline":nl}}}sl.styles=rl,t([Z(".mdc-notched-outline")],sl.prototype,"outlineElement",void 0);let al,ll,cl=t=>t;const dl=st(al||(al=cl`:host{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}`));class ul extends(Me(lt)){render(){return F(ll||(ll=cl`<slot></slot>`))}}ul.styles=dl;let hl,pl,gl,fl,ml,_l=t=>t;class vl extends lt{constructor(){super(...arguments),this.raised=!1,this.unelevated=!1,this.outlined=!1,this.dense=!1,this.disabled=!1,this.trailingIcon=!1,this.fullwidth=!1,this.icon="",this.label="",this.expandContent=!1,this.shouldRenderRipple=!1,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple)))}renderOverlay(){return F(hl||(hl=_l``))}renderRipple(){const t=this.raised||this.unelevated;return this.shouldRenderRipple?F(pl||(pl=_l`<mwc-ripple class="ripple" .primary="${0}" .disabled="${0}"></mwc-ripple>`),!t,this.disabled):""}createRenderRoot(){return this.attachShadow({mode:"open",delegatesFocus:!0})}focus(){const t=this.buttonElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.buttonElement;t&&(this.rippleHandlers.endFocus(),t.blur())}getRenderClasses(){return Nt({"mdc-button--raised":this.raised,"mdc-button--unelevated":this.unelevated,"mdc-button--outlined":this.outlined,"mdc-button--dense":this.dense})}render(){return F(gl||(gl=_l` <button id="button" class="mdc-button ${0}" ?disabled="${0}" aria-label="${0}" @focus="${0}" @blur="${0}" @mousedown="${0}" @mouseenter="${0}" @mouseleave="${0}" @touchstart="${0}" @touchend="${0}" @touchcancel="${0}"> ${0} ${0} <span class="leading-icon"> <slot name="icon"> ${0} </slot> </span> <span class="mdc-button__label">${0}</span> <span class="slot-container ${0}"> <slot></slot> </span> <span class="trailing-icon"> <slot name="trailingIcon"> ${0} </slot> </span> </button>`),this.getRenderClasses(),this.disabled,this.label||this.icon,this.handleRippleFocus,this.handleRippleBlur,this.handleRippleActivate,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleActivate,this.handleRippleDeactivate,this.handleRippleDeactivate,this.renderOverlay(),this.renderRipple(),this.icon&&!this.trailingIcon?this.renderIcon():"",this.label,Nt({flex:this.expandContent}),this.icon&&this.trailingIcon?this.renderIcon():"")}renderIcon(){return F(fl||(fl=_l` <mwc-icon class="mdc-button__icon"> ${0} </mwc-icon>`),this.icon)}handleRippleActivate(t){const e=()=>{window.removeEventListener("mouseup",e),this.handleRippleDeactivate()};window.addEventListener("mouseup",e),this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}t([$({type:Boolean,reflect:!0})],vl.prototype,"raised",void 0),t([$({type:Boolean,reflect:!0})],vl.prototype,"unelevated",void 0),t([$({type:Boolean,reflect:!0})],vl.prototype,"outlined",void 0),t([$({type:Boolean})],vl.prototype,"dense",void 0),t([$({type:Boolean,reflect:!0})],vl.prototype,"disabled",void 0),t([$({type:Boolean,attribute:"trailingicon"})],vl.prototype,"trailingIcon",void 0),t([$({type:Boolean,reflect:!0})],vl.prototype,"fullwidth",void 0),t([$({type:String})],vl.prototype,"icon",void 0),t([$({type:String})],vl.prototype,"label",void 0),t([$({type:Boolean})],vl.prototype,"expandContent",void 0),t([Z("#button")],vl.prototype,"buttonElement",void 0),t([Q("mwc-ripple")],vl.prototype,"ripple",void 0),t([q()],vl.prototype,"shouldRenderRipple",void 0),t([it({passive:!0})],vl.prototype,"handleRippleActivate",null);const yl=st(ml||(ml=_l`.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity,0);transition:opacity 280ms cubic-bezier(.4,0,.2,1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color,#fff)}.mdc-button{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-button-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-button-font-size,.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height,2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight,500);letter-spacing:.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing,.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration,none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform,uppercase);padding:0 8px 0 8px;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:0;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;border-radius:4px;border-radius:var(--mdc-shape-small,4px);height:36px}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:0}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button .mdc-button__ripple{border-radius:4px;border-radius:var(--mdc-shape-small,4px)}.mdc-button:not(:disabled){background-color:transparent}.mdc-button:disabled{background-color:transparent}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;width:18px;height:18px;font-size:18px;vertical-align:top}.mdc-button .mdc-button__icon[dir=rtl],[dir=rtl] .mdc-button .mdc-button__icon{margin-left:8px;margin-right:0}.mdc-button .mdc-button__touch{position:absolute;top:50%;right:0;height:48px;left:0;transform:translateY(-50%)}.mdc-button:not(:disabled){color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}.mdc-button:disabled{color:rgba(0,0,0,.38)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}.mdc-button__label+.mdc-button__icon[dir=rtl],[dir=rtl] .mdc-button__label+.mdc-button__icon{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--outlined .mdc-button__icon,.mdc-button--raised .mdc-button__icon,.mdc-button--unelevated .mdc-button__icon{margin-left:-4px;margin-right:8px}.mdc-button--outlined .mdc-button__icon[dir=rtl],.mdc-button--raised .mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__icon[dir=rtl],[dir=rtl] .mdc-button--outlined .mdc-button__icon,[dir=rtl] .mdc-button--raised .mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__icon{margin-left:8px;margin-right:-4px}.mdc-button--outlined .mdc-button__label+.mdc-button__icon,.mdc-button--raised .mdc-button__label+.mdc-button__icon,.mdc-button--unelevated .mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:-4px}.mdc-button--outlined .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--raised .mdc-button__label+.mdc-button__icon[dir=rtl],.mdc-button--unelevated .mdc-button__label+.mdc-button__icon[dir=rtl],[dir=rtl] .mdc-button--outlined .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--raised .mdc-button__label+.mdc-button__icon,[dir=rtl] .mdc-button--unelevated .mdc-button__label+.mdc-button__icon{margin-left:-4px;margin-right:8px}.mdc-button--raised,.mdc-button--unelevated{padding:0 16px 0 16px}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){background-color:#6200ee;background-color:var(--mdc-theme-primary,#6200ee)}.mdc-button--raised:not(:disabled),.mdc-button--unelevated:not(:disabled){color:#fff;color:var(--mdc-theme-on-primary,#fff)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{background-color:rgba(0,0,0,.12)}.mdc-button--raised:disabled,.mdc-button--unelevated:disabled{color:rgba(0,0,0,.38)}.mdc-button--raised{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);transition:box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mdc-button--raised:focus,.mdc-button--raised:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mdc-button--raised:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mdc-button--raised:disabled{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mdc-button--outlined{padding:0 15px 0 15px;border-width:1px;border-style:solid}.mdc-button--outlined .mdc-button__ripple{top:-1px;left:-1px;border:1px solid transparent}.mdc-button--outlined .mdc-button__touch{left:-1px;width:calc(100% + 2 * 1px)}.mdc-button--outlined:not(:disabled){border-color:rgba(0,0,0,.12)}.mdc-button--outlined:disabled{border-color:rgba(0,0,0,.12)}.mdc-button--touch{margin-top:6px;margin-bottom:6px}:host{display:inline-flex;outline:0;-webkit-tap-highlight-color:transparent;vertical-align:top}:host([fullwidth]){width:100%}:host([raised]),:host([unelevated]){--mdc-ripple-color:#fff;--mdc-ripple-focus-opacity:0.24;--mdc-ripple-hover-opacity:0.08;--mdc-ripple-press-opacity:0.24}.leading-icon .mdc-button__icon,.leading-icon ::slotted(*),.trailing-icon .mdc-button__icon,.trailing-icon ::slotted(*){margin-left:0;margin-right:8px;display:inline-block;width:18px;height:18px;font-size:18px;vertical-align:top}.leading-icon .mdc-button__icon[dir=rtl],.leading-icon ::slotted(*)[dir=rtl],.trailing-icon .mdc-button__icon[dir=rtl],.trailing-icon ::slotted(*)[dir=rtl],[dir=rtl] .leading-icon .mdc-button__icon,[dir=rtl] .leading-icon ::slotted(*),[dir=rtl] .trailing-icon .mdc-button__icon,[dir=rtl] .trailing-icon ::slotted(*){margin-left:8px;margin-right:0}.trailing-icon .mdc-button__icon,.trailing-icon ::slotted(*){margin-left:8px;margin-right:0}.trailing-icon .mdc-button__icon[dir=rtl],.trailing-icon ::slotted(*)[dir=rtl],[dir=rtl] .trailing-icon .mdc-button__icon,[dir=rtl] .trailing-icon ::slotted(*){margin-left:0;margin-right:8px}.slot-container{display:inline-flex;align-items:center;justify-content:center}.slot-container.flex{flex:auto}.mdc-button{flex:auto;overflow:hidden;padding-left:8px;padding-left:var(--mdc-button-horizontal-padding,8px);padding-right:8px;padding-right:var(--mdc-button-horizontal-padding,8px)}.mdc-button--raised{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:var(--mdc-button-raised-box-shadow,0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12))}.mdc-button--raised:focus{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);box-shadow:var(--mdc-button-raised-box-shadow-focus,var(--mdc-button-raised-box-shadow-hover,0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)))}.mdc-button--raised:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);box-shadow:var(--mdc-button-raised-box-shadow-hover,0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12))}.mdc-button--raised:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:var(--mdc-button-raised-box-shadow-active,0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12))}.mdc-button--raised:disabled{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);box-shadow:var(--mdc-button-raised-box-shadow-disabled,0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12))}.mdc-button--raised,.mdc-button--unelevated{padding-left:16px;padding-left:var(--mdc-button-horizontal-padding,16px);padding-right:16px;padding-right:var(--mdc-button-horizontal-padding,16px)}.mdc-button--outlined{border-width:1px;border-width:var(--mdc-button-outline-width,1px);padding-left:calc(16px - 1px);padding-left:calc(var(--mdc-button-horizontal-padding,16px) - var(--mdc-button-outline-width,1px));padding-right:calc(16px - 1px);padding-right:calc(var(--mdc-button-horizontal-padding,16px) - var(--mdc-button-outline-width,1px))}.mdc-button--outlined:not(:disabled){border-color:rgba(0,0,0,.12);border-color:var(--mdc-button-outline-color,rgba(0,0,0,.12))}.mdc-button--outlined .ripple{top:calc(-1 * 1px);top:calc(-1 * var(--mdc-button-outline-width,1px));left:calc(-1 * 1px);left:calc(-1 * var(--mdc-button-outline-width,1px));right:initial;border-width:1px;border-width:var(--mdc-button-outline-width,1px);border-style:solid;border-color:transparent}.mdc-button--outlined .ripple[dir=rtl],[dir=rtl] .mdc-button--outlined .ripple{left:initial;right:calc(-1 * 1px);right:calc(-1 * var(--mdc-button-outline-width,1px))}.mdc-button--dense{height:28px;margin-top:0;margin-bottom:0}.mdc-button--dense .mdc-button__touch{display:none}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-button{color:rgba(0,0,0,.38);color:var(--mdc-button-disabled-ink-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-button--raised,:host([disabled]) .mdc-button--unelevated{background-color:rgba(0,0,0,.12);background-color:var(--mdc-button-disabled-fill-color,rgba(0,0,0,.12))}:host([disabled]) .mdc-button--outlined{border-color:rgba(0,0,0,.12);border-color:var(--mdc-button-disabled-outline-color,rgba(0,0,0,.12))}`));class bl extends(Me(vl)){static get scopedElements(){return{"mwc-icon":ul,"mwc-ripple":Je}}}bl.styles=yl,t([Q(".ripple")],bl.prototype,"ripple",void 0);var El=function(t,e){return(El=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Tl=function(){return(Tl=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},xl={ACTIVE:"mdc-tab--active"},kl={ARIA_SELECTED:"aria-selected",CONTENT_SELECTOR:".mdc-tab__content",INTERACTED_EVENT:"MDCTab:interacted",RIPPLE_SELECTOR:".mdc-tab__ripple",TABINDEX:"tabIndex",TAB_INDICATOR_SELECTOR:".mdc-tab-indicator"},Sl=function(t){function e(i){var n=t.call(this,Tl(Tl({},e.defaultAdapter),i))||this;return n.focusOnActivate_=!0,n}return function(t,e){function i(){this.constructor=t}El(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return xl},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return kl},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},activateIndicator:function(){},deactivateIndicator:function(){},notifyInteracted:function(){},getOffsetLeft:function(){return 0},getOffsetWidth:function(){return 0},getContentOffsetLeft:function(){return 0},getContentOffsetWidth:function(){return 0},focus:function(){}}},enumerable:!0,configurable:!0}),e.prototype.handleClick=function(){this.adapter.notifyInteracted()},e.prototype.isActive=function(){return this.adapter.hasClass(xl.ACTIVE)},e.prototype.setFocusOnActivate=function(t){this.focusOnActivate_=t},e.prototype.activate=function(t){this.adapter.addClass(xl.ACTIVE),this.adapter.setAttr(kl.ARIA_SELECTED,"true"),this.adapter.setAttr(kl.TABINDEX,"0"),this.adapter.activateIndicator(t),this.focusOnActivate_&&this.adapter.focus()},e.prototype.deactivate=function(){this.isActive()&&(this.adapter.removeClass(xl.ACTIVE),this.adapter.setAttr(kl.ARIA_SELECTED,"false"),this.adapter.setAttr(kl.TABINDEX,"-1"),this.adapter.deactivateIndicator())},e.prototype.computeDimensions=function(){var t=this.adapter.getOffsetWidth(),e=this.adapter.getOffsetLeft(),i=this.adapter.getContentOffsetWidth(),n=this.adapter.getContentOffsetLeft();return{contentLeft:e+n,contentRight:e+n+i,rootLeft:e,rootRight:e+t}},e}(Et),Cl=function(t,e){return(Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function wl(t,e){function i(){this.constructor=t}Cl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Il=function(){return(Il=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Rl={ACTIVE:"mdc-tab-indicator--active",FADE:"mdc-tab-indicator--fade",NO_TRANSITION:"mdc-tab-indicator--no-transition"},Al={CONTENT_SELECTOR:".mdc-tab-indicator__content"},Ol=function(t){function e(i){return t.call(this,Il(Il({},e.defaultAdapter),i))||this}return wl(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Rl},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Al},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},computeContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},setContentStyleProperty:function(){}}},enumerable:!0,configurable:!0}),e.prototype.computeContentClientRect=function(){return this.adapter.computeContentClientRect()},e}(Et),Dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wl(e,t),e.prototype.activate=function(){this.adapter.addClass(Ol.cssClasses.ACTIVE)},e.prototype.deactivate=function(){this.adapter.removeClass(Ol.cssClasses.ACTIVE)},e}(Ol),Nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wl(e,t),e.prototype.activate=function(t){if(t){var e=this.computeContentClientRect(),i=t.width/e.width,n=t.left-e.left;this.adapter.addClass(Ol.cssClasses.NO_TRANSITION),this.adapter.setContentStyleProperty("transform","translateX("+n+"px) scaleX("+i+")"),this.computeContentClientRect(),this.adapter.removeClass(Ol.cssClasses.NO_TRANSITION),this.adapter.addClass(Ol.cssClasses.ACTIVE),this.adapter.setContentStyleProperty("transform","")}else this.adapter.addClass(Ol.cssClasses.ACTIVE)},e.prototype.deactivate=function(){this.adapter.removeClass(Ol.cssClasses.ACTIVE)},e}(Ol);let Ml,Ll,Pl=t=>t;class Bl extends _t{constructor(){super(...arguments),this.icon="",this.fade=!1}get mdcFoundationClass(){return this.fade?Dl:Nl}render(){const t={"mdc-tab-indicator__content--icon":this.icon,"material-icons":this.icon,"mdc-tab-indicator__content--underline":!this.icon};return F(Ml||(Ml=Pl` <span class="mdc-tab-indicator ${0}"> <span class="mdc-tab-indicator__content ${0}">${0}</span> </span> `),Nt({"mdc-tab-indicator--fade":this.fade}),Nt(t),this.icon)}updated(t){t.has("fade")&&this.createFoundation()}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{computeContentClientRect:()=>this.contentElement.getBoundingClientRect(),setContentStyleProperty:(t,e)=>this.contentElement.style.setProperty(t,e)})}computeContentClientRect(){return this.mdcFoundation.computeContentClientRect()}activate(t){this.mdcFoundation.activate(t)}deactivate(){this.mdcFoundation.deactivate()}}t([Z(".mdc-tab-indicator")],Bl.prototype,"mdcRoot",void 0),t([Z(".mdc-tab-indicator__content")],Bl.prototype,"contentElement",void 0),t([$()],Bl.prototype,"icon",void 0),t([$({type:Boolean})],Bl.prototype,"fade",void 0);const Fl=st(Ll||(Ll=Pl`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator .mdc-tab-indicator__content--underline{border-color:#6200ee;border-color:var(--mdc-theme-primary,#6200ee)}.mdc-tab-indicator .mdc-tab-indicator__content--icon{color:#018786;color:var(--mdc-theme-secondary,#018786)}.mdc-tab-indicator .mdc-tab-indicator__content--underline{border-top-width:2px}.mdc-tab-indicator .mdc-tab-indicator__content--icon{height:34px;font-size:34px}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(.4,0,.2,1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:.1s}`));class Hl extends Bl{}Hl.styles=Fl;let Ul,Vl,Gl,Wl,zl,jl,Xl,Yl,Kl,Jl,$l=t=>t,ql=0;class Zl extends _t{constructor(){super(...arguments),this.mdcFoundationClass=Sl,this.label="",this.icon="",this.hasImageIcon=!1,this.isFadingIndicator=!1,this.minWidth=!1,this.isMinWidthIndicator=!1,this.indicatorIcon="",this.stacked=!1,this.focusOnActivate=!0,this._active=!1,this.initFocus=!1,this.shouldRenderRipple=!1,this.rippleElement=null,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple.then((t=>this.rippleElement=t)),this.ripple)))}get active(){return this._active}createRenderRoot(){return this.attachShadow({mode:"open",delegatesFocus:!0})}connectedCallback(){this.dir=document.dir,super.connectedCallback()}firstUpdated(){super.firstUpdated(),this.id=this.id||"mdc-tab-"+ ++ql}render(){const t={"mdc-tab--min-width":this.minWidth,"mdc-tab--stacked":this.stacked};let e=F(Ul||(Ul=$l``));(this.hasImageIcon||this.icon)&&(e=F(Vl||(Vl=$l` <span class="mdc-tab__icon material-icons"><slot name="icon">${0}</slot></span>`),this.icon));let i=F(Gl||(Gl=$l``));return this.label&&(i=F(Wl||(Wl=$l` <span class="mdc-tab__text-label">${0}</span>`),this.label)),F(zl||(zl=$l` <button @click="${0}" class="mdc-tab ${0}" role="tab" aria-selected="false" tabindex="-1" @focus="${0}" @blur="${0}" @mousedown="${0}" @mouseenter="${0}" @mouseleave="${0}" @touchstart="${0}" @touchend="${0}" @touchcancel="${0}"> <span class="mdc-tab__content"> ${0} ${0} ${0} </span> ${0} ${0} </button>`),this.handleClick,Nt(t),this.focus,this.handleBlur,this.handleRippleMouseDown,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleTouchStart,this.handleRippleDeactivate,this.handleRippleDeactivate,e,i,this.isMinWidthIndicator?this.renderIndicator():"",this.isMinWidthIndicator?"":this.renderIndicator(),this.renderRipple())}renderIndicator(){return F(jl||(jl=$l`<mwc-tab-indicator .icon="${0}" .fade="${0}"></mwc-tab-indicator>`),this.indicatorIcon,this.isFadingIndicator)}renderRipple(){return this.shouldRenderRipple?F(Xl||(Xl=$l` <mwc-ripple primary></mwc-ripple> `)):""}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{setAttr:(t,e)=>this.mdcRoot.setAttribute(t,e),activateIndicator:async t=>{await this.tabIndicator.updateComplete,this.tabIndicator.activate(t)},deactivateIndicator:async()=>{await this.tabIndicator.updateComplete,this.tabIndicator.deactivate()},notifyInteracted:()=>this.dispatchEvent(new CustomEvent(Sl.strings.INTERACTED_EVENT,{detail:{tabId:this.id},bubbles:!0,composed:!0,cancelable:!0})),getOffsetLeft:()=>this.offsetLeft,getOffsetWidth:()=>this.mdcRoot.offsetWidth,getContentOffsetLeft:()=>this._contentElement.offsetLeft,getContentOffsetWidth:()=>this._contentElement.offsetWidth,focus:()=>{this.initFocus?this.initFocus=!1:this.mdcRoot.focus()}})}activate(t){t||(this.initFocus=!0),this.mdcFoundation?(this.mdcFoundation.activate(t),this.setActive(this.mdcFoundation.isActive())):this.updateComplete.then((()=>{this.mdcFoundation.activate(t),this.setActive(this.mdcFoundation.isActive())}))}deactivate(){this.mdcFoundation.deactivate(),this.setActive(this.mdcFoundation.isActive())}setActive(t){const e=this.active;e!==t&&(this._active=t,this.requestUpdate("active",e))}computeDimensions(){return this.mdcFoundation.computeDimensions()}computeIndicatorClientRect(){return this.tabIndicator.computeContentClientRect()}focus(){this.mdcRoot.focus(),this.handleFocus()}handleClick(){this.handleFocus(),this.mdcFoundation.handleClick()}handleFocus(){this.handleRippleFocus()}handleBlur(){this.handleRippleBlur()}handleRippleMouseDown(t){const e=()=>{window.removeEventListener("mouseup",e),this.handleRippleDeactivate()};window.addEventListener("mouseup",e),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}get isRippleActive(){var t;return(null===(t=this.rippleElement)||void 0===t?void 0:t.isActive)||!1}}t([Z(".mdc-tab")],Zl.prototype,"mdcRoot",void 0),t([Z("mwc-tab-indicator")],Zl.prototype,"tabIndicator",void 0),t([$()],Zl.prototype,"label",void 0),t([$()],Zl.prototype,"icon",void 0),t([$({type:Boolean})],Zl.prototype,"hasImageIcon",void 0),t([$({type:Boolean})],Zl.prototype,"isFadingIndicator",void 0),t([$({type:Boolean})],Zl.prototype,"minWidth",void 0),t([$({type:Boolean})],Zl.prototype,"isMinWidthIndicator",void 0),t([$({type:Boolean,reflect:!0,attribute:"active"})],Zl.prototype,"active",null),t([$()],Zl.prototype,"indicatorIcon",void 0),t([$({type:Boolean})],Zl.prototype,"stacked",void 0),t([vt((async function(t){await this.updateComplete,this.mdcFoundation.setFocusOnActivate(t)})),$({type:Boolean})],Zl.prototype,"focusOnActivate",void 0),t([Z(".mdc-tab__content")],Zl.prototype,"_contentElement",void 0),t([q()],Zl.prototype,"shouldRenderRipple",void 0),t([Q("mwc-ripple")],Zl.prototype,"ripple",void 0),t([it({passive:!0})],Zl.prototype,"handleRippleTouchStart",null);const Ql=st(Yl||(Yl=$l`.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}.mdc-tab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-button-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-button-font-size,.875rem);line-height:2.25rem;line-height:var(--mdc-typography-button-line-height,2.25rem);font-weight:500;font-weight:var(--mdc-typography-button-font-weight,500);letter-spacing:.0892857143em;letter-spacing:var(--mdc-typography-button-letter-spacing,.0892857143em);text-decoration:none;text-decoration:var(--mdc-typography-button-text-decoration,none);text-transform:uppercase;text-transform:var(--mdc-typography-button-text-transform,uppercase);padding-right:24px;padding-left:24px;min-width:90px;position:relative;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:0;background:0 0;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab .mdc-tab__text-label{color:rgba(0,0,0,.6)}.mdc-tab .mdc-tab__icon{color:rgba(0,0,0,.54);fill:currentColor}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{position:relative;display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;width:24px;height:24px;font-size:24px;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label{color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}.mdc-tab--active .mdc-tab__icon{color:#6200ee;color:var(--mdc-theme-primary,#6200ee);fill:currentColor}.mdc-tab--active .mdc-tab__icon,.mdc-tab--active .mdc-tab__text-label{transition-delay:.1s}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl],[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:0;padding-right:8px}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}.mdc-tab__ripple{--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;-webkit-tap-highlight-color:transparent;will-change:transform,opacity;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.mdc-tab__ripple::after,.mdc-tab__ripple::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-tab__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index,1)}.mdc-tab__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index,0)}.mdc-tab__ripple.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale,1))}.mdc-tab__ripple.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-tab__ripple.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top,0);left:var(--mdc-ripple-left,0)}.mdc-tab__ripple.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-tab__ripple.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-tab__ripple::after,.mdc-tab__ripple::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-tab__ripple.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-tab__ripple::after,.mdc-tab__ripple::before{background-color:#6200ee;background-color:var(--mdc-ripple-color,var(--mdc-theme-primary,#6200ee))}.mdc-tab__ripple.mdc-ripple-surface--hover::before,.mdc-tab__ripple:hover::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-tab__ripple.mdc-ripple-upgraded--background-focused::before,.mdc-tab__ripple:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-tab__ripple:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-tab__ripple:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-tab__ripple.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}:host{outline:0;flex:1 0 auto;display:flex;justify-content:center;-webkit-tap-highlight-color:transparent}.mdc-tab{height:var(--mdc-tab-height,48px);margin-left:0;margin-right:0;padding-right:var(--mdc-tab-horizontal-padding,24px);padding-left:var(--mdc-tab-horizontal-padding,24px)}.mdc-tab--stacked{height:var(--mdc-tab-stacked-height,72px)}.mdc-tab::-moz-focus-inner{border:0}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl],[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:0;padding-right:8px}.mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mdc-tab-text-label-color-default,rgba(0,0,0,.6))}.mdc-tab:not(.mdc-tab--active) .mdc-tab__icon{color:var(--mdc-tab-color-default,rgba(0,0,0,.54))}`));class tc extends(Me(Zl)){static get scopedElements(){return{"mwc-tab-indicator":Hl,"mwc-ripple":Je}}renderRipple(){return this.shouldRenderRipple?F(Kl||(Kl=$l` <mwc-ripple primary class="ripple"></mwc-ripple> `)):""}renderIndicator(){return F(Jl||(Jl=$l`<mwc-tab-indicator class="indicator" .icon="${0}" .fade="${0}"></mwc-tab-indicator>`),this.indicatorIcon,this.isFadingIndicator)}}tc.styles=Ql,t([Q(".ripple")],tc.prototype,"ripple",void 0),t([Z(".indicator")],tc.prototype,"tabIndicator",void 0);var ec=function(t,e){return(ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var ic=function(){return(ic=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nc={ARROW_LEFT_KEY:"ArrowLeft",ARROW_RIGHT_KEY:"ArrowRight",END_KEY:"End",ENTER_KEY:"Enter",HOME_KEY:"Home",SPACE_KEY:"Space",TAB_ACTIVATED_EVENT:"MDCTabBar:activated",TAB_SCROLLER_SELECTOR:".mdc-tab-scroller",TAB_SELECTOR:".mdc-tab"},oc={ARROW_LEFT_KEYCODE:37,ARROW_RIGHT_KEYCODE:39,END_KEYCODE:35,ENTER_KEYCODE:13,EXTRA_SCROLL_AMOUNT:20,HOME_KEYCODE:36,SPACE_KEYCODE:32},rc=new Set;rc.add(nc.ARROW_LEFT_KEY),rc.add(nc.ARROW_RIGHT_KEY),rc.add(nc.END_KEY),rc.add(nc.HOME_KEY),rc.add(nc.ENTER_KEY),rc.add(nc.SPACE_KEY);var sc=new Map;sc.set(oc.ARROW_LEFT_KEYCODE,nc.ARROW_LEFT_KEY),sc.set(oc.ARROW_RIGHT_KEYCODE,nc.ARROW_RIGHT_KEY),sc.set(oc.END_KEYCODE,nc.END_KEY),sc.set(oc.HOME_KEYCODE,nc.HOME_KEY),sc.set(oc.ENTER_KEYCODE,nc.ENTER_KEY),sc.set(oc.SPACE_KEYCODE,nc.SPACE_KEY);var ac=function(t){function e(i){var n=t.call(this,ic(ic({},e.defaultAdapter),i))||this;return n.useAutomaticActivation_=!1,n}return function(t,e){function i(){this.constructor=t}ec(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"strings",{get:function(){return nc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return oc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{scrollTo:function(){},incrementScroll:function(){},getScrollPosition:function(){return 0},getScrollContentWidth:function(){return 0},getOffsetWidth:function(){return 0},isRTL:function(){return!1},setActiveTab:function(){},activateTabAtIndex:function(){},deactivateTabAtIndex:function(){},focusTabAtIndex:function(){},getTabIndicatorClientRectAtIndex:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabDimensionsAtIndex:function(){return{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:function(){return-1},getFocusedTabIndex:function(){return-1},getIndexOfTabById:function(){return-1},getTabListLength:function(){return 0},notifyTabActivated:function(){}}},enumerable:!0,configurable:!0}),e.prototype.setUseAutomaticActivation=function(t){this.useAutomaticActivation_=t},e.prototype.activateTab=function(t){var e,i=this.adapter.getPreviousActiveTabIndex();this.indexIsInRange_(t)&&t!==i&&(-1!==i&&(this.adapter.deactivateTabAtIndex(i),e=this.adapter.getTabIndicatorClientRectAtIndex(i)),this.adapter.activateTabAtIndex(t,e),this.scrollIntoView(t),this.adapter.notifyTabActivated(t))},e.prototype.handleKeyDown=function(t){var e=this.getKeyFromEvent_(t);if(void 0!==e)if(this.isActivationKey_(e)||t.preventDefault(),this.useAutomaticActivation_){if(this.isActivationKey_(e))return;var i=this.determineTargetFromKey_(this.adapter.getPreviousActiveTabIndex(),e);this.adapter.setActiveTab(i),this.scrollIntoView(i)}else{var n=this.adapter.getFocusedTabIndex();if(this.isActivationKey_(e))this.adapter.setActiveTab(n);else{i=this.determineTargetFromKey_(n,e);this.adapter.focusTabAtIndex(i),this.scrollIntoView(i)}}},e.prototype.handleTabInteraction=function(t){this.adapter.setActiveTab(this.adapter.getIndexOfTabById(t.detail.tabId))},e.prototype.scrollIntoView=function(t){if(this.indexIsInRange_(t))return 0===t?this.adapter.scrollTo(0):t===this.adapter.getTabListLength()-1?this.adapter.scrollTo(this.adapter.getScrollContentWidth()):this.isRTL_()?this.scrollIntoViewRTL_(t):void this.scrollIntoView_(t)},e.prototype.determineTargetFromKey_=function(t,e){var i=this.isRTL_(),n=this.adapter.getTabListLength()-1,o=t;return e===nc.END_KEY?o=n:e===nc.ARROW_LEFT_KEY&&!i||e===nc.ARROW_RIGHT_KEY&&i?o-=1:e===nc.ARROW_RIGHT_KEY&&!i||e===nc.ARROW_LEFT_KEY&&i?o+=1:o=0,o<0?o=n:o>n&&(o=0),o},e.prototype.calculateScrollIncrement_=function(t,e,i,n){var o=this.adapter.getTabDimensionsAtIndex(e),r=o.contentLeft-i-n,s=o.contentRight-i-oc.EXTRA_SCROLL_AMOUNT,a=r+oc.EXTRA_SCROLL_AMOUNT;return e<t?Math.min(s,0):Math.max(a,0)},e.prototype.calculateScrollIncrementRTL_=function(t,e,i,n,o){var r=this.adapter.getTabDimensionsAtIndex(e),s=o-r.contentLeft-i,a=o-r.contentRight-i-n+oc.EXTRA_SCROLL_AMOUNT,l=s-oc.EXTRA_SCROLL_AMOUNT;return e>t?Math.max(a,0):Math.min(l,0)},e.prototype.findAdjacentTabIndexClosestToEdge_=function(t,e,i,n){var o=e.rootLeft-i,r=e.rootRight-i-n,s=o+r;return o<0||s<0?t-1:r>0||s>0?t+1:-1},e.prototype.findAdjacentTabIndexClosestToEdgeRTL_=function(t,e,i,n,o){var r=o-e.rootLeft-n-i,s=o-e.rootRight-i,a=r+s;return r>0||a>0?t+1:s<0||a<0?t-1:-1},e.prototype.getKeyFromEvent_=function(t){return rc.has(t.key)?t.key:sc.get(t.keyCode)},e.prototype.isActivationKey_=function(t){return t===nc.SPACE_KEY||t===nc.ENTER_KEY},e.prototype.indexIsInRange_=function(t){return t>=0&&t<this.adapter.getTabListLength()},e.prototype.isRTL_=function(){return this.adapter.isRTL()},e.prototype.scrollIntoView_=function(t){var e=this.adapter.getScrollPosition(),i=this.adapter.getOffsetWidth(),n=this.adapter.getTabDimensionsAtIndex(t),o=this.findAdjacentTabIndexClosestToEdge_(t,n,e,i);if(this.indexIsInRange_(o)){var r=this.calculateScrollIncrement_(t,o,e,i);this.adapter.incrementScroll(r)}},e.prototype.scrollIntoViewRTL_=function(t){var e=this.adapter.getScrollPosition(),i=this.adapter.getOffsetWidth(),n=this.adapter.getTabDimensionsAtIndex(t),o=this.adapter.getScrollContentWidth(),r=this.findAdjacentTabIndexClosestToEdgeRTL_(t,n,e,i,o);if(this.indexIsInRange_(r)){var s=this.calculateScrollIncrementRTL_(t,r,e,i,o);this.adapter.incrementScroll(s)}},e}(Et),lc=function(t,e){return(lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function cc(t,e){function i(){this.constructor=t}lc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var dc=function(){return(dc=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var uc={ANIMATING:"mdc-tab-scroller--animating",SCROLL_AREA_SCROLL:"mdc-tab-scroller__scroll-area--scroll",SCROLL_TEST:"mdc-tab-scroller__test"},hc={AREA_SELECTOR:".mdc-tab-scroller__scroll-area",CONTENT_SELECTOR:".mdc-tab-scroller__scroll-content"},pc=function(t){this.adapter=t},gc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cc(e,t),e.prototype.getScrollPositionRTL=function(){var t=this.adapter.getScrollAreaScrollLeft(),e=this.calculateScrollEdges_().right;return Math.round(e-t)},e.prototype.scrollToRTL=function(t){var e=this.calculateScrollEdges_(),i=this.adapter.getScrollAreaScrollLeft(),n=this.clampScrollValue_(e.right-t);return{finalScrollPosition:n,scrollDelta:n-i}},e.prototype.incrementScrollRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue_(e-t);return{finalScrollPosition:i,scrollDelta:i-e}},e.prototype.getAnimatingScrollPosition=function(t){return t},e.prototype.calculateScrollEdges_=function(){return{left:0,right:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth()}},e.prototype.clampScrollValue_=function(t){var e=this.calculateScrollEdges_();return Math.min(Math.max(e.left,t),e.right)},e}(pc),fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cc(e,t),e.prototype.getScrollPositionRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft();return Math.round(t-e)},e.prototype.scrollToRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue_(-t);return{finalScrollPosition:i,scrollDelta:i-e}},e.prototype.incrementScrollRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue_(e-t);return{finalScrollPosition:i,scrollDelta:i-e}},e.prototype.getAnimatingScrollPosition=function(t,e){return t-e},e.prototype.calculateScrollEdges_=function(){var t=this.adapter.getScrollContentOffsetWidth();return{left:this.adapter.getScrollAreaOffsetWidth()-t,right:0}},e.prototype.clampScrollValue_=function(t){var e=this.calculateScrollEdges_();return Math.max(Math.min(e.right,t),e.left)},e}(pc),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cc(e,t),e.prototype.getScrollPositionRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft();return Math.round(e-t)},e.prototype.scrollToRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue_(t);return{finalScrollPosition:i,scrollDelta:e-i}},e.prototype.incrementScrollRTL=function(t){var e=this.adapter.getScrollAreaScrollLeft(),i=this.clampScrollValue_(e+t);return{finalScrollPosition:i,scrollDelta:e-i}},e.prototype.getAnimatingScrollPosition=function(t,e){return t+e},e.prototype.calculateScrollEdges_=function(){return{left:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth(),right:0}},e.prototype.clampScrollValue_=function(t){var e=this.calculateScrollEdges_();return Math.min(Math.max(e.right,t),e.left)},e}(pc),_c=function(t){function e(i){var n=t.call(this,dc(dc({},e.defaultAdapter),i))||this;return n.isAnimating_=!1,n}return cc(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return uc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return hc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{eventTargetMatchesSelector:function(){return!1},addClass:function(){},removeClass:function(){},addScrollAreaClass:function(){},setScrollAreaStyleProperty:function(){},setScrollContentStyleProperty:function(){},getScrollContentStyleValue:function(){return""},setScrollAreaScrollLeft:function(){},getScrollAreaScrollLeft:function(){return 0},getScrollContentOffsetWidth:function(){return 0},getScrollAreaOffsetWidth:function(){return 0},computeScrollAreaClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeScrollContentClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},computeHorizontalScrollbarHeight:function(){return 0}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this.adapter.computeHorizontalScrollbarHeight();this.adapter.setScrollAreaStyleProperty("margin-bottom",-t+"px"),this.adapter.addScrollAreaClass(e.cssClasses.SCROLL_AREA_SCROLL)},e.prototype.getScrollPosition=function(){if(this.isRTL_())return this.computeCurrentScrollPositionRTL_();var t=this.calculateCurrentTranslateX_();return this.adapter.getScrollAreaScrollLeft()-t},e.prototype.handleInteraction=function(){this.isAnimating_&&this.stopScrollAnimation_()},e.prototype.handleTransitionEnd=function(t){var i=t.target;this.isAnimating_&&this.adapter.eventTargetMatchesSelector(i,e.strings.CONTENT_SELECTOR)&&(this.isAnimating_=!1,this.adapter.removeClass(e.cssClasses.ANIMATING))},e.prototype.incrementScroll=function(t){0!==t&&this.animate_(this.getIncrementScrollOperation_(t))},e.prototype.incrementScrollImmediate=function(t){if(0!==t){var e=this.getIncrementScrollOperation_(t);0!==e.scrollDelta&&(this.stopScrollAnimation_(),this.adapter.setScrollAreaScrollLeft(e.finalScrollPosition))}},e.prototype.scrollTo=function(t){if(this.isRTL_())return this.scrollToRTL_(t);this.scrollTo_(t)},e.prototype.getRTLScroller=function(){return this.rtlScrollerInstance_||(this.rtlScrollerInstance_=this.rtlScrollerFactory_()),this.rtlScrollerInstance_},e.prototype.calculateCurrentTranslateX_=function(){var t=this.adapter.getScrollContentStyleValue("transform");if("none"===t)return 0;var e=/\((.+?)\)/.exec(t);if(!e)return 0;var i=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}(e[1].split(","),6);i[0],i[1],i[2],i[3];var n=i[4];return i[5],parseFloat(n)},e.prototype.clampScrollValue_=function(t){var e=this.calculateScrollEdges_();return Math.min(Math.max(e.left,t),e.right)},e.prototype.computeCurrentScrollPositionRTL_=function(){var t=this.calculateCurrentTranslateX_();return this.getRTLScroller().getScrollPositionRTL(t)},e.prototype.calculateScrollEdges_=function(){return{left:0,right:this.adapter.getScrollContentOffsetWidth()-this.adapter.getScrollAreaOffsetWidth()}},e.prototype.scrollTo_=function(t){var e=this.getScrollPosition(),i=this.clampScrollValue_(t),n=i-e;this.animate_({finalScrollPosition:i,scrollDelta:n})},e.prototype.scrollToRTL_=function(t){var e=this.getRTLScroller().scrollToRTL(t);this.animate_(e)},e.prototype.getIncrementScrollOperation_=function(t){if(this.isRTL_())return this.getRTLScroller().incrementScrollRTL(t);var e=this.getScrollPosition(),i=t+e,n=this.clampScrollValue_(i);return{finalScrollPosition:n,scrollDelta:n-e}},e.prototype.animate_=function(t){var i=this;0!==t.scrollDelta&&(this.stopScrollAnimation_(),this.adapter.setScrollAreaScrollLeft(t.finalScrollPosition),this.adapter.setScrollContentStyleProperty("transform","translateX("+t.scrollDelta+"px)"),this.adapter.computeScrollAreaClientRect(),requestAnimationFrame((function(){i.adapter.addClass(e.cssClasses.ANIMATING),i.adapter.setScrollContentStyleProperty("transform","none")})),this.isAnimating_=!0)},e.prototype.stopScrollAnimation_=function(){this.isAnimating_=!1;var t=this.getAnimatingScrollPosition_();this.adapter.removeClass(e.cssClasses.ANIMATING),this.adapter.setScrollContentStyleProperty("transform","translateX(0px)"),this.adapter.setScrollAreaScrollLeft(t)},e.prototype.getAnimatingScrollPosition_=function(){var t=this.calculateCurrentTranslateX_(),e=this.adapter.getScrollAreaScrollLeft();return this.isRTL_()?this.getRTLScroller().getAnimatingScrollPosition(e,t):e-t},e.prototype.rtlScrollerFactory_=function(){var t=this.adapter.getScrollAreaScrollLeft();this.adapter.setScrollAreaScrollLeft(t-1);var e=this.adapter.getScrollAreaScrollLeft();if(e<0)return this.adapter.setScrollAreaScrollLeft(t),new fc(this.adapter);var i=this.adapter.computeScrollAreaClientRect(),n=this.adapter.computeScrollContentClientRect(),o=Math.round(n.right-i.right);return this.adapter.setScrollAreaScrollLeft(t),o===e?new mc(this.adapter):new gc(this.adapter)},e.prototype.isRTL_=function(){return"rtl"===this.adapter.getScrollContentStyleValue("direction")},e}(Et);let vc,yc,bc=t=>t;class Ec extends _t{constructor(){super(...arguments),this.mdcFoundationClass=_c,this._scrollbarHeight=-1}_handleInteraction(){this.mdcFoundation.handleInteraction()}_handleTransitionEnd(t){this.mdcFoundation.handleTransitionEnd(t)}render(){return F(vc||(vc=bc` <div class="mdc-tab-scroller"> <div class="mdc-tab-scroller__scroll-area" @wheel="${0}" @touchstart="${0}" @pointerdown="${0}" @mousedown="${0}" @keydown="${0}" @transitionend="${0}"> <div class="mdc-tab-scroller__scroll-content"><slot></slot></div> </div> </div> `),this._handleInteraction,this._handleInteraction,this._handleInteraction,this._handleInteraction,this._handleInteraction,this._handleTransitionEnd)}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{eventTargetMatchesSelector:(t,e)=>ct(t,e),addScrollAreaClass:t=>this.scrollAreaElement.classList.add(t),setScrollAreaStyleProperty:(t,e)=>this.scrollAreaElement.style.setProperty(t,e),setScrollContentStyleProperty:(t,e)=>this.scrollContentElement.style.setProperty(t,e),getScrollContentStyleValue:t=>window.getComputedStyle(this.scrollContentElement).getPropertyValue(t),setScrollAreaScrollLeft:t=>this.scrollAreaElement.scrollLeft=t,getScrollAreaScrollLeft:()=>this.scrollAreaElement.scrollLeft,getScrollContentOffsetWidth:()=>this.scrollContentElement.offsetWidth,getScrollAreaOffsetWidth:()=>this.scrollAreaElement.offsetWidth,computeScrollAreaClientRect:()=>this.scrollAreaElement.getBoundingClientRect(),computeScrollContentClientRect:()=>this.scrollContentElement.getBoundingClientRect(),computeHorizontalScrollbarHeight:()=>(-1===this._scrollbarHeight&&(this.scrollAreaElement.style.overflowX="scroll",this._scrollbarHeight=this.scrollAreaElement.offsetHeight-this.scrollAreaElement.clientHeight,this.scrollAreaElement.style.overflowX=""),this._scrollbarHeight)})}getScrollPosition(){return this.mdcFoundation.getScrollPosition()}getScrollContentWidth(){return this.scrollContentElement.offsetWidth}incrementScrollPosition(t){this.mdcFoundation.incrementScroll(t)}scrollToPosition(t){this.mdcFoundation.scrollTo(t)}}t([Z(".mdc-tab-scroller")],Ec.prototype,"mdcRoot",void 0),t([Z(".mdc-tab-scroller__scroll-area")],Ec.prototype,"scrollAreaElement",void 0),t([Z(".mdc-tab-scroller__scroll-content")],Ec.prototype,"scrollContentElement",void 0),t([it({passive:!0})],Ec.prototype,"_handleInteraction",null);const Tc=st(yc||(yc=bc`.mdc-tab-scroller{overflow-y:hidden}.mdc-tab-scroller.mdc-tab-scroller--animating .mdc-tab-scroller__scroll-content{transition:250ms transform cubic-bezier(.4,0,.2,1)}.mdc-tab-scroller__test{position:absolute;top:-9999px;width:100px;height:100px;overflow-x:scroll}.mdc-tab-scroller__scroll-area{-webkit-overflow-scrolling:touch;display:flex;overflow-x:hidden}.mdc-tab-scroller__scroll-area::-webkit-scrollbar,.mdc-tab-scroller__test::-webkit-scrollbar{display:none}.mdc-tab-scroller__scroll-area--scroll{overflow-x:scroll}.mdc-tab-scroller__scroll-content{position:relative;display:flex;flex:1 0 auto;transform:none;will-change:transform}.mdc-tab-scroller--align-start .mdc-tab-scroller__scroll-content{justify-content:flex-start}.mdc-tab-scroller--align-end .mdc-tab-scroller__scroll-content{justify-content:flex-end}.mdc-tab-scroller--align-center .mdc-tab-scroller__scroll-content{justify-content:center}.mdc-tab-scroller--animating .mdc-tab-scroller__scroll-area{-webkit-overflow-scrolling:auto}:host{display:flex}.mdc-tab-scroller{flex:1}`));class xc extends Ec{}xc.styles=Tc;let kc,Sc,Cc=t=>t,wc=class extends Zl{};wc.styles=Ql,wc=t([],wc);class Ic extends _t{constructor(){super(...arguments),this.mdcFoundationClass=ac,this.activeIndex=0,this._previousActiveIndex=-1}_handleTabInteraction(t){this.mdcFoundation.handleTabInteraction(t)}_handleKeydown(t){this.mdcFoundation.handleKeyDown(t)}render(){return F(kc||(kc=Cc` <div class="mdc-tab-bar" role="tablist" @MDCTab:interacted="${0}" @keydown="${0}"> <mwc-tab-scroller><slot></slot></mwc-tab-scroller> </div> `),this._handleTabInteraction,this._handleKeydown)}_getTabs(){return this.tabsSlot.assignedNodes({flatten:!0}).filter((t=>t instanceof tc))}_getTab(t){return this._getTabs()[t]}createAdapter(){return{scrollTo:t=>this.getScrollerElement().scrollToPosition(t),incrementScroll:t=>this.getScrollerElement().incrementScrollPosition(t),getScrollPosition:()=>this.getScrollerElement().getScrollPosition(),getScrollContentWidth:()=>this.getScrollerElement().getScrollContentWidth(),getOffsetWidth:()=>this.mdcRoot.offsetWidth,isRTL:()=>"rtl"===window.getComputedStyle(this.mdcRoot).getPropertyValue("direction"),setActiveTab:t=>this.mdcFoundation.activateTab(t),activateTabAtIndex:(t,e)=>{const i=this._getTab(t);void 0!==i&&i.activate(e),this._previousActiveIndex=t},deactivateTabAtIndex:t=>{const e=this._getTab(t);void 0!==e&&e.deactivate()},focusTabAtIndex:t=>{const e=this._getTab(t);void 0!==e&&e.focus()},getTabIndicatorClientRectAtIndex:t=>{const e=this._getTab(t);return void 0!==e?e.computeIndicatorClientRect():new DOMRect},getTabDimensionsAtIndex:t=>{const e=this._getTab(t);return void 0!==e?e.computeDimensions():{rootLeft:0,rootRight:0,contentLeft:0,contentRight:0}},getPreviousActiveTabIndex:()=>this._previousActiveIndex,getFocusedTabIndex:()=>{const t=this._getTabs(),e=this.getRootNode().activeElement;return t.indexOf(e)},getIndexOfTabById:t=>{const e=this._getTabs();for(let i=0;i<e.length;i++)if(e[i].id===t)return i;return-1},getTabListLength:()=>this._getTabs().length,notifyTabActivated:t=>{this.activeIndex=t,this.dispatchEvent(new CustomEvent(ac.strings.TAB_ACTIVATED_EVENT,{detail:{index:t},bubbles:!0,cancelable:!0}))}}}firstUpdated(){}_getUpdateComplete(){return super._getUpdateComplete().then((()=>this.getScrollerElement().updateComplete)).then((()=>{void 0===this.mdcFoundation&&this.createFoundation()}))}scrollIndexIntoView(t){this.mdcFoundation.scrollIntoView(t)}}t([Z(".mdc-tab-bar")],Ic.prototype,"mdcRoot",void 0),t([Z("mwc-tab-scroller")],Ic.prototype,"scrollerElement",void 0),t([Z("slot")],Ic.prototype,"tabsSlot",void 0),t([vt((async function(){await this.updateComplete,this.activeIndex!==this._previousActiveIndex&&this.mdcFoundation.activateTab(this.activeIndex)})),$({type:Number})],Ic.prototype,"activeIndex",void 0);const Rc=st(Sc||(Sc=Cc`.mdc-tab-bar{width:100%}.mdc-tab{height:48px}.mdc-tab--stacked{height:72px}:host{display:block}.mdc-tab-bar{flex:1}mwc-tab{--mdc-tab-height:48px;--mdc-tab-stacked-height:72px}`));class Ac extends(Me(Ic)){static get scopedElements(){return{"mwc-tab":tc,"mwc-tab-scroller":xc}}getScrollerElement(){const t=this.getScopedTagName("mwc-tab-scroller");return this.shadowRoot.querySelector(t)}}Ac.styles=Rc;let Oc,Dc,Nc,Mc,Lc=t=>t;function Pc(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}function Bc(t,e){const i=[];for(const n of t.assignedNodes({flatten:!0}))if(n.nodeType===Node.ELEMENT_NODE){const t=n;Pc(t,e)&&i.push(t)}return i}var Fc=function(t,e){return(Fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Hc,Uc,Vc=function(){return(Vc=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Gc=function(){function t(t){void 0===t&&(t={}),this.adapter_=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),Wc={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},zc={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},jc={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};function Xc(t,e){if(void 0===t&&(t=window),void 0===e&&(e=!1),void 0===Uc||e){var i=!1;try{t.document.addEventListener("test",(function(){}),{get passive(){return i=!0}})}catch(t){}Uc=i}return!!Uc&&{passive:!0}}var Yc=["touchstart","pointerdown","mousedown","keydown"],Kc=["touchend","pointerup","mouseup","contextmenu"],Jc=[],$c=function(t){function e(i){var n=t.call(this,Vc({},e.defaultAdapter,i))||this;return n.activationAnimationHasEnded_=!1,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.fgScale_="0",n.frame_={width:0,height:0},n.initialSize_=0,n.layoutFrame_=0,n.maxRadius_=0,n.unboundedCoords_={left:0,top:0},n.activationState_=n.defaultActivationState_(),n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.activateHandler_=function(t){return n.activate_(t)},n.deactivateHandler_=function(){return n.deactivate_()},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n}return function(t,e){function i(){this.constructor=t}Fc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Wc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return zc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return jc},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var n=e.cssClasses,o=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){t.adapter_.addClass(o),t.adapter_.isUnbounded()&&(t.adapter_.addClass(r),t.layoutInternal_())}))}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(e.cssClasses.FG_DEACTIVATION));var i=e.cssClasses,n=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){t.adapter_.removeClass(n),t.adapter_.removeClass(o),t.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},e.prototype.activate=function(t){this.activate_(t)},e.prototype.deactivate=function(){this.deactivate_()},e.prototype.layout=function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){t.layoutInternal_(),t.layoutFrame_=0}))},e.prototype.setUnbounded=function(t){var i=e.cssClasses.UNBOUNDED;t?this.adapter_.addClass(i):this.adapter_.removeClass(i)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame((function(){return t.adapter_.addClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame((function(){return t.adapter_.removeClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},e.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers_=function(t){var e=this;t&&(Yc.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},e.prototype.registerDeactivationHandlers_=function(t){var e=this;"keydown"===t.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):Kc.forEach((function(t){e.adapter_.registerDocumentInteractionHandler(t,e.deactivateHandler_)}))},e.prototype.deregisterRootHandlers_=function(){var t=this;Yc.forEach((function(e){t.adapter_.deregisterInteractionHandler(e,t.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},e.prototype.deregisterDeactivationHandlers_=function(){var t=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),Kc.forEach((function(e){t.adapter_.deregisterDocumentInteractionHandler(e,t.deactivateHandler_)}))},e.prototype.removeCssVars_=function(){var t=this,i=e.strings;Object.keys(i).forEach((function(e){0===e.indexOf("VAR_")&&t.adapter_.updateCssVariable(i[e],null)}))},e.prototype.activate_=function(t){var e=this;if(!this.adapter_.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var n=this.previousActivationEvent_;if(!(n&&void 0!==t&&n.type!==t.type))i.isActivated=!0,i.isProgrammatic=void 0===t,i.activationEvent=t,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==t&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type)),void 0!==t&&Jc.length>0&&Jc.some((function(t){return e.adapter_.containsEventTarget(t)}))?this.resetActivationState_():(void 0!==t&&(Jc.push(t.target),this.registerDeactivationHandlers_(t)),i.wasElementMadeActive=this.checkElementMadeActive_(t),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){Jc=[],i.wasElementMadeActive||void 0===t||" "!==t.key&&32!==t.keyCode||(i.wasElementMadeActive=e.checkElementMadeActive_(t),i.wasElementMadeActive&&e.animateActivation_()),i.wasElementMadeActive||(e.activationState_=e.defaultActivationState_())})))}}},e.prototype.checkElementMadeActive_=function(t){return void 0===t||"keydown"!==t.type||this.adapter_.isSurfaceActive()},e.prototype.animateActivation_=function(){var t=this,i=e.strings,n=i.VAR_FG_TRANSLATE_START,o=i.VAR_FG_TRANSLATE_END,r=e.cssClasses,s=r.FG_DEACTIVATION,a=r.FG_ACTIVATION,l=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",d="";if(!this.adapter_.isUnbounded()){var u=this.getFgTranslationCoordinates_(),h=u.startPoint,p=u.endPoint;c=h.x+"px, "+h.y+"px",d=p.x+"px, "+p.y+"px"}this.adapter_.updateCssVariable(n,c),this.adapter_.updateCssVariable(o,d),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(s),this.adapter_.computeBoundingRect(),this.adapter_.addClass(a),this.activationTimer_=setTimeout((function(){return t.activationTimerCallback_()}),l)},e.prototype.getFgTranslationCoordinates_=function(){var t,e=this.activationState_,i=e.activationEvent;return{startPoint:t={x:(t=e.wasActivatedByPointer?function(t,e,i){if(!t)return{x:0,y:0};var n,o,r=e.x,s=e.y,a=r+i.left,l=s+i.top;if("touchstart"===t.type){var c=t;n=c.changedTouches[0].pageX-a,o=c.changedTouches[0].pageY-l}else{var d=t;n=d.pageX-a,o=d.pageY-l}return{x:n,y:o}}(i,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:t.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},e.prototype.runDeactivationUXLogicIfReady_=function(){var t=this,i=e.cssClasses.FG_DEACTIVATION,n=this.activationState_,o=n.hasDeactivationUXRun,r=n.isActivated;(o||!r)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){t.adapter_.removeClass(i)}),jc.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses_=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(t),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},e.prototype.resetActivationState_=function(){var t=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return t.previousActivationEvent_=void 0}),e.numbers.TAP_DELAY_MS)},e.prototype.deactivate_=function(){var t=this,e=this.activationState_;if(e.isActivated){var i=Vc({},e);e.isProgrammatic?(requestAnimationFrame((function(){return t.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(i),t.resetActivationState_()})))}},e.prototype.animateDeactivation_=function(t){var e=t.wasActivatedByPointer,i=t.wasElementMadeActive;(e||i)&&this.runDeactivationUXLogicIfReady_()},e.prototype.layoutInternal_=function(){var t=this;this.frame_=this.adapter_.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?i:Math.sqrt(Math.pow(t.frame_.width,2)+Math.pow(t.frame_.height,2))+e.numbers.PADDING,this.initialSize_=Math.floor(i*e.numbers.INITIAL_ORIGIN_SCALE),this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},e.prototype.updateLayoutCssVars_=function(){var t=e.strings,i=t.VAR_FG_SIZE,n=t.VAR_LEFT,o=t.VAR_TOP,r=t.VAR_FG_SCALE;this.adapter_.updateCssVariable(i,this.initialSize_+"px"),this.adapter_.updateCssVariable(r,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(n,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(o,this.unboundedCoords_.top+"px"))},e}(Gc);const qc=st(Oc||(Oc=Lc`@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}`)),Zc=function(t,e){void 0===e&&(e=!1);var i=t.CSS,n=Hc;if("boolean"==typeof Hc&&!e)return Hc;if(!(i&&"function"==typeof i.supports))return!1;var o=i.supports("--css-vars","yes"),r=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return n=!(!o&&!r)&&!function(t){var e=t.document,i=e.createElement("div");i.className="mdc-ripple-surface--test-edge-var-bug",e.body.appendChild(i);var n=t.getComputedStyle(i),o=null!==n&&"solid"===n.borderTopStyle;return i.parentNode&&i.parentNode.removeChild(i),o}(t),e||(Hc=n),n}(window),Qc=navigator.userAgent.match(/Safari/);let td=!1;const ed=t=>{Qc&&!td&&(()=>{td=!0;const t=new w({templateFactory:M});t.appendInto(document.head),t.setValue(qc),t.commit()})();const e=t.surfaceNode,i=t.interactionNode||e;i.getRootNode()!==e.getRootNode()&&""===i.style.position&&(i.style.position="relative");const n=Object.assign({browserSupportsCssVars:()=>Zc,isUnbounded:()=>void 0===t.unbounded||t.unbounded,isSurfaceActive:()=>Pc(i,":active"),isSurfaceDisabled:()=>Boolean(t.disabled),addClass:t=>e.classList.add(t),removeClass:t=>e.classList.remove(t),containsEventTarget:t=>i.contains(t),registerInteractionHandler:(t,e)=>i.addEventListener(t,e,Xc()),deregisterInteractionHandler:(t,e)=>i.removeEventListener(t,e,Xc()),registerDocumentInteractionHandler:(t,e)=>document.documentElement.addEventListener(t,e,Xc()),deregisterDocumentInteractionHandler:(t,e)=>document.documentElement.removeEventListener(t,e,Xc()),registerResizeHandler:t=>window.addEventListener("resize",t),deregisterResizeHandler:t=>window.removeEventListener("resize",t),updateCssVariable:(t,i)=>e.style.setProperty(t,i),computeBoundingRect:()=>e.getBoundingClientRect(),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset})},t.adapter),o=new $c(n);return o.init(),o},id=new WeakMap,nd=f(((t={})=>e=>{const i=e.committer.element,n=t.interactionNode||i;let o=e.value;const r=id.get(o);void 0!==r&&r!==n&&(o.destroy(),o=_),o===_?(o=ed(Object.assign({},t,{surfaceNode:i})),id.set(o,n),e.setValue(o)):(void 0!==t.unbounded&&o.setUnbounded(t.unbounded),void 0!==t.disabled&&o.setUnbounded(t.disabled)),!0===t.active?o.activate():!1===t.active&&o.deactivate()})),od=st(Dc||(Dc=Lc`.mdc-card{border-radius:4px;background-color:#fff;background-color:var(--mdc-theme-surface,#fff);box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);display:flex;flex-direction:column;box-sizing:border-box}.mdc-card--outlined{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12);border-width:1px;border-style:solid;border-color:#e0e0e0}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:0;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0,0,0,.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl],[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:0}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}.mdc-card__action--button[dir=rtl],[dir=rtl] .mdc-card__action--button{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}.mdc-card__action--button:last-child[dir=rtl],[dir=rtl] .mdc-card__action--button:last-child{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl],[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0,0,0,.6)}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}.mdc-ripple-surface--test-edge-var-bug{--mdc-ripple-surface-test-edge-var:1px solid #000;visibility:hidden}.mdc-ripple-surface--test-edge-var-bug::before{border:var(--mdc-ripple-surface-test-edge-var)}.mdc-card__primary-action{--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;-webkit-tap-highlight-color:transparent}.mdc-card__primary-action::after,.mdc-card__primary-action::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-card__primary-action::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1}.mdc-card__primary-action.mdc-ripple-upgraded::before{transform:scale(var(--mdc-ripple-fg-scale,1))}.mdc-card__primary-action.mdc-ripple-upgraded::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-card__primary-action.mdc-ripple-upgraded--unbounded::after{top:var(--mdc-ripple-top,0);left:var(--mdc-ripple-left,0)}.mdc-card__primary-action.mdc-ripple-upgraded--foreground-activation::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-card__primary-action.mdc-ripple-upgraded--foreground-deactivation::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-card__primary-action::after,.mdc-card__primary-action::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-card__primary-action.mdc-ripple-upgraded::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-card__primary-action::after,.mdc-card__primary-action::before{background-color:#000}.mdc-card__primary-action:hover::before{opacity:.04}.mdc-card__primary-action.mdc-ripple-upgraded--background-focused::before,.mdc-card__primary-action:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:.12}.mdc-card__primary-action:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mdc-card__primary-action:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:.12}.mdc-card__primary-action.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:0.12}:host{display:inline-block;width:344px}.mdc-card{height:100%}.mdc-card__primary-action{flex-grow:1}.mdc-card__primary-action--empty{display:none}.mdc-card__actions--empty{display:none}.mdc-card__actions ::slotted(*){display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__actions ::slotted(*):focus{outline:0}.mdc-card__actions ::slotted(mwc-button){margin-left:0;margin-right:8px}.mdc-card__actions ::slotted(mwc-button)[dir=rtl],[dir=rtl] .mdc-card__actions ::slotted(mwc-button){margin-left:8px;margin-right:0}.mdc-card__actions ::slotted(mwc-button):last-child{margin-left:0;margin-right:0}.mdc-card__actions ::slotted(mwc-button):last-child[dir=rtl],[dir=rtl] .mdc-card__actions ::slotted(mwc-button):last-child{margin-left:0;margin-right:0}.mdc-card__actions ::slotted(mwc-icon-button){margin:-6px 0}.mdc-card__actions ::slotted(mwc-icon-button:not(:disabled)){color:rgba(0,0,0,.6)}`)),rd=document.createElement("link");rd.rel="stylesheet",rd.href="https://fonts.googleapis.com/icon?family=Material+Icons",document.head.appendChild(rd);var sd=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};let ad=class extends lt{constructor(){super(...arguments),this.outlined=!1,this.aspectRatio=""}get headerEls(){return this.slotHeaderEl&&Bc(this.slotHeaderEl,"*")}get mediaEls(){return this.slotMediaEl&&Bc(this.slotMediaEl,"*")}get contentEls(){return this.slotContentEl&&Bc(this.slotContentEl,"*")}get actionButtons(){return this.slotActionButtonsEl&&Bc(this.slotActionButtonsEl,"mwc-button")}get actionIcons(){return this.slotActionIconsEl&&Bc(this.slotActionIconsEl,"mwc-icon-button")}render(){const t={"mdc-card":!0,"mdc-card--outlined":this.outlined},e={"mdc-card__media":!0,[`mdc-card__media--${this.aspectRatio}`]:""!==this.aspectRatio};return F(Nc||(Nc=Lc` <div class="${0}"> <div class="mdc-card__primary-action" tabindex="0" .ripple="${0}"> <slot name="header"></slot> <div class="${0}"> <div class="mdc-card__media-content"> <slot name="media"></slot> </div> </div> <slot name="content"></slot> </div> <slot></slot> <div class="mdc-card__actions"> <div class="mdc-card__action-buttons"> <slot name="action-buttons"></slot> </div> <div class="mdc-card__action-icons"> <slot name="action-icons"></slot> </div> </div> </div> `),Nt(t),nd({unbounded:!1}),Nt(e))}updated(t){super.updated(t);const e=this.headerEls.length>0,i=this.mediaEls.length>0,n=this.contentEls.length>0,o=e||i||n,r=this.actionButtons.length>0,s=this.actionIcons.length>0,a=r||s;this.primaryActionEl.classList.toggle("mdc-card__primary-action--empty",!o),this.actionButtonsEl.classList.toggle("mdc-card__action-buttons--empty",!r),this.actionIconsEl.classList.toggle("mdc-card__action-icons--empty",!s),this.actionsEl.classList.toggle("mdc-card__actions--empty",!a)}};ad.styles=od,sd([Z(".mdc-card__primary-action")],ad.prototype,"primaryActionEl",void 0),sd([Z(".mdc-card__actions")],ad.prototype,"actionsEl",void 0),sd([Z(".mdc-card__action-buttons")],ad.prototype,"actionButtonsEl",void 0),sd([Z(".mdc-card__action-icons")],ad.prototype,"actionIconsEl",void 0),sd([Z('slot[name="header"]')],ad.prototype,"slotHeaderEl",void 0),sd([Z('slot[name="media"]')],ad.prototype,"slotMediaEl",void 0),sd([Z('slot[name="content"]')],ad.prototype,"slotContentEl",void 0),sd([Z('slot[name="action-buttons"]')],ad.prototype,"slotActionButtonsEl",void 0),sd([Z('slot[name="action-icons"]')],ad.prototype,"slotActionIconsEl",void 0),sd([$({type:Boolean})],ad.prototype,"outlined",void 0),sd([$({type:String})],ad.prototype,"aspectRatio",void 0);class ld extends(Me(ad)){}ld.styles=[od,st(Mc||(Mc=Lc`:host{width:auto}`))];let cd,dd,ud,hd,pd,gd,fd,md,_d,vd,yd,bd=t=>t;class Ed extends lt{constructor(){super(...arguments),this.value="",this.group=null,this.tabindex=-1,this.disabled=!1,this.twoline=!1,this.activated=!1,this.graphic=null,this.multipleGraphics=!1,this.hasMeta=!1,this.noninteractive=!1,this.selected=!1,this.shouldRenderRipple=!1,this._managingList=null,this.boundOnClick=this.onClick.bind(this),this._firstChanged=!0,this._skipPropRequest=!1,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple))),this.listeners=[{target:this,eventNames:["click"],cb:()=>{this.onClick()}},{target:this,eventNames:["mouseenter"],cb:this.rippleHandlers.startHover},{target:this,eventNames:["mouseleave"],cb:this.rippleHandlers.endHover},{target:this,eventNames:["focus"],cb:this.rippleHandlers.startFocus},{target:this,eventNames:["blur"],cb:this.rippleHandlers.endFocus},{target:this,eventNames:["mousedown","touchstart"],cb:t=>{const e=t.type;this.onDown("mousedown"===e?"mouseup":"touchend",t)}}]}get text(){const t=this.textContent;return t?t.trim():""}render(){const t=this.renderText(),e=this.graphic?this.renderGraphic():F(cd||(cd=bd``)),i=this.hasMeta?this.renderMeta():F(dd||(dd=bd``));return F(ud||(ud=bd` ${0} ${0} ${0} ${0}`),this.renderRipple(),e,t,i)}renderRipple(){return this.shouldRenderRipple?F(hd||(hd=bd` <mwc-ripple .activated="${0}"> </mwc-ripple>`),this.activated):this.activated?F(pd||(pd=bd`<div class="fake-activated-ripple"></div>`)):""}renderGraphic(){const t={multi:this.multipleGraphics};return F(gd||(gd=bd` <span class="mdc-list-item__graphic material-icons ${0}"> <slot name="graphic"></slot> </span>`),Nt(t))}renderMeta(){return F(fd||(fd=bd` <span class="mdc-list-item__meta material-icons"> <slot name="meta"></slot> </span>`))}renderText(){const t=this.twoline?this.renderTwoline():this.renderSingleLine();return F(md||(md=bd` <span class="mdc-list-item__text"> ${0} </span>`),t)}renderSingleLine(){return F(_d||(_d=bd`<slot></slot>`))}renderTwoline(){return F(vd||(vd=bd` <span class="mdc-list-item__primary-text"> <slot></slot> </span> <span class="mdc-list-item__secondary-text"> <slot name="secondary"></slot> </span> `))}onClick(){this.fireRequestSelected(!this.selected,"interaction")}onDown(t,e){const i=()=>{window.removeEventListener(t,i),this.rippleHandlers.endPress()};window.addEventListener(t,i),this.rippleHandlers.startPress(e)}fireRequestSelected(t,e){if(this.noninteractive)return;const i=new CustomEvent("request-selected",{bubbles:!0,composed:!0,detail:{source:e,selected:t}});this.dispatchEvent(i)}connectedCallback(){super.connectedCallback(),this.noninteractive||this.setAttribute("mwc-list-item","");for(const t of this.listeners)for(const e of t.eventNames)t.target.addEventListener(e,t.cb,{passive:!0})}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)for(const e of t.eventNames)t.target.removeEventListener(e,t.cb);this._managingList&&(this._managingList.debouncedLayout?this._managingList.debouncedLayout(!0):this._managingList.layout(!0))}firstUpdated(){const t=new Event("list-item-rendered",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}t([Z("slot")],Ed.prototype,"slotElement",void 0),t([Q("mwc-ripple")],Ed.prototype,"ripple",void 0),t([$({type:String})],Ed.prototype,"value",void 0),t([$({type:String,reflect:!0})],Ed.prototype,"group",void 0),t([$({type:Number,reflect:!0})],Ed.prototype,"tabindex",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){t?this.setAttribute("aria-disabled","true"):this.setAttribute("aria-disabled","false")}))],Ed.prototype,"disabled",void 0),t([$({type:Boolean,reflect:!0})],Ed.prototype,"twoline",void 0),t([$({type:Boolean,reflect:!0})],Ed.prototype,"activated",void 0),t([$({type:String,reflect:!0})],Ed.prototype,"graphic",void 0),t([$({type:Boolean})],Ed.prototype,"multipleGraphics",void 0),t([$({type:Boolean})],Ed.prototype,"hasMeta",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){t?(this.removeAttribute("aria-checked"),this.removeAttribute("mwc-list-item"),this.selected=!1,this.activated=!1,this.tabIndex=-1):this.setAttribute("mwc-list-item","")}))],Ed.prototype,"noninteractive",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){const e=this.getAttribute("role"),i="gridcell"===e||"option"===e||"row"===e||"tab"===e;i&&t?this.setAttribute("aria-selected","true"):i&&this.setAttribute("aria-selected","false"),this._firstChanged?this._firstChanged=!1:this._skipPropRequest||this.fireRequestSelected(t,"property")}))],Ed.prototype,"selected",void 0),t([q()],Ed.prototype,"shouldRenderRipple",void 0),t([q()],Ed.prototype,"_managingList",void 0);const Td=st(yd||(yd=bd`:host{cursor:pointer;user-select:none;-webkit-tap-highlight-color:transparent;height:48px;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mdc-list-side-padding,16px);padding-right:var(--mdc-list-side-padding,16px);outline:0;height:48px;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87))}:host:focus{outline:0}:host([activated]){color:#6200ee;color:var(--mdc-theme-primary,#6200ee);--mdc-ripple-color:var(--mdc-theme-primary, #6200ee)}:host([activated]) .mdc-list-item__graphic{color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}:host([activated]) .fake-activated-ripple::before{position:absolute;display:block;top:0;bottom:0;left:0;right:0;width:100%;height:100%;pointer-events:none;z-index:1;content:"";opacity:.12;opacity:var(--mdc-ripple-activated-opacity,.12);background-color:#6200ee;background-color:var(--mdc-ripple-color,var(--mdc-theme-primary,#6200ee))}.mdc-list-item__graphic{flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;display:inline-flex}.mdc-list-item__graphic ::slotted(*){flex-shrink:0;align-items:center;justify-content:center;fill:currentColor;width:100%;height:100%;text-align:center}.mdc-list-item__meta{width:var(--mdc-list-item-meta-size,24px);height:var(--mdc-list-item-meta-size,24px);margin-left:auto;margin-right:0;color:rgba(0,0,0,.38);color:var(--mdc-theme-text-hint-on-background,rgba(0,0,0,.38))}.mdc-list-item__meta.multi{width:auto}.mdc-list-item__meta ::slotted(*){width:var(--mdc-list-item-meta-size,24px);line-height:var(--mdc-list-item-meta-size,24px)}.mdc-list-item__meta ::slotted(.material-icons),.mdc-list-item__meta ::slotted(mwc-icon){line-height:var(--mdc-list-item-meta-size,24px)!important}.mdc-list-item__meta ::slotted(:not(.material-icons):not(mwc-icon)){-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-caption-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.75rem;font-size:var(--mdc-typography-caption-font-size,.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight,400);letter-spacing:.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing,.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform,inherit)}:host[dir=rtl] .mdc-list-item__meta,[dir=rtl] :host .mdc-list-item__meta{margin-left:0;margin-right:auto}.mdc-list-item__meta ::slotted(*){width:100%;height:100%}.mdc-list-item__text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item__text ::slotted([for]),.mdc-list-item__text[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;margin-bottom:-20px;display:block}.mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal;display:block}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list--dense .mdc-list-item__secondary-text{font-size:inherit}* ::slotted(a),a{color:inherit;text-decoration:none}:host([twoline]){height:72px}:host([twoline]) .mdc-list-item__text{align-self:flex-start}:host([disabled]),:host([noninteractive]){cursor:default;pointer-events:none}:host([disabled]) .mdc-list-item__text ::slotted(*){opacity:.38}:host([disabled]) .mdc-list-item__primary-text ::slotted(*),:host([disabled]) .mdc-list-item__secondary-text ::slotted(*),:host([disabled]) .mdc-list-item__text ::slotted(*){color:#000;color:var(--mdc-theme-on-surface,#000)}.mdc-list-item__secondary-text ::slotted(*){color:rgba(0,0,0,.54);color:var(--mdc-theme-text-secondary-on-background,rgba(0,0,0,.54))}.mdc-list-item__graphic ::slotted(*){background-color:transparent;color:rgba(0,0,0,.38);color:var(--mdc-theme-text-icon-on-background,rgba(0,0,0,.38))}.mdc-list-group__subheader ::slotted(*){color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87))}:host([graphic=avatar]) .mdc-list-item__graphic{width:var(--mdc-list-item-graphic-size,40px);height:var(--mdc-list-item-graphic-size,40px)}:host([graphic=avatar]) .mdc-list-item__graphic.multi{width:auto}:host([graphic=avatar]) .mdc-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size,40px);line-height:var(--mdc-list-item-graphic-size,40px)}:host([graphic=avatar]) .mdc-list-item__graphic ::slotted(.material-icons),:host([graphic=avatar]) .mdc-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size,40px)!important}:host([graphic=avatar]) .mdc-list-item__graphic ::slotted(*){border-radius:50%}:host([graphic=avatar],[graphic=medium],[graphic=large],[graphic=control]) .mdc-list-item__graphic{margin-left:0;margin-right:var(--mdc-list-item-graphic-margin,16px)}:host[dir=rtl] :host([graphic=avatar],[graphic=medium],[graphic=large],[graphic=control]) .mdc-list-item__graphic,[dir=rtl] :host :host([graphic=avatar],[graphic=medium],[graphic=large],[graphic=control]) .mdc-list-item__graphic{margin-left:var(--mdc-list-item-graphic-margin,16px);margin-right:0}:host([graphic=icon]) .mdc-list-item__graphic{width:var(--mdc-list-item-graphic-size,24px);height:var(--mdc-list-item-graphic-size,24px);margin-left:0;margin-right:var(--mdc-list-item-graphic-margin,32px)}:host([graphic=icon]) .mdc-list-item__graphic.multi{width:auto}:host([graphic=icon]) .mdc-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size,24px);line-height:var(--mdc-list-item-graphic-size,24px)}:host([graphic=icon]) .mdc-list-item__graphic ::slotted(.material-icons),:host([graphic=icon]) .mdc-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size,24px)!important}:host[dir=rtl] :host([graphic=icon]) .mdc-list-item__graphic,[dir=rtl] :host :host([graphic=icon]) .mdc-list-item__graphic{margin-left:var(--mdc-list-item-graphic-margin,32px);margin-right:0}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:56px}:host([graphic=large]:not([twoLine])),:host([graphic=medium]:not([twoLine])){height:72px}:host([graphic=large]) .mdc-list-item__graphic,:host([graphic=medium]) .mdc-list-item__graphic{width:var(--mdc-list-item-graphic-size,56px);height:var(--mdc-list-item-graphic-size,56px)}:host([graphic=large]) .mdc-list-item__graphic.multi,:host([graphic=medium]) .mdc-list-item__graphic.multi{width:auto}:host([graphic=large]) .mdc-list-item__graphic ::slotted(*),:host([graphic=medium]) .mdc-list-item__graphic ::slotted(*){width:var(--mdc-list-item-graphic-size,56px);line-height:var(--mdc-list-item-graphic-size,56px)}:host([graphic=large]) .mdc-list-item__graphic ::slotted(.material-icons),:host([graphic=large]) .mdc-list-item__graphic ::slotted(mwc-icon),:host([graphic=medium]) .mdc-list-item__graphic ::slotted(.material-icons),:host([graphic=medium]) .mdc-list-item__graphic ::slotted(mwc-icon){line-height:var(--mdc-list-item-graphic-size,56px)!important}:host([graphic=large]){padding-left:0}`));class xd extends(Me(Ed)){static get scopedElements(){return{"mwc-ripple":Je}}}xd.styles=Td;var kd="Unknown",Sd="Backspace",Cd="Enter",wd="Spacebar",Id="PageUp",Rd="PageDown",Ad="End",Od="Home",Dd="ArrowLeft",Nd="ArrowUp",Md="ArrowRight",Ld="ArrowDown",Pd="Delete",Bd="Escape",Fd=new Set;Fd.add(Sd),Fd.add(Cd),Fd.add(wd),Fd.add(Id),Fd.add(Rd),Fd.add(Ad),Fd.add(Od),Fd.add(Dd),Fd.add(Nd),Fd.add(Md),Fd.add(Ld),Fd.add(Pd),Fd.add(Bd);var Hd=8,Ud=13,Vd=32,Gd=33,Wd=34,zd=35,jd=36,Xd=37,Yd=38,Kd=39,Jd=40,$d=46,qd=27,Zd=new Map;Zd.set(Hd,Sd),Zd.set(Ud,Cd),Zd.set(Vd,wd),Zd.set(Gd,Id),Zd.set(Wd,Rd),Zd.set(zd,Ad),Zd.set(jd,Od),Zd.set(Xd,Dd),Zd.set(Yd,Nd),Zd.set(Kd,Md),Zd.set(Jd,Ld),Zd.set($d,Pd),Zd.set(qd,Bd);var Qd=new Set;function tu(t){var e=t.key;if(Fd.has(e))return e;var i=Zd.get(t.keyCode);return i||kd}Qd.add(Id),Qd.add(Rd),Qd.add(Ad),Qd.add(Od),Qd.add(Dd),Qd.add(Nd),Qd.add(Md),Qd.add(Ld);var eu="mdc-list-item",iu="mdc-list-item--disabled",nu={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+eu+" button:not(:disabled),\n    ."+eu+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+eu+" button:not(:disabled),\n    ."+eu+" a,\n    ."+eu+' input[type="radio"]:not(:disabled),\n    .'+eu+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},ou={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};let ru,su,au,lu=t=>t;const cu=["input","button","textarea","select"];function du(t){return t instanceof Set}const uu=t=>{const e=t===ou.UNSET_INDEX?new Set:t;return du(e)?new Set(e):new Set([e])};class hu extends Et{constructor(t){super(Object.assign(Object.assign({},hu.defaultAdapter),t)),this.isMulti_=!1,this.wrapFocus_=!1,this.isVertical_=!0,this.selectedIndex_=ou.UNSET_INDEX,this.focusedItemIndex_=ou.UNSET_INDEX,this.useActivatedClass_=!1,this.ariaCurrentAttrValue_=null}static get strings(){return nu}static get numbers(){return ou}static get defaultAdapter(){return{focusItemAtIndex:()=>{},getFocusedElementIndex:()=>0,getListItemCount:()=>0,isFocusInsideList:()=>!1,isRootFocused:()=>!1,notifyAction:()=>{},notifySelected:()=>{},getSelectedStateForElementIndex:()=>!1,setDisabledStateForElementIndex:()=>{},getDisabledStateForElementIndex:()=>!1,setSelectedStateForElementIndex:()=>{},setActivatedStateForElementIndex:()=>{},setTabIndexForElementIndex:()=>{},setAttributeForElementIndex:()=>{},getAttributeForElementIndex:()=>null}}setWrapFocus(t){this.wrapFocus_=t}setMulti(t){this.isMulti_=t;const e=this.selectedIndex_;if(t){if(!du(e)){const t=e===ou.UNSET_INDEX;this.selectedIndex_=t?new Set:new Set([e])}}else if(du(e))if(e.size){const t=Array.from(e).sort();this.selectedIndex_=t[0]}else this.selectedIndex_=ou.UNSET_INDEX}setVerticalOrientation(t){this.isVertical_=t}setUseActivatedClass(t){this.useActivatedClass_=t}getSelectedIndex(){return this.selectedIndex_}setSelectedIndex(t){this.isIndexValid_(t)&&(this.isMulti_?this.setMultiSelectionAtIndex_(uu(t)):this.setSingleSelectionAtIndex_(t))}handleFocusIn(t,e){e>=0&&this.adapter.setTabIndexForElementIndex(e,0)}handleFocusOut(t,e){e>=0&&this.adapter.setTabIndexForElementIndex(e,-1),setTimeout((()=>{this.adapter.isFocusInsideList()||this.setTabindexToFirstSelectedItem_()}),0)}handleKeydown(t,e,i){const n="ArrowLeft"===tu(t),o="ArrowUp"===tu(t),r="ArrowRight"===tu(t),s="ArrowDown"===tu(t),a="Home"===tu(t),l="End"===tu(t),c="Enter"===tu(t),d="Spacebar"===tu(t);if(this.adapter.isRootFocused())return void(o||l?(t.preventDefault(),this.focusLastElement()):(s||a)&&(t.preventDefault(),this.focusFirstElement()));let u,h=this.adapter.getFocusedElementIndex();if(!(-1===h&&(h=i,h<0))){if(this.isVertical_&&s||!this.isVertical_&&r)this.preventDefaultEvent(t),u=this.focusNextElement(h);else if(this.isVertical_&&o||!this.isVertical_&&n)this.preventDefaultEvent(t),u=this.focusPrevElement(h);else if(a)this.preventDefaultEvent(t),u=this.focusFirstElement();else if(l)this.preventDefaultEvent(t),u=this.focusLastElement();else if((c||d)&&e){const e=t.target;if(e&&"A"===e.tagName&&c)return;this.preventDefaultEvent(t),this.setSelectedIndexOnAction_(h,!0)}this.focusedItemIndex_=h,void 0!==u&&(this.setTabindexAtIndex_(u),this.focusedItemIndex_=u)}}handleSingleSelection(t,e,i){t!==ou.UNSET_INDEX&&(this.setSelectedIndexOnAction_(t,e,i),this.setTabindexAtIndex_(t),this.focusedItemIndex_=t)}focusNextElement(t){let e=t+1;if(e>=this.adapter.getListItemCount()){if(!this.wrapFocus_)return t;e=0}return this.adapter.focusItemAtIndex(e),e}focusPrevElement(t){let e=t-1;if(e<0){if(!this.wrapFocus_)return t;e=this.adapter.getListItemCount()-1}return this.adapter.focusItemAtIndex(e),e}focusFirstElement(){return this.adapter.focusItemAtIndex(0),0}focusLastElement(){const t=this.adapter.getListItemCount()-1;return this.adapter.focusItemAtIndex(t),t}setEnabled(t,e){this.isIndexValid_(t)&&this.adapter.setDisabledStateForElementIndex(t,!e)}preventDefaultEvent(t){const e=`${t.target.tagName}`.toLowerCase();-1===cu.indexOf(e)&&t.preventDefault()}setSingleSelectionAtIndex_(t,e=!0){this.selectedIndex_!==t&&(this.selectedIndex_!==ou.UNSET_INDEX&&(this.adapter.setSelectedStateForElementIndex(this.selectedIndex_,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(this.selectedIndex_,!1)),e&&this.adapter.setSelectedStateForElementIndex(t,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(t,!0),this.setAriaForSingleSelectionAtIndex_(t),this.selectedIndex_=t,this.adapter.notifySelected(t))}setMultiSelectionAtIndex_(t,e=!0){const i=((t,e)=>{const i=Array.from(t),n=Array.from(e),o={added:[],removed:[]},r=i.sort(),s=n.sort();let a=0,l=0;for(;a<r.length||l<s.length;){const t=r[a],e=s[l];t!==e?void 0!==t&&(void 0===e||t<e)?(o.removed.push(t),a++):void 0!==e&&(void 0===t||e<t)&&(o.added.push(e),l++):(a++,l++)}return o})(uu(this.selectedIndex_),t);if(i.removed.length||i.added.length){for(const t of i.removed)e&&this.adapter.setSelectedStateForElementIndex(t,!1),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(t,!1);for(const t of i.added)e&&this.adapter.setSelectedStateForElementIndex(t,!0),this.useActivatedClass_&&this.adapter.setActivatedStateForElementIndex(t,!0);this.selectedIndex_=t,this.adapter.notifySelected(t,i)}}setAriaForSingleSelectionAtIndex_(t){this.selectedIndex_===ou.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter.getAttributeForElementIndex(t,nu.ARIA_CURRENT));const e=null!==this.ariaCurrentAttrValue_,i=e?nu.ARIA_CURRENT:nu.ARIA_SELECTED;this.selectedIndex_!==ou.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex_,i,"false");const n=e?this.ariaCurrentAttrValue_:"true";this.adapter.setAttributeForElementIndex(t,i,n)}setTabindexAtIndex_(t){this.focusedItemIndex_===ou.UNSET_INDEX&&0!==t?this.adapter.setTabIndexForElementIndex(0,-1):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==t&&this.adapter.setTabIndexForElementIndex(this.focusedItemIndex_,-1),this.adapter.setTabIndexForElementIndex(t,0)}setTabindexToFirstSelectedItem_(){let t=0;"number"==typeof this.selectedIndex_&&this.selectedIndex_!==ou.UNSET_INDEX?t=this.selectedIndex_:du(this.selectedIndex_)&&this.selectedIndex_.size>0&&(t=Math.min(...this.selectedIndex_)),this.setTabindexAtIndex_(t)}isIndexValid_(t){if(t instanceof Set){if(!this.isMulti_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");if(0===t.size)return!0;{let e=!1;for(const i of t)if(e=this.isIndexInRange_(i),e)break;return e}}if("number"==typeof t){if(this.isMulti_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+t);return t===ou.UNSET_INDEX||this.isIndexInRange_(t)}return!1}isIndexInRange_(t){const e=this.adapter.getListItemCount();return t>=0&&t<e}setSelectedIndexOnAction_(t,e,i){if(this.adapter.getDisabledStateForElementIndex(t))return;let n=t;if(this.isMulti_&&(n=new Set([t])),this.isIndexValid_(n)){if(this.isMulti_)this.toggleMultiAtIndex(t,i,e);else if(e||i)this.setSingleSelectionAtIndex_(t,e);else{this.selectedIndex_===t&&this.setSingleSelectionAtIndex_(ou.UNSET_INDEX)}e&&this.adapter.notifyAction(t)}}toggleMultiAtIndex(t,e,i=!0){let n=!1;n=void 0===e?!this.adapter.getSelectedStateForElementIndex(t):e;const o=uu(this.selectedIndex_);n?o.add(t):o.delete(t),this.setMultiSelectionAtIndex_(o,i)}}const pu=t=>t.hasAttribute("mwc-list-item");function gu(){const t=this.itemsReadyResolver;this.itemsReady=new Promise((t=>this.itemsReadyResolver=t)),t()}class fu extends _t{constructor(){super(),this.mdcAdapter=null,this.mdcFoundationClass=hu,this.activatable=!1,this.multi=!1,this.wrapFocus=!1,this.itemRoles=null,this.innerRole=null,this.innerAriaLabel=null,this.rootTabbable=!1,this.previousTabindex=null,this.noninteractive=!1,this.itemsReadyResolver=()=>{},this.itemsReady=Promise.resolve([]),this.items_=[];const t=function(t,e=50){let i;return function(n=!0){clearTimeout(i),i=setTimeout((()=>{t(n)}),e)}}(this.layout.bind(this));this.debouncedLayout=(e=!0)=>{gu.call(this),t(e)}}async _getUpdateComplete(){await super._getUpdateComplete(),await this.itemsReady}get assignedElements(){const t=this.slotElement;return t?t.assignedNodes({flatten:!0}).filter(dt):[]}get items(){return this.items_}updateItems(){const t=this.assignedElements,e=[];for(const i of t)pu(i)&&(e.push(i),i._managingList=this),i.hasAttribute("divider")&&!i.hasAttribute("role")&&i.setAttribute("role","separator");this.items_=e;const i=new Set;if(this.items_.forEach(((t,e)=>{this.itemRoles?t.setAttribute("role",this.itemRoles):t.removeAttribute("role"),t.selected&&i.add(e)})),this.multi)this.select(i);else{const t=i.size?i.entries().next().value[1]:-1;this.select(t)}const n=new Event("items-updated",{bubbles:!0,composed:!0});this.dispatchEvent(n)}get selected(){const t=this.index;if(!du(t))return-1===t?null:this.items[t];const e=[];for(const i of t)e.push(this.items[i]);return e}get index(){return this.mdcFoundation?this.mdcFoundation.getSelectedIndex():-1}render(){const t=null===this.innerRole?void 0:this.innerRole,e=null===this.innerAriaLabel?void 0:this.innerAriaLabel,i=this.rootTabbable?"0":"-1";return F(ru||(ru=lu` <ul tabindex="${0}" role="${0}" aria-label="${0}" class="mdc-list" @keydown="${0}" @focusin="${0}" @focusout="${0}" @request-selected="${0}" @list-item-rendered="${0}"> <slot></slot> ${0} </ul> `),i,Jt(t),Jt(e),this.onKeydown,this.onFocusIn,this.onFocusOut,this.onRequestSelected,this.onListItemConnected,this.renderPlaceholder())}renderPlaceholder(){return void 0!==this.emptyMessage&&0===this.assignedElements.length?F(su||(su=lu` <mwc-list-item noninteractive>${0}</mwc-list-item> `),this.emptyMessage):null}firstUpdated(){super.firstUpdated(),this.items.length||(this.mdcFoundation.setMulti(this.multi),this.layout())}onFocusIn(t){if(this.mdcFoundation&&this.mdcRoot){const e=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusIn(t,e)}}onFocusOut(t){if(this.mdcFoundation&&this.mdcRoot){const e=this.getIndexOfTarget(t);this.mdcFoundation.handleFocusOut(t,e)}}onKeydown(t){if(this.mdcFoundation&&this.mdcRoot){const e=this.getIndexOfTarget(t),i=t.target,n=pu(i);this.mdcFoundation.handleKeydown(t,n,e)}}onRequestSelected(t){if(this.mdcFoundation){let e=this.getIndexOfTarget(t);if(-1===e&&(this.layout(),e=this.getIndexOfTarget(t),-1===e))return;if(this.items[e].disabled)return;const i=t.detail.selected,n=t.detail.source;this.mdcFoundation.handleSingleSelection(e,"interaction"===n,i),t.stopPropagation()}}getIndexOfTarget(t){const e=this.items,i=t.composedPath();for(const t of i){let i=-1;if(dt(t)&&pu(t)&&(i=e.indexOf(t)),-1!==i)return i}return-1}createAdapter(){return this.mdcAdapter={getListItemCount:()=>this.mdcRoot?this.items.length:0,getFocusedElementIndex:this.getFocusedItemIndex,getAttributeForElementIndex:(t,e)=>{if(!this.mdcRoot)return"";const i=this.items[t];return i?i.getAttribute(e):""},setAttributeForElementIndex:(t,e,i)=>{if(!this.mdcRoot)return;const n=this.items[t];n&&n.setAttribute(e,i)},focusItemAtIndex:t=>{const e=this.items[t];e&&e.focus()},setTabIndexForElementIndex:(t,e)=>{const i=this.items[t];i&&(i.tabindex=e)},notifyAction:t=>{const e={bubbles:!0,composed:!0};e.detail={index:t};const i=new CustomEvent("action",e);this.dispatchEvent(i)},notifySelected:(t,e)=>{const i={bubbles:!0,composed:!0};i.detail={index:t,diff:e};const n=new CustomEvent("selected",i);this.dispatchEvent(n)},isFocusInsideList:()=>mt(this),isRootFocused:()=>{const t=this.mdcRoot;return t.getRootNode().activeElement===t},setDisabledStateForElementIndex:(t,e)=>{const i=this.items[t];i&&(i.disabled=e)},getDisabledStateForElementIndex:t=>{const e=this.items[t];return!!e&&e.disabled},setSelectedStateForElementIndex:(t,e)=>{const i=this.items[t];i&&(i.selected=e)},getSelectedStateForElementIndex:t=>{const e=this.items[t];return!!e&&e.selected},setActivatedStateForElementIndex:(t,e)=>{const i=this.items[t];i&&(i.activated=e)}},this.mdcAdapter}selectUi(t,e=!1){const i=this.items[t];i&&(i.selected=!0,i.activated=e)}deselectUi(t){const e=this.items[t];e&&(e.selected=!1,e.activated=!1)}select(t){this.mdcFoundation&&this.mdcFoundation.setSelectedIndex(t)}toggle(t,e){this.multi&&this.mdcFoundation.toggleMultiAtIndex(t,e)}onListItemConnected(t){const e=t.target;this.layout(-1===this.items.indexOf(e))}layout(t=!0){t&&this.updateItems();const e=this.items[0];for(const t of this.items)t.tabindex=-1;e&&(this.noninteractive?this.previousTabindex||(this.previousTabindex=e):e.tabindex=0),this.itemsReadyResolver()}getFocusedItemIndex(){if(!this.mdcRoot)return-1;if(!this.items.length)return-1;const t=ft();if(!t.length)return-1;for(let e=t.length-1;e>=0;e--){const i=t[e];if(pu(i))return this.items.indexOf(i)}return-1}focusItemAtIndex(t){for(const t of this.items)if(0===t.tabindex){t.tabindex=-1;break}this.items[t].tabindex=0,this.items[t].focus()}focus(){const t=this.mdcRoot;t&&t.focus()}blur(){const t=this.mdcRoot;t&&t.blur()}}t([$({type:String})],fu.prototype,"emptyMessage",void 0),t([Z(".mdc-list")],fu.prototype,"mdcRoot",void 0),t([Z("slot")],fu.prototype,"slotElement",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation&&this.mdcFoundation.setUseActivatedClass(t)}))],fu.prototype,"activatable",void 0),t([$({type:Boolean}),vt((function(t,e){this.mdcFoundation&&this.mdcFoundation.setMulti(t),void 0!==e&&this.layout()}))],fu.prototype,"multi",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation&&this.mdcFoundation.setWrapFocus(t)}))],fu.prototype,"wrapFocus",void 0),t([$({type:String}),vt((function(t,e){void 0!==e&&this.updateItems()}))],fu.prototype,"itemRoles",void 0),t([$({type:String})],fu.prototype,"innerRole",void 0),t([$({type:String})],fu.prototype,"innerAriaLabel",void 0),t([$({type:Boolean})],fu.prototype,"rootTabbable",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){const e=this.slotElement;if(t&&e){const t=ut(e,'[tabindex="0"]');this.previousTabindex=t,t&&t.setAttribute("tabindex","-1")}else!t&&this.previousTabindex&&(this.previousTabindex.setAttribute("tabindex","0"),this.previousTabindex=null)}))],fu.prototype,"noninteractive",void 0);const mu=st(au||(au=lu`@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}:host{display:block}.mdc-list{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height,1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);line-height:1.5rem;margin:0;padding:8px 0;list-style-type:none;color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87));padding:var(--mdc-list-vertical-padding,8px) 0}.mdc-list:focus{outline:0}.mdc-list-item{height:48px}.mdc-list--dense{padding-top:4px;padding-bottom:4px;font-size:.812rem}.mdc-list ::slotted([divider]){height:0;margin:0;border:none;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgba(0,0,0,.12)}.mdc-list ::slotted([divider][padded]){margin:0 var(--mdc-list-side-padding,16px)}.mdc-list ::slotted([divider][inset]){margin-left:var(--mdc-list-inset-margin,72px);margin-right:0;width:calc(100% - var(--mdc-list-inset-margin,72px))}.mdc-list-group[dir=rtl] .mdc-list ::slotted([divider][inset]),[dir=rtl] .mdc-list-group .mdc-list ::slotted([divider][inset]){margin-left:0;margin-right:var(--mdc-list-inset-margin,72px)}.mdc-list ::slotted([divider][inset][padded]){width:calc(100% - var(--mdc-list-inset-margin,72px) - var(--mdc-list-side-padding,16px))}.mdc-list--dense ::slotted([mwc-list-item]){height:40px}.mdc-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size:20px}.mdc-list--avatar-list.mdc-list--dense ::slotted([mwc-list-item]),.mdc-list--two-line.mdc-list--dense ::slotted([mwc-list-item]){height:60px}.mdc-list--avatar-list.mdc-list--dense ::slotted([mwc-list]){--mdc-list-item-graphic-size:36px}:host([noninteractive]){pointer-events:none;cursor:default}.mdc-list--dense ::slotted(.mdc-list-item__primary-text){display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list--dense ::slotted(.mdc-list-item__primary-text)::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list--dense ::slotted(.mdc-list-item__primary-text)::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}`));class _u extends(Me(fu)){static get scopedElements(){return{"mwc-list-item":xd}}}_u.styles=mu,(()=>{var t,e,i;const n=Symbol(),o=Symbol(),r=Symbol(),s=Symbol(),a=Symbol(),l=Symbol(),c=Symbol(),d=Symbol(),u=Symbol(),h=Symbol(),p=Symbol(),g=Symbol(),f=Symbol();class m{constructor(){this[t]=[],this[e]=[],this[i]=new Set}destructor(){this[u](this[r]);const t=this;t[n]=null,t[r]=null,t[o]=null}get top(){const t=this[n];return t[t.length-1]||null}push(t){t&&t!==this.top&&(this.remove(t),this[l](t),this[n].push(t))}remove(t){const e=this[n].indexOf(t);return-1!==e&&(this[n].splice(e,1),e===this[n].length&&this[l](this.top),!0)}pop(){const t=this.top;return t&&this.remove(t),t}has(t){return-1!==this[n].indexOf(t)}[(t=n,e=r,i=o,l)](t){const e=this[o],i=this[r];if(!t)return this[u](i),e.clear(),void(this[r]=[]);const n=this[h](t);if(n[n.length-1].parentNode!==document.body)throw Error("Non-connected element cannot be a blocking element");this[r]=n;const s=this[p](t);if(!i.length)return void this[d](n,s,e);let a=i.length-1,l=n.length-1;for(;a>0&&l>0&&i[a]===n[l];)a--,l--;i[a]!==n[l]&&this[c](i[a],n[l]),a>0&&this[u](i.slice(0,a)),l>0&&this[d](n.slice(0,l),s,null)}[c](t,e){const i=t[s];this[g](t)&&!t.inert&&(t.inert=!0,i.add(t)),i.has(e)&&(e.inert=!1,i.delete(e)),e[a]=t[a],e[s]=i,t[a]=void 0,t[s]=void 0}[u](t){for(const e of t){e[a].disconnect(),e[a]=void 0;const t=e[s];for(const e of t)e.inert=!1;e[s]=void 0}}[d](t,e,i){for(const n of t){const t=n.parentNode,o=t.children,r=new Set;for(let t=0;t<o.length;t++){const s=o[t];s===n||!this[g](s)||e&&e.has(s)||(i&&s.inert?i.add(s):(s.inert=!0,r.add(s)))}n[s]=r;const l=new MutationObserver(this[f].bind(this));n[a]=l;let c=t;const d=c;d.__shady&&d.host&&(c=d.host),l.observe(c,{childList:!0})}}[f](t){const e=this[r],i=this[o];for(const n of t){const t=n.target.host||n.target,o=t===document.body?e.length:e.indexOf(t),r=e[o-1],a=r[s];for(let t=0;t<n.removedNodes.length;t++){const e=n.removedNodes[t];if(e===r)return console.info("Detected removal of the top Blocking Element."),void this.pop();a.has(e)&&(e.inert=!1,a.delete(e))}for(let t=0;t<n.addedNodes.length;t++){const e=n.addedNodes[t];this[g](e)&&(i&&e.inert?i.add(e):(e.inert=!0,a.add(e)))}}}[g](t){return!1===/^(style|template|script)$/.test(t.localName)}[h](t){const e=[];let i=t;for(;i&&i!==document.body;)if(i.nodeType===Node.ELEMENT_NODE&&e.push(i),i.assignedSlot){for(;i=i.assignedSlot;)e.push(i);i=e.pop()}else i=i.parentNode||i.host;return e}[p](t){const e=t.shadowRoot;if(!e)return null;const i=new Set;let n,o,r;const s=e.querySelectorAll("slot");if(s.length&&s[0].assignedNodes)for(n=0;n<s.length;n++)for(r=s[n].assignedNodes({flatten:!0}),o=0;o<r.length;o++)r[o].nodeType===Node.ELEMENT_NODE&&i.add(r[o]);return i}}document.$blockingElements=new m})();var vu=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function yu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){if("undefined"!=typeof window){var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,i=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","[contenteditable]"].join(","),n=function(){function n(t,e){yu(this,n),this._inertManager=e,this._rootElement=t,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return vu(n,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(null!==this._savedAriaHidden?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach((function(t){this._unmanageNode(t.node)}),this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(t){var e=this;a(t,(function(t){return e._visitNode(t)}));var i=document.activeElement;if(!document.body.contains(t)){for(var n=t,o=void 0;n;){if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){o=n;break}n=n.parentNode}o&&(i=o.activeElement)}t.contains(i)&&(i.blur(),i===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t;n!==this._rootElement&&n.hasAttribute("inert")&&this._adoptInertRoot(n),(e.call(n,i)||n.hasAttribute("tabindex"))&&this._manageNode(n)}}},{key:"_manageNode",value:function(t){var e=this._inertManager.register(t,this);this._managedNodes.add(e)}},{key:"_unmanageNode",value:function(t){var e=this._inertManager.deregister(t,this);e&&this._managedNodes.delete(e)}},{key:"_unmanageSubtree",value:function(t){var e=this;a(t,(function(t){return e._unmanageNode(t)}))}},{key:"_adoptInertRoot",value:function(t){var e=this._inertManager.getInertRoot(t);e||(this._inertManager.setInert(t,!0),e=this._inertManager.getInertRoot(t)),e.managedNodes.forEach((function(t){this._manageNode(t.node)}),this)}},{key:"_onMutation",value:function(e,i){e.forEach((function(e){var i=e.target;if("childList"===e.type)t.call(e.addedNodes).forEach((function(t){this._makeSubtreeUnfocusable(t)}),this),t.call(e.removedNodes).forEach((function(t){this._unmanageSubtree(t)}),this);else if("attributes"===e.type)if("tabindex"===e.attributeName)this._manageNode(i);else if(i!==this._rootElement&&"inert"===e.attributeName&&i.hasAttribute("inert")){this._adoptInertRoot(i);var n=this._inertManager.getInertRoot(i);this._managedNodes.forEach((function(t){i.contains(t.node)&&n._manageNode(t.node)}))}}),this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return null!==this._savedAriaHidden}},{key:"savedAriaHidden",set:function(t){this._savedAriaHidden=t},get:function(){return this._savedAriaHidden}}]),n}(),o=function(){function t(e,i){yu(this,t),this._node=e,this._overrodeFocusMethod=!1,this._inertRoots=new Set([i]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return vu(t,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var t=this._node;null!==this._savedTabIndex?t.setAttribute("tabindex",this._savedTabIndex):t.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete t.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var t=this.node;if(e.call(t,i)){if(-1===t.tabIndex&&this.hasSavedTabIndex)return;t.hasAttribute("tabindex")&&(this._savedTabIndex=t.tabIndex),t.setAttribute("tabindex","-1"),t.nodeType===Node.ELEMENT_NODE&&(t.focus=function(){},this._overrodeFocusMethod=!0)}else t.hasAttribute("tabindex")&&(this._savedTabIndex=t.tabIndex,t.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(t){this._throwIfDestroyed(),this._inertRoots.add(t)}},{key:"removeInertRoot",value:function(t){this._throwIfDestroyed(),this._inertRoots.delete(t),0===this._inertRoots.size&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return null!==this._savedTabIndex}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(t){this._throwIfDestroyed(),this._savedTabIndex=t},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),t}(),r=function(){function i(t){if(yu(this,i),!t)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=t,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(t.head||t.body||t.documentElement),"loading"===t.readyState?t.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return vu(i,[{key:"setInert",value:function(t,e){if(e){if(this._inertRoots.has(t))return;var i=new n(t,this);if(t.setAttribute("inert",""),this._inertRoots.set(t,i),!this._document.body.contains(t))for(var o=t.parentNode;o;)11===o.nodeType&&l(o),o=o.parentNode}else{if(!this._inertRoots.has(t))return;this._inertRoots.get(t).destructor(),this._inertRoots.delete(t),t.removeAttribute("inert")}}},{key:"getInertRoot",value:function(t){return this._inertRoots.get(t)}},{key:"register",value:function(t,e){var i=this._managedNodes.get(t);return void 0!==i?i.addInertRoot(e):i=new o(t,e),this._managedNodes.set(t,i),i}},{key:"deregister",value:function(t,e){var i=this._managedNodes.get(t);return i?(i.removeInertRoot(e),i.destroyed&&this._managedNodes.delete(t),i):null}},{key:"_onDocumentLoaded",value:function(){t.call(this._document.querySelectorAll("[inert]")).forEach((function(t){this.setInert(t,!0)}),this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(i,n){var o=this;i.forEach((function(i){switch(i.type){case"childList":t.call(i.addedNodes).forEach((function(i){if(i.nodeType===Node.ELEMENT_NODE){var n=t.call(i.querySelectorAll("[inert]"));e.call(i,"[inert]")&&n.unshift(i),n.forEach((function(t){this.setInert(t,!0)}),o)}}),o);break;case"attributes":if("inert"!==i.attributeName)return;var n=i.target,r=n.hasAttribute("inert");o.setInert(n,r)}}),this)}}]),i}();if(!Element.prototype.hasOwnProperty("inert")){var s=new r(document);Object.defineProperty(Element.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(t){s.setInert(this,t)}})}}function a(t,e,i){if(t.nodeType==Node.ELEMENT_NODE){var n=t;e&&e(n);var o=n.shadowRoot;if(o)return void a(o,e);if("content"==n.localName){for(var r=n,s=r.getDistributedNodes?r.getDistributedNodes():[],l=0;l<s.length;l++)a(s[l],e);return}if("slot"==n.localName){for(var c=n,d=c.assignedNodes?c.assignedNodes({flatten:!0}):[],u=0;u<d.length;u++)a(d[u],e);return}}for(var h=t.firstChild;null!=h;)a(h,e),h=h.nextSibling}function l(t){if(!t.querySelector("style#inert-style, link#inert-style")){var e=document.createElement("style");e.setAttribute("id","inert-style"),e.textContent="\n[inert] {\n  pointer-events: none;\n  cursor: default;\n}\n\n[inert], [inert] * {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n",t.appendChild(e)}}}();var bu={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},Eu={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim"},Tu=function(t,e){return(Tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function xu(t,e){function i(){this.constructor=t}Tu(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ku=function(){return(ku=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Su=function(t){function e(i){var n=t.call(this,ku(ku({},e.defaultAdapter),i))||this;return n.animationFrame_=0,n.animationTimer_=0,n}return xu(e,t),Object.defineProperty(e,"strings",{get:function(){return Eu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return bu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.animationFrame_&&cancelAnimationFrame(this.animationFrame_),this.animationTimer_&&clearTimeout(this.animationTimer_)},e.prototype.open=function(){var t=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(bu.OPEN),this.adapter.addClass(bu.ANIMATE),this.runNextAnimationFrame_((function(){t.adapter.addClass(bu.OPENING)})),this.adapter.saveFocus())},e.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(bu.CLOSING)},e.prototype.isOpen=function(){return this.adapter.hasClass(bu.OPEN)},e.prototype.isOpening=function(){return this.adapter.hasClass(bu.OPENING)||this.adapter.hasClass(bu.ANIMATE)},e.prototype.isClosing=function(){return this.adapter.hasClass(bu.CLOSING)},e.prototype.handleKeydown=function(t){var e=t.keyCode;("Escape"===t.key||27===e)&&this.close()},e.prototype.handleTransitionEnd=function(t){var e=bu.OPENING,i=bu.CLOSING,n=bu.OPEN,o=bu.ANIMATE,r=bu.ROOT;this.isElement_(t.target)&&this.adapter.elementHasClass(t.target,r)&&(this.isClosing()?(this.adapter.removeClass(n),this.closed_(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened_(),this.adapter.notifyOpen()),this.adapter.removeClass(o),this.adapter.removeClass(e),this.adapter.removeClass(i))},e.prototype.opened_=function(){},e.prototype.closed_=function(){},e.prototype.runNextAnimationFrame_=function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)}))},e.prototype.isElement_=function(t){return Boolean(t.classList)},e}(Et),Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xu(e,t),e.prototype.handleScrimClick=function(){this.close()},e.prototype.opened_=function(){this.adapter.trapFocus()},e.prototype.closed_=function(){this.adapter.releaseFocus()},e}(Su);let wu,Iu,Ru,Au,Ou=t=>t;const Du=document.$blockingElements;class Nu extends _t{constructor(){super(...arguments),this._previousFocus=null,this.open=!1,this.hasHeader=!1,this.type=""}get mdcFoundationClass(){return"modal"===this.type?Cu:Su}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{elementHasClass:(t,e)=>t.classList.contains(e),saveFocus:()=>{this._previousFocus=this.getRootNode().activeElement},restoreFocus:()=>{this._previousFocus&&this._previousFocus.focus&&this._previousFocus.focus()},notifyClose:()=>{this.open=!1,this.dispatchEvent(new Event(Eu.CLOSE_EVENT,{bubbles:!0,cancelable:!0}))},notifyOpen:()=>{this.open=!0,this.dispatchEvent(new Event(Eu.OPEN_EVENT,{bubbles:!0,cancelable:!0}))},focusActiveNavigationItem:()=>{},trapFocus:()=>{Du.push(this),this.appContent.inert=!0},releaseFocus:()=>{Du.remove(this),this.appContent.inert=!1}})}_handleScrimClick(){this.mdcFoundation instanceof Cu&&this.mdcFoundation.handleScrimClick()}render(){const t="dismissible"===this.type||"modal"===this.type,e="modal"===this.type,i=this.hasHeader?F(wu||(wu=Ou` <div class="mdc-drawer__header"> <h3 class="mdc-drawer__title"><slot name="title"></slot></h3> <h6 class="mdc-drawer__subtitle"><slot name="subtitle"></slot></h6> <slot name="header"></slot> </div> `)):"";return F(Iu||(Iu=Ou` <aside class="mdc-drawer ${0}"> ${0} <div class="mdc-drawer__content"><slot></slot></div> </aside> ${0} <div class="mdc-drawer-app-content"> <slot name="appContent"></slot> </div> `),Nt({"mdc-drawer--dismissible":t,"mdc-drawer--modal":e}),i,e?F(Ru||(Ru=Ou`<div class="mdc-drawer-scrim" @click="${0}"></div>`),this._handleScrimClick):"")}firstUpdated(){this.mdcRoot.addEventListener("keydown",(t=>this.mdcFoundation.handleKeydown(t))),this.mdcRoot.addEventListener("transitionend",(t=>this.mdcFoundation.handleTransitionEnd(t)))}updated(t){t.has("type")&&this.createFoundation()}}t([Z(".mdc-drawer")],Nu.prototype,"mdcRoot",void 0),t([Z(".mdc-drawer-app-content")],Nu.prototype,"appContent",void 0),t([vt((function(t){""!==this.type&&(t?this.mdcFoundation.open():this.mdcFoundation.close())})),$({type:Boolean,reflect:!0})],Nu.prototype,"open",void 0),t([$({type:Boolean})],Nu.prototype,"hasHeader",void 0),t([$({reflect:!0})],Nu.prototype,"type",void 0);const Mu=st(Au||(Au=Ou`.mdc-drawer{border-color:rgba(0,0,0,.12);background-color:#fff;background-color:var(--mdc-theme-surface,#fff);border-top-left-radius:0;border-top-right-radius:0;border-top-right-radius:var(--mdc-shape-large,0);border-bottom-right-radius:0;border-bottom-right-radius:var(--mdc-shape-large,0);border-bottom-left-radius:0;z-index:6;width:256px;display:flex;flex-direction:column;flex-shrink:0;box-sizing:border-box;height:100%;border-right-width:1px;border-right-style:solid;overflow:hidden;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdc-drawer .mdc-drawer__title{color:rgba(0,0,0,.87)}.mdc-drawer .mdc-list-group__subheader{color:rgba(0,0,0,.6)}.mdc-drawer .mdc-drawer__subtitle{color:rgba(0,0,0,.6)}.mdc-drawer .mdc-list-item__graphic{color:rgba(0,0,0,.6)}.mdc-drawer .mdc-list-item{color:rgba(0,0,0,.87)}.mdc-drawer .mdc-list-item--activated .mdc-list-item__graphic{color:#6200ee}.mdc-drawer .mdc-list-item--activated{color:rgba(98,0,238,.87)}.mdc-drawer[dir=rtl],[dir=rtl] .mdc-drawer{border-top-left-radius:0;border-top-left-radius:var(--mdc-shape-large,0);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:0;border-bottom-left-radius:var(--mdc-shape-large,0)}.mdc-drawer .mdc-list-item{border-radius:4px;border-radius:var(--mdc-shape-small,4px)}.mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content{margin-left:256px;margin-right:0}.mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content[dir=rtl],[dir=rtl] .mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content{margin-left:0;margin-right:256px}.mdc-drawer[dir=rtl],[dir=rtl] .mdc-drawer{border-right-width:0;border-left-width:1px;border-right-style:none;border-left-style:solid}.mdc-drawer .mdc-list-item{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-subtitle2-font-size,.875rem);line-height:1.375rem;line-height:var(--mdc-typography-subtitle2-line-height,1.375rem);font-weight:500;font-weight:var(--mdc-typography-subtitle2-font-weight,500);letter-spacing:.0071428571em;letter-spacing:var(--mdc-typography-subtitle2-letter-spacing,.0071428571em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle2-text-transform,inherit);height:calc(48px - 2 * 4px);margin:8px 8px;padding:0 8px}.mdc-drawer .mdc-list-item:nth-child(1){margin-top:2px}.mdc-drawer .mdc-list-item:nth-last-child(1){margin-bottom:0}.mdc-drawer .mdc-list-group__subheader{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);display:block;margin-top:0;line-height:normal;margin:0;padding:0 16px}.mdc-drawer .mdc-list-group__subheader::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-drawer .mdc-list-divider{margin:3px 0 4px}.mdc-drawer .mdc-list-item__graphic,.mdc-drawer .mdc-list-item__text{pointer-events:none}.mdc-drawer--animate{transform:translateX(-100%)}.mdc-drawer--animate[dir=rtl],[dir=rtl] .mdc-drawer--animate{transform:translateX(100%)}.mdc-drawer--opening{transform:translateX(0);transition-duration:250ms}.mdc-drawer--opening[dir=rtl],[dir=rtl] .mdc-drawer--opening{transform:translateX(0)}.mdc-drawer--closing{transform:translateX(-100%);transition-duration:.2s}.mdc-drawer--closing[dir=rtl],[dir=rtl] .mdc-drawer--closing{transform:translateX(100%)}.mdc-drawer__header{flex-shrink:0;box-sizing:border-box;min-height:64px;padding:0 16px 4px}.mdc-drawer__title{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-headline6-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size,1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height,2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight,500);letter-spacing:.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing,.0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform,inherit);display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-drawer__title::before{display:inline-block;width:0;height:36px;content:"";vertical-align:0}.mdc-drawer__title::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-drawer__subtitle{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);display:block;margin-top:0;line-height:normal;margin-bottom:0}.mdc-drawer__subtitle::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-drawer__content{height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch}.mdc-drawer--dismissible{left:0;right:initial;display:none;position:absolute}.mdc-drawer--dismissible[dir=rtl],[dir=rtl] .mdc-drawer--dismissible{left:initial;right:0}.mdc-drawer--dismissible.mdc-drawer--open{display:flex}.mdc-drawer-app-content{margin-left:0;margin-right:0;position:relative}.mdc-drawer-app-content[dir=rtl],[dir=rtl] .mdc-drawer-app-content{margin-left:0;margin-right:0}.mdc-drawer--modal{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12);left:0;right:initial;display:none;position:fixed}.mdc-drawer--modal+.mdc-drawer-scrim{background-color:rgba(0,0,0,.32)}.mdc-drawer--modal[dir=rtl],[dir=rtl] .mdc-drawer--modal{left:initial;right:0}.mdc-drawer--modal.mdc-drawer--open{display:flex}.mdc-drawer-scrim{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:5;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdc-drawer--open+.mdc-drawer-scrim{display:block}.mdc-drawer--animate+.mdc-drawer-scrim{opacity:0}.mdc-drawer--opening+.mdc-drawer-scrim{transition-duration:250ms;opacity:1}.mdc-drawer--closing+.mdc-drawer-scrim{transition-duration:.2s;opacity:0}.mdc-drawer-app-content{overflow:auto;flex:1}:host{display:flex;height:100%}.mdc-drawer{width:256px;width:var(--mdc-drawer-width,256px)}.mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content{margin-left:256px;margin-left:var(--mdc-drawer-width,256px);margin-right:0}.mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content[dir=rtl],[dir=rtl] .mdc-drawer.mdc-drawer--open:not(.mdc-drawer--closing)+.mdc-drawer-app-content{margin-left:0;margin-right:256px;margin-right:var(--mdc-drawer-width,256px)}`));class Lu extends Nu{}Lu.styles=Mu;var Pu={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked"},Bu={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},Fu={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150},Hu=function(t,e){return(Hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Uu=function(){return(Uu=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Vu=function(t){function e(i){var n=t.call(this,Uu(Uu({},e.defaultAdapter),i))||this;return n.isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.layoutFrame_=0,n.escapeKeyAction_=Bu.CLOSE_ACTION,n.scrimClickAction_=Bu.CLOSE_ACTION,n.autoStackButtons_=!0,n.areButtonsStacked_=!1,n.suppressDefaultPressSelector=Bu.SUPPRESS_DEFAULT_PRESS_SELECTOR,n}return function(t,e){function i(){this.constructor=t}Hu(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Pu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Bu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Fu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter.hasClass(Pu.STACKED)&&this.setAutoStackButtons(!1)},e.prototype.destroy=function(){this.isOpen_&&this.close(Bu.DESTROY_ACTION),this.animationTimer_&&(clearTimeout(this.animationTimer_),this.handleAnimationTimerEnd_()),this.layoutFrame_&&(cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=0)},e.prototype.open=function(){var t=this;this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.addClass(Pu.OPENING),this.runNextAnimationFrame_((function(){t.adapter.addClass(Pu.OPEN),t.adapter.addBodyClass(Pu.SCROLL_LOCK),t.layout(),t.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter.trapFocus(t.adapter.getInitialFocusEl()),t.adapter.notifyOpened()}),Fu.DIALOG_ANIMATION_OPEN_TIME_MS)}))},e.prototype.close=function(t){var e=this;void 0===t&&(t=""),this.isOpen_&&(this.isOpen_=!1,this.adapter.notifyClosing(t),this.adapter.addClass(Pu.CLOSING),this.adapter.removeClass(Pu.OPEN),this.adapter.removeBodyClass(Pu.SCROLL_LOCK),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){e.adapter.releaseFocus(),e.handleAnimationTimerEnd_(),e.adapter.notifyClosed(t)}),Fu.DIALOG_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.isOpen_},e.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction_},e.prototype.setEscapeKeyAction=function(t){this.escapeKeyAction_=t},e.prototype.getScrimClickAction=function(){return this.scrimClickAction_},e.prototype.setScrimClickAction=function(t){this.scrimClickAction_=t},e.prototype.getAutoStackButtons=function(){return this.autoStackButtons_},e.prototype.setAutoStackButtons=function(t){this.autoStackButtons_=t},e.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},e.prototype.setSuppressDefaultPressSelector=function(t){this.suppressDefaultPressSelector=t},e.prototype.layout=function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){t.layoutInternal_(),t.layoutFrame_=0}))},e.prototype.handleClick=function(t){if(this.adapter.eventTargetMatches(t.target,Bu.SCRIM_SELECTOR)&&""!==this.scrimClickAction_)this.close(this.scrimClickAction_);else{var e=this.adapter.getActionFromEvent(t);e&&this.close(e)}},e.prototype.handleKeydown=function(t){var e="Enter"===t.key||13===t.keyCode;if(e&&!this.adapter.getActionFromEvent(t)){var i=t.composedPath?t.composedPath()[0]:t.target,n=!this.adapter.eventTargetMatches(i,this.suppressDefaultPressSelector);e&&n&&this.adapter.clickDefaultButton()}},e.prototype.handleDocumentKeydown=function(t){("Escape"===t.key||27===t.keyCode)&&""!==this.escapeKeyAction_&&this.close(this.escapeKeyAction_)},e.prototype.layoutInternal_=function(){this.autoStackButtons_&&this.detectStackedButtons_(),this.detectScrollableContent_()},e.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(Pu.OPENING),this.adapter.removeClass(Pu.CLOSING)},e.prototype.runNextAnimationFrame_=function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)}))},e.prototype.detectStackedButtons_=function(){this.adapter.removeClass(Pu.STACKED);var t=this.adapter.areButtonsStacked();t&&this.adapter.addClass(Pu.STACKED),t!==this.areButtonsStacked_&&(this.adapter.reverseButtons(),this.areButtonsStacked_=t)},e.prototype.detectScrollableContent_=function(){this.adapter.removeClass(Pu.SCROLLABLE),this.adapter.isContentScrollable()&&this.adapter.addClass(Pu.SCROLLABLE)},e}(Et);function Gu(t){return void 0===t&&(t=window),!!function(t){void 0===t&&(t=window);var e=!1;try{var i={get passive(){return e=!0,!1}},n=function(){};t.document.addEventListener("test",n,i),t.document.removeEventListener("test",n,i)}catch(t){e=!1}return e}(t)&&{passive:!0}}let Wu,zu,ju,Xu,Yu=t=>t;const Ku=document.$blockingElements;class Ju extends _t{constructor(){super(...arguments),this.hideActions=!1,this.stacked=!1,this.heading="",this.scrimClickAction="close",this.escapeKeyAction="close",this.open=!1,this.defaultAction="close",this.actionAttribute="dialogAction",this.initialFocusAttribute="dialogInitialFocus",this.mdcFoundationClass=Vu,this.boundLayout=null,this.boundHandleClick=null,this.boundHandleKeydown=null,this.boundHandleDocumentKeydown=null}get primaryButton(){let t=this.primarySlot.assignedNodes();t=t.filter((t=>t instanceof HTMLElement));const e=t[0];return e||null}emitNotification(t,e){const i=new CustomEvent(t,{detail:e?{action:e}:{}});this.dispatchEvent(i)}getInitialFocusEl(){const t=`[${this.initialFocusAttribute}]`,e=this.querySelector(t);if(e)return e;const i=this.primarySlot.assignedNodes({flatten:!0}),n=this.searchNodeTreesForAttribute(i,this.initialFocusAttribute);if(n)return n;const o=this.secondarySlot.assignedNodes({flatten:!0}),r=this.searchNodeTreesForAttribute(o,this.initialFocusAttribute);if(r)return r;const s=this.contentSlot.assignedNodes({flatten:!0});return this.searchNodeTreesForAttribute(s,this.initialFocusAttribute)}searchNodeTreesForAttribute(t,e){for(const i of t)if(i instanceof HTMLElement){if(i.hasAttribute(e))return i;{const t=i.querySelector(`[${e}]`);if(t)return t}}return null}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{addBodyClass:()=>document.body.style.overflow="hidden",removeBodyClass:()=>document.body.style.overflow="",areButtonsStacked:()=>this.stacked,clickDefaultButton:()=>{const t=this.primaryButton;t&&t.click()},eventTargetMatches:(t,e)=>!!t&&ct(t,e),getActionFromEvent:t=>{if(!t.target)return"";const e=function(t,e){if(t.closest)return t.closest(e);for(var i=t;i;){if(ct(i,e))return i;i=i.parentElement}return null}(t.target,`[${this.actionAttribute}]`);return e&&e.getAttribute(this.actionAttribute)},getInitialFocusEl:()=>this.getInitialFocusEl(),isContentScrollable:()=>{const t=this.contentElement;return!!t&&t.scrollHeight>t.offsetHeight},notifyClosed:t=>this.emitNotification("closed",t),notifyClosing:t=>{this.closingDueToDisconnect||(this.open=!1),this.emitNotification("closing",t)},notifyOpened:()=>this.emitNotification("opened"),notifyOpening:()=>{this.open=!0,this.emitNotification("opening")},reverseButtons:()=>{},releaseFocus:()=>{Ku.remove(this)},trapFocus:t=>{Ku.push(this),t&&t.focus()}})}render(){const t={[Pu.STACKED]:this.stacked};let e=F(Wu||(Wu=Yu``));this.heading&&(e=this.renderHeading());const i={"mdc-dialog__actions":!this.hideActions};return F(zu||(zu=Yu` <div class="mdc-dialog ${0}" role="alertdialog" aria-modal="true" aria-labelledby="title" aria-describedby="content"> <div class="mdc-dialog__container"> <div class="mdc-dialog__surface"> ${0} <div id="content" class="mdc-dialog__content"> <slot id="contentSlot"></slot> </div> <footer id="actions" class="${0}"> <span> <slot name="secondaryAction"></slot> </span> <span> <slot name="primaryAction"></slot> </span> </footer> </div> </div> <div class="mdc-dialog__scrim"></div> </div>`),Nt(t),e,Nt(i))}renderHeading(){return F(ju||(ju=Yu` <h2 id="title" class="mdc-dialog__title">${0}</h2>`),this.heading)}firstUpdated(){super.firstUpdated(),this.mdcFoundation.setAutoStackButtons(!0)}connectedCallback(){super.connectedCallback(),this.open&&this.mdcFoundation&&!this.mdcFoundation.isOpen()&&(this.setEventListeners(),this.mdcFoundation.open())}disconnectedCallback(){super.disconnectedCallback(),this.open&&this.mdcFoundation&&(this.removeEventListeners(),this.closingDueToDisconnect=!0,this.mdcFoundation.close(this.currentAction||this.defaultAction),this.closingDueToDisconnect=!1,this.currentAction=void 0,Ku.remove(this))}forceLayout(){this.mdcFoundation.layout()}focus(){const t=this.getInitialFocusEl();t&&t.focus()}blur(){if(!this.shadowRoot)return;const t=this.shadowRoot.activeElement;if(t)t instanceof HTMLElement&&t.blur();else{const t=this.getRootNode(),e=t instanceof Document?t.activeElement:null;e instanceof HTMLElement&&e.blur()}}setEventListeners(){this.boundHandleClick=this.mdcFoundation.handleClick.bind(this.mdcFoundation),this.boundLayout=()=>{this.open&&this.mdcFoundation.layout.bind(this.mdcFoundation)},this.boundHandleKeydown=this.mdcFoundation.handleKeydown.bind(this.mdcFoundation),this.boundHandleDocumentKeydown=this.mdcFoundation.handleDocumentKeydown.bind(this.mdcFoundation),this.mdcRoot.addEventListener("click",this.boundHandleClick),window.addEventListener("resize",this.boundLayout,Gu()),window.addEventListener("orientationchange",this.boundLayout,Gu()),this.mdcRoot.addEventListener("keydown",this.boundHandleKeydown,Gu()),document.addEventListener("keydown",this.boundHandleDocumentKeydown,Gu())}removeEventListeners(){this.boundHandleClick&&this.mdcRoot.removeEventListener("click",this.boundHandleClick),this.boundLayout&&(window.removeEventListener("resize",this.boundLayout),window.removeEventListener("orientationchange",this.boundLayout)),this.boundHandleKeydown&&this.mdcRoot.removeEventListener("keydown",this.boundHandleKeydown),this.boundHandleDocumentKeydown&&this.mdcRoot.removeEventListener("keydown",this.boundHandleDocumentKeydown)}close(){this.open=!1}show(){this.open=!0}}t([Z(".mdc-dialog")],Ju.prototype,"mdcRoot",void 0),t([Z('slot[name="primaryAction"]')],Ju.prototype,"primarySlot",void 0),t([Z('slot[name="secondaryAction"]')],Ju.prototype,"secondarySlot",void 0),t([Z("#contentSlot")],Ju.prototype,"contentSlot",void 0),t([Z(".mdc-dialog__content")],Ju.prototype,"contentElement",void 0),t([Z(".mdc-container")],Ju.prototype,"conatinerElement",void 0),t([$({type:Boolean})],Ju.prototype,"hideActions",void 0),t([$({type:Boolean}),vt((function(){this.forceLayout()}))],Ju.prototype,"stacked",void 0),t([$({type:String})],Ju.prototype,"heading",void 0),t([$({type:String}),vt((function(t){this.mdcFoundation.setScrimClickAction(t)}))],Ju.prototype,"scrimClickAction",void 0),t([$({type:String}),vt((function(t){this.mdcFoundation.setEscapeKeyAction(t)}))],Ju.prototype,"escapeKeyAction",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){this.mdcFoundation&&this.isConnected&&(t?(this.setEventListeners(),this.mdcFoundation.open()):(this.removeEventListeners(),this.mdcFoundation.close(this.currentAction||this.defaultAction),this.currentAction=void 0))}))],Ju.prototype,"open",void 0),t([$()],Ju.prototype,"defaultAction",void 0),t([$()],Ju.prototype,"actionAttribute",void 0),t([$()],Ju.prototype,"initialFocusAttribute",void 0);const $u=st(Xu||(Xu=Yu`.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:0;opacity:var(--mdc-elevation-overlay-opacity,0);transition:opacity 280ms cubic-bezier(.4,0,.2,1);background-color:#fff;background-color:var(--mdc-elevation-overlay-color,#fff)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:7}.mdc-dialog .mdc-dialog__surface{background-color:#fff;background-color:var(--mdc-theme-surface,#fff)}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0,0,0,.32)}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87)}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6)}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title{border-color:rgba(0,0,0,.12)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width:592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width:592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog .mdc-dialog__surface{border-radius:4px;border-radius:var(--mdc-shape-medium,4px)}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-dialog[dir=rtl] .mdc-dialog__surface,[dir=rtl] .mdc-dialog .mdc-dialog__surface{text-align:right}.mdc-dialog__title{display:block;margin-top:0;line-height:normal;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-headline6-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1.25rem;font-size:var(--mdc-typography-headline6-font-size,1.25rem);line-height:2rem;line-height:var(--mdc-typography-headline6-line-height,2rem);font-weight:500;font-weight:var(--mdc-typography-headline6-font-weight,500);letter-spacing:.0125em;letter-spacing:var(--mdc-typography-headline6-letter-spacing,.0125em);text-decoration:inherit;text-decoration:var(--mdc-typography-headline6-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-headline6-text-transform,inherit);position:relative;flex-shrink:0;box-sizing:border-box;margin:0;padding:0 24px 9px;border-bottom:1px solid transparent}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-dialog[dir=rtl] .mdc-dialog__title,[dir=rtl] .mdc-dialog .mdc-dialog__title{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{padding-bottom:15px}.mdc-dialog__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-body1-font-size,1rem);line-height:1.5rem;line-height:var(--mdc-typography-body1-line-height,1.5rem);font-weight:400;font-weight:var(--mdc-typography-body1-font-weight,400);letter-spacing:.03125em;letter-spacing:var(--mdc-typography-body1-letter-spacing,.03125em);text-decoration:inherit;text-decoration:var(--mdc-typography-body1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body1-text-transform,inherit);flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;-webkit-overflow-scrolling:touch}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid transparent}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}.mdc-dialog__button[dir=rtl],[dir=rtl] .mdc-dialog__button{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}.mdc-dialog__button:first-child[dir=rtl],[dir=rtl] .mdc-dialog__button:first-child{margin-left:0;margin-right:0}.mdc-dialog[dir=rtl] .mdc-dialog__button,[dir=rtl] .mdc-dialog .mdc-dialog__button{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--closing,.mdc-dialog--open,.mdc-dialog--opening{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0s cubic-bezier(0,0,.2,1)}.mdc-dialog--closing .mdc-dialog__container,.mdc-dialog--closing .mdc-dialog__scrim{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog-scroll-lock{overflow:hidden}#actions:not(.mdc-dialog__actions){display:none}.mdc-dialog__surface{box-shadow:var(--mdc-dialog-box-shadow,0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12))}@media(min-width:560px){.mdc-dialog .mdc-dialog__surface{max-width:560px;max-width:var(--mdc-dialog-max-width,560px)}}.mdc-dialog .mdc-dialog__scrim{background-color:rgba(0,0,0,.32);background-color:var(--mdc-dialog-scrim-color,rgba(0,0,0,.32))}.mdc-dialog .mdc-dialog__title{color:rgba(0,0,0,.87);color:var(--mdc-dialog-heading-ink-color,rgba(0,0,0,.87))}.mdc-dialog .mdc-dialog__content{color:rgba(0,0,0,.6);color:var(--mdc-dialog-content-ink-color,rgba(0,0,0,.6))}.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__actions,.mdc-dialog.mdc-dialog--scrollable .mdc-dialog__title{border-color:rgba(0,0,0,.12);border-color:var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog .mdc-dialog__surface{min-width:280px;min-width:var(--mdc-dialog-min-width,280px)}.mdc-dialog .mdc-dialog__surface{max-height:var(--mdc-dialog-max-height,calc(100% - 32px))}#actions ::slotted(*){margin-left:8px;margin-right:0;max-width:100%;text-align:right}#actions ::slotted(*)[dir=rtl],[dir=rtl] #actions ::slotted(*){margin-left:0;margin-right:8px}.mdc-dialog[dir=rtl] #actions ::slotted(*),[dir=rtl] .mdc-dialog #actions ::slotted(*){text-align:left}.mdc-dialog--stacked #actions{flex-direction:column-reverse}.mdc-dialog--stacked #actions :not(:last-child) ::slotted(*){flex-basis:1e-9px;margin-top:12px}`));class qu extends Ju{}qu.styles=$u;var Zu,Qu,th={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",IS_OPEN_BELOW:"mdc-menu-surface--is-open-below",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},eh={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},ih={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(t){t[t.BOTTOM=1]="BOTTOM",t[t.CENTER=2]="CENTER",t[t.RIGHT=4]="RIGHT",t[t.FLIP_RTL=8]="FLIP_RTL"}(Zu||(Zu={})),function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=4]="TOP_RIGHT",t[t.BOTTOM_LEFT=1]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",t[t.TOP_START=8]="TOP_START",t[t.TOP_END=12]="TOP_END",t[t.BOTTOM_START=9]="BOTTOM_START",t[t.BOTTOM_END=13]="BOTTOM_END"}(Qu||(Qu={}));var nh=function(t,e){return(nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var oh=function(){return(oh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var rh=function(t){function e(i){var n=t.call(this,oh(oh({},e.defaultAdapter),i))||this;return n.isSurfaceOpen=!1,n.isQuickOpen=!1,n.isHoistedElement=!1,n.isFixedPosition=!1,n.openAnimationEndTimerId=0,n.closeAnimationEndTimerId=0,n.animationRequestId=0,n.anchorCorner=Qu.TOP_START,n.originCorner=Qu.TOP_START,n.anchorMargin={top:0,right:0,bottom:0,left:0},n.position={x:0,y:0},n}return function(t,e){function i(){this.constructor=t}nh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return th},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return eh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return ih},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Corner",{get:function(){return Qu},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=e.cssClasses,i=t.ROOT,n=t.OPEN;if(!this.adapter.hasClass(i))throw new Error(i+" class required in root element.");this.adapter.hasClass(n)&&(this.isSurfaceOpen=!0)},e.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId),clearTimeout(this.closeAnimationEndTimerId),cancelAnimationFrame(this.animationRequestId)},e.prototype.setAnchorCorner=function(t){this.anchorCorner=t},e.prototype.flipCornerHorizontally=function(){this.originCorner=this.originCorner^Zu.RIGHT},e.prototype.setAnchorMargin=function(t){this.anchorMargin.top=t.top||0,this.anchorMargin.right=t.right||0,this.anchorMargin.bottom=t.bottom||0,this.anchorMargin.left=t.left||0},e.prototype.setIsHoisted=function(t){this.isHoistedElement=t},e.prototype.setFixedPosition=function(t){this.isFixedPosition=t},e.prototype.setAbsolutePosition=function(t,e){this.position.x=this.isFinite(t)?t:0,this.position.y=this.isFinite(e)?e:0},e.prototype.setQuickOpen=function(t){this.isQuickOpen=t},e.prototype.isOpen=function(){return this.isSurfaceOpen},e.prototype.open=function(){var t=this;this.isSurfaceOpen||(this.adapter.saveFocus(),this.isQuickOpen?(this.isSurfaceOpen=!0,this.adapter.addClass(e.cssClasses.OPEN),this.dimensions=this.adapter.getInnerDimensions(),this.autoposition(),this.adapter.notifyOpen()):(this.adapter.addClass(e.cssClasses.ANIMATING_OPEN),this.animationRequestId=requestAnimationFrame((function(){t.adapter.addClass(e.cssClasses.OPEN),t.dimensions=t.adapter.getInnerDimensions(),t.autoposition(),t.openAnimationEndTimerId=setTimeout((function(){t.openAnimationEndTimerId=0,t.adapter.removeClass(e.cssClasses.ANIMATING_OPEN),t.adapter.notifyOpen()}),ih.TRANSITION_OPEN_DURATION)})),this.isSurfaceOpen=!0))},e.prototype.close=function(t){var i=this;void 0===t&&(t=!1),this.isSurfaceOpen&&(this.isQuickOpen?(this.isSurfaceOpen=!1,t||this.maybeRestoreFocus(),this.adapter.removeClass(e.cssClasses.OPEN),this.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),this.adapter.notifyClose()):(this.adapter.addClass(e.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){i.adapter.removeClass(e.cssClasses.OPEN),i.adapter.removeClass(e.cssClasses.IS_OPEN_BELOW),i.closeAnimationEndTimerId=setTimeout((function(){i.closeAnimationEndTimerId=0,i.adapter.removeClass(e.cssClasses.ANIMATING_CLOSED),i.adapter.notifyClose()}),ih.TRANSITION_CLOSE_DURATION)})),this.isSurfaceOpen=!1,t||this.maybeRestoreFocus()))},e.prototype.handleBodyClick=function(t){var e=t.target;this.adapter.isElementInContainer(e)||this.close()},e.prototype.handleKeydown=function(t){var e=t.keyCode;("Escape"===t.key||27===e)&&this.close()},e.prototype.autoposition=function(){var t;this.measurements=this.getAutoLayoutmeasurements();var i=this.getoriginCorner(),n=this.getMenuSurfaceMaxHeight(i),o=this.hasBit(i,Zu.BOTTOM)?"bottom":"top",r=this.hasBit(i,Zu.RIGHT)?"right":"left",s=this.getHorizontalOriginOffset(i),a=this.getVerticalOriginOffset(i),l=this.measurements,c=l.anchorSize,d=l.surfaceSize,u=((t={})[r]=s,t[o]=a,t);c.width/d.width>ih.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(r="center"),(this.isHoistedElement||this.isFixedPosition)&&this.adjustPositionForHoistedElement(u),this.adapter.setTransformOrigin(r+" "+o),this.adapter.setPosition(u),this.adapter.setMaxHeight(n?n+"px":""),this.hasBit(i,Zu.BOTTOM)||this.adapter.addClass(e.cssClasses.IS_OPEN_BELOW)},e.prototype.getAutoLayoutmeasurements=function(){var t=this.adapter.getAnchorDimensions(),e=this.adapter.getBodyDimensions(),i=this.adapter.getWindowDimensions(),n=this.adapter.getWindowScroll();return t||(t={top:this.position.y,right:this.position.x,bottom:this.position.y,left:this.position.x,width:0,height:0}),{anchorSize:t,bodySize:e,surfaceSize:this.dimensions,viewportDistance:{top:t.top,right:i.width-t.right,bottom:i.height-t.bottom,left:t.left},viewportSize:i,windowScroll:n}},e.prototype.getoriginCorner=function(){var t,i,n=this.originCorner,o=this.measurements,r=o.viewportDistance,s=o.anchorSize,a=o.surfaceSize,l=e.numbers.MARGIN_TO_EDGE;this.hasBit(this.anchorCorner,Zu.BOTTOM)?(t=r.top-l+s.height+this.anchorMargin.bottom,i=r.bottom-l-this.anchorMargin.bottom):(t=r.top-l+this.anchorMargin.top,i=r.bottom-l+s.height-this.anchorMargin.top),!(i-a.height>0)&&t>=i&&(n=this.setBit(n,Zu.BOTTOM));var c,d,u=this.adapter.isRtl(),h=this.hasBit(this.anchorCorner,Zu.FLIP_RTL),p=this.hasBit(this.anchorCorner,Zu.RIGHT)||this.hasBit(n,Zu.RIGHT),g=!1;(g=u&&h?!p:p)?(c=r.left+s.width+this.anchorMargin.right,d=r.right-this.anchorMargin.right):(c=r.left+this.anchorMargin.left,d=r.right+s.width-this.anchorMargin.left);var f=c-a.width>0,m=d-a.width>0,_=this.hasBit(n,Zu.FLIP_RTL)&&this.hasBit(n,Zu.RIGHT);return m&&_&&u||!f&&_?n=this.unsetBit(n,Zu.RIGHT):(f&&g&&u||f&&!g&&p||!m&&c>=d)&&(n=this.setBit(n,Zu.RIGHT)),n},e.prototype.getMenuSurfaceMaxHeight=function(t){var i=this.measurements.viewportDistance,n=0,o=this.hasBit(t,Zu.BOTTOM),r=this.hasBit(this.anchorCorner,Zu.BOTTOM),s=e.numbers.MARGIN_TO_EDGE;return o?(n=i.top+this.anchorMargin.top-s,r||(n+=this.measurements.anchorSize.height)):(n=i.bottom-this.anchorMargin.bottom+this.measurements.anchorSize.height-s,r&&(n-=this.measurements.anchorSize.height)),n},e.prototype.getHorizontalOriginOffset=function(t){var e=this.measurements.anchorSize,i=this.hasBit(t,Zu.RIGHT),n=this.hasBit(this.anchorCorner,Zu.RIGHT);if(i){var o=n?e.width-this.anchorMargin.left:this.anchorMargin.right;return this.isHoistedElement||this.isFixedPosition?o-(this.measurements.viewportSize.width-this.measurements.bodySize.width):o}return n?e.width-this.anchorMargin.right:this.anchorMargin.left},e.prototype.getVerticalOriginOffset=function(t){var e=this.measurements.anchorSize,i=this.hasBit(t,Zu.BOTTOM),n=this.hasBit(this.anchorCorner,Zu.BOTTOM);return i?n?e.height-this.anchorMargin.top:-this.anchorMargin.bottom:n?e.height+this.anchorMargin.bottom:this.anchorMargin.top},e.prototype.adjustPositionForHoistedElement=function(t){var e,i,n=this.measurements,o=n.windowScroll,r=n.viewportDistance,s=Object.keys(t);try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),l=a.next();!l.done;l=a.next()){var c=l.value,d=t[c]||0;d+=r[c],this.isFixedPosition||("top"===c?d+=o.y:"bottom"===c?d-=o.y:"left"===c?d+=o.x:d-=o.x),t[c]=d}}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}},e.prototype.maybeRestoreFocus=function(){var t=this.adapter.isFocused(),e=document.activeElement&&this.adapter.isElementInContainer(document.activeElement);(t||e)&&this.adapter.restoreFocus()},e.prototype.hasBit=function(t,e){return Boolean(t&e)},e.prototype.setBit=function(t,e){return t|e},e.prototype.unsetBit=function(t,e){return t^e},e.prototype.isFinite=function(t){return"number"==typeof t&&isFinite(t)},e}(Et);let sh,ah,lh=t=>t;const ch={TOP_LEFT:Qu.TOP_LEFT,TOP_RIGHT:Qu.TOP_RIGHT,BOTTOM_LEFT:Qu.BOTTOM_LEFT,BOTTOM_RIGHT:Qu.BOTTOM_RIGHT,TOP_START:Qu.TOP_START,TOP_END:Qu.TOP_END,BOTTOM_START:Qu.BOTTOM_START,BOTTOM_END:Qu.BOTTOM_END};class dh extends _t{constructor(){super(...arguments),this.mdcFoundationClass=rh,this.absolute=!1,this.fullwidth=!1,this.fixed=!1,this.x=null,this.y=null,this.quick=!1,this.open=!1,this.bitwiseCorner=Qu.TOP_START,this.previousMenuCorner=null,this.menuCorner="START",this.corner="TOP_START",this.styleTop="",this.styleLeft="",this.styleRight="",this.styleBottom="",this.styleMaxHeight="",this.styleTransformOrigin="",this.anchor=null,this.previouslyFocused=null,this.previousAnchor=null,this.onBodyClickBound=()=>{}}render(){const t={"mdc-menu-surface--fixed":this.fixed,"mdc-menu-surface--fullwidth":this.fullwidth},e={top:this.styleTop,left:this.styleLeft,right:this.styleRight,bottom:this.styleBottom,"max-height":this.styleMaxHeight,"transform-origin":this.styleTransformOrigin};return F(sh||(sh=lh` <div class="mdc-menu-surface ${0}" style="${0}" @keydown="${0}" @opened="${0}" @closed="${0}"> <slot></slot> </div>`),Nt(t),qt(e),this.onKeydown,this.registerBodyClick,this.deregisterBodyClick)}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{hasAnchor:()=>!!this.anchor,notifyClose:()=>{const t=new CustomEvent("closed",{bubbles:!0,composed:!0});this.open=!1,this.mdcRoot.dispatchEvent(t)},notifyOpen:()=>{const t=new CustomEvent("opened",{bubbles:!0,composed:!0});this.open=!0,this.mdcRoot.dispatchEvent(t)},isElementInContainer:()=>!1,isRtl:()=>!!this.mdcRoot&&"rtl"===getComputedStyle(this.mdcRoot).direction,setTransformOrigin:t=>{this.mdcRoot&&(this.styleTransformOrigin=t)},isFocused:()=>mt(this),saveFocus:()=>{const t=ft(),e=t.length;e||(this.previouslyFocused=null),this.previouslyFocused=t[e-1]},restoreFocus:()=>{this.previouslyFocused&&"focus"in this.previouslyFocused&&this.previouslyFocused.focus()},getInnerDimensions:()=>{const t=this.mdcRoot;return t?{width:t.offsetWidth,height:t.offsetHeight}:{width:0,height:0}},getAnchorDimensions:()=>{const t=this.anchor;return t?t.getBoundingClientRect():null},getBodyDimensions:()=>({width:document.body.clientWidth,height:document.body.clientHeight}),getWindowDimensions:()=>({width:window.innerWidth,height:window.innerHeight}),getWindowScroll:()=>({x:window.pageXOffset,y:window.pageYOffset}),setPosition:t=>{this.mdcRoot&&(this.styleLeft="left"in t?`${t.left}px`:"",this.styleRight="right"in t?`${t.right}px`:"",this.styleTop="top"in t?`${t.top}px`:"",this.styleBottom="bottom"in t?`${t.bottom}px`:"")},setMaxHeight:async t=>{this.mdcRoot&&(this.styleMaxHeight=t,await this.updateComplete,this.styleMaxHeight=`var(--mdc-menu-max-height, ${t})`)}})}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onBodyClick(t){-1===t.composedPath().indexOf(this)&&this.close()}registerBodyClick(){this.onBodyClickBound=this.onBodyClick.bind(this),document.body.addEventListener("click",this.onBodyClickBound,{passive:!0,capture:!0})}deregisterBodyClick(){document.body.removeEventListener("click",this.onBodyClickBound,{capture:!0})}close(){this.open=!1}show(){this.open=!0}}t([Z(".mdc-menu-surface")],dh.prototype,"mdcRoot",void 0),t([Z("slot")],dh.prototype,"slotElement",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation&&!this.fixed&&this.mdcFoundation.setIsHoisted(t)}))],dh.prototype,"absolute",void 0),t([$({type:Boolean})],dh.prototype,"fullwidth",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation&&!this.absolute&&this.mdcFoundation.setIsHoisted(t)}))],dh.prototype,"fixed",void 0),t([$({type:Number}),vt((function(t){this.mdcFoundation&&null!==this.y&&null!==t&&(this.mdcFoundation.setAbsolutePosition(t,this.y),this.mdcFoundation.setAnchorMargin({left:t,top:this.y,right:-t,bottom:this.y}))}))],dh.prototype,"x",void 0),t([$({type:Number}),vt((function(t){this.mdcFoundation&&null!==this.x&&null!==t&&(this.mdcFoundation.setAbsolutePosition(this.x,t),this.mdcFoundation.setAnchorMargin({left:this.x,top:t,right:-this.x,bottom:t}))}))],dh.prototype,"y",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation&&this.mdcFoundation.setQuickOpen(t)}))],dh.prototype,"quick",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t,e){this.mdcFoundation&&(t?this.mdcFoundation.open():void 0!==e&&this.mdcFoundation.close())}))],dh.prototype,"open",void 0),t([q(),vt((function(t){this.mdcFoundation&&this.mdcFoundation.setAnchorCorner(t)}))],dh.prototype,"bitwiseCorner",void 0),t([$({type:String}),vt((function(t){if(this.mdcFoundation){const e="START"===t||"END"===t,i=null===this.previousMenuCorner,n=!i&&t!==this.previousMenuCorner,o=i&&"END"===t;e&&(n||o)&&(this.bitwiseCorner=this.bitwiseCorner^Zu.RIGHT,this.mdcFoundation.flipCornerHorizontally(),this.previousMenuCorner=t)}}))],dh.prototype,"menuCorner",void 0),t([$({type:String}),vt((function(t){if(this.mdcFoundation&&t){let e=ch[t];"END"===this.menuCorner&&(e^=Zu.RIGHT),this.bitwiseCorner=e}}))],dh.prototype,"corner",void 0),t([q()],dh.prototype,"styleTop",void 0),t([q()],dh.prototype,"styleLeft",void 0),t([q()],dh.prototype,"styleRight",void 0),t([q()],dh.prototype,"styleBottom",void 0),t([q()],dh.prototype,"styleMaxHeight",void 0),t([q()],dh.prototype,"styleTransformOrigin",void 0);const uh=st(ah||(ah=lh`.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-height:calc(100vh - 32px);margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;transition:opacity .03s linear,transform .12s cubic-bezier(0,0,.2,1),height 250ms cubic-bezier(0,0,.2,1);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);background-color:#fff;background-color:var(--mdc-theme-surface,#fff);color:#000;color:var(--mdc-theme-on-surface,#000);border-radius:4px;border-radius:var(--mdc-shape-medium,4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(.8);opacity:0}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0;transition:opacity 75ms linear}.mdc-menu-surface[dir=rtl],[dir=rtl] .mdc-menu-surface{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}:host(:not([open])){display:none}.mdc-menu-surface{z-index:8;z-index:var(--mdc-menu-z-index,8);max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height,calc(100vh - 32px))}`));class hh extends dh{}hh.styles=uh;var ph=function(t,e){return(ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var gh=function(){return(gh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},fh={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}},mh={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function _h(t){return Boolean(t.document)&&"function"==typeof t.document.createElement}var vh=function(){function t(t){void 0===t&&(t={}),this.adapter=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),yh={ACTIVE:"mdc-slider--active",DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",FOCUS:"mdc-slider--focus",HAS_TRACK_MARKER:"mdc-slider--display-markers",IN_TRANSIT:"mdc-slider--in-transit",IS_DISCRETE:"mdc-slider--discrete",DISABLE_TOUCH_ACTION:"mdc-slider--disable-touch-action"},bh={ARIA_DISABLED:"aria-disabled",ARIA_VALUEMAX:"aria-valuemax",ARIA_VALUEMIN:"aria-valuemin",ARIA_VALUENOW:"aria-valuenow",CHANGE_EVENT:"MDCSlider:change",INPUT_EVENT:"MDCSlider:input",PIN_VALUE_MARKER_SELECTOR:".mdc-slider__pin-value-marker",STEP_DATA_ATTR:"data-step",THUMB_CONTAINER_SELECTOR:".mdc-slider__thumb-container",TRACK_MARKER_CONTAINER_SELECTOR:".mdc-slider__track-marker-container",TRACK_SELECTOR:".mdc-slider__track"},Eh={PAGE_FACTOR:4},Th="undefined"!=typeof window,xh=Th&&!!window.PointerEvent,kh=xh?["pointerdown"]:["mousedown","touchstart"],Sh=xh?["pointerup"]:["mouseup","touchend"],Ch={mousedown:"mousemove",pointerdown:"pointermove",touchstart:"touchmove"},wh="ArrowDown",Ih="ArrowLeft",Rh="ArrowRight",Ah="ArrowUp",Oh="End",Dh="Home",Nh="PageDown",Mh="PageUp",Lh=function(t){function e(i){var n=t.call(this,gh(gh({},e.defaultAdapter),i))||this;return n.savedTabIndex_=NaN,n.active_=!1,n.inTransit_=!1,n.isDiscrete_=!1,n.hasTrackMarker_=!1,n.handlingThumbTargetEvt_=!1,n.min_=0,n.max_=100,n.step_=0,n.value_=0,n.disabled_=!1,n.preventFocusState_=!1,n.thumbContainerPointerHandler_=function(){return n.handlingThumbTargetEvt_=!0},n.interactionStartHandler_=function(t){return n.handleDown_(t)},n.keydownHandler_=function(t){return n.handleKeydown_(t)},n.focusHandler_=function(){return n.handleFocus_()},n.blurHandler_=function(){return n.handleBlur_()},n.resizeHandler_=function(){return n.layout()},n}return function(t,e){function i(){this.constructor=t}ph(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return yh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return bh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Eh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},getAttribute:function(){return null},setAttribute:function(){},removeAttribute:function(){},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getTabIndex:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},registerThumbContainerInteractionHandler:function(){},deregisterThumbContainerInteractionHandler:function(){},registerBodyInteractionHandler:function(){},deregisterBodyInteractionHandler:function(){},registerResizeHandler:function(){},deregisterResizeHandler:function(){},notifyInput:function(){},notifyChange:function(){},setThumbContainerStyleProperty:function(){},setTrackStyleProperty:function(){},setMarkerValue:function(){},setTrackMarkers:function(){},isRTL:function(){return!1}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.isDiscrete_=this.adapter.hasClass(yh.IS_DISCRETE),this.hasTrackMarker_=this.adapter.hasClass(yh.HAS_TRACK_MARKER),kh.forEach((function(e){t.adapter.registerInteractionHandler(e,t.interactionStartHandler_),t.adapter.registerThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)})),xh&&this.adapter.addClass(yh.DISABLE_TOUCH_ACTION),this.adapter.registerInteractionHandler("keydown",this.keydownHandler_),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_),this.adapter.registerResizeHandler(this.resizeHandler_),this.layout(),this.isDiscrete_&&0===this.getStep()&&(this.step_=1)},e.prototype.destroy=function(){var t=this;kh.forEach((function(e){t.adapter.deregisterInteractionHandler(e,t.interactionStartHandler_),t.adapter.deregisterThumbContainerInteractionHandler(e,t.thumbContainerPointerHandler_)})),this.adapter.deregisterInteractionHandler("keydown",this.keydownHandler_),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.deregisterResizeHandler(this.resizeHandler_)},e.prototype.setupTrackMarker=function(){this.isDiscrete_&&this.hasTrackMarker_&&0!==this.getStep()&&this.adapter.setTrackMarkers(this.getStep(),this.getMax(),this.getMin())},e.prototype.layout=function(){this.rect_=this.adapter.computeBoundingRect(),this.updateUIForCurrentValue_()},e.prototype.getValue=function(){return this.value_},e.prototype.setValue=function(t){this.setValue_(t,!1)},e.prototype.getMax=function(){return this.max_},e.prototype.setMax=function(t){if(t<this.min_)throw new Error("Cannot set max to be less than the slider's minimum value");this.max_=t,this.setValue_(this.value_,!1,!0),this.adapter.setAttribute(bh.ARIA_VALUEMAX,String(this.max_)),this.setupTrackMarker()},e.prototype.getMin=function(){return this.min_},e.prototype.setMin=function(t){if(t>this.max_)throw new Error("Cannot set min to be greater than the slider's maximum value");this.min_=t,this.setValue_(this.value_,!1,!0),this.adapter.setAttribute(bh.ARIA_VALUEMIN,String(this.min_)),this.setupTrackMarker()},e.prototype.getStep=function(){return this.step_},e.prototype.setStep=function(t){if(t<0)throw new Error("Step cannot be set to a negative number");this.isDiscrete_&&("number"!=typeof t||t<1)&&(t=1),this.step_=t,this.setValue_(this.value_,!1,!0),this.setupTrackMarker()},e.prototype.isDisabled=function(){return this.disabled_},e.prototype.setDisabled=function(t){this.disabled_=t,this.toggleClass_(yh.DISABLED,this.disabled_),this.disabled_?(this.savedTabIndex_=this.adapter.getTabIndex(),this.adapter.setAttribute(bh.ARIA_DISABLED,"true"),this.adapter.removeAttribute("tabindex")):(this.adapter.removeAttribute(bh.ARIA_DISABLED),isNaN(this.savedTabIndex_)||this.adapter.setAttribute("tabindex",String(this.savedTabIndex_)))},e.prototype.handleDown_=function(t){var e=this;if(!this.disabled_){this.preventFocusState_=!0,this.setInTransit_(!this.handlingThumbTargetEvt_),this.handlingThumbTargetEvt_=!1,this.setActive_(!0);var i=function(t){e.handleMove_(t)},n=Ch[t.type],o=function(){e.handleUp_(),e.adapter.deregisterBodyInteractionHandler(n,i),Sh.forEach((function(t){return e.adapter.deregisterBodyInteractionHandler(t,o)}))};this.adapter.registerBodyInteractionHandler(n,i),Sh.forEach((function(t){return e.adapter.registerBodyInteractionHandler(t,o)})),this.setValueFromEvt_(t)}},e.prototype.handleMove_=function(t){t.preventDefault(),this.setValueFromEvt_(t)},e.prototype.handleUp_=function(){this.setActive_(!1),this.adapter.notifyChange()},e.prototype.getClientX_=function(t){return t.targetTouches&&t.targetTouches.length>0?t.targetTouches[0].clientX:t.clientX},e.prototype.setValueFromEvt_=function(t){var e=this.getClientX_(t),i=this.computeValueFromClientX_(e);this.setValue_(i,!0)},e.prototype.computeValueFromClientX_=function(t){var e=this.max_,i=this.min_,n=(t-this.rect_.left)/this.rect_.width;return this.adapter.isRTL()&&(n=1-n),i+n*(e-i)},e.prototype.handleKeydown_=function(t){var e=this.getKeyId_(t),i=this.getValueForKeyId_(e);isNaN(i)||(t.preventDefault(),this.adapter.addClass(yh.FOCUS),this.setValue_(i,!0),this.adapter.notifyChange())},e.prototype.getKeyId_=function(t){return t.key===Ih||37===t.keyCode?Ih:t.key===Rh||39===t.keyCode?Rh:t.key===Ah||38===t.keyCode?Ah:t.key===wh||40===t.keyCode?wh:t.key===Dh||36===t.keyCode?Dh:t.key===Oh||35===t.keyCode?Oh:t.key===Mh||33===t.keyCode?Mh:t.key===Nh||34===t.keyCode?Nh:""},e.prototype.getValueForKeyId_=function(t){var e=this,i=e.max_,n=e.min_,o=e.step_||(i-n)/100;switch(this.adapter.isRTL()&&(t===Ih||t===Rh)&&(o=-o),t){case Ih:case wh:return this.value_-o;case Rh:case Ah:return this.value_+o;case Dh:return this.min_;case Oh:return this.max_;case Mh:return this.value_+o*Eh.PAGE_FACTOR;case Nh:return this.value_-o*Eh.PAGE_FACTOR;default:return NaN}},e.prototype.handleFocus_=function(){this.preventFocusState_||this.adapter.addClass(yh.FOCUS)},e.prototype.handleBlur_=function(){this.preventFocusState_=!1,this.adapter.removeClass(yh.FOCUS)},e.prototype.setValue_=function(t,e,i){if(void 0===i&&(i=!1),t!==this.value_||i){var n=this.min_,o=this.max_,r=t===n||t===o;this.step_&&!r&&(t=this.quantize_(t)),t<n?t=n:t>o&&(t=o),t=t||0,this.value_=t,this.adapter.setAttribute(bh.ARIA_VALUENOW,String(this.value_)),this.updateUIForCurrentValue_(),e&&(this.adapter.notifyInput(),this.isDiscrete_&&this.adapter.setMarkerValue(t))}},e.prototype.quantize_=function(t){return Math.round(t/this.step_)*this.step_},e.prototype.updateUIForCurrentValue_=function(){var t=this,e=this,i=e.max_,n=e.min_,o=(e.value_-n)/(i-n),r=o*this.rect_.width;this.adapter.isRTL()&&(r=this.rect_.width-r);var s=Th?function(t,e){if(_h(t)&&e in fh){var i=t.document.createElement("div"),n=fh[e],o=n.standard,r=n.prefixed;return o in i.style?o:r}return e}(window,"transform"):"transform",a=Th?function(t,e){if(_h(t)&&e in mh){var i=t.document.createElement("div"),n=mh[e],o=n.standard,r=n.prefixed;return n.cssProperty in i.style?o:r}return e}(window,"transitionend"):"transitionend";if(this.inTransit_){var l=function(){t.setInTransit_(!1),t.adapter.deregisterThumbContainerInteractionHandler(a,l)};this.adapter.registerThumbContainerInteractionHandler(a,l)}requestAnimationFrame((function(){t.adapter.setThumbContainerStyleProperty(s,"translateX("+r+"px) translateX(-50%)"),t.adapter.setTrackStyleProperty(s,"scaleX("+o+")")}))},e.prototype.setActive_=function(t){this.active_=t,this.toggleClass_(yh.ACTIVE,this.active_)},e.prototype.setInTransit_=function(t){this.inTransit_=t,this.toggleClass_(yh.IN_TRANSIT,this.inTransit_)},e.prototype.toggleClass_=function(t,e){e?this.adapter.addClass(t):this.adapter.removeClass(t)},e}(vh);let Ph,Bh,Fh,Hh,Uh=t=>t;class Vh extends Aa{constructor(){super(...arguments),this.mdcFoundationClass=Lh,this.min=0,this.max=100,this._value=0,this.step=0,this.disabled=!1,this.pin=!1,this.markers=!1,this.pinMarkerText="",this.trackMarkerContainerStyles={},this.thumbContainerStyles={},this.trackStyles={},this.isFoundationDestroyed=!1}set value(t){this.mdcFoundation&&this.mdcFoundation.setValue(t),this._value=t,this.requestUpdate("value",t)}get value(){return this.mdcFoundation?this.mdcFoundation.getValue():this._value}render(){const t=0!==this.step,e={"mdc-slider--discrete":t,"mdc-slider--display-markers":this.markers&&t};let i="";t&&this.markers&&(i=F(Ph||(Ph=Uh` <div class="mdc-slider__track-marker-container" style="${0}"> </div>`),qt(this.trackMarkerContainerStyles)));let n="";return this.pin&&(n=F(Bh||(Bh=Uh` <div class="mdc-slider__pin"> <span class="mdc-slider__pin-value-marker">${0}</span> </div>`),this.pinMarkerText)),F(Fh||(Fh=Uh` <div class="mdc-slider ${0}" tabindex="0" role="slider" aria-valuemin="${0}" aria-valuemax="${0}" aria-valuenow="${0}" aria-disabled="${0}" data-step="${0}" @mousedown="${0}" @touchstart="${0}"> <div class="mdc-slider__track-container"> <div class="mdc-slider__track" style="${0}"> </div> ${0} </div> <div class="mdc-slider__thumb-container" style="${0}"> ${0} <svg class="mdc-slider__thumb" width="21" height="21"> <circle cx="10.5" cy="10.5" r="7.875"></circle> </svg> <div class="mdc-slider__focus-ring"></div> </div> </div>`),Nt(e),this.min,this.max,this.value,this.disabled.toString(),this.step,this.layout,this.layout,qt(this.trackStyles),i,qt(this.thumbContainerStyles),n)}connectedCallback(){super.connectedCallback(),this.mdcRoot&&this.isFoundationDestroyed&&(this.isFoundationDestroyed=!1,this.mdcFoundation.init())}updated(t){const e=t.has("min"),i=t.has("max");e&&i?this.max<this.mdcFoundation.getMin()?(this.mdcFoundation.setMin(this.min),this.mdcFoundation.setMax(this.max)):(this.mdcFoundation.setMax(this.max),this.mdcFoundation.setMin(this.min)):e?this.mdcFoundation.setMin(this.min):i&&this.mdcFoundation.setMax(this.max),super.updated(t)}disconnectedCallback(){super.disconnectedCallback(),this.isFoundationDestroyed=!0,this.mdcFoundation.destroy()}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{getAttribute:t=>this.mdcRoot.getAttribute(t),setAttribute:(t,e)=>this.mdcRoot.setAttribute(t,e),removeAttribute:t=>this.mdcRoot.removeAttribute(t),computeBoundingRect:()=>{const t=this.mdcRoot.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left+window.pageXOffset,right:t.right,top:t.top,width:t.width}},getTabIndex:()=>this.mdcRoot.tabIndex,registerInteractionHandler:(t,e)=>{const i="touchstart"===t?Gu():void 0;this.mdcRoot.addEventListener(t,e,i)},deregisterInteractionHandler:(t,e)=>this.mdcRoot.removeEventListener(t,e),registerThumbContainerInteractionHandler:(t,e)=>{const i="touchstart"===t?Gu():void 0;this.thumbContainer.addEventListener(t,e,i)},deregisterThumbContainerInteractionHandler:(t,e)=>this.thumbContainer.removeEventListener(t,e),registerBodyInteractionHandler:(t,e)=>document.body.addEventListener(t,e),deregisterBodyInteractionHandler:(t,e)=>document.body.removeEventListener(t,e),registerResizeHandler:t=>window.addEventListener("resize",t,Gu()),deregisterResizeHandler:t=>window.removeEventListener("resize",t),notifyInput:()=>{const t=this.mdcFoundation.getValue();t!==this._value&&(this.value=t,this.dispatchEvent(new CustomEvent("input",{detail:this,composed:!0,bubbles:!0,cancelable:!0})))},notifyChange:()=>{this.dispatchEvent(new CustomEvent("change",{detail:this,composed:!0,bubbles:!0,cancelable:!0}))},setThumbContainerStyleProperty:(t,e)=>{this.thumbContainerStyles[t]=e,this.requestUpdate()},setTrackStyleProperty:(t,e)=>{this.trackStyles[t]=e,this.requestUpdate()},setMarkerValue:t=>this.pinMarkerText=t.toLocaleString(),setTrackMarkers:(t,e,i)=>{const n=t.toLocaleString(),o=`linear-gradient(to right, currentColor 2px, transparent 0) ${`0 center / calc((100% - 2px) / ${`((${e.toLocaleString()} - ${i.toLocaleString()}) / ${n})`}) 100% repeat-x`}`;this.trackMarkerContainerStyles.background=o,this.requestUpdate()},isRTL:()=>"rtl"===getComputedStyle(this.mdcRoot).direction})}resetFoundation(){this.mdcFoundation&&(this.mdcFoundation.destroy(),this.mdcFoundation.init())}async firstUpdated(){await super.firstUpdated(),this.mdcFoundation.setValue(this._value)}layout(){this.mdcFoundation.layout()}}t([Z(".mdc-slider")],Vh.prototype,"mdcRoot",void 0),t([Z(".mdc-slider")],Vh.prototype,"formElement",void 0),t([Z(".mdc-slider__thumb-container")],Vh.prototype,"thumbContainer",void 0),t([Z(".mdc-slider__pin-value-marker")],Vh.prototype,"pinMarker",void 0),t([$({type:Number})],Vh.prototype,"min",void 0),t([$({type:Number})],Vh.prototype,"max",void 0),t([$({type:Number})],Vh.prototype,"value",null),t([$({type:Number}),vt((function(t,e){0!==e!==(0!==t)&&this.resetFoundation(),this.mdcFoundation.setStep(t)}))],Vh.prototype,"step",void 0),t([$({type:Boolean,reflect:!0}),vt((function(t){this.mdcFoundation.setDisabled(t)}))],Vh.prototype,"disabled",void 0),t([$({type:Boolean,reflect:!0})],Vh.prototype,"pin",void 0),t([$({type:Boolean,reflect:!0}),vt((function(){this.mdcFoundation.setupTrackMarker()}))],Vh.prototype,"markers",void 0),t([$({type:String})],Vh.prototype,"pinMarkerText",void 0),t([$({type:Object})],Vh.prototype,"trackMarkerContainerStyles",void 0),t([$({type:Object})],Vh.prototype,"thumbContainerStyles",void 0),t([$({type:Object})],Vh.prototype,"trackStyles",void 0),t([it({capture:!0,passive:!0})],Vh.prototype,"layout",null);const Gh=st(Hh||(Hh=Uh`@keyframes mdc-slider-emphasize{0%{animation-timing-function:ease-out}50%{animation-timing-function:ease-in;transform:scale(.85)}100%{transform:scale(.571)}}.mdc-slider{position:relative;width:100%;height:48px;cursor:pointer;touch-action:pan-x;-webkit-tap-highlight-color:transparent}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__track{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__track-container::after{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786);opacity:.26}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__track-marker-container{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__thumb{fill:#018786;fill:var(--mdc-theme-secondary,#018786);stroke:#018786;stroke:var(--mdc-theme-secondary,#018786)}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__focus-ring{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__pin{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-slider:not(.mdc-slider--disabled) .mdc-slider__pin{color:#fff;color:var(--mdc-theme-text-primary-on-dark,#fff)}.mdc-slider--disable-touch-action{touch-action:none}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__track{background-color:#9a9a9a}.mdc-slider--disabled .mdc-slider__track-container::after{background-color:#9a9a9a;opacity:.26}.mdc-slider--disabled .mdc-slider__track-marker-container{background-color:#9a9a9a}.mdc-slider--disabled .mdc-slider__thumb{fill:#9a9a9a;stroke:#9a9a9a}.mdc-slider--disabled .mdc-slider__thumb{stroke:#fff;stroke:var(--mdc-slider-bg-color-behind-component,#fff)}.mdc-slider:focus{outline:0}.mdc-slider__track-container{position:absolute;top:50%;width:100%;height:2px;overflow:hidden}.mdc-slider__track-container::after{position:absolute;top:0;left:0;display:block;width:100%;height:100%;content:""}.mdc-slider__track{position:absolute;width:100%;height:100%;transform-origin:left top;will-change:transform}.mdc-slider[dir=rtl] .mdc-slider__track,[dir=rtl] .mdc-slider .mdc-slider__track{transform-origin:right top}.mdc-slider__track-marker-container{display:flex;margin-right:0;margin-left:-1px;visibility:hidden}.mdc-slider[dir=rtl] .mdc-slider__track-marker-container,[dir=rtl] .mdc-slider .mdc-slider__track-marker-container{margin-right:-1px;margin-left:0}.mdc-slider__track-marker-container::after{display:block;width:2px;height:2px;content:""}.mdc-slider__track-marker{flex:1}.mdc-slider__track-marker::after{display:block;width:2px;height:2px;content:""}.mdc-slider__track-marker:first-child::after{width:3px}.mdc-slider__thumb-container{position:absolute;top:15px;left:0;width:21px;height:100%;user-select:none;will-change:transform}.mdc-slider__thumb{position:absolute;top:0;left:0;transform:scale(.571);stroke-width:3.5;transition:transform .1s ease-out,fill .1s ease-out,stroke .1s ease-out}.mdc-slider__focus-ring{width:21px;height:21px;border-radius:50%;opacity:0;transition:transform .266s ease-out,opacity .266s ease-out,background-color .266s ease-out}.mdc-slider__pin{display:flex;position:absolute;top:0;left:0;align-items:center;justify-content:center;width:26px;height:26px;margin-top:-2px;margin-left:-2px;transform:rotate(-45deg) scale(0) translate(0,0);border-radius:50% 50% 50% 0;z-index:1;transition:transform .1s ease-out}.mdc-slider__pin-value-marker{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);transform:rotate(45deg)}.mdc-slider--active .mdc-slider__thumb{transform:scale3d(1,1,1)}.mdc-slider--focus .mdc-slider__thumb{animation:mdc-slider-emphasize .266s linear}.mdc-slider--focus .mdc-slider__focus-ring{transform:scale3d(1.55,1.55,1.55);opacity:.25}.mdc-slider--in-transit .mdc-slider__thumb{transition-delay:140ms}.mdc-slider--in-transit .mdc-slider__thumb-container,.mdc-slider--in-transit .mdc-slider__track,.mdc-slider:focus:not(.mdc-slider--active) .mdc-slider__thumb-container,.mdc-slider:focus:not(.mdc-slider--active) .mdc-slider__track{transition:transform 80ms ease}.mdc-slider--discrete.mdc-slider--active .mdc-slider__thumb{transform:scale(calc(12 / 21))}.mdc-slider--discrete.mdc-slider--active .mdc-slider__pin{transform:rotate(-45deg) scale(1) translate(19px,-20px)}.mdc-slider--discrete.mdc-slider--focus .mdc-slider__thumb{animation:none}.mdc-slider--discrete.mdc-slider--display-markers .mdc-slider__track-marker-container{visibility:visible}:host{display:inline-block;min-width:120px;outline:0}`));class Wh extends Vh{}Wh.styles=Gh;var zh=function(t,e){return(zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var jh=function(){return(jh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xh={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},Yh={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},Kh=function(t){function e(i){return t.call(this,jh(jh({},e.defaultAdapter),i))||this}return function(t,e){function i(){this.constructor=t}zh(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"strings",{get:function(){return Yh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return Xh},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),e.prototype.setChecked=function(t){this.adapter.setNativeControlChecked(t),this.updateAriaChecked_(t),this.updateCheckedStyling_(t)},e.prototype.setDisabled=function(t){this.adapter.setNativeControlDisabled(t),t?this.adapter.addClass(Xh.DISABLED):this.adapter.removeClass(Xh.DISABLED)},e.prototype.handleChange=function(t){var e=t.target;this.updateAriaChecked_(e.checked),this.updateCheckedStyling_(e.checked)},e.prototype.updateCheckedStyling_=function(t){t?this.adapter.addClass(Xh.CHECKED):this.adapter.removeClass(Xh.CHECKED)},e.prototype.updateAriaChecked_=function(t){this.adapter.setNativeControlAttr(Yh.ARIA_CHECKED_ATTR,""+!!t)},e}(Et);let Jh,$h,qh,Zh=t=>t;class Qh extends Aa{constructor(){super(...arguments),this.checked=!1,this.disabled=!1,this.shouldRenderRipple=!1,this.mdcFoundationClass=Kh,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple)))}changeHandler(t){this.mdcFoundation.handleChange(t),this.checked=this.formElement.checked}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{setNativeControlChecked:t=>{this.formElement.checked=t},setNativeControlDisabled:t=>{this.formElement.disabled=t},setNativeControlAttr:(t,e)=>{this.formElement.setAttribute(t,e)}})}renderRipple(){return this.shouldRenderRipple?F(Jh||(Jh=Zh` <mwc-ripple .accent="${0}" .disabled="${0}" unbounded> </mwc-ripple>`),this.checked,this.disabled):""}focus(){const t=this.formElement;t&&(this.rippleHandlers.startFocus(),t.focus())}blur(){const t=this.formElement;t&&(this.rippleHandlers.endFocus(),t.blur())}render(){return F($h||($h=Zh` <div class="mdc-switch"> <div class="mdc-switch__track"></div> <div class="mdc-switch__thumb-underlay"> ${0} <div class="mdc-switch__thumb"> <input type="checkbox" id="basic-switch" class="mdc-switch__native-control" role="switch" @change="${0}" @focus="${0}" @blur="${0}" @mousedown="${0}" @mouseenter="${0}" @mouseleave="${0}" @touchstart="${0}" @touchend="${0}" @touchcancel="${0}"> </div> </div> </div>`),this.renderRipple(),this.changeHandler,this.handleRippleFocus,this.handleRippleBlur,this.handleRippleMouseDown,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleTouchStart,this.handleRippleDeactivate,this.handleRippleDeactivate)}handleRippleMouseDown(t){const e=()=>{window.removeEventListener("mouseup",e),this.handleRippleDeactivate()};window.addEventListener("mouseup",e),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}}t([$({type:Boolean}),vt((function(t){this.mdcFoundation.setChecked(t)}))],Qh.prototype,"checked",void 0),t([$({type:Boolean}),vt((function(t){this.mdcFoundation.setDisabled(t)}))],Qh.prototype,"disabled",void 0),t([Z(".mdc-switch")],Qh.prototype,"mdcRoot",void 0),t([Z("input")],Qh.prototype,"formElement",void 0),t([Q("mwc-ripple")],Qh.prototype,"ripple",void 0),t([q()],Qh.prototype,"shouldRenderRipple",void 0),t([it({passive:!0})],Qh.prototype,"handleRippleMouseDown",null),t([it({passive:!0})],Qh.prototype,"handleRippleTouchStart",null);const tp=st(qh||(qh=Zh`.mdc-switch__thumb-underlay{left:-14px;right:initial;top:-17px;width:48px;height:48px}.mdc-switch__thumb-underlay[dir=rtl],[dir=rtl] .mdc-switch__thumb-underlay{left:initial;right:-14px}.mdc-switch__native-control{width:64px;height:48px}.mdc-switch{display:inline-block;position:relative;outline:0;user-select:none}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786);border-color:#018786;border-color:var(--mdc-theme-secondary,#018786)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:#000;background-color:var(--mdc-theme-on-surface,#000)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:#fff;background-color:var(--mdc-theme-surface,#fff);border-color:#fff;border-color:var(--mdc-theme-surface,#fff)}.mdc-switch__native-control{left:0;right:initial;position:absolute;top:0;margin:0;opacity:0;cursor:pointer;pointer-events:auto;transition:transform 90ms cubic-bezier(.4,0,.2,1)}.mdc-switch__native-control[dir=rtl],[dir=rtl] .mdc-switch__native-control{left:initial;right:0}.mdc-switch__track{box-sizing:border-box;width:36px;height:14px;border:1px solid transparent;border-radius:7px;opacity:.38;transition:opacity 90ms cubic-bezier(.4,0,.2,1),background-color 90ms cubic-bezier(.4,0,.2,1),border-color 90ms cubic-bezier(.4,0,.2,1)}.mdc-switch__thumb-underlay{display:flex;position:absolute;align-items:center;justify-content:center;transform:translateX(0);transition:transform 90ms cubic-bezier(.4,0,.2,1),background-color 90ms cubic-bezier(.4,0,.2,1),border-color 90ms cubic-bezier(.4,0,.2,1)}.mdc-switch__thumb{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);box-sizing:border-box;width:20px;height:20px;border:10px solid;border-radius:50%;pointer-events:none;z-index:1}.mdc-switch--checked .mdc-switch__track{opacity:.54}.mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(16px)}.mdc-switch--checked .mdc-switch__thumb-underlay[dir=rtl],[dir=rtl] .mdc-switch--checked .mdc-switch__thumb-underlay{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control{transform:translateX(-16px)}.mdc-switch--checked .mdc-switch__native-control[dir=rtl],[dir=rtl] .mdc-switch--checked .mdc-switch__native-control{transform:translateX(16px)}.mdc-switch--disabled{opacity:.38;pointer-events:none}.mdc-switch--disabled .mdc-switch__thumb{border-width:1px}.mdc-switch--disabled .mdc-switch__native-control{cursor:default;pointer-events:none}:host{display:inline-flex;outline:0;-webkit-tap-highlight-color:transparent}`));class ep extends(Me(Qh)){static get scopedElements(){return{"mwc-ripple":Je}}}ep.styles=tp;let ip,np,op=t=>t;class rp extends lt{constructor(){super(...arguments),this.indeterminate=!1,this.progress=0,this.buffer=1,this.reverse=!1,this.closed=!1,this.ariaLabel="",this.stylePrimaryHalf="",this.stylePrimaryFull="",this.styleSecondaryQuarter="",this.styleSecondaryHalf="",this.styleSecondaryFull="",this.animationReady=!0,this.closedAnimationOff=!1,this.resizeObserver=null}connectedCallback(){super.connectedCallback(),this.rootEl&&this.attachResizeObserver()}render(){const t={"mdc-linear-progress--closed":this.closed,"mdc-linear-progress--closed-animation-off":this.closedAnimationOff,"mdc-linear-progress--indeterminate":this.indeterminate,"mdc-linear-progress--reversed":this.reverse,"mdc-linear-progress--animation-ready":this.animationReady},e={"--mdc-linear-progress-primary-half":this.stylePrimaryHalf,"--mdc-linear-progress-primary-half-neg":""!==this.stylePrimaryHalf?`-${this.stylePrimaryHalf}`:"","--mdc-linear-progress-primary-full":this.stylePrimaryFull,"--mdc-linear-progress-primary-full-neg":""!==this.stylePrimaryFull?`-${this.stylePrimaryFull}`:"","--mdc-linear-progress-secondary-quarter":this.styleSecondaryQuarter,"--mdc-linear-progress-secondary-quarter-neg":""!==this.styleSecondaryQuarter?`-${this.styleSecondaryQuarter}`:"","--mdc-linear-progress-secondary-half":this.styleSecondaryHalf,"--mdc-linear-progress-secondary-half-neg":""!==this.styleSecondaryHalf?`-${this.styleSecondaryHalf}`:"","--mdc-linear-progress-secondary-full":this.styleSecondaryFull,"--mdc-linear-progress-secondary-full-neg":""!==this.styleSecondaryFull?`-${this.styleSecondaryFull}`:""},i={"flex-basis":this.indeterminate?"100%":100*this.buffer+"%"},n={transform:this.indeterminate?"scaleX(1)":`scaleX(${this.progress})`};return F(ip||(ip=op` <div role="progressbar" class="mdc-linear-progress ${0}" style="${0}" aria-label="${0}" aria-valuemin="0" aria-valuemax="1" aria-valuenow="${0}" @transitionend="${0}"> <div class="mdc-linear-progress__buffer"> <div class="mdc-linear-progress__buffer-bar" style="${0}"> </div> <div class="mdc-linear-progress__buffer-dots"></div> </div> <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar" style="${0}"> <span class="mdc-linear-progress__bar-inner"></span> </div> <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar"> <span class="mdc-linear-progress__bar-inner"></span> </div> </div>`),Nt(t),qt(e),Jt(this.ariaLabel?this.ariaLabel:void 0),Jt(this.indeterminate?void 0:this.progress),this.syncClosedState,qt(i),qt(n))}update(t){!t.has("closed")||this.closed&&void 0!==t.get("closed")||this.syncClosedState(),super.update(t)}async firstUpdated(t){super.firstUpdated(t),this.attachResizeObserver()}syncClosedState(){this.closedAnimationOff=this.closed}updated(t){!t.has("indeterminate")&&t.has("reverse")&&this.indeterminate&&this.restartAnimation(),t.has("indeterminate")&&void 0!==t.get("indeterminate")&&this.indeterminate&&window.ResizeObserver&&this.calculateAndSetAnimationDimensions(this.rootEl.offsetWidth),super.updated(t)}disconnectedCallback(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),super.disconnectedCallback()}attachResizeObserver(){if(window.ResizeObserver)return this.resizeObserver=new ResizeObserver((t=>{if(this.indeterminate)for(const e of t)if(e.contentRect){const t=e.contentRect.width;this.calculateAndSetAnimationDimensions(t)}})),void this.resizeObserver.observe(this.rootEl);this.resizeObserver=null}calculateAndSetAnimationDimensions(t){const e=.8367142*t,i=2.00611057*t,n=.37651913*t,o=.84386165*t,r=1.60277782*t;this.stylePrimaryHalf=`${e}px`,this.stylePrimaryFull=`${i}px`,this.styleSecondaryQuarter=`${n}px`,this.styleSecondaryHalf=`${o}px`,this.styleSecondaryFull=`${r}px`,this.restartAnimation()}async restartAnimation(){this.animationReady=!1,await this.updateComplete,await new Promise(requestAnimationFrame),this.animationReady=!0,await this.updateComplete}open(){this.closed=!1}close(){this.closed=!0}}t([Z(".mdc-linear-progress")],rp.prototype,"rootEl",void 0),t([$({type:Boolean,reflect:!0})],rp.prototype,"indeterminate",void 0),t([$({type:Number})],rp.prototype,"progress",void 0),t([$({type:Number})],rp.prototype,"buffer",void 0),t([$({type:Boolean,reflect:!0})],rp.prototype,"reverse",void 0),t([$({type:Boolean,reflect:!0})],rp.prototype,"closed",void 0),t([$()],rp.prototype,"ariaLabel",void 0),t([q()],rp.prototype,"stylePrimaryHalf",void 0),t([q()],rp.prototype,"stylePrimaryFull",void 0),t([q()],rp.prototype,"styleSecondaryQuarter",void 0),t([q()],rp.prototype,"styleSecondaryHalf",void 0),t([q()],rp.prototype,"styleSecondaryFull",void 0),t([q()],rp.prototype,"animationReady",void 0),t([q()],rp.prototype,"closedAnimationOff",void 0);const sp=st(np||(np=op`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(83.67142%);transform:translateX(var(--mdc-linear-progress-primary-half,83.67142%))}100%{transform:translateX(200.611057%);transform:translateX(var(--mdc-linear-progress-primary-full,200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}100%{transform:scaleX(.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translateX(37.651913%);transform:translateX(var(--mdc-linear-progress-secondary-quarter,37.651913%))}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translateX(84.386165%);transform:translateX(var(--mdc-linear-progress-secondary-half,84.386165%))}100%{transform:translateX(160.277782%);transform:translateX(var(--mdc-linear-progress-secondary-full,160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.205028,.057051,.57661,.453971);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.152313,.196432,.648374,1.004315);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.257759,-.003163,.211762,1.38179);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(-83.67142%);transform:translateX(var(--mdc-linear-progress-primary-half-neg,-83.67142%))}100%{transform:translateX(-200.611057%);transform:translateX(var(--mdc-linear-progress-primary-full-neg,-200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translateX(-37.651913%);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg,-37.651913%))}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translateX(-84.386165%);transform:translateX(var(--mdc-linear-progress-secondary-half-neg,-84.386165%))}100%{transform:translateX(-160.277782%);transform:translateX(var(--mdc-linear-progress-secondary-full-neg,-160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;height:4px;transform:translateZ(0);outline:1px solid transparent;overflow:hidden;transition:opacity 250ms 0s cubic-bezier(.4,0,.6,1)}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0s cubic-bezier(.4,0,.6,1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top:4px solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;background-size:10px 4px;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0s cubic-bezier(.4,0,.6,1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{visibility:hidden}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;visibility:visible}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--reversed .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress--reversed.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}.mdc-linear-progress--reversed.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}.mdc-linear-progress--reversed .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;order:0;transform:rotate(0)}.mdc-linear-progress--reversed .mdc-linear-progress__buffer-bar{order:1}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:#6200ee;border-color:var(--mdc-theme-primary,#6200ee)}.mdc-linear-progress__buffer-dots{background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress--indeterminate.mdc-linear-progress--reversed .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress--indeterminate.mdc-linear-progress--reversed .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}:host{display:block}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6;background-color:var(--mdc-linear-progress-buffer-color,#e6e6e6)}.mdc-linear-progress__buffer-dots{background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E");background-image:var(--mdc-linear-progress-buffering-dots-image, url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E"))}`));class ap extends rp{}ap.styles=[sp];var lp=function(t,e){return(lp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var cp=function(){return(cp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},dp={ROOT:"mdc-form-field"},up={LABEL_SELECTOR:".mdc-form-field > label"},hp=function(t){function e(i){var n=t.call(this,cp(cp({},e.defaultAdapter),i))||this;return n.click=function(){n.handleClick()},n}return function(t,e){function i(){this.constructor=t}lp(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return dp},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return up},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},e.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},e.prototype.handleClick=function(){var t=this;this.adapter.activateInputRipple(),requestAnimationFrame((function(){t.adapter.deactivateInputRipple()}))},e}(Et);let pp,gp=t=>t;class fp extends _t{constructor(){super(...arguments),this.alignEnd=!1,this.spaceBetween=!1,this.nowrap=!1,this.label="",this.mdcFoundationClass=hp}createAdapter(){return{registerInteractionHandler:(t,e)=>{this.labelEl.addEventListener(t,e)},deregisterInteractionHandler:(t,e)=>{this.labelEl.removeEventListener(t,e)},activateInputRipple:async()=>{const t=this.input;if(t instanceof Aa){const e=await t.ripple;e&&e.startPress()}},deactivateInputRipple:async()=>{const t=this.input;if(t instanceof Aa){const e=await t.ripple;e&&e.endPress()}}}}get input(){return ut(this.slotEl,"*")}render(){const t={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return F(pp||(pp=gp` <div class="mdc-form-field ${0}"> <slot></slot> <label class="mdc-label" @click="${0}">${0}</label> </div>`),Nt(t),this._labelClick,this.label)}_labelClick(){const t=this.input;t&&(t.focus(),t.click())}}t([$({type:Boolean})],fp.prototype,"alignEnd",void 0),t([$({type:Boolean})],fp.prototype,"spaceBetween",void 0),t([$({type:Boolean})],fp.prototype,"nowrap",void 0),t([$({type:String}),vt((async function(t){const e=this.input;e&&("input"===e.localName?e.setAttribute("aria-label",t):e instanceof Aa&&(await e.updateComplete,e.setAriaLabel(t)))}))],fp.prototype,"label",void 0),t([Z(".mdc-form-field")],fp.prototype,"mdcRoot",void 0),t([Z("slot")],fp.prototype,"slotEl",void 0),t([Z("label")],fp.prototype,"labelEl",void 0);let mp;const _p=st(mp||(mp=(t=>t)`.mdc-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87));display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}.mdc-form-field>label[dir=rtl],[dir=rtl] .mdc-form-field>label{margin-left:auto;margin-right:0}.mdc-form-field>label[dir=rtl],[dir=rtl] .mdc-form-field>label{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}.mdc-form-field--align-end>label[dir=rtl],[dir=rtl] .mdc-form-field--align-end>label{margin-left:0;margin-right:auto}.mdc-form-field--align-end>label[dir=rtl],[dir=rtl] .mdc-form-field--align-end>label{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}.mdc-form-field--space-between>label[dir=rtl],[dir=rtl] .mdc-form-field--space-between>label{margin:0}:host{display:inline-flex}.mdc-form-field{width:100%}::slotted(*){-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-body2-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.875rem;font-size:var(--mdc-typography-body2-font-size,.875rem);line-height:1.25rem;line-height:var(--mdc-typography-body2-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-body2-font-weight,400);letter-spacing:.0178571429em;letter-spacing:var(--mdc-typography-body2-letter-spacing,.0178571429em);text-decoration:inherit;text-decoration:var(--mdc-typography-body2-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-body2-text-transform,inherit);color:rgba(0,0,0,.87);color:var(--mdc-theme-text-primary-on-background,rgba(0,0,0,.87))}::slotted(mwc-switch){margin-right:10px}::slotted(mwc-switch)[dir=rtl],[dir=rtl] ::slotted(mwc-switch){margin-left:10px}`));class vp extends fp{}vp.styles=_p;var yp=function(t,e){return(yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function bp(t,e){function i(){this.constructor=t}yp(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function Ep(t){return"function"==typeof t}var Tp=!1,xp={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Tp=t},get useDeprecatedSynchronousErrorHandling(){return Tp}};function kp(t){setTimeout((function(){throw t}),0)}var Sp={closed:!0,next:function(t){},error:function(t){if(xp.useDeprecatedSynchronousErrorHandling)throw t;kp(t)},complete:function(){}},Cp=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var wp=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Ip=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i,n=this,o=n._parentOrParents,r=n._ctorUnsubscribe,s=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof t)o.remove(this);else if(null!==o)for(var l=0;l<o.length;++l){o[l].remove(this)}if(Ep(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(t){e=t instanceof wp?Rp(t.errors):[t]}}if(Cp(a)){l=-1;for(var c=a.length;++l<c;){var d=a[l];if(null!==(i=d)&&"object"==typeof i)try{d.unsubscribe()}catch(t){e=e||[],t instanceof wp?e=e.concat(Rp(t.errors)):e.push(t)}}}if(e)throw new wp(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var n=i;(i=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var o=i._parentOrParents;if(null===o)i._parentOrParents=this;else if(o instanceof t){if(o===this)return i;i._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return i;o.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[i]:r.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Rp(t){return t.reduce((function(t,e){return t.concat(e instanceof wp?e.errors:e)}),[])}var Ap=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Op=function(t){function e(i,n,o){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=Sp;break;case 1:if(!i){r.destination=Sp;break}if("object"==typeof i){i instanceof e?(r.syncErrorThrowable=i.syncErrorThrowable,r.destination=i,i.add(r)):(r.syncErrorThrowable=!0,r.destination=new Dp(r,i));break}default:r.syncErrorThrowable=!0,r.destination=new Dp(r,i,n,o)}return r}return bp(e,t),e.prototype[Ap]=function(){return this},e.create=function(t,i,n){var o=new e(t,i,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Ip),Dp=function(t){function e(e,i,n,o){var r,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return Ep(i)?r=i:i&&(r=i.next,n=i.error,o=i.complete,i!==Sp&&(Ep((a=Object.create(i)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=r,s._error=n,s._complete=o,s}return bp(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;xp.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=xp.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):kp(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;kp(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};xp.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),xp.useDeprecatedSynchronousErrorHandling)throw t;kp(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!xp.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return xp.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(kp(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Op);var Np=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Mp(t){return t}function Lp(t){return 0===t.length?Mp:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Pp=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var n=this.operator,o=function(t,e,i){if(t){if(t instanceof Op)return t;if(t[Ap])return t[Ap]()}return t||e||i?new Op(t,e,i):new Op(Sp)}(t,e,i);if(n?o.add(n.call(o,this.source)):o.add(this.source||xp.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),xp.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){xp.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,i=e.closed,n=e.destination,o=e.isStopped;if(i||o)return!1;t=n&&n instanceof Op?n:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=Bp(e))((function(e,n){var o;o=i.subscribe((function(e){try{t(e)}catch(t){n(t),o&&o.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Np]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Lp(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Bp(t))((function(t,i){var n;e.subscribe((function(t){return n=t}),(function(t){return i(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function Bp(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var Fp,Hp=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Up=function(t){function e(e,i){var n=t.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return bp(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(Ip),Vp=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return bp(e,t),e}(Op),Gp=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return bp(e,t),e.prototype[Ap]=function(){return new Vp(this)},e.prototype.lift=function(t){var e=new Wp(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Hp;if(!this.isStopped)for(var e=this.observers,i=e.length,n=e.slice(),o=0;o<i;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new Hp;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),o=0;o<i;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Hp;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),n=0;n<e;n++)i[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Hp;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Hp;return this.hasError?(t.error(this.thrownError),Ip.EMPTY):this.isStopped?(t.complete(),Ip.EMPTY):(this.observers.push(t),new Up(this,t))},e.prototype.asObservable=function(){var t=new Pp;return t.source=this,t},e.create=function(t,e){return new Wp(t,e)},e}(Pp),Wp=function(t){function e(e,i){var n=t.call(this)||this;return n.destination=e,n.source=i,n}return bp(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):Ip.EMPTY},e}(Gp),zp={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},jp={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},Xp={FOCUS_ROOT_INDEX:-1};!function(t){t[t.NONE=0]="NONE",t[t.LIST_ROOT=1]="LIST_ROOT",t[t.FIRST_ITEM=2]="FIRST_ITEM",t[t.LAST_ITEM=3]="LAST_ITEM"}(Fp||(Fp={}));var Yp=function(t,e){return(Yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var Kp=function(){return(Kp=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jp=function(t){function e(i){var n=t.call(this,Kp(Kp({},e.defaultAdapter),i))||this;return n.closeAnimationEndTimerId_=0,n.defaultFocusState_=Fp.LIST_ROOT,n}return function(t,e){function i(){this.constructor=t}Yp(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return zp},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return jp},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Xp},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter.closeSurface()},e.prototype.handleKeydown=function(t){var e=t.key,i=t.keyCode;("Tab"===e||9===i)&&this.adapter.closeSurface(!0)},e.prototype.handleItemAction=function(t){var e=this,i=this.adapter.getElementIndex(t);i<0||(this.adapter.notifySelected({index:i}),this.adapter.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var i=e.adapter.getElementIndex(t);i>=0&&e.adapter.isSelectableItemAtIndex(i)&&e.setSelectedIndex(i)}),rh.numbers.TRANSITION_CLOSE_DURATION))},e.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case Fp.FIRST_ITEM:this.adapter.focusItemAtIndex(0);break;case Fp.LAST_ITEM:this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount()-1);break;case Fp.NONE:break;default:this.adapter.focusListRoot()}},e.prototype.setDefaultFocusState=function(t){this.defaultFocusState_=t},e.prototype.setSelectedIndex=function(t){if(this.validatedIndex_(t),!this.adapter.isSelectableItemAtIndex(t))throw new Error("MDCMenuFoundation: No selection group at specified index.");var e=this.adapter.getSelectedSiblingOfItemAtIndex(t);e>=0&&(this.adapter.removeAttributeFromElementAtIndex(e,jp.ARIA_CHECKED_ATTR),this.adapter.removeClassFromElementAtIndex(e,zp.MENU_SELECTED_LIST_ITEM)),this.adapter.addClassToElementAtIndex(t,zp.MENU_SELECTED_LIST_ITEM),this.adapter.addAttributeToElementAtIndex(t,jp.ARIA_CHECKED_ATTR,"true")},e.prototype.setEnabled=function(t,e){this.validatedIndex_(t),e?(this.adapter.removeClassFromElementAtIndex(t,iu),this.adapter.addAttributeToElementAtIndex(t,jp.ARIA_DISABLED_ATTR,"false")):(this.adapter.addClassToElementAtIndex(t,iu),this.adapter.addAttributeToElementAtIndex(t,jp.ARIA_DISABLED_ATTR,"true"))},e.prototype.validatedIndex_=function(t){var e=this.adapter.getMenuItemCount();if(!(t>=0&&t<e))throw new Error("MDCMenuFoundation: No list item at specified index.")},e}(Et);let $p,qp,Zp=t=>t,Qp=class extends fu{};Qp.styles=mu,Qp=t([],Qp);let tg=class extends dh{};tg.styles=uh,tg=t([],tg);class eg extends _t{constructor(){super(...arguments),this.mdcFoundationClass=Jp,this.listElement_=null,this.anchor=null,this.open=!1,this.quick=!1,this.wrapFocus=!1,this.innerRole="menu",this.corner="TOP_START",this.x=null,this.y=null,this.absolute=!1,this.multi=!1,this.activatable=!1,this.fixed=!1,this.forceGroupSelection=!1,this.fullwidth=!1,this.menuCorner="START",this.defaultFocus="LIST_ROOT",this._listUpdateComplete=null}get listElement(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector("mwc-list")),this.listElement_}get items(){const t=this.listElement;return t?t.items:[]}get index(){const t=this.listElement;return t?t.index:-1}get selected(){const t=this.listElement;return t?t.selected:null}render(){const t="menu"===this.innerRole?"menuitem":"option";return F($p||($p=Zp` <mwc-menu-surface ?hidden="${0}" .anchor="${0}" .open="${0}" .quick="${0}" .corner="${0}" .x="${0}" .y="${0}" .absolute="${0}" .fixed="${0}" .fullwidth="${0}" .menuCorner="${0}" class="mdc-menu mdc-menu-surface" @closed="${0}" @opened="${0}" @keydown="${0}"> <mwc-list rootTabbable .innerRole="${0}" .multi="${0}" class="mdc-list" .itemRoles="${0}" .wrapFocus="${0}" .activatable="${0}" @action="${0}"> <slot></slot> </mwc-list> </mwc-menu-surface>`),!this.open,this.anchor,this.open,this.quick,this.corner,this.x,this.y,this.absolute,this.fixed,this.fullwidth,this.menuCorner,this.onClosed,this.onOpened,this.onKeydown,this.innerRole,this.multi,t,this.wrapFocus,this.activatable,this.onAction)}createAdapter(){return{addClassToElementAtIndex:(t,e)=>{const i=this.listElement;if(!i)return;const n=i.items[t];n&&("mdc-menu-item--selected"===e?this.forceGroupSelection&&!n.selected&&i.toggle(t,!0):n.classList.add(e))},removeClassFromElementAtIndex:(t,e)=>{const i=this.listElement;if(!i)return;const n=i.items[t];n&&("mdc-menu-item--selected"===e?n.selected&&i.toggle(t,!1):n.classList.remove(e))},addAttributeToElementAtIndex:(t,e,i)=>{const n=this.listElement;if(!n)return;const o=n.items[t];o&&o.setAttribute(e,i)},removeAttributeFromElementAtIndex:(t,e)=>{const i=this.listElement;if(!i)return;const n=i.items[t];n&&n.removeAttribute(e)},elementContainsClass:(t,e)=>t.classList.contains(e),closeSurface:()=>{this.open=!1},getElementIndex:t=>{const e=this.listElement;return e?e.items.indexOf(t):-1},notifySelected:()=>{},getMenuItemCount:()=>{const t=this.listElement;return t?t.items.length:0},focusItemAtIndex:t=>{const e=this.listElement;if(!e)return;const i=e.items[t];i&&i.focus()},focusListRoot:()=>{this.listElement&&this.listElement.focus()},getSelectedSiblingOfItemAtIndex:t=>{const e=this.listElement;if(!e)return-1;const i=e.items[t];if(!i||!i.group)return-1;for(let n=0;n<e.items.length;n++){if(n===t)continue;const o=e.items[n];if(o.selected&&o.group===i.group)return n}return-1},isSelectableItemAtIndex:t=>{const e=this.listElement;if(!e)return!1;const i=e.items[t];return!!i&&i.hasAttribute("group")}}}onKeydown(t){this.mdcFoundation&&this.mdcFoundation.handleKeydown(t)}onAction(t){const e=this.listElement;if(this.mdcFoundation&&e){const i=t.detail.index,n=e.items[i];n&&this.mdcFoundation.handleItemAction(n)}}onOpened(){this.open=!0,this.mdcFoundation&&this.mdcFoundation.handleMenuSurfaceOpened()}onClosed(){this.open=!1}async _getUpdateComplete(){await this._listUpdateComplete,await super._getUpdateComplete()}async firstUpdated(){super.firstUpdated();const t=this.listElement;t&&(this._listUpdateComplete=t.updateComplete,await this._listUpdateComplete)}select(t){const e=this.listElement;e&&e.select(t)}close(){this.open=!1}show(){this.open=!0}getFocusedItemIndex(){const t=this.listElement;return t?t.getFocusedItemIndex():-1}focusItemAtIndex(t){const e=this.listElement;e&&e.focusItemAtIndex(t)}layout(t=!0){const e=this.listElement;e&&e.layout(t)}}t([Z(".mdc-menu")],eg.prototype,"mdcRoot",void 0),t([Z("slot")],eg.prototype,"slotElement",void 0),t([$({type:Object})],eg.prototype,"anchor",void 0),t([$({type:Boolean,reflect:!0})],eg.prototype,"open",void 0),t([$({type:Boolean})],eg.prototype,"quick",void 0),t([$({type:Boolean})],eg.prototype,"wrapFocus",void 0),t([$({type:String})],eg.prototype,"innerRole",void 0),t([$({type:String})],eg.prototype,"corner",void 0),t([$({type:Number})],eg.prototype,"x",void 0),t([$({type:Number})],eg.prototype,"y",void 0),t([$({type:Boolean})],eg.prototype,"absolute",void 0),t([$({type:Boolean})],eg.prototype,"multi",void 0),t([$({type:Boolean})],eg.prototype,"activatable",void 0),t([$({type:Boolean})],eg.prototype,"fixed",void 0),t([$({type:Boolean})],eg.prototype,"forceGroupSelection",void 0),t([$({type:Boolean})],eg.prototype,"fullwidth",void 0),t([$({type:String})],eg.prototype,"menuCorner",void 0),t([$({type:String}),vt((function(t){this.mdcFoundation&&this.mdcFoundation.setDefaultFocusState(Fp[t])}))],eg.prototype,"defaultFocus",void 0);const ig=st(qp||(qp=Zp`mwc-list ::slotted([mwc-list-item]:not([twoline])){height:var(--mdc-menu-item-height,48px)}mwc-list{max-width:var(--mdc-menu-max-width,auto);min-width:var(--mdc-menu-min-width,auto)}`));class ng extends(Me(eg)){get listElement(){return this.listElement_||(this.listElement_=this.renderRoot.querySelector(".mdc-list")),this.listElement_}static get scopedElements(){return{"mwc-menu-surface":tg,"mwc-list":_u}}}ng.styles=ig;let og,rg,sg,ag=t=>t;class lg extends Aa{constructor(){super(...arguments),this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.value="",this.reducedTouchTarget=!1,this.animationClass="",this.shouldRenderRipple=!1,this.focused=!1,this.mdcFoundationClass=void 0,this.mdcFoundation=void 0,this.rippleElement=null,this.rippleHandlers=new ae((()=>(this.shouldRenderRipple=!0,this.ripple.then((t=>this.rippleElement=t)),this.ripple)))}createAdapter(){return{}}update(t){const e=t.get("indeterminate"),i=t.get("checked"),n=t.get("disabled");if(void 0!==e||void 0!==i||void 0!==n){const t=this.calculateAnimationStateName(!!i,!!e,!!n),o=this.calculateAnimationStateName(this.checked,this.indeterminate,this.disabled);this.animationClass=`${t}-${o}`}super.update(t)}calculateAnimationStateName(t,e,i){return i?"disabled":e?"indeterminate":t?"checked":"unchecked"}renderRipple(){const t=this.indeterminate||this.checked;return this.shouldRenderRipple?F(og||(og=ag` <mwc-ripple .accent="${0}" .disabled="${0}" unbounded> </mwc-ripple>`),t,this.disabled):""}render(){const t=this.indeterminate||this.checked,e={"mdc-checkbox--disabled":this.disabled,"mdc-checkbox--selected":t,"mdc-checkbox--touch":!this.reducedTouchTarget,"mdc-ripple-upgraded--background-focused":this.focused,"mdc-checkbox--anim-checked-indeterminate":"checked-indeterminate"==this.animationClass,"mdc-checkbox--anim-checked-unchecked":"checked-unchecked"==this.animationClass,"mdc-checkbox--anim-indeterminate-checked":"indeterminate-checked"==this.animationClass,"mdc-checkbox--anim-indeterminate-unchecked":"indeterminate-unchecked"==this.animationClass,"mdc-checkbox--anim-unchecked-checked":"unchecked-checked"==this.animationClass,"mdc-checkbox--anim-unchecked-indeterminate":"unchecked-indeterminate"==this.animationClass},i=this.indeterminate?"mixed":void 0;return F(rg||(rg=ag` <div class="mdc-checkbox mdc-checkbox--upgraded ${0}"> <input type="checkbox" class="mdc-checkbox__native-control" aria-checked="${0}" data-indeterminate="${0}" ?disabled="${0}" .indeterminate="${0}" .checked="${0}" .value="${0}" @change="${0}" @focus="${0}" @blur="${0}" @mousedown="${0}" @mouseenter="${0}" @mouseleave="${0}" @touchstart="${0}" @touchend="${0}" @touchcancel="${0}"> <div class="mdc-checkbox__background" @animationend="${0}"> <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"> <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path> </svg> <div class="mdc-checkbox__mixedmark"></div> </div> ${0} </div>`),Nt(e),Jt(i),this.indeterminate?"true":"false",this.disabled,this.indeterminate,this.checked,this.value,this._changeHandler,this._handleFocus,this._handleBlur,this.handleRippleMouseDown,this.handleRippleMouseEnter,this.handleRippleMouseLeave,this.handleRippleTouchStart,this.handleRippleDeactivate,this.handleRippleDeactivate,this.resetAnimationClass,this.renderRipple())}_handleFocus(){this.focused=!0,this.handleRippleFocus()}_handleBlur(){this.focused=!1,this.handleRippleBlur()}handleRippleMouseDown(t){const e=()=>{window.removeEventListener("mouseup",e),this.handleRippleDeactivate()};window.addEventListener("mouseup",e),this.rippleHandlers.startPress(t)}handleRippleTouchStart(t){this.rippleHandlers.startPress(t)}handleRippleDeactivate(){this.rippleHandlers.endPress()}handleRippleMouseEnter(){this.rippleHandlers.startHover()}handleRippleMouseLeave(){this.rippleHandlers.endHover()}handleRippleFocus(){this.rippleHandlers.startFocus()}handleRippleBlur(){this.rippleHandlers.endFocus()}_changeHandler(){this.checked=this.formElement.checked,this.indeterminate=this.formElement.indeterminate}resetAnimationClass(){this.animationClass=""}get isRippleActive(){var t;return(null===(t=this.rippleElement)||void 0===t?void 0:t.isActive)||!1}}t([Z(".mdc-checkbox")],lg.prototype,"mdcRoot",void 0),t([Z("input")],lg.prototype,"formElement",void 0),t([$({type:Boolean,reflect:!0})],lg.prototype,"checked",void 0),t([$({type:Boolean})],lg.prototype,"indeterminate",void 0),t([$({type:Boolean,reflect:!0})],lg.prototype,"disabled",void 0),t([$({type:String})],lg.prototype,"value",void 0),t([$({type:Boolean})],lg.prototype,"reducedTouchTarget",void 0),t([q()],lg.prototype,"animationClass",void 0),t([q()],lg.prototype,"shouldRenderRipple",void 0),t([q()],lg.prototype,"focused",void 0),t([Q("mwc-ripple")],lg.prototype,"ripple",void 0),t([it({passive:!0})],lg.prototype,"handleRippleTouchStart",null);const cg=st(sg||(sg=ag`.mdc-checkbox{padding:11px;margin-top:0;margin-bottom:0;margin-right:0;margin-left:0}.mdc-checkbox .mdc-checkbox__ripple::after,.mdc-checkbox .mdc-checkbox__ripple::before{background-color:#000;background-color:var(--mdc-ripple-color,#000)}.mdc-checkbox.mdc-ripple-surface--hover .mdc-checkbox__ripple::before,.mdc-checkbox:hover .mdc-checkbox__ripple::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__ripple::before,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__ripple::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-checkbox:not(.mdc-ripple-upgraded) .mdc-checkbox__ripple::after{transition:opacity 150ms linear}.mdc-checkbox:not(.mdc-ripple-upgraded):active .mdc-checkbox__ripple::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-checkbox.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox .mdc-checkbox__native-control:checked~.mdc-checkbox__background::before,.mdc-checkbox .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background::before,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background::before{background-color:#018786;background-color:var(--mdc-theme-secondary,#018786)}.mdc-checkbox.mdc-checkbox--selected .mdc-checkbox__ripple::after,.mdc-checkbox.mdc-checkbox--selected .mdc-checkbox__ripple::before{background-color:#018786;background-color:var(--mdc-ripple-color,var(--mdc-theme-secondary,#018786))}.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-surface--hover .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-checkbox--selected:hover .mdc-checkbox__ripple::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-upgraded--background-focused .mdc-checkbox__ripple::before,.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded):focus .mdc-checkbox__ripple::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded) .mdc-checkbox__ripple::after{transition:opacity 150ms linear}.mdc-checkbox.mdc-checkbox--selected:not(.mdc-ripple-upgraded):active .mdc-checkbox__ripple::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-checkbox.mdc-checkbox--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--selected .mdc-checkbox__ripple::after,.mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--selected .mdc-checkbox__ripple::before{background-color:#018786;background-color:var(--mdc-ripple-color,var(--mdc-theme-secondary,#018786))}.mdc-checkbox .mdc-checkbox__background{top:11px;left:11px}.mdc-checkbox .mdc-checkbox__background::before{top:-13px;left:-13px;width:40px;height:40px}.mdc-checkbox .mdc-checkbox__native-control{top:0;right:0;left:0;width:40px;height:40px}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0,0,0,.54);border-color:var(--mdc-checkbox-unchecked-color,rgba(0,0,0,.54));background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0,0,0,.54);border-color:var(--mdc-checkbox-unchecked-color,rgba(0,0,0,.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786));background-color:#018786;background-color:var(--mdc-checkbox-checked-color,var(--mdc-theme-secondary,#018786))}100%{border-color:rgba(0,0,0,.54);border-color:var(--mdc-checkbox-unchecked-color,rgba(0,0,0,.54));background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0,0,0,.38);border-color:var(--mdc-checkbox-disabled-color,rgba(0,0,0,.38));background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0,0,0,.38);background-color:var(--mdc-checkbox-disabled-color,rgba(0,0,0,.38))}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-ink-color,#fff)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-ink-color,#fff)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-ink-color,#fff)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-ink-color,#fff)}.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0,0,.2,1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,1);transform:rotate(0);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);transform:rotate(0);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}100%,32.8%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}@media screen and (-ms-high-contrast:active){.mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:GrayText;border-color:var(--mdc-checkbox-disabled-color,GrayText);background-color:transparent}.mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background,.mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background{border-color:GrayText;background-color:transparent;background-color:var(--mdc-checkbox-disabled-color,transparent)}.mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:GrayText;color:var(--mdc-checkbox-ink-color,GrayText)}.mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:GrayText;border-color:var(--mdc-checkbox-ink-color,GrayText)}.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:transparent;pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0s cubic-bezier(.4,0,.6,1),border-color 90ms 0s cubic-bezier(.4,0,.6,1)}.mdc-checkbox__background .mdc-checkbox__background::before{background-color:#000;background-color:var(--mdc-theme-on-surface,#000)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0s cubic-bezier(.4,0,.6,1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0s cubic-bezier(.4,0,.6,1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0s cubic-bezier(.4,0,.6,1),transform 90ms 0s cubic-bezier(.4,0,.6,1)}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark .5s linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark .5s linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark .3s linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0s cubic-bezier(0,0,.2,1),background-color 90ms 0s cubic-bezier(0,0,.2,1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__background::before{position:absolute;transform:scale(0,0);border-radius:50%;opacity:0;pointer-events:none;content:"";will-change:opacity,transform;transition:opacity 90ms 0s cubic-bezier(.4,0,.6,1),transform 90ms 0s cubic-bezier(.4,0,.6,1)}.mdc-checkbox__native-control:focus~.mdc-checkbox__background::before{transform:scale(1);opacity:.12;transition:opacity 80ms 0s cubic-bezier(0,0,.2,1),transform 80ms 0s cubic-bezier(0,0,.2,1)}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-checkbox--touch .mdc-checkbox__native-control{top:-4px;right:-4px;left:-4px;width:48px;height:48px}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0s cubic-bezier(0,0,.2,1),transform 180ms 0s cubic-bezier(0,0,.2,1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0s cubic-bezier(.4,0,.6,1),transform 90ms 0s cubic-bezier(.4,0,.6,1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}:host{outline:0;display:inline-flex;-webkit-tap-highlight-color:transparent}.mdc-checkbox .mdc-checkbox__background::before{content:none}`));class dg extends(Me(lg)){static get scopedElements(){return{"mwc-ripple":Je}}}dg.styles=cg;var ug=["input","button","textarea","select"],hg=function(t){var e=t.target;if(e){var i=(""+e.tagName).toLowerCase();-1===ug.indexOf(i)&&t.preventDefault()}};function pg(t,e){for(var i=new Map,n=0;n<t;n++){var o=e(n).trim();if(o){var r=o[0].toLowerCase();i.has(r)||i.set(r,[]),i.get(r).push({text:o.toLowerCase(),index:n})}}return i.forEach((function(t){t.sort((function(t,e){return t.index-e.index}))})),i}function gg(t,e){var i,n=t.nextChar,o=t.focusItemAtIndex,r=t.sortedIndexByFirstChar,s=t.focusedItemIndex,a=t.skipFocus,l=t.isItemAtIndexDisabled;return clearTimeout(e.bufferClearTimeout),e.bufferClearTimeout=setTimeout((function(){!function(t){t.typeaheadBuffer=""}(e)}),ou.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),e.typeaheadBuffer=e.typeaheadBuffer+n,-1===(i=1===e.typeaheadBuffer.length?function(t,e,i,n){var o=n.typeaheadBuffer[0],r=t.get(o);if(!r)return-1;if(o===n.currentFirstChar&&r[n.sortedIndexCursor].index===e){n.sortedIndexCursor=(n.sortedIndexCursor+1)%r.length;var s=r[n.sortedIndexCursor].index;if(!i(s))return s}n.currentFirstChar=o;var a,l=-1;for(a=0;a<r.length;a++)if(!i(r[a].index)){l=a;break}for(;a<r.length;a++)if(r[a].index>e&&!i(r[a].index)){l=a;break}if(-1!==l)return n.sortedIndexCursor=l,r[n.sortedIndexCursor].index;return-1}(r,s,l,e):function(t,e,i){var n=i.typeaheadBuffer[0],o=t.get(n);if(!o)return-1;var r=o[i.sortedIndexCursor];if(0===r.text.lastIndexOf(i.typeaheadBuffer,0)&&!e(r.index))return r.index;var s=(i.sortedIndexCursor+1)%o.length,a=-1;for(;s!==i.sortedIndexCursor;){var l=o[s],c=0===l.text.lastIndexOf(i.typeaheadBuffer,0),d=!e(l.index);if(c&&d){a=s;break}s=(s+1)%o.length}if(-1!==a)return i.sortedIndexCursor=a,o[i.sortedIndexCursor].index;return-1}(r,l,e))||a||o(i),i}function fg(t){return t.typeaheadBuffer.length>0}var mg=function(t,e){return(mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var _g=function(){return(_g=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},vg={ACTIVATED:"mdc-select--activated",DISABLED:"mdc-select--disabled",FOCUSED:"mdc-select--focused",INVALID:"mdc-select--invalid",MENU_INVALID:"mdc-select__menu--invalid",OUTLINED:"mdc-select--outlined",REQUIRED:"mdc-select--required",ROOT:"mdc-select",WITH_LEADING_ICON:"mdc-select--with-leading-icon"},yg={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",ARIA_SELECTED_ATTR:"aria-selected",CHANGE_EVENT:"MDCSelect:change",HIDDEN_INPUT_SELECTOR:'input[type="hidden"]',LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-select__icon",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",MENU_SELECTOR:".mdc-select__menu",OUTLINE_SELECTOR:".mdc-notched-outline",SELECTED_TEXT_SELECTOR:".mdc-select__selected-text",SELECT_ANCHOR_SELECTOR:".mdc-select__anchor",VALUE_ATTR:"data-value"},bg={LABEL_SCALE:.75,UNSET_INDEX:-1,CLICK_DEBOUNCE_TIMEOUT_MS:330},Eg=function(t){function e(i,n){void 0===n&&(n={});var o=t.call(this,_g(_g({},e.defaultAdapter),i))||this;return o.disabled=!1,o.isMenuOpen=!1,o.useDefaultValidation=!0,o.customValidity=!0,o.lastSelectedIndex=bg.UNSET_INDEX,o.clickDebounceTimeout=0,o.recentlyClicked=!1,o.leadingIcon=n.leadingIcon,o.helperText=n.helperText,o}return function(t,e){function i(){this.constructor=t}mg(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return vg},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return bg},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return yg},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},activateBottomLine:function(){},deactivateBottomLine:function(){},getSelectedIndex:function(){return-1},setSelectedIndex:function(){},hasLabel:function(){return!1},floatLabel:function(){},getLabelWidth:function(){return 0},setLabelRequired:function(){},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){},setRippleCenter:function(){},notifyChange:function(){},setSelectedText:function(){},isSelectAnchorFocused:function(){return!1},getSelectAnchorAttr:function(){return""},setSelectAnchorAttr:function(){},removeSelectAnchorAttr:function(){},addMenuClass:function(){},removeMenuClass:function(){},openMenu:function(){},closeMenu:function(){},getAnchorElement:function(){return null},setMenuAnchorElement:function(){},setMenuAnchorCorner:function(){},setMenuWrapFocus:function(){},focusMenuItemAtIndex:function(){},getMenuItemCount:function(){return 0},getMenuItemValues:function(){return[]},getMenuItemTextAtIndex:function(){return""},isTypeaheadInProgress:function(){return!1},typeaheadMatchItem:function(){return-1}}},enumerable:!0,configurable:!0}),e.prototype.getSelectedIndex=function(){return this.adapter.getSelectedIndex()},e.prototype.setSelectedIndex=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),t>=this.adapter.getMenuItemCount()||(t===bg.UNSET_INDEX?this.adapter.setSelectedText(""):this.adapter.setSelectedText(this.adapter.getMenuItemTextAtIndex(t).trim()),this.adapter.setSelectedIndex(t),e&&this.adapter.closeMenu(),i||this.lastSelectedIndex===t||this.handleChange(),this.lastSelectedIndex=t)},e.prototype.setValue=function(t,e){void 0===e&&(e=!1);var i=this.adapter.getMenuItemValues().indexOf(t);this.setSelectedIndex(i,!1,e)},e.prototype.getValue=function(){var t=this.adapter.getSelectedIndex(),e=this.adapter.getMenuItemValues();return t!==bg.UNSET_INDEX?e[t]:""},e.prototype.getDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){this.disabled=t,this.disabled?(this.adapter.addClass(vg.DISABLED),this.adapter.closeMenu()):this.adapter.removeClass(vg.DISABLED),this.leadingIcon&&this.leadingIcon.setDisabled(this.disabled),this.disabled?this.adapter.removeSelectAnchorAttr("tabindex"):this.adapter.setSelectAnchorAttr("tabindex","0"),this.adapter.setSelectAnchorAttr("aria-disabled",this.disabled.toString())},e.prototype.openMenu=function(){this.adapter.addClass(vg.ACTIVATED),this.adapter.openMenu(),this.isMenuOpen=!0,this.adapter.setSelectAnchorAttr("aria-expanded","true")},e.prototype.setHelperTextContent=function(t){this.helperText&&this.helperText.setContent(t)},e.prototype.layout=function(){if(this.adapter.hasLabel()){var t=this.getValue().length>0,e=this.adapter.hasClass(vg.FOCUSED),i=t||e,n=this.adapter.hasClass(vg.REQUIRED);this.notchOutline(i),this.adapter.floatLabel(i),this.adapter.setLabelRequired(n)}},e.prototype.layoutOptions=function(){var t=this.adapter.getMenuItemValues().indexOf(this.getValue());this.setSelectedIndex(t,!1,!0)},e.prototype.handleMenuOpened=function(){if(0!==this.adapter.getMenuItemValues().length){var t=this.getSelectedIndex(),e=t>=0?t:0;this.adapter.focusMenuItemAtIndex(e)}},e.prototype.handleMenuClosed=function(){this.adapter.removeClass(vg.ACTIVATED),this.isMenuOpen=!1,this.adapter.setSelectAnchorAttr("aria-expanded","false"),this.adapter.isSelectAnchorFocused()||this.blur()},e.prototype.handleChange=function(){this.layout(),this.adapter.notifyChange(this.getValue()),this.adapter.hasClass(vg.REQUIRED)&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.handleMenuItemAction=function(t){this.setSelectedIndex(t,!0)},e.prototype.handleFocus=function(){this.adapter.addClass(vg.FOCUSED),this.layout(),this.adapter.activateBottomLine()},e.prototype.handleBlur=function(){this.isMenuOpen||this.blur()},e.prototype.handleClick=function(t){this.disabled||this.recentlyClicked||(this.setClickDebounceTimeout(),this.isMenuOpen?this.adapter.closeMenu():(this.adapter.setRippleCenter(t),this.openMenu()))},e.prototype.handleKeydown=function(t){if(!this.isMenuOpen&&this.adapter.hasClass(vg.FOCUSED)){var e=tu(t)===Cd,i=tu(t)===wd,n=tu(t)===Nd,o=tu(t)===Ld;if(!i&&t.key&&1===t.key.length||i&&this.adapter.isTypeaheadInProgress()){var r=i?" ":t.key,s=this.adapter.typeaheadMatchItem(r,this.getSelectedIndex());return s>=0&&this.setSelectedIndex(s),void t.preventDefault()}(e||i||n||o)&&(n&&this.getSelectedIndex()>0?this.setSelectedIndex(this.getSelectedIndex()-1):o&&this.getSelectedIndex()<this.adapter.getMenuItemCount()-1&&this.setSelectedIndex(this.getSelectedIndex()+1),this.openMenu(),t.preventDefault())}},e.prototype.notchOutline=function(t){if(this.adapter.hasOutline()){var e=this.adapter.hasClass(vg.FOCUSED);if(t){var i=bg.LABEL_SCALE,n=this.adapter.getLabelWidth()*i;this.adapter.notchOutline(n)}else e||this.adapter.closeOutline()}},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon&&this.leadingIcon.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon&&this.leadingIcon.setContent(t)},e.prototype.setUseDefaultValidation=function(t){this.useDefaultValidation=t},e.prototype.setValid=function(t){this.useDefaultValidation||(this.customValidity=t),this.adapter.setSelectAnchorAttr("aria-invalid",(!t).toString()),t?(this.adapter.removeClass(vg.INVALID),this.adapter.removeMenuClass(vg.MENU_INVALID)):(this.adapter.addClass(vg.INVALID),this.adapter.addMenuClass(vg.MENU_INVALID)),this.syncHelperTextValidity(t)},e.prototype.isValid=function(){return this.useDefaultValidation&&this.adapter.hasClass(vg.REQUIRED)&&!this.adapter.hasClass(vg.DISABLED)?this.getSelectedIndex()!==bg.UNSET_INDEX&&(0!==this.getSelectedIndex()||Boolean(this.getValue())):this.customValidity},e.prototype.setRequired=function(t){t?this.adapter.addClass(vg.REQUIRED):this.adapter.removeClass(vg.REQUIRED),this.adapter.setSelectAnchorAttr("aria-required",t.toString()),this.adapter.setLabelRequired(t)},e.prototype.getRequired=function(){return"true"===this.adapter.getSelectAnchorAttr("aria-required")},e.prototype.init=function(){var t=this.adapter.getAnchorElement();t&&(this.adapter.setMenuAnchorElement(t),this.adapter.setMenuAnchorCorner(Qu.BOTTOM_START)),this.adapter.setMenuWrapFocus(!1),this.setDisabled(this.adapter.hasClass(vg.DISABLED)),this.syncHelperTextValidity(!this.adapter.hasClass(vg.INVALID)),this.layout(),this.layoutOptions()},e.prototype.blur=function(){this.adapter.removeClass(vg.FOCUSED),this.layout(),this.adapter.deactivateBottomLine(),this.adapter.hasClass(vg.REQUIRED)&&this.useDefaultValidation&&this.setValid(this.isValid())},e.prototype.syncHelperTextValidity=function(t){if(this.helperText){this.helperText.setValidity(t);var e=this.helperText.isVisible(),i=this.helperText.getId();e&&i?this.adapter.setSelectAnchorAttr(yg.ARIA_DESCRIBEDBY,i):this.adapter.removeSelectAnchorAttr(yg.ARIA_DESCRIBEDBY)}},e.prototype.setClickDebounceTimeout=function(){var t=this;clearTimeout(this.clickDebounceTimeout),this.clickDebounceTimeout=setTimeout((function(){t.recentlyClicked=!1}),bg.CLICK_DEBOUNCE_TIMEOUT_MS),this.recentlyClicked=!0},e}(Et);let Tg,xg,kg,Sg,Cg,wg,Ig,Rg,Ag,Og=t=>t,Dg=class extends eg{};Dg.styles=ig,Dg=t([],Dg);let Ng=class extends lt{render(){return F(Tg||(Tg=Og`<slot></slot>`))}};Ng.styles=dl,Ng=t([],Ng);const Mg=(t={})=>{const e={};for(const i in t)e[i]=t[i];return Object.assign({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1},e)};class Lg extends Aa{constructor(){super(...arguments),this.mdcFoundationClass=Eg,this.disabled=!1,this.outlined=!1,this.label="",this.outlineOpen=!1,this.outlineWidth=0,this.value="",this.selectedText="",this.icon="",this.menuOpen=!1,this.helper="",this.validateOnInitialRender=!1,this.validationMessage="",this.required=!1,this.naturalMenuWidth=!1,this.isUiValid=!0,this.typeaheadState={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""},this.sortedIndexByFirstChar=new Map,this.menuElement_=null,this.listeners=[],this.onBodyClickBound=()=>{},this._menuUpdateComplete=null,this.renderReady=!1,this.valueSetDirectly=!1,this.validityTransform=null,this._validity=Mg()}get items(){return this.menuElement_||(this.menuElement_=this.menuElement),this.menuElement_?this.menuElement_.items:[]}get selected(){const t=this.menuElement;return t?t.selected:null}get index(){const t=this.menuElement;return t?t.index:-1}get shouldRenderHelperText(){return!!this.helper||!!this.validationMessage}get validity(){return this._checkValidity(this.value),this._validity}render(){const t={"mdc-select--disabled":this.disabled,"mdc-select--no-label":!this.label,"mdc-select--filled":!this.outlined,"mdc-select--outlined":this.outlined,"mdc-select--with-leading-icon":!!this.icon,"mdc-select--required":this.required,"mdc-select--invalid":!this.isUiValid},e={"mdc-select__menu--invalid":!this.isUiValid},i=this.shouldRenderHelperText?"helper-text":void 0;return F(xg||(xg=Og` <div class="mdc-select ${0}"> <input class="formElement" .value="${0}" hidden ?required="${0}"> <div class="mdc-select__anchor" aria-autocomplete="none" role="combobox" aria-expanded="${0}" aria-invalid="${0}" aria-haspopup="listbox" aria-labelledby="label" aria-required="${0}" aria-describedby="${0}" @click="${0}" @focus="${0}" @blur="${0}" @keydown="${0}"> ${0} ${0} ${0} <span class="mdc-select__selected-text-container"> <span class="mdc-select__selected-text">${0}</span> </span> <span class="mdc-select__dropdown-icon"> <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"> <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"> </polygon> <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"> </polygon> </svg> </span> ${0} </div> <mwc-menu innerRole="listbox" wrapFocus class="mdc-select__menu mdc-menu mdc-menu-surface ${0}" activatable .fullwidth="${0}" .open="${0}" .anchor="${0}" @selected="${0}" @opened="${0}" @closed="${0}" @items-updated="${0}" @keydown="${0}"> <slot></slot> </mwc-menu> </div> ${0}`),Nt(t),this.value,this.required,this.menuOpen,!this.isUiValid,this.required,Jt(i),this.onClick,this.onFocus,this.onBlur,this.onKeydown,this.renderRipple(),this.outlined?this.renderOutline():this.renderLabel(),this.renderLeadingIcon(),this.selectedText,this.renderLineRipple(),Nt(e),!this.naturalMenuWidth,this.menuOpen,this.anchorElement,this.onSelected,this.onOpened,this.onClosed,this.onItemsUpdated,this.handleTypeahead,this.renderHelperText())}renderRipple(){return this.outlined?v:F(kg||(kg=Og` <span class="mdc-select__ripple"></span> `))}renderOutline(){return this.outlined?F(Sg||(Sg=Og` <mwc-notched-outline .width="${0}" .open="${0}" class="mdc-notched-outline"> ${0} </mwc-notched-outline>`),this.outlineWidth,this.outlineOpen,this.renderLabel()):v}renderLabel(){return this.label?F(Cg||(Cg=Og` <span .floatingLabelFoundation="${0}" id="label">${0}</span> `),wa(this.label),this.label):v}renderLeadingIcon(){return this.icon?F(wg||(wg=Og`<mwc-icon class="mdc-select__icon"><div>${0}</div></mwc-icon>`),this.icon):v}renderLineRipple(){return this.outlined?v:F(Ig||(Ig=Og` <span .lineRippleFoundation="${0}"></span> `),Ra())}renderHelperText(){if(!this.shouldRenderHelperText)return v;const t=this.validationMessage&&!this.isUiValid;return F(Rg||(Rg=Og` <p class="mdc-select-helper-text ${0}" id="helper-text">${0}</p>`),Nt({"mdc-select-helper-text--validation-msg":t}),t?this.validationMessage:this.helper)}createAdapter(){return Object.assign(Object.assign({},ht(this.mdcRoot)),{activateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.activate()},deactivateBottomLine:()=>{this.lineRippleElement&&this.lineRippleElement.lineRippleFoundation.deactivate()},hasLabel:()=>!!this.label,floatLabel:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.float(t)},getLabelWidth:()=>this.labelElement?this.labelElement.floatingLabelFoundation.getWidth():0,setLabelRequired:t=>{this.labelElement&&this.labelElement.floatingLabelFoundation.setRequired(t)},hasOutline:()=>this.outlined,notchOutline:t=>{this.outlineElement&&!this.outlineOpen&&(this.outlineWidth=t,this.outlineOpen=!0)},closeOutline:()=>{this.outlineElement&&(this.outlineOpen=!1)},setRippleCenter:t=>{if(this.lineRippleElement){this.lineRippleElement.lineRippleFoundation.setRippleCenter(t)}},notifyChange:async t=>{if(!this.valueSetDirectly&&t===this.value)return;this.valueSetDirectly=!1,this.value=t,await this.updateComplete;const e=new Event("change",{bubbles:!0});this.dispatchEvent(e)},setSelectedText:t=>this.selectedText=t,isSelectAnchorFocused:()=>{const t=this.anchorElement;if(!t)return!1;return t.getRootNode().activeElement===t},getSelectAnchorAttr:t=>{const e=this.anchorElement;return e?e.getAttribute(t):null},setSelectAnchorAttr:(t,e)=>{const i=this.anchorElement;i&&i.setAttribute(t,e)},removeSelectAnchorAttr:t=>{const e=this.anchorElement;e&&e.removeAttribute(t)},openMenu:()=>{this.menuOpen=!0},closeMenu:()=>{this.menuOpen=!1},addMenuClass:()=>{},removeMenuClass:()=>{},getAnchorElement:()=>this.anchorElement,setMenuAnchorElement:()=>{},setMenuAnchorCorner:()=>{const t=this.menuElement;t&&(t.corner="BOTTOM_START")},setMenuWrapFocus:t=>{const e=this.menuElement;e&&(e.wrapFocus=t)},focusMenuItemAtIndex:t=>{const e=this.menuElement;if(!e)return;const i=e.items[t];i&&i.focus()},getMenuItemCount:()=>{const t=this.menuElement;return t?t.items.length:0},getMenuItemValues:()=>{const t=this.menuElement;if(!t)return[];return t.items.map((t=>t.value))},getMenuItemTextAtIndex:t=>{const e=this.menuElement;if(!e)return"";const i=e.items[t];return i?i.text:""},getSelectedIndex:()=>this.index,setSelectedIndex:()=>{},isTypeaheadInProgress:()=>fg(this.typeaheadState),typeaheadMatchItem:(t,e)=>{if(!this.menuElement)return-1;const i=gg({focusItemAtIndex:t=>{this.menuElement.focusItemAtIndex(t)},focusedItemIndex:e||this.menuElement.getFocusedItemIndex(),nextChar:t,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:!1,isItemAtIndexDisabled:t=>this.items[t].disabled},this.typeaheadState);return-1!==i&&this.select(i),i}})}checkValidity(){const t=this._checkValidity(this.value);if(!t){const t=new Event("invalid",{bubbles:!1,cancelable:!0});this.dispatchEvent(t)}return t}reportValidity(){const t=this.checkValidity();return this.isUiValid=t,t}_checkValidity(t){const e=this.formElement.validity;let i=Mg(e);if(this.validityTransform){const e=this.validityTransform(t,i);i=Object.assign(Object.assign({},i),e)}return this._validity=i,this._validity.valid}setCustomValidity(t){this.validationMessage=t,this.formElement.setCustomValidity(t)}async _getUpdateComplete(){await this._menuUpdateComplete,await super._getUpdateComplete()}async firstUpdated(){const t=this.menuElement;if(t&&(this._menuUpdateComplete=t.updateComplete,await this._menuUpdateComplete),super.firstUpdated(),this.mdcFoundation.isValid=()=>!0,this.mdcFoundation.setValid=()=>{},this.mdcFoundation.setDisabled(this.disabled),this.validateOnInitialRender&&this.reportValidity(),!this.selected){!this.items.length&&this.slotElement&&this.slotElement.assignedNodes({flatten:!0}).length&&(await new Promise((t=>requestAnimationFrame(t))),await this.layout());const t=this.items.length&&""===this.items[0].value;if(!this.value&&t)return void this.select(0);this.selectByValue(this.value)}this.sortedIndexByFirstChar=pg(this.items.length,(t=>this.items[t].text)),this.renderReady=!0}onItemsUpdated(){this.sortedIndexByFirstChar=pg(this.items.length,(t=>this.items[t].text))}select(t){const e=this.menuElement;e&&e.select(t)}selectByValue(t){let e=-1;for(let i=0;i<this.items.length;i++){if(this.items[i].value===t){e=i;break}}this.valueSetDirectly=!0,this.select(e),this.mdcFoundation.handleChange()}disconnectedCallback(){super.disconnectedCallback();for(const t of this.listeners)t.target.removeEventListener(t.name,t.cb)}focus(){const t=new CustomEvent("focus"),e=this.anchorElement;e&&(e.dispatchEvent(t),e.focus())}blur(){const t=new CustomEvent("blur"),e=this.anchorElement;e&&(e.dispatchEvent(t),e.blur())}onFocus(){this.mdcFoundation&&this.mdcFoundation.handleFocus()}onBlur(){this.mdcFoundation&&this.mdcFoundation.handleBlur();const t=this.menuElement;t&&!t.open&&this.reportValidity()}onClick(t){if(this.mdcFoundation){this.focus();const e=t.target.getBoundingClientRect();let i=0;i="touches"in t?t.touches[0].clientX:t.clientX;const n=i-e.left;this.mdcFoundation.handleClick(n)}}onKeydown(t){const e=tu(t)===Nd,i=tu(t)===Ld;if(i||e){const n=e&&this.index>0,o=i&&this.index<this.items.length-1;return n?this.select(this.index-1):o&&this.select(this.index+1),t.preventDefault(),void this.mdcFoundation.openMenu()}this.mdcFoundation.handleKeydown(t)}handleTypeahead(t){if(!this.menuElement)return;const e=this.menuElement.getFocusedItemIndex(),i=dt(t.target)?t.target:null;!function(t,e){var i=t.event,n=t.isTargetListItem,o=t.focusedItemIndex,r=t.focusItemAtIndex,s=t.sortedIndexByFirstChar,a=t.isItemAtIndexDisabled,l="ArrowLeft"===tu(i),c="ArrowUp"===tu(i),d="ArrowRight"===tu(i),u="ArrowDown"===tu(i),h="Home"===tu(i),p="End"===tu(i),g="Enter"===tu(i),f="Spacebar"===tu(i);l||c||d||u||h||p||g||(f||1!==i.key.length?f&&(n&&hg(i),n&&fg(e)&&gg({focusItemAtIndex:r,focusedItemIndex:o,nextChar:" ",sortedIndexByFirstChar:s,skipFocus:!1,isItemAtIndexDisabled:a},e)):(hg(i),gg({focusItemAtIndex:r,focusedItemIndex:o,nextChar:i.key.toLowerCase(),sortedIndexByFirstChar:s,skipFocus:!1,isItemAtIndexDisabled:a},e)))}({event:t,focusItemAtIndex:t=>{this.menuElement.focusItemAtIndex(t)},focusedItemIndex:e,isTargetListItem:!!i&&i.hasAttribute("mwc-list-item"),sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:t=>this.items[t].disabled},this.typeaheadState)}async onSelected(t){this.mdcFoundation||await this.updateComplete,this.mdcFoundation.handleMenuItemAction(t.detail.index);const e=this.items[t.detail.index];e&&(this.value=e.value)}onOpened(){this.mdcFoundation&&(this.menuOpen=!0,this.mdcFoundation.handleMenuOpened())}onClosed(){this.mdcFoundation&&(this.menuOpen=!1,this.mdcFoundation.handleMenuClosed())}async layout(t=!0){this.mdcFoundation&&this.mdcFoundation.layout(),await this.updateComplete;const e=this.menuElement;e&&e.layout(t);const i=this.labelElement;if(!i)return void(this.outlineOpen=!1);const n=!!this.label&&!!this.value;if(i.floatingLabelFoundation.float(n),!this.outlined)return;this.outlineOpen=n,await this.updateComplete;const o=i.floatingLabelFoundation.getWidth();this.outlineOpen&&(this.outlineWidth=o)}}t([Z(".mdc-select")],Lg.prototype,"mdcRoot",void 0),t([Z(".formElement")],Lg.prototype,"formElement",void 0),t([Z("slot")],Lg.prototype,"slotElement",void 0),t([Z("select")],Lg.prototype,"nativeSelectElement",void 0),t([Z("input")],Lg.prototype,"nativeInputElement",void 0),t([Z(".mdc-line-ripple")],Lg.prototype,"lineRippleElement",void 0),t([Z(".mdc-floating-label")],Lg.prototype,"labelElement",void 0),t([Z("mwc-notched-outline")],Lg.prototype,"outlineElement",void 0),t([Z(".mdc-menu")],Lg.prototype,"menuElement",void 0),t([Z(".mdc-select__anchor")],Lg.prototype,"anchorElement",void 0),t([$({type:Boolean,attribute:"disabled",reflect:!0}),vt((function(t){this.renderReady&&this.mdcFoundation.setDisabled(t)}))],Lg.prototype,"disabled",void 0),t([$({type:Boolean}),vt((function(t,e){void 0!==e&&this.outlined!==e&&this.layout(!1)}))],Lg.prototype,"outlined",void 0),t([$({type:String}),vt((function(t,e){void 0!==e&&this.label!==e&&this.layout(!1)}))],Lg.prototype,"label",void 0),t([$({type:Boolean})],Lg.prototype,"outlineOpen",void 0),t([$({type:Number})],Lg.prototype,"outlineWidth",void 0),t([$({type:String}),vt((function(t){if(this.mdcFoundation){const e=null===this.selected&&!!t,i=this.selected&&this.selected.value!==t;(e||i)&&this.selectByValue(t),this.reportValidity()}}))],Lg.prototype,"value",void 0),t([$({type:String})],Lg.prototype,"selectedText",void 0),t([$({type:String})],Lg.prototype,"icon",void 0),t([$({type:Boolean})],Lg.prototype,"menuOpen",void 0),t([$({type:String})],Lg.prototype,"helper",void 0),t([$({type:Boolean})],Lg.prototype,"validateOnInitialRender",void 0),t([$({type:String})],Lg.prototype,"validationMessage",void 0),t([$({type:Boolean})],Lg.prototype,"required",void 0),t([$({type:Boolean})],Lg.prototype,"naturalMenuWidth",void 0),t([$({type:Boolean})],Lg.prototype,"isUiValid",void 0),t([it({capture:!0})],Lg.prototype,"handleTypeahead",null);const Pg=st(Ag||(Ag=Og`.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform;transition:transform 150ms cubic-bezier(.4,0,.2,1),color 150ms cubic-bezier(.4,0,.2,1)}.mdc-floating-label[dir=rtl],[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required::after{margin-left:1px;margin-right:0;content:"*"}.mdc-floating-label--required[dir=rtl]::after,[dir=rtl] .mdc-floating-label--required::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(.75)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0)) translateY(-106%) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-106%) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-106%) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-106%) scale(.75)}}@keyframes mdc-ripple-fg-radius-in{from{animation-timing-function:cubic-bezier(.4,0,.2,1);transform:translate(var(--mdc-ripple-fg-translate-start,0)) scale(1)}to{transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}}@keyframes mdc-ripple-fg-opacity-in{from{animation-timing-function:linear;opacity:0}to{opacity:var(--mdc-ripple-fg-opacity,0)}}@keyframes mdc-ripple-fg-opacity-out{from{animation-timing-function:linear;opacity:var(--mdc-ripple-fg-opacity,0)}to{opacity:0}}.mdc-line-ripple::after,.mdc-line-ripple::before{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px;z-index:1}.mdc-line-ripple::after{transform:scaleX(0);border-bottom-width:2px;opacity:0;z-index:2}.mdc-line-ripple::after{transition:transform 180ms cubic-bezier(.4,0,.2,1),opacity 180ms cubic-bezier(.4,0,.2,1)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}.mdc-notched-outline[dir=rtl],[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}.mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}.mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(100% / .75)}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl],[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-select{display:inline-flex;position:relative}.mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0,0,0,.87)}.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:rgba(0,0,0,.38)}.mdc-select:not(.mdc-select--disabled) .mdc-floating-label{color:rgba(0,0,0,.6)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:rgba(98,0,238,.87)}.mdc-select.mdc-select--disabled .mdc-floating-label{color:rgba(0,0,0,.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:rgba(0,0,0,.54)}.mdc-select:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#6200ee;fill:var(--mdc-theme-primary,#6200ee)}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:rgba(0,0,0,.38)}.mdc-select:not(.mdc-select--disabled)+.mdc-select-helper-text{color:rgba(0,0,0,.6)}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:rgba(0,0,0,.38)}.mdc-select:not(.mdc-select--disabled) .mdc-select__icon{color:rgba(0,0,0,.54)}.mdc-select.mdc-select--disabled .mdc-select__icon{color:rgba(0,0,0,.38)}@media screen and (-ms-high-contrast:active){.mdc-select.mdc-select--disabled .mdc-select__selected-text{color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__dropdown-icon{fill:red}.mdc-select.mdc-select--disabled .mdc-floating-label{color:GrayText}.mdc-select.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:GrayText}.mdc-select.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select.mdc-select--disabled .mdc-notched-outline__trailing{border-color:GrayText}.mdc-select.mdc-select--disabled .mdc-select__icon{color:GrayText}.mdc-select.mdc-select--disabled+.mdc-select-helper-text{color:GrayText}}.mdc-select .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-select .mdc-select__anchor{padding-left:16px;padding-right:0}.mdc-select .mdc-select__anchor[dir=rtl],[dir=rtl] .mdc-select .mdc-select__anchor{padding-left:0;padding-right:16px}.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor{padding-left:0;padding-right:0}.mdc-select.mdc-select--with-leading-icon .mdc-select__anchor[dir=rtl],[dir=rtl] .mdc-select.mdc-select--with-leading-icon .mdc-select__anchor{padding-left:0;padding-right:0}.mdc-select .mdc-select__icon{width:24px;height:24px;font-size:24px}.mdc-select .mdc-select__dropdown-icon{width:24px;height:24px}.mdc-select .mdc-select__menu .mdc-list-item{padding-left:16px;padding-right:16px}.mdc-select .mdc-select__menu .mdc-list-item[dir=rtl],[dir=rtl] .mdc-select .mdc-select__menu .mdc-list-item{padding-left:16px;padding-right:16px}.mdc-select .mdc-select__menu .mdc-list-item__graphic{margin-left:0;margin-right:12px}.mdc-select .mdc-select__menu .mdc-list-item__graphic[dir=rtl],[dir=rtl] .mdc-select .mdc-select__menu .mdc-list-item__graphic{margin-left:12px;margin-right:0}.mdc-select__dropdown-icon{margin-left:12px;margin-right:12px;display:inline-flex;position:relative;align-self:center;align-items:center;justify-content:center;flex-shrink:0;pointer-events:none}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active,.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{position:absolute;top:0;left:0}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-graphic{width:41.6666666667%;height:20.8333333333%}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:1;transition:opacity 75ms linear 75ms}.mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:0;transition:opacity 75ms linear}.mdc-select__dropdown-icon[dir=rtl],[dir=rtl] .mdc-select__dropdown-icon{margin-left:12px;margin-right:12px}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-inactive{opacity:0;transition:opacity 49.5ms linear}.mdc-select--activated .mdc-select__dropdown-icon .mdc-select__dropdown-icon-active{opacity:1;transition:opacity .1s linear 49.5ms}.mdc-select__anchor{width:200px;min-width:0;flex:1 1 auto;position:relative;box-sizing:border-box;overflow:hidden;outline:0;cursor:pointer}.mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-106%) scale(.75)}.mdc-select__selected-text-container{display:flex;appearance:none;pointer-events:none;box-sizing:border-box;width:auto;min-width:0;flex-grow:1;height:28px;border:none;outline:0;padding:0;background-color:transparent;color:inherit}.mdc-select__selected-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-subtitle1-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:1rem;font-size:var(--mdc-typography-subtitle1-font-size,1rem);line-height:1.75rem;line-height:var(--mdc-typography-subtitle1-line-height,1.75rem);font-weight:400;font-weight:var(--mdc-typography-subtitle1-font-weight,400);letter-spacing:.009375em;letter-spacing:var(--mdc-typography-subtitle1-letter-spacing,.009375em);text-decoration:inherit;text-decoration:var(--mdc-typography-subtitle1-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-subtitle1-text-transform,inherit);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;width:100%;text-align:left}.mdc-select__selected-text[dir=rtl],[dir=rtl] .mdc-select__selected-text{text-align:right}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-floating-label{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--invalid+.mdc-select-helper-text--validation-msg{color:#b00020;color:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-select__dropdown-icon{fill:#b00020;fill:var(--mdc-theme-error,#b00020)}.mdc-select--disabled{cursor:default;pointer-events:none}.mdc-select--with-leading-icon .mdc-select__menu .mdc-list-item{padding-left:12px;padding-right:12px}.mdc-select--with-leading-icon .mdc-select__menu .mdc-list-item[dir=rtl],[dir=rtl] .mdc-select--with-leading-icon .mdc-select__menu .mdc-list-item{padding-left:12px;padding-right:12px}.mdc-select__menu .mdc-list .mdc-select__icon{margin-left:0;margin-right:0}.mdc-select__menu .mdc-list .mdc-select__icon[dir=rtl],[dir=rtl] .mdc-select__menu .mdc-list .mdc-select__icon{margin-left:0;margin-right:0}.mdc-select__menu .mdc-list .mdc-list-item--activated,.mdc-select__menu .mdc-list .mdc-list-item--selected{color:#000;color:var(--mdc-theme-on-surface,#000)}.mdc-select__menu .mdc-list .mdc-list-item--activated .mdc-list-item__graphic,.mdc-select__menu .mdc-list .mdc-list-item--selected .mdc-list-item__graphic{color:#000;color:var(--mdc-theme-on-surface,#000)}.mdc-select--filled .mdc-select__anchor{height:56px;display:flex;align-items:baseline}.mdc-select--filled .mdc-select__anchor::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text::before{content:"â€‹"}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--filled.mdc-select--no-label .mdc-select__anchor::before{display:none}.mdc-select--filled .mdc-select__anchor{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-select--filled:not(.mdc-select--disabled) .mdc-select__anchor{background-color:#f5f5f5}.mdc-select--filled.mdc-select--disabled .mdc-select__anchor{background-color:#fafafa}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.42)}.mdc-select--filled:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.87)}.mdc-select--filled:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#6200ee;border-bottom-color:var(--mdc-theme-primary,#6200ee)}.mdc-select--filled.mdc-select--disabled .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.06)}.mdc-select--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-select--filled .mdc-floating-label--float-above{max-width:calc(100% / .75 - 64px / .75)}.mdc-select--filled .mdc-menu-surface--is-open-below{border-top-left-radius:0;border-top-right-radius:0}.mdc-select--filled.mdc-select--focused.mdc-line-ripple::after{transform:scale(1,2);opacity:1}.mdc-select--filled .mdc-floating-label{left:16px;right:initial}.mdc-select--filled .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-select--filled .mdc-floating-label{left:initial;right:16px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{left:48px;right:initial}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{left:initial;right:48px}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label--float-above{max-width:calc(100% / .75 - 96px / .75)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-select--invalid:not(.mdc-select--disabled) .mdc-line-ripple::after{border-bottom-color:#b00020;border-bottom-color:var(--mdc-theme-error,#b00020)}.mdc-select--outlined{border:none}.mdc-select--outlined .mdc-select__anchor{height:56px}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(.75)}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-56px{0%{transform:translateX(calc(0 - 0)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 0)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 0)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - 0)) translateY(-34.75px) scale(.75)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl],[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}@supports(top:max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small,4px))}}@supports(top:max(0%)){.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small,4px)) * 2)}}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small,4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small,4px);border-bottom-left-radius:0}.mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl],[dir=rtl] .mdc-select--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small,4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small,4px)}@supports(top:max(0%)){.mdc-select--outlined .mdc-select__anchor{padding-left:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}.mdc-select--outlined .mdc-select__anchor[dir=rtl],[dir=rtl] .mdc-select--outlined .mdc-select__anchor{padding-left:0}@supports(top:max(0%)){.mdc-select--outlined .mdc-select__anchor[dir=rtl],[dir=rtl] .mdc-select--outlined .mdc-select__anchor{padding-right:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}@supports(top:max(0%)){.mdc-select--outlined+.mdc-select-helper-text{margin-left:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}.mdc-select--outlined+.mdc-select-helper-text[dir=rtl],[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text{margin-left:0}@supports(top:max(0%)){.mdc-select--outlined+.mdc-select-helper-text[dir=rtl],[dir=rtl] .mdc-select--outlined+.mdc-select-helper-text{margin-right:max(16px,calc(var(--mdc-shape-small,4px) + 4px))}}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-select__anchor{background-color:transparent}.mdc-select--outlined.mdc-select--disabled .mdc-select__anchor{background-color:transparent}.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.38)}.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.87)}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#6200ee;border-color:var(--mdc-theme-primary,#6200ee)}.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--disabled .mdc-notched-outline__trailing{border-color:rgba(0,0,0,.06)}.mdc-select--outlined .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-select--outlined .mdc-select__anchor{display:flex;align-items:baseline;overflow:visible}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined 250ms 1}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-select--outlined .mdc-select__anchor .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(.75)}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined .mdc-select__anchor.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined .mdc-select__anchor .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text::before{content:"â€‹"}.mdc-select--outlined .mdc-select__anchor .mdc-select__selected-text-container{height:100%;display:inline-flex;align-items:center}.mdc-select--outlined .mdc-select__anchor::before{display:none}.mdc-select--outlined .mdc-select__selected-text-container{display:flex;border:none;z-index:1;background-color:transparent}.mdc-select--outlined .mdc-select__icon{z-index:2}.mdc-select--outlined .mdc-floating-label{line-height:1.15rem;left:4px;right:initial}.mdc-select--outlined .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-select--outlined .mdc-floating-label{left:initial;right:4px}.mdc-select--outlined.mdc-select--focused .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled) .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled):not(.mdc-select--focused) .mdc-select__anchor:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:2px}.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-select--outlined.mdc-select--invalid:not(.mdc-select--disabled).mdc-select--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#b00020;border-color:var(--mdc-theme-error,#b00020)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:36px;right:initial}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label[dir=rtl],[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label{left:initial;right:36px}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above[dir=rtl],[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--float-above{font-size:.75rem}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(.75)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(32px) scale(.75)}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-select--outlined.mdc-select--with-leading-icon.mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(.75)}}.mdc-select--outlined.mdc-select--with-leading-icon[dir=rtl] .mdc-floating-label--shake,[dir=rtl] .mdc-select--outlined.mdc-select--with-leading-icon .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px 250ms 1}@keyframes mdc-floating-label-shake-float-above-select-outlined-leading-icon-56px-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(.75)}33%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(.75)}66%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(.75)}}.mdc-select--outlined.mdc-select--with-leading-icon .mdc-select__anchor :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 96px)}.mdc-select--outlined .mdc-menu-surface{margin-bottom:8px}.mdc-select--outlined .mdc-menu-surface--is-open-below,.mdc-select--outlined.mdc-select--no-label .mdc-menu-surface{margin-bottom:0}.mdc-select__anchor{--mdc-ripple-fg-size:0;--mdc-ripple-left:0;--mdc-ripple-top:0;--mdc-ripple-fg-scale:1;--mdc-ripple-fg-translate-end:0;--mdc-ripple-fg-translate-start:0;-webkit-tap-highlight-color:transparent;will-change:transform,opacity}.mdc-select__anchor .mdc-select__ripple::after,.mdc-select__anchor .mdc-select__ripple::before{position:absolute;border-radius:50%;opacity:0;pointer-events:none;content:""}.mdc-select__anchor .mdc-select__ripple::before{transition:opacity 15ms linear,background-color 15ms linear;z-index:1;z-index:var(--mdc-ripple-z-index,1)}.mdc-select__anchor .mdc-select__ripple::after{z-index:0;z-index:var(--mdc-ripple-z-index,0)}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::before{transform:scale(var(--mdc-ripple-fg-scale,1))}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{top:0;left:0;transform:scale(0);transform-origin:center center}.mdc-select__anchor.mdc-ripple-upgraded--unbounded .mdc-select__ripple::after{top:var(--mdc-ripple-top,0);left:var(--mdc-ripple-left,0)}.mdc-select__anchor.mdc-ripple-upgraded--foreground-activation .mdc-select__ripple::after{animation:mdc-ripple-fg-radius-in 225ms forwards,mdc-ripple-fg-opacity-in 75ms forwards}.mdc-select__anchor.mdc-ripple-upgraded--foreground-deactivation .mdc-select__ripple::after{animation:mdc-ripple-fg-opacity-out 150ms;transform:translate(var(--mdc-ripple-fg-translate-end,0)) scale(var(--mdc-ripple-fg-scale,1))}.mdc-select__anchor .mdc-select__ripple::after,.mdc-select__anchor .mdc-select__ripple::before{top:calc(50% - 100%);left:calc(50% - 100%);width:200%;height:200%}.mdc-select__anchor.mdc-ripple-upgraded .mdc-select__ripple::after{width:var(--mdc-ripple-fg-size,100%);height:var(--mdc-ripple-fg-size,100%)}.mdc-select__anchor .mdc-select__ripple::after,.mdc-select__anchor .mdc-select__ripple::before{background-color:rgba(0,0,0,.87);background-color:var(--mdc-ripple-color,rgba(0,0,0,.87))}.mdc-select__anchor.mdc-ripple-surface--hover .mdc-select__ripple::before,.mdc-select__anchor:hover .mdc-select__ripple::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-select__anchor.mdc-ripple-upgraded--background-focused .mdc-select__ripple::before,.mdc-select__anchor:not(.mdc-ripple-upgraded):focus .mdc-select__ripple::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-select__anchor .mdc-select__ripple{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.mdc-select__menu .mdc-list .mdc-list-item--selected .mdc-list-item__ripple::after,.mdc-select__menu .mdc-list .mdc-list-item--selected .mdc-list-item__ripple::before{background-color:#000;background-color:var(--mdc-ripple-color,var(--mdc-theme-on-surface,#000))}.mdc-select__menu .mdc-list .mdc-list-item--selected.mdc-ripple-surface--hover .mdc-list-item__ripple::before,.mdc-select__menu .mdc-list .mdc-list-item--selected:hover .mdc-list-item__ripple::before{opacity:.04;opacity:var(--mdc-ripple-hover-opacity,.04)}.mdc-select__menu .mdc-list .mdc-list-item--selected.mdc-ripple-upgraded--background-focused .mdc-list-item__ripple::before,.mdc-select__menu .mdc-list .mdc-list-item--selected:not(.mdc-ripple-upgraded):focus .mdc-list-item__ripple::before{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-focus-opacity,.12)}.mdc-select__menu .mdc-list .mdc-list-item--selected:not(.mdc-ripple-upgraded) .mdc-list-item__ripple::after{transition:opacity 150ms linear}.mdc-select__menu .mdc-list .mdc-list-item--selected:not(.mdc-ripple-upgraded):active .mdc-list-item__ripple::after{transition-duration:75ms;opacity:.12;opacity:var(--mdc-ripple-press-opacity,.12)}.mdc-select__menu .mdc-list .mdc-list-item--selected.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mdc-select-helper-text{margin:0;margin-left:16px;margin-right:16px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:Roboto,sans-serif;font-family:var(--mdc-typography-caption-font-family,var(--mdc-typography-font-family,Roboto,sans-serif));font-size:.75rem;font-size:var(--mdc-typography-caption-font-size,.75rem);line-height:1.25rem;line-height:var(--mdc-typography-caption-line-height,1.25rem);font-weight:400;font-weight:var(--mdc-typography-caption-font-weight,400);letter-spacing:.0333333333em;letter-spacing:var(--mdc-typography-caption-letter-spacing,.0333333333em);text-decoration:inherit;text-decoration:var(--mdc-typography-caption-text-decoration,inherit);text-transform:inherit;text-transform:var(--mdc-typography-caption-text-transform,inherit);display:block;margin-top:0;line-height:normal}.mdc-select-helper-text[dir=rtl],[dir=rtl] .mdc-select-helper-text{margin-left:16px;margin-right:16px}.mdc-select-helper-text::before{display:inline-block;width:0;height:16px;content:"";vertical-align:0}.mdc-select-helper-text--validation-msg{opacity:0;transition:opacity 180ms cubic-bezier(.4,0,.2,1)}.mdc-select--invalid+.mdc-select-helper-text--validation-msg,.mdc-select-helper-text--validation-msg-persistent{opacity:1}.mdc-select--with-leading-icon .mdc-select__icon{display:inline-block;box-sizing:border-box;border:none;text-decoration:none;cursor:pointer;user-select:none;flex-shrink:0;align-self:center;background-color:transparent;fill:currentColor}.mdc-select--with-leading-icon .mdc-select__icon{margin-left:12px;margin-right:12px}.mdc-select--with-leading-icon .mdc-select__icon[dir=rtl],[dir=rtl] .mdc-select--with-leading-icon .mdc-select__icon{margin-left:12px;margin-right:12px}.mdc-select__icon:not([tabindex]),.mdc-select__icon[tabindex="-1"]{cursor:default;pointer-events:none}.material-icons{font-family:var(--mdc-icon-font, "Material Icons");font-weight:400;font-style:normal;font-size:var(--mdc-icon-size,24px);line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;font-feature-settings:"liga"}:host{display:inline-block;vertical-align:top;outline:0}.mdc-select{width:100%}[hidden]{display:none}.mdc-select__icon{z-index:2}.mdc-select--with-leading-icon{--mdc-list-item-graphic-margin:calc(48px - var(--mdc-list-item-graphic-size, 24px) - var(--mdc-list-side-padding, 16px))}.mdc-select .mdc-select__anchor .mdc-select__selected-text{overflow:hidden}.mdc-select .mdc-select__anchor *{display:inline-flex}.mdc-select .mdc-select__anchor .mdc-floating-label{display:inline-block}mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-select-outlined-idle-border-color, rgba(0, 0, 0, 0.38));--mdc-notched-outline-notch-offset:1px}:host(:not([disabled]):hover) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-select-outlined-hover-border-color, rgba(0, 0, 0, 0.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-select__selected-text{color:rgba(0,0,0,.87);color:var(--mdc-select-ink-color,rgba(0,0,0,.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled) .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.42);border-bottom-color:var(--mdc-select-idle-line-color,rgba(0,0,0,.42))}:host(:not([disabled])) .mdc-select:not(.mdc-select--disabled):hover .mdc-line-ripple::before{border-bottom-color:rgba(0,0,0,.87);border-bottom-color:var(--mdc-select-hover-line-color,rgba(0,0,0,.87))}:host(:not([disabled])) .mdc-select:not(.mdc-select--outlined):not(.mdc-select--disabled) .mdc-select__anchor{background-color:#f5f5f5;background-color:var(--mdc-select-fill-color,#f5f5f5)}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-select__dropdown-icon{fill:var(--mdc-select-error-dropdown-icon-color,var(--mdc-select-error-color,var(--mdc-theme-error,#b00020)))}:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label,:host(:not([disabled])) .mdc-select.mdc-select--invalid .mdc-floating-label::after{color:var(--mdc-select-error-color,var(--mdc-theme-error,#b00020))}:host(:not([disabled])) .mdc-select.mdc-select--invalid mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}.mdc-select__menu--invalid{--mdc-theme-primary:var(--mdc-select-error-color, var(--mdc-theme-error, #b00020))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0,0,0,.6);color:var(--mdc-select-label-ink-color,rgba(0,0,0,.6))}:host(:not([disabled])) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-select__dropdown-icon{fill:rgba(0,0,0,.54);fill:var(--mdc-select-dropdown-icon-color,rgba(0,0,0,.54))}:host(:not([disabled])) .mdc-select.mdc-select--focused mwc-notched-outline{--mdc-notched-outline-stroke-width:2px;--mdc-notched-outline-notch-offset:2px}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-select-focused-label-color, var(--mdc-theme-primary, rgba(98, 0, 238, 0.87)))}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-select__dropdown-icon{fill:rgba(98,0,238,.87);fill:var(--mdc-select-focused-dropdown-icon-color,var(--mdc-theme-primary,rgba(98,0,238,.87)))}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label{color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}:host(:not([disabled])) .mdc-select.mdc-select--focused:not(.mdc-select--invalid) .mdc-floating-label::after{color:#6200ee;color:var(--mdc-theme-primary,#6200ee)}:host(:not([disabled])) .mdc-select-helper-text:not(.mdc-select-helper-text--validation-msg){color:var(--mdc-select-label-ink-color,rgba(0,0,0,.6))}:host([disabled]){pointer-events:none}:host([disabled]) .mdc-select:not(.mdc-select--outlined).mdc-select--disabled .mdc-select__anchor{background-color:#fafafa;background-color:var(--mdc-select-disabled-fill-color,#fafafa)}:host([disabled]) .mdc-select.mdc-select--outlined mwc-notched-outline{--mdc-notched-outline-border-color:var(--mdc-select-outlined-disabled-border-color, rgba(0, 0, 0, 0.06))}:host([disabled]) .mdc-select .mdc-select__dropdown-icon{fill:rgba(0,0,0,.38);fill:var(--mdc-select-disabled-dropdown-icon-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label,:host([disabled]) .mdc-select:not(.mdc-select--invalid):not(.mdc-select--focused) .mdc-floating-label::after{color:rgba(0,0,0,.38);color:var(--mdc-select-disabled-ink-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-select-helper-text{color:rgba(0,0,0,.38);color:var(--mdc-select-disabled-ink-color,rgba(0,0,0,.38))}:host([disabled]) .mdc-select__selected-text{color:rgba(0,0,0,.38);color:var(--mdc-select-disabled-ink-color,rgba(0,0,0,.38))}`));class Bg extends(Me(Lg)){static get scopedElements(){return{"mwc-notched-outline":nl,"mwc-menu":ng,"mwc-icon":ul}}}Bg.styles=Pg,t([Z(".mdc-notched-outline")],Bg.prototype,"outlineElement",void 0);let Fg,Hg,Ug,Vg,Gg,Wg,zg,jg,Xg,Yg,Kg,Jg,$g,qg,Zg,Qg,tf,ef,nf,of,rf,sf,af,lf,cf,df,uf,hf,pf,gf,ff,mf,_f,vf,yf,bf,Ef,Tf,xf,kf,Sf,Cf,wf,If,Rf,Af,Of,Df,Nf,Mf,Lf,Pf,Bf,Ff,Hf,Uf,Vf,Gf,Wf,zf,jf,Xf,Yf,Kf,Jf,$f,qf,Zf,Qf,tm,em,im,nm,om,rm,sm,am,lm,cm,dm,um,hm,pm,gm,fm,mm,_m,vm,ym,bm,Em,Tm,xm,km,Sm,Cm,wm,Im,Rm=t=>t;function Am(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function Om(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}class Dm extends(ni(Me(lt))){constructor(){super(...arguments),this.numberOfSimulatedConductors=10,this.simulatedDnaTemplate=ia(),this.conductors=[]}static get provide(){return["activeDna","activeAgentPubKey","activeHash","conductors","conductorsUrls"]}static get styles(){return st(Fg||(Fg=Rm`:host{display:contents}`))}async firstUpdated(){this.conductorsUrls||(this.conductors=await ra(this.numberOfSimulatedConductors,[],this.simulatedDnaTemplate),this.activeDna=this.conductors[0].getAllCells()[0].dnaHash,this.dispatchEvent(new CustomEvent("ready",{bubbles:!0,composed:!0,detail:{activeDna:this.activeDna,activeAgentPubKey:this.activeAgentPubKey,activeHash:this.activeHash,conductors:this.conductors,conductorsUrls:this.conductorsUrls}}))),this.addEventListener("update-context",(t=>{const e=Object.keys(t.detail);for(const i of e)this[i]=t.detail[i]})),this.addEventListener("show-message",(t=>{this.showMessage(t.detail.message)}))}showMessage(t){this.message=t,this.snackbar.show()}renderSnackbar(){return F(Hg||(Hg=Rm` <mwc-snackbar id="snackbar" labelText="${0}"> <mwc-icon-button icon="close" slot="dismiss"></mwc-icon-button> </mwc-snackbar> `),this.message)}render(){return F(Ug||(Ug=Rm` ${0} ${0} `),this.renderSnackbar(),this.conductors?F(Vg||(Vg=Rm` <slot></slot> `)):F(Gg||(Gg=Rm` <mwc-circular-progress></mwc-circular-progress>`)))}static get scopedElements(){return{"mwc-circular-progress":se,"mwc-snackbar":Yt,"mwc-icon-button":ei}}}Am([$({type:Number}),Om("design:type",Number)],Dm.prototype,"numberOfSimulatedConductors",void 0),Am([$({type:Object}),Om("design:type",Object)],Dm.prototype,"simulatedDnaTemplate",void 0),Am([Z("#snackbar"),Om("design:type",Yt)],Dm.prototype,"snackbar",void 0),Am([$({type:String}),Om("design:type",String)],Dm.prototype,"message",void 0),Am([$({type:String}),Om("design:type",String)],Dm.prototype,"activeDna",void 0),Am([$({type:String}),Om("design:type",String)],Dm.prototype,"activeAgentPubKey",void 0),Am([$({type:String}),Om("design:type",String)],Dm.prototype,"activeHash",void 0),Am([$({type:Array}),Om("design:type",Array)],Dm.prototype,"conductors",void 0),Am([$({type:Array}),Om("design:type",Array)],Dm.prototype,"conductorsUrls",void 0);const Nm=t=>{class e extends(ii(t)){constructor(){super(...arguments),this.conductors=[]}static get inject(){return["activeDna","activeAgentPubKey","activeHash","conductors","conductorsUrls"]}updatePlayground(t){this.dispatchEvent(new CustomEvent("update-context",{bubbles:!0,composed:!0,detail:t}))}showMessage(t){this.dispatchEvent(new CustomEvent("show-message",{bubbles:!0,composed:!0,detail:{message:t}}))}}return Am([$({type:String}),Om("design:type",String)],e.prototype,"activeDna",void 0),Am([$({type:String}),Om("design:type",String)],e.prototype,"activeAgentPubKey",void 0),Am([$({type:String}),Om("design:type",String)],e.prototype,"activeHash",void 0),Am([$({type:Array}),Om("design:type",Array)],e.prototype,"conductors",void 0),Am([$({type:Array}),Om("design:type",Array)],e.prototype,"conductorsUrls",void 0),e};class Mm extends(Nm(Me(lt))){constructor(){super(...arguments),this._subscriptions={},this._observedCells=[]}observedCells(){return[]}onNewObservedCell(t){return[]}onCellsChanged(){}getStrCellId(t){return`${t.dnaHash}/${t.agentPubKey}`}updated(t){super.updated(t),this._observedCells=this.observedCells().filter((t=>!!t));const e=this._observedCells.reduce(((t,e)=>({...t,[this.getStrCellId(e)]:e})),{}),i=Object.keys(e),n=Object.keys(this._subscriptions),o=i.filter((t=>!n.includes(t))),r=n.filter((t=>!i.includes(t)));for(const t of o){const i=e[t],n=i.workflowExecutor.success((async()=>{this.requestUpdate()}));this._subscriptions[t]=[...this.onNewObservedCell(i),n]}r.forEach((t=>this.unsubscribeFromCellId(t))),(o.length>0||r.length>0)&&this.onCellsChanged()}unsubscribeFromCellId(t){for(const e of this._subscriptions[t])e.unsubscribe();this._subscriptions[t]=void 0,delete this._subscriptions[t]}disconnectedCallback(){super.disconnectedCallback();for(const t of Object.values(this._subscriptions))for(const e of t)e.unsubscribe()}}const Lm=st(Wg||(Wg=Rm`.row{display:flex;flex-direction:row}.column{display:flex;flex-direction:column}.fill{flex:1}.center-content{align-items:center;justify-content:center;display:flex}span{margin-block-start:0}.title{font-size:20px}.placeholder{opacity:.6}.flex-scrollable-parent{position:relative;display:flex;flex:1}.flex-scrollable-container{position:absolute;top:0;left:0;right:0;bottom:0}.flex-scrollable-x{max-width:100%;overflow-x:auto}.flex-scrollable-y{max-height:100%;overflow-y:auto}.json-info{padding:4px;max-width:400px}.block-card{width:auto;position:relative;flex:1}.block-title{font-size:20px}.block-help{position:absolute;right:8px;top:8px}.horizontal-divider{background-color:grey;height:1px;opacity:.3;margin-bottom:0;width:100%}.vertical-divider{background-color:grey;width:1px;height:60%;opacity:.3;margin-bottom:0}`));function Pm(t,e){return e.getCells(t)}function Bm(t,e){const i=e.map((e=>Pm(t,e)));return[].concat(...i)}function Fm(t,e,i){for(const n of i)for(const i of n.getAllCells())if(i.agentPubKey===e&&i.dnaHash===t)return i}function Hm(t){return t.p2p.redundancyFactor}const Um=(...t)=>t.reduce(((t,e)=>(...i)=>t(e(...i)))),Vm=t=>"string"==typeof t,Gm=t=>t.trim(),Wm=(...t)=>e=>e.replace(...t);var zm;const jm=Um((t=>Object.fromEntries?Object.fromEntries(t):t.reduce(((t,[e,i])=>({[e]:i,...t})),{})),(zm=([t,e])=>void 0===e?[]:[[t,e]],t=>"flatMap"in Array.prototype?t.flatMap(zm):t.reduce(((t,e)=>t.concat(zm(e))),[])),Object.entries),Xm=(t,e)=>{return""===t?e:(i=e)instanceof Element?`<mark part='string'>${i.outerHTML.replace(/</g,"&lt;").replace(/"/g,"'")}</mark>`:(t=>null!==t&&"[object Object]"==`${t}`)(i)||Array.isArray(i)?i:`<mark part='${null===i?"null":typeof i}'>${i}</mark>`;var i},Ym=Wm(/"(.*)":/g,((t,e)=>`<mark part="key">"${e}"</mark>:`)),Km=Um(Wm(/"<mark(.*)>(.*)<\/mark>"/g,((t,e,i)=>`<mark${e}>${e.includes("string")?`"${i}"`:i}</mark>`)),Ym,(t=>JSON.stringify(t,Xm,2)),jm),Jm='\n[hidden],\n:host([hidden]) {\n  display: none !important;\n}\n\n:host {\n  display: block;\n  position: relative;\n  color: var(--json-viewer-color, currentColor);\n}\n\ncode { white-space: pre; }\nmark { background: none; }\n\n@media (prefers-color-scheme: dark), (prefers-color-scheme: no-preference) {\n  :host { background: var(--json-viewer-background, #212529); }\n  [part="key"] { color: var(--json-viewer-key-color, #ff922b); }\n  [part="boolean"] { color: var(--json-viewer-boolean-color, #22b8cf); }\n  [part="number"] { color: var(--json-viewer-number-color, #51cf66); }\n  [part="null"] { color: var(--json-viewer-null-color, #ff6b6b); }\n  [part="string"] { color: var(--json-viewer-string-color, #22b8cf); }\n}\n\n@media (prefers-color-scheme: light) {\n  :host { background: var(--json-viewer-background, white); }\n  [part="key"] { color: var(--json-viewer-key-color, #f76707); }\n  [part="boolean"] { color: var(--json-viewer-boolean-color, #0c8599); }\n  [part="number"] { color: var(--json-viewer-number-color, #0ca678); }\n  [part="null"] { color: var(--json-viewer-null-color, #e03131); }\n  [part="string"] { color: var(--json-viewer-string-color, #0c8599); }\n}\n',$m=document.createElement("template");$m.innerHTML='<code hidden part="code"></code>';class qm extends HTMLElement{static get is(){return"json-viewer"}static get observedAttributes(){return["allowlist","object"]}get object(){return this.__object}set object(t){t&&"string"==typeof t&&(t=this.tryParse(t)),this.__object=t,this.render()}get allowlist(){return this.__allowlist}set allowlist(t){if(e=t,!Array.isArray(e)||!e.every(Vm))throw new Error("allowlist must be an array of strings");var e;this.__allowlist=t;const i=t.join(",");i&&this.setAttribute("allowlist",i),this.render()}get error(){return this.__error}set error(t){this.__error=t,t instanceof Error&&this.dispatchEvent(new CustomEvent("json-parse-error"))}constructor(){if(super(),this.__error=null,this.__allowlist=[],this.__mo=new MutationObserver(this.parse.bind(this)),this.__mo.observe(this,{subtree:!0,characterData:!0,childList:!0}),this.attachShadow({mode:"open"}),"adoptedStyleSheets"in Document.prototype){const t=new CSSStyleSheet;t.replaceSync(Jm),this.shadowRoot.adoptedStyleSheets=[t]}else this.shadowRoot.innerHTML=`<style>${Jm}</style>`;this.shadowRoot.append($m.content.cloneNode(!0))}connectedCallback(){this.parse(),this.object&&this.shadowRoot.querySelector("code").hidden&&this.render()}attributeChangedCallback(t,e,i){switch(t){case"allowlist":return this.allowlistAttrChanged(i,e);case"object":return this.objectAttrChanged(i,e)}}allowlistAttrChanged(t,e){const i=t;this.allowlist.join(",")!==i&&(this.allowlist=(t=>(t||"").split(",").map(Gm).filter(Boolean))(i))}objectAttrChanged(t,e){t!==e&&(this.object=this.tryParse(t))}getHighlightedDomString(){const{allowlist:t,object:e}=this;if(void 0===e)return"";const i=Array.isArray(t)&&t.length?((t,e)=>t.reduce(((t,i)=>Object.assign(t,{[i]:e[i]})),{}))(t,e):e;return Km(i)}render(){const t=this.getHighlightedDomString();this.shadowRoot.querySelector("code").hidden=!t,this.shadowRoot.querySelector("code").innerHTML=t}parse(){const t=this.querySelector('script[type="application/json"]')||this.querySelector('script[type="application/ld+json"]')||this,{textContent:e=""}=t;e.trim()&&(this.object=this.tryParse(e))}tryParse(t){let e;try{e=JSON.parse(t)}catch(i){const{name:n,message:o}=i;e={name:n,message:o,string:t},this.error=i}return e}}class Zm extends(Me(lt)){constructor(){super(...arguments),this._expanded=!1}render(){return F(zg||(zg=Rm` <div class="row"> <mwc-icon-button style="--mdc-icon-button-size:30px;margin-right:4px" .icon="${0}" @click="${0}"></mwc-icon-button> <div style="${0}"> <div style="${0}"></div> <div style="${0}"> <slot></slot> </div> </div> </div> `),this._expanded?"arrow_drop_up":"arrow_drop_down",(()=>this._expanded=!this._expanded),qt({position:this._expanded?"unset":"relative",flex:"1",display:"flex"}),qt({display:this._expanded?"none":"block","z-index":"3",position:this._expanded?"unset":"absolute",width:"100%",height:"100%","box-shadow":this._expanded?"":"inset 0 -10px 10px -10px #000000"}),qt({height:this._expanded?"auto":"30px",width:this._expanded?"auto":"100%",overflow:this._expanded?"auto":"hidden",position:this._expanded?"unset":"absolute",flex:"1"}))}static get styles(){return Lm}static get scopedElements(){return{"mwc-icon-button":ei}}}Am([$({type:Boolean}),Om("design:type",Object)],Zm.prototype,"_expanded",void 0);class Qm extends Mm{constructor(){super(...arguments),this.hideResults=!1,this.hideZomeSelector=!1,this.hideAgentPubKey=!1,this.selectedZomeFnName=void 0,this._selectedZomeIndex=0,this._results={},this._arguments={}}get activeCell(){return Fm(this.activeDna,this.activeAgentPubKey,this.conductors)}get activeZome(){return this.activeCell.getSimulatedDna().zomes[this._selectedZomeIndex]}get activeZomeFn(){let t=Object.keys(this.activeZome.zome_functions)[0];return this.selectedZomeFnName&&(t=this.selectedZomeFnName),{name:t,fn:this.activeZome.zome_functions[t]}}observedCells(){return[this.activeCell]}setResultValue(t,e){const i=this.activeCell.dnaHash,n=this.activeCell.agentPubKey;this._results[i]||(this._results[i]={}),this._results[i][n]||(this._results[i][n]={}),this._results[i][n][t]=e}getResultValue(t){return this.getActiveResults()[t]}getActiveResults(){const t=this.activeCell.dnaHash,e=this.activeCell.agentPubKey;return this._results[t]&&this._results[t][e]||{}}setFunctionArgument(t,e,i){const n=this.activeCell.dnaHash,o=this.activeCell.agentPubKey,r=this.activeZome.name;this._arguments[n]||(this._arguments[n]={}),this._arguments[n][o]||(this._arguments[n][o]={}),this._arguments[n][o][r]||(this._arguments[n][o][r]={}),this._arguments[n][o][r][t]||(this._arguments[n][o][r][t]={}),this._arguments[n][o][r][t][e]=i,this.requestUpdate()}getFunctionArguments(t){const e=this.activeCell.dnaHash,i=this.activeCell.agentPubKey,n=this.activeZome.name;return this._arguments[e]&&this._arguments[e][i]&&this._arguments[e][i][n]&&this._arguments[e][i][n][t]}getFunctionArgument(t,e){const i=this.activeCell.dnaHash,n=this.activeCell.agentPubKey,o=this.activeZome.name;return this._arguments[i]&&this._arguments[i][n]&&this._arguments[i][n][o]&&this._arguments[i][n][o][t]&&this._arguments[i][n][o][t][e]}async callZomeFunction(t){const e=this.activeZome,i=Date.now(),n={cellId:this.activeCell.cellId,result:void 0,fnName:t,zome:e};this.setResultValue(i,n),this.requestUpdate();try{const o=await this.activeCell.conductor.callZomeFn({cellId:this.activeCell.cellId,zome:e.name,payload:this.getFunctionArguments(t),fnName:t,cap:null});n.result={success:!0,payload:o},this.setResultValue(i,n)}catch(t){n.result={success:!1,payload:t.message},this.setResultValue(i,n)}finally{this.requestUpdate()}}renderCallableFunction(t,e){return F(jg||(jg=Rm` <div class="column" style="flex:1;margin:16px"> <div class="flex-scrollable-parent"> <div class="flex-scrollable-container"> <div class="flex-scrollable-y"> <div class="column" style="flex:1"> ${0} </div> </div> </div> </div> <mwc-button raised @click="${0}">Execute</mwc-button> </div>`),0===e.arguments.length?F(Xg||(Xg=Rm`<span class="placeholder" style="margin-top:28px">This function has no arguments</span>`)):e.arguments.map((e=>F(Yg||(Yg=Rm`<mwc-textfield style="margin-top:8px" outlined label="${0}" .value="${0}" @input="${0}"></mwc-textfield>`),e.name+": "+e.type,this.getFunctionArgument(t,e.name)||"",(i=>this.setFunctionArgument(t,e.name,i.target.value))))),(()=>this.callZomeFunction(t)))}renderActiveZomeFns(){const t=this.activeCell.getSimulatedDna().zomes[this._selectedZomeIndex],e=Object.entries(t.zome_functions);return 0===e.length?F(Kg||(Kg=Rm`<div class="fill center-content"> <span class="placeholder" style="padding:24px">This zome has no functions</span> </div> `)):F(Jg||(Jg=Rm` <mwc-drawer style="--mdc-drawer-width:auto"> <mwc-list activatable @selected="${0}"> ${0} </mwc-list> <div slot="appContent" class="column" style="height:100%"> <div class="column" style="flex:1"> ${0} </div> </div> </mwc-drawer> `),(t=>this.selectedZomeFnName=e[t.detail.index][0]),e.map((([t,e])=>F($g||($g=Rm` <mwc-list-item .activated="${0}">${0} </mwc-list-item> `),this.activeZomeFn.name===t,t))),this.renderCallableFunction(this.activeZomeFn.name,this.activeZomeFn.fn))}renderResult(t){return t.result?t.result.payload&&"string"!=typeof t.result.payload?F(Qg||(Qg=Rm` <expandable-line> <json-viewer .object="${0}" class="fill"></json-viewer> </expandable-line> `),t.result.payload):F(Zg||(Zg=Rm`<span>${0}</span>`),t.result.payload):F(qg||(qg=Rm`<span class="placeholder">Executing...</span>`))}renderResults(){const t=this.getActiveResults(),e=Object.keys(t).sort().map((e=>[e,t[e]]));return F(tf||(tf=Rm` <div class="column" style="flex:1"> ${0} </div> `),0===e.length?F(ef||(ef=Rm` <div class="row fill center-content"> <span class="placeholder" style="margin:0 24px">Call a ZomeFn to see its results</span> </div> `)):F(nf||(nf=Rm` <div class="flex-scrollable-parent"> <div class="flex-scrollable-container"> <div class="flex-scrollable-y"> <div style="margin:0 16px"> ${0} </div> </div> </div> </div>`),e.map((([t,i],n)=>F(of||(of=Rm` <div class="column" style="flex:1"> <div class="row" style="margin:8px 0"> ${0} <div class="column" style="flex:1;margin:12px;margin-right:0"> <div class="row" style="flex:1"> <span style="flex:1;margin-bottom:8px"> ${0} <span class="placeholder"> in ${0} zome${0} </span> </span> <span class="placeholder"> ${0} </span> </div> ${0} </div> </div> ${0} </div> `),i.result?F(rf||(rf=Rm` <mwc-icon style="${0}">${0}</mwc-icon> `),qt({color:i.result.success?"green":"red","align-self":"start","margin-top":"16px","--mdc-icon-size":"36px"}),i.result.success?"check_circle_outline":"error_outline"):F(sf||(sf=Rm` <mwc-circular-progress indeterminate density="-2" style="align-self:center"></mwc-circular-progress> `)),i.fnName,i.zome.name,i.result?i.result.success?", result:":", error:":"",new Date(parseInt(t)).toLocaleTimeString(),this.renderResult(i),n<e.length-1?F(af||(af=Rm` <span class="horizontal-divider" style="align-self:center"></span> `)):F(lf||(lf=Rm``)))))))}render(){return F(cf||(cf=Rm` <mwc-card style="width:auto;flex:1"> ${0} </mwc-card> `),this.activeCell?F(df||(df=Rm` <div class="column" style="flex:1"> <span class="title" style="margin:16px">Call Zome Fns${0}</span> ${0} <div class="row" style="flex:1"> <div class="column" style="flex:1"> ${0} ${0} </div> ${0} </div> </div> `),this.hideAgentPubKey?F(uf||(uf=Rm``)):F(hf||(hf=Rm`, <span class="placeholder">for agent ${0}</span> `),this.activeAgentPubKey),this.hideZomeSelector?F(pf||(pf=Rm` <span class="horizontal-divider"></span> `)):F(gf||(gf=Rm``)),this.hideZomeSelector?F(ff||(ff=Rm``)):F(mf||(mf=Rm` <mwc-tab-bar .activeIndex="${0}" @MDCTabBar:activated="${0}"> ${0} </mwc-tab-bar> `),this._selectedZomeIndex,(t=>{this.selectedZomeFnName=void 0,this._selectedZomeIndex=t.detail.index}),this.activeCell.getSimulatedDna().zomes.map((t=>F(_f||(_f=Rm` <mwc-tab .label="${0}"></mwc-tab> `),t.name)))),this.renderActiveZomeFns(),this.hideResults?F(vf||(vf=Rm``)):F(yf||(yf=Rm` <span class="vertical-divider" style="height:100%"></span> ${0} `),this.renderResults())):F(bf||(bf=Rm`<div class="fill center-content placeholder"> <span style="padding:24px">Select a cell to call its zome functions</span> </div>`)))}static get styles(){return[Lm,st(Ef||(Ef=Rm`:host{display:flex;flex:1}`))]}static get scopedElements(){return{"mwc-button":bl,"mwc-textfield":sl,"mwc-circular-progress":se,"mwc-icon":ul,"mwc-tab":tc,"mwc-list":_u,"mwc-drawer":Lu,"mwc-list-item":xd,"mwc-tab-bar":Ac,"mwc-card":ld,"json-viewer":qm,"expandable-line":Zm}}}Am([$({type:Boolean,attribute:"hide-results"}),Om("design:type",Object)],Qm.prototype,"hideResults",void 0),Am([$({type:Boolean,attribute:"hide-zome-selector"}),Om("design:type",Object)],Qm.prototype,"hideZomeSelector",void 0),Am([$({type:Boolean,attribute:"hide-agent-pub-key"}),Om("design:type",Object)],Qm.prototype,"hideAgentPubKey",void 0),Am([$({type:String}),Om("design:type",String)],Qm.prototype,"selectedZomeFnName",void 0),Am([$({type:Number}),Om("design:type",Number)],Qm.prototype,"_selectedZomeIndex",void 0),Am([$({type:Array}),Om("design:type",Object)],Qm.prototype,"_results",void 0);class t_ extends Mm{constructor(){super(...arguments),this.cell=void 0}static style(){return Lm}get activeCell(){return Fm(this.activeDna,this.activeAgentPubKey,this.conductors)||Bm(this.activeDna,this.conductors)[0]}render(){return F(Tf||(Tf=Rm` <div class="column"> ${0} </div> `),this.activeCell?F(xf||(xf=Rm` <span> <strong> Entries with associated metadata, and agent ids with all their headers </strong> </span> <json-viewer id="dht-shard" style="margin-top:16px" .object="${0}"> </json-viewer> `),JSON.stringify(function(t){const e=Wr(t),i={};for(const n of e)i[n]={details:Gr(t,n),links:jr(t,n)};return i}(this.activeCell.getState()))):F(kf||(kf=Rm` <span class="placeholder"> Select a cell to see its DHT Shard </span> `)))}static get scopedElements(){return{"json-viewer":qm}}}function e_(t){if(null==t)return t;if(Array.isArray(t))return t.map(e_);if("object"==typeof t){for(const e of Object.keys(t))t[e]=e_(t[e]);return t}return"string"==typeof t&&t.length>23?`${t.substring(0,20)}...`:t}Am([$({type:Object}),Om("design:type",Object)],t_.prototype,"cell",void 0);class i_ extends Mm{static get styles(){return[Lm,st(Sf||(Sf=Rm`:host{display:flex}`))]}get activeHashedContent(){const t=Bm(this.activeDna,this.conductors);return function(t,e){if(t)for(const i of e){const e=i.getState().CAS[t];if(e)return e}}(this.activeHash,t)}render(){return F(Cf||(Cf=Rm` <mwc-card style="width:auto;min-height:200px" class="fill"> <div class="column fill" style="padding:16px"> <span class="title"> ${0} Contents</span> ${0} </div> </mwc-card> `),this.activeHashedContent&&this.activeHashedContent.header?"Header":"Entry",this.activeHashedContent?F(wf||(wf=Rm` <div class="column fill"> <span style="margin-bottom:16px"> ${0} Hash: ${0} </span> <div class="fill flex-scrollable-parent"> <div class="flex-scrollable-container"> <div class="flex-scrollable-y" style="height:100%"> <json-viewer .object="${0}" class="fill"></json-viewer> </div> </div> </div> </div> `),this.activeHashedContent.header?"Header":"Entry",this.activeHash,e_(this.activeHashedContent)):F(If||(If=Rm` <div class="column fill center-content"> <span class="placeholder">Select entry to inspect</span> </div> `)))}static get scopedElements(){return{"json-viewer":qm,"mwc-card":ld}}}class n_ extends Mm{constructor(){super(...arguments),this.selectedTabIndex=0}firstUpdated(){this.addEventListener("entry-committed",(t=>{this.selectedTabIndex=0}))}static get styles(){return[Lm,st(Rf||(Rf=Rm`:host{display:flex}mwc-card{padding:16px}`))]}renderAgentHelp(){return F(Af||(Af=Rm` <mwc-dialog id="conductor-help" heading="Node Help" style="--mdc-dialog-max-width:700px"> <span> You've selected the node or conductor with Agent ID ${0}. Here you can see its internal state: <ul> <li> <strong>Source Chain</strong>: entries that this node has committed. Here you can see in grey the <a href="https://developer.holochain.org/docs/concepts/3_private_data/" target="_blank">headers </a> of the entries, and in colors the entries themselves. When you select an entry, the other nodes that are holding the entry DHT will be hightlighted in the DHT. </li> <br> <li> <strong>DHT Shard</strong>: slice of the DHT that this node is holding. You can see the list of all the entries that this node is holding indexed by their hash, and metadata associated to those entries. </li> <br> <li> <strong>Commit Entries</strong>: here you can actually create entries yourself. They will be created on behalf of this node. Try it! You can create an entry and see where it lands on the DHT, and go to the DHT Shard of those nodes and check it's there. </li> </ul> </span> <mwc-button slot="primaryAction" dialogAction="cancel"> Got it! </mwc-button> </mwc-dialog> `),this.activeAgentPubKey)}render(){return F(Of||(Of=Rm` ${0} <mwc-card style="width:auto" class="fill"> <div class="column fill"> <div class="row" style="padding:16px"> <div class="column" style="flex:1"> <span class="title">Conductor Detail</span> <span>Agent Pub Key: ${0}</span> </div> <mwc-icon-button icon="help_outline" @click="${0}"></mwc-icon-button> </div> <div class="column fill"> <mwc-tab-bar @MDCTabBar:activated="${0}" .activeIndex="${0}"> <mwc-tab label="Source Chain"></mwc-tab> <mwc-tab label="DHT Shard"></mwc-tab> <mwc-tab label="Commit entries"></mwc-tab> </mwc-tab-bar> <div style="padding:16px" class="column fill"> ${0} </div> </div> </div> </mwc-card> `),this.renderAgentHelp(),this.activeAgentPubKey,(()=>this.conductorHelp.open=!0),(t=>this.selectedTabIndex=t.detail.index),this.selectedTabIndex,0===this.selectedTabIndex?F(Df||(Df=Rm` <div class="row fill"> <holochain-playground-source-chain class="fill"></holochain-playground-source-chain> <div class="flex-scrollable-parent"> <div class="flex-scrollable-container"> <div class="flex-scrollable-y"> <holochain-playground-entry-detail class="fill"></holochain-playground-entry-detail> </div> </div> </div> </div> `)):1===this.selectedTabIndex?F(Nf||(Nf=Rm` <div class="flex-scrollable-parent"> <div class="flex-scrollable-container"> <div class="flex-scrollable-y"> <holochain-playground-dht-shard></holochain-playground-dht-shard> </div> </div> </div> `)):F(Mf||(Mf=Rm` <holochain-playground-create-entries></holochain-playground-create-entries> `)))}static get scopedElements(){return{"holochain-playground-dht-shard":t_,"holochain-playground-entry-detail":i_,"mwc-tab":tc,"mwc-tab-bar":Ac,"mwc-card":ld,"mwc-icon-button":ei,"mwc-dialog":qu}}}Am([$({type:Number}),Om("design:type",Number)],n_.prototype,"selectedTabIndex",void 0),Am([Z("#conductor-help"),Om("design:type",qu)],n_.prototype,"conductorHelp",void 0);var o_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r_(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return s_(null==e&&i.path)}},i.exports),i.exports}function s_(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var a_=/^\s+|\s+$/g,l_=/^[-+]0x[0-9a-f]+$/i,c_=/^0b[01]+$/i,d_=/^0o[0-7]+$/i,u_=parseInt,h_="object"==typeof o_&&o_&&o_.Object===Object&&o_,p_="object"==typeof self&&self&&self.Object===Object&&self,g_=h_||p_||Function("return this")(),f_=Object.prototype.toString,m_=Math.max,__=Math.min,v_=function(){return g_.Date.now()};function y_(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b_(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f_.call(t)}(t))return NaN;if(y_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a_,"");var i=c_.test(t);return i||d_.test(t)?u_(t.slice(2),i?2:8):l_.test(t)?NaN:+t}var E_=function(t,e,i){var n,o,r,s,a,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var i=n,r=o;return n=o=void 0,c=e,s=t.apply(r,i)}function g(t){return c=t,a=setTimeout(m,e),d?p(t):s}function f(t){var i=t-l;return void 0===l||i>=e||i<0||u&&t-c>=r}function m(){var t=v_();if(f(t))return _(t);a=setTimeout(m,function(t){var i=e-(t-l);return u?__(i,r-(t-c)):i}(t))}function _(t){return a=void 0,h&&n?p(t):(n=o=void 0,s)}function v(){var t=v_(),i=f(t);if(n=arguments,o=this,l=t,i){if(void 0===a)return g(l);if(u)return a=setTimeout(m,e),p(l)}return void 0===a&&(a=setTimeout(m,e)),s}return e=b_(e)||0,y_(i)&&(d=!!i.leading,r=(u="maxWait"in i)?m_(b_(i.maxWait)||0,e):r,h="trailing"in i?!!i.trailing:h),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=o=a=void 0},v.flush=function(){return void 0===a?s:_(v_())},v},T_=r_((function(t,e){(function(){var e,i,n,o,r,s,a,l,c,d,u,h,p,g,f;n=Math.floor,d=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},c=function(t,e,o,r,s){var a;if(null==o&&(o=0),null==s&&(s=i),o<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);o<r;)s(e,t[a=n((o+r)/2)])<0?r=a:o=a+1;return[].splice.apply(t,[o,o-o].concat(e)),e},s=function(t,e,n){return null==n&&(n=i),t.push(e),g(t,0,t.length-1,n)},r=function(t,e){var n,o;return null==e&&(e=i),n=t.pop(),t.length?(o=t[0],t[0]=n,f(t,0,e)):o=n,o},l=function(t,e,n){var o;return null==n&&(n=i),o=t[0],t[0]=e,f(t,0,n),o},a=function(t,e,n){var o;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(e=(o=[t[0],e])[0],t[0]=o[1],f(t,0,n)),e},o=function(t,e){var o,r,s,a,l,c;for(null==e&&(e=i),l=[],r=0,s=(a=function(){c=[];for(var e=0,i=n(t.length/2);0<=i?e<i:e>i;0<=i?e++:e--)c.push(e);return c}.apply(this).reverse()).length;r<s;r++)o=a[r],l.push(f(t,o,e));return l},p=function(t,e,n){var o;if(null==n&&(n=i),-1!==(o=t.indexOf(e)))return g(t,0,o,n),f(t,o,n)},u=function(t,e,n){var r,s,l,c,d;if(null==n&&(n=i),!(s=t.slice(0,e)).length)return s;for(o(s,n),l=0,c=(d=t.slice(e)).length;l<c;l++)r=d[l],a(s,r,n);return s.sort(n).reverse()},h=function(t,e,n){var s,a,l,u,h,p,g,f,m;if(null==n&&(n=i),10*e<=t.length){if(!(l=t.slice(0,e).sort(n)).length)return l;for(a=l[l.length-1],u=0,p=(g=t.slice(e)).length;u<p;u++)n(s=g[u],a)<0&&(c(l,s,0,null,n),l.pop(),a=l[l.length-1]);return l}for(o(t,n),m=[],h=0,f=d(e,t.length);0<=f?h<f:h>f;0<=f?++h:--h)m.push(r(t,n));return m},g=function(t,e,n,o){var r,s,a;for(null==o&&(o=i),r=t[n];n>e&&o(r,s=t[a=n-1>>1])<0;)t[n]=s,n=a;return t[n]=r},f=function(t,e,n){var o,r,s,a,l;for(null==n&&(n=i),r=t.length,l=e,s=t[e],o=2*e+1;o<r;)(a=o+1)<r&&!(n(t[o],t[a])<0)&&(o=a),t[e]=t[o],o=2*(e=o)+1;return t[e]=s,g(t,l,e,n)},e=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=s,t.pop=r,t.replace=l,t.pushpop=a,t.heapify=o,t.updateItem=p,t.nlargest=u,t.nsmallest=h,t.prototype.push=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pop=function(){return r(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return o(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),t.exports=e}).call(o_)}));function x_(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var k_=x_(E_),S_=x_(T_);function C_(t){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I_(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R_(t,e,i){return e&&I_(t.prototype,e),i&&I_(t,i),t}function A_(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function O_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D_="undefined"==typeof window?null:window,N_=D_?D_.navigator:null;D_&&D_.document;var M_=C_(""),L_=C_({}),P_=C_((function(){})),B_="undefined"==typeof HTMLElement?"undefined":C_(HTMLElement),F_=function(t){return t&&t.instanceString&&U_(t.instanceString)?t.instanceString():null},H_=function(t){return null!=t&&C_(t)==M_},U_=function(t){return null!=t&&C_(t)===P_},V_=function(t){return!j_(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},G_=function(t){return null!=t&&C_(t)===L_&&!V_(t)&&t.constructor===Object},W_=function(t){return null!=t&&C_(t)===C_(1)&&!isNaN(t)},z_=function(t){return"undefined"===B_?void 0:null!=t&&t instanceof HTMLElement},j_=function(t){return X_(t)||Y_(t)},X_=function(t){return"collection"===F_(t)&&t._private.single},Y_=function(t){return"collection"===F_(t)&&!t._private.single},K_=function(t){return"core"===F_(t)},J_=function(t){return"stylesheet"===F_(t)},$_=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},q_=function(t){return function(t){return null!=t&&C_(t)===L_}(t)&&U_(t.then)},Z_=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var i=function i(){var n,o=this,r=arguments,s=e.apply(o,r),a=i.cache;return(n=a[s])||(n=a[s]=t.apply(o,r)),n};return i.cache={},i},Q_=Z_((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),tv=Z_((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),ev=Z_((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),iv=function(t){return $_(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},nv="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ov=function(t,e){return t<e?-1:t>e?1:0},rv=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,i=1;i<e.length;i++){var n=e[i];if(null!=n)for(var o=Object.keys(n),r=0;r<o.length;r++){var s=o[r];t[s]=n[s]}}return t},sv=function(t){return(V_(t)?t:null)||function(t){return av[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,i,n,o=16;return 4===t.length?(e=parseInt(t[1]+t[1],o),i=parseInt(t[2]+t[2],o),n=parseInt(t[3]+t[3],o)):(e=parseInt(t[1]+t[2],o),i=parseInt(t[3]+t[4],o),n=parseInt(t[5]+t[6],o)),[e,i,n]}}(t)||function(t){var e,i=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(i){e=[];for(var n=[],o=1;o<=3;o++){var r=i[o];if("%"===r[r.length-1]&&(n[o]=!0),r=parseFloat(r),n[o]&&(r=r/100*255),r<0||r>255)return;e.push(Math.floor(r))}var s=n[1]||n[2]||n[3],a=n[1]&&n[2]&&n[3];if(s&&!a)return;var l=i[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;e.push(l)}}return e}(t)||function(t){var e,i,n,o,r,s,a,l;function c(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var d=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(d){if((i=parseInt(d[1]))<0?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,(n=parseFloat(d[2]))<0||n>100)return;if(n/=100,(o=parseFloat(d[3]))<0||o>100)return;if(o/=100,void 0!==(r=d[4])&&((r=parseFloat(r))<0||r>1))return;if(0===n)s=a=l=Math.round(255*o);else{var u=o<.5?o*(1+n):o+n-o*n,h=2*o-u;s=Math.round(255*c(h,u,i+1/3)),a=Math.round(255*c(h,u,i)),l=Math.round(255*c(h,u,i-1/3))}e=[s,a,l,r]}return e}(t)},av={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lv=function(t){for(var e=t.map,i=t.keys,n=i.length,o=0;o<n;o++){var r=i[o];if(G_(r))throw Error("Tried to set map with object key");o<i.length-1?(null==e[r]&&(e[r]={}),e=e[r]):e[r]=t.value}},cv=function(t){for(var e=t.map,i=t.keys,n=i.length,o=0;o<n;o++){var r=i[o];if(G_(r))throw Error("Tried to get map with object key");if(null==(e=e[r]))return e}return e},dv=D_?D_.performance:null,uv=dv&&dv.now?function(){return dv.now()}:function(){return Date.now()},hv=function(){if(D_){if(D_.requestAnimationFrame)return function(t){D_.requestAnimationFrame(t)};if(D_.mozRequestAnimationFrame)return function(t){D_.mozRequestAnimationFrame(t)};if(D_.webkitRequestAnimationFrame)return function(t){D_.webkitRequestAnimationFrame(t)};if(D_.msRequestAnimationFrame)return function(t){D_.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(uv())}),1e3/60)}}(),pv=function(t){return hv(t)},gv=uv,fv=65599,mv=function(t){for(var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,n=i;!(e=t.next()).done;)n=n*fv+e.value|0;return n},_v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return e*fv+t|0},vv=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},yv=function(t){return 2097152*t[0]+t[1]},bv=function(t,e){return[_v(t[0],e[0]),vv(t[1],e[1])]},Ev=function(t,e){var i={value:0,done:!1},n=0,o=t.length;return mv({next:function(){return n<o?i.value=t.charCodeAt(n++):i.done=!0,i}},e)},Tv=function(){return xv(arguments)},xv=function(t){for(var e,i=0;i<t.length;i++){var n=t[i];e=0===i?Ev(n):Ev(n,e)}return e},kv=!0,Sv=null!=console.warn,Cv=null!=console.trace,wv=Number.MAX_SAFE_INTEGER||9007199254740991,Iv=function(){return!0},Rv=function(){return!1},Av=function(){return 0},Ov=function(){},Dv=function(t){throw new Error(t)},Nv=function(t){if(void 0===t)return kv;kv=!!t},Mv=function(t){Nv()&&(Sv?console.warn(t):(console.log(t),Cv&&console.trace()))},Lv=function(t){return null==t?t:V_(t)?t.slice():G_(t)?function(t){return rv({},t)}(t):t},Pv=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},Bv={},Fv=function(){return Bv},Hv=function(t){var e=Object.keys(t);return function(i){for(var n={},o=0;o<e.length;o++){var r=e[o],s=null==i?void 0:i[r];n[r]=void 0===s?t[r]:s}return n}},Uv=function(t,e,i){for(var n=t.length;n>=0&&(t[n]!==e||(t.splice(n,1),i));n--);},Vv=function(t){t.splice(0,t.length)},Gv=function(t,e,i){return i&&(e=ev(i,e)),t[e]},Wv=function(t,e,i,n){i&&(e=ev(i,e)),t[e]=n},zv="undefined"!=typeof Map?Map:function(){function t(){w_(this,t),this._obj={}}return R_(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),jv=function(){function t(e){if(w_(this,t),this._obj=Object.create(null),this.size=0,null!=e){var i;i=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var n=0;n<i.length;n++)this.add(i[n])}}return R_(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Xv="undefined"!==("undefined"==typeof Set?"undefined":C_(Set))?Set:jv,Yv=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&K_(t)){var n=e.group;if(null==n&&(n=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var o=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===n:!!e.pannable,active:!1,classes:new Xv,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==o.position.x&&(o.position.x=0),null==o.position.y&&(o.position.y=0),e.renderedPosition){var r=e.renderedPosition,s=t.pan(),a=t.zoom();o.position={x:(r.x-s.x)/a,y:(r.y-s.y)/a}}var l=[];V_(e.classes)?l=e.classes:H_(e.classes)&&(l=e.classes.split(/\s+/));for(var c=0,d=l.length;c<d;c++){var u=l[c];u&&""!==u&&o.classes.add(u)}this.createEmitter();var h=e.style||e.css;h&&(Mv("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(void 0===i||i)&&this.restore()}else Dv("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else Dv("An element must have a core reference and parameters set")},Kv=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,i,n){var o;G_(e)&&!j_(e)&&(e=(o=e).roots||o.root,i=o.visit,n=o.directed),n=2!==arguments.length||U_(i)?n:i,i=U_(i)?i:function(){};for(var r,s=this._private.cy,a=e=H_(e)?this.filter(e):e,l=[],c=[],d={},u={},h={},p=0,g=this.byGroup(),f=g.nodes,m=g.edges,_=0;_<a.length;_++){var v=a[_],y=v.id();v.isNode()&&(l.unshift(v),t.bfs&&(h[y]=!0,c.push(v)),u[y]=0)}var b=function(){var e=t.bfs?l.shift():l.pop(),o=e.id();if(t.dfs){if(h[o])return"continue";h[o]=!0,c.push(e)}var s,a=u[o],g=d[o],_=null!=g?g.source():null,v=null!=g?g.target():null,y=null==g?void 0:e.same(_)?v[0]:_[0];if(!0===(s=i(e,g,y,p++,a)))return r=e,"break";if(!1===s)return"break";for(var b=e.connectedEdges().filter((function(t){return(!n||t.source().same(e))&&m.has(t)})),E=0;E<b.length;E++){var T=b[E],x=T.connectedNodes().filter((function(t){return!t.same(e)&&f.has(t)})),k=x.id();0===x.length||h[k]||(x=x[0],l.push(x),t.bfs&&(h[k]=!0,c.push(x)),d[k]=T,u[k]=u[o]+1)}};t:for(;0!==l.length;){var E=b();switch(E){case"continue":continue;case"break":break t}}for(var T=s.collection(),x=0;x<c.length;x++){var k=c[x],S=d[k.id()];null!=S&&T.push(S),T.push(k)}return{path:s.collection(T),found:s.collection(r)}}},Jv={breadthFirstSearch:Kv({bfs:!0}),depthFirstSearch:Kv({dfs:!0})};Jv.bfs=Jv.breadthFirstSearch,Jv.dfs=Jv.depthFirstSearch;var $v=Hv({root:null,weight:function(t){return 1},directed:!1}),qv={dijkstra:function(t){if(!G_(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var i=$v(t),n=i.root,o=i.weight,r=i.directed,s=this,a=o,l=H_(n)?this.filter(n)[0]:n[0],c={},d={},u={},h=this.byGroup(),p=h.nodes,g=h.edges;g.unmergeBy((function(t){return t.isLoop()}));for(var f=function(t){return c[t.id()]},m=function(t,e){c[t.id()]=e,_.updateItem(t)},_=new S_((function(t,e){return f(t)-f(e)})),v=0;v<p.length;v++){var y=p[v];c[y.id()]=y.same(l)?0:1/0,_.push(y)}for(var b=function(t,e){for(var i,n=(r?t.edgesTo(e):t.edgesWith(e)).intersect(g),o=1/0,s=0;s<n.length;s++){var l=n[s],c=a(l);(c<o||!i)&&(o=c,i=l)}return{edge:i,dist:o}};_.size()>0;){var E=_.pop(),T=f(E),x=E.id();if(u[x]=T,T!==1/0)for(var k=E.neighborhood().intersect(p),S=0;S<k.length;S++){var C=k[S],w=C.id(),I=b(E,C),R=T+I.dist;R<f(C)&&(m(C,R),d[w]={node:E,edge:I.edge})}}return{distanceTo:function(t){var e=H_(t)?p.filter(t)[0]:t[0];return u[e.id()]},pathTo:function(t){var e=H_(t)?p.filter(t)[0]:t[0],i=[],n=e,o=n.id();if(e.length>0)for(i.unshift(e);d[o];){var r=d[o];i.unshift(r.edge),i.unshift(r.node),o=(n=r.node).id()}return s.spawn(i)}}}},Zv={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),i=e.nodes,n=e.edges,o=i.length,r=new Array(o),s=i,a=function(t){for(var e=0;e<r.length;e++){if(r[e].has(t))return e}},l=0;l<o;l++)r[l]=this.spawn(i[l]);for(var c=n.sort((function(e,i){return t(e)-t(i)})),d=0;d<c.length;d++){var u=c[d],h=u.source()[0],p=u.target()[0],g=a(h),f=a(p),m=r[g],_=r[f];g!==f&&(s.merge(u),m.merge(_),r.splice(f,1))}return s}},Qv=Hv({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),ty={aStar:function(t){var e=this.cy(),i=Qv(t),n=i.root,o=i.goal,r=i.heuristic,s=i.directed,a=i.weight;n=e.collection(n)[0],o=e.collection(o)[0];var l,c,d=n.id(),u=o.id(),h={},p={},g={},f=new S_((function(t,e){return p[t.id()]-p[e.id()]})),m=new Xv,_={},v={},y=function(t,e){f.push(t),m.add(e)};y(n,d),h[d]=0,p[d]=r(n);for(var b,E=0;f.size()>0;){if(l=f.pop(),c=l.id(),m.delete(c),E++,c===u){for(var T=[],x=o,k=u,S=v[k];T.unshift(x),null!=S&&T.unshift(S),null!=(x=_[k]);)S=v[k=x.id()];return{found:!0,distance:h[c],path:this.spawn(T),steps:E}}g[c]=!0;for(var C=l._private.edges,w=0;w<C.length;w++){var I=C[w];if(this.hasElementWithId(I.id())&&(!s||I.data("source")===c)){var R=I.source(),A=I.target(),O=R.id()!==c?R:A,D=O.id();if(this.hasElementWithId(D)&&!g[D]){var N=h[c]+a(I);b=D,m.has(b)?N<h[D]&&(h[D]=N,p[D]=N+r(O),_[D]=l):(h[D]=N,p[D]=N+r(O),y(O,D),_[D]=l,v[D]=I)}}}}return{found:!1,distance:void 0,path:void 0,steps:E}}},ey=Hv({weight:function(t){return 1},directed:!1}),iy={floydWarshall:function(t){for(var e=this.cy(),i=ey(t),n=i.weight,o=i.directed,r=n,s=this.byGroup(),a=s.nodes,l=s.edges,c=a.length,d=c*c,u=function(t){return a.indexOf(t)},h=function(t){return a[t]},p=new Array(d),g=0;g<d;g++){var f=g%c,m=(g-f)/c;p[g]=m===f?0:1/0}for(var _=new Array(d),v=new Array(d),y=0;y<l.length;y++){var b=l[y],E=b.source()[0],T=b.target()[0];if(E!==T){var x=u(E),k=u(T),S=x*c+k,C=r(b);if(p[S]>C&&(p[S]=C,_[S]=k,v[S]=b),!o){var w=k*c+x;!o&&p[w]>C&&(p[w]=C,_[w]=x,v[w]=b)}}}for(var I=0;I<c;I++)for(var R=0;R<c;R++)for(var A=R*c+I,O=0;O<c;O++){var D=R*c+O,N=I*c+O;p[A]+p[N]<p[D]&&(p[D]=p[A]+p[N],_[D]=_[A])}var M=function(t){return u(function(t){return(H_(t)?e.filter(t):t)[0]}(t))};return{distance:function(t,e){var i=M(t),n=M(e);return p[i*c+n]},path:function(t,i){var n=M(t),o=M(i),r=h(n);if(n===o)return r.collection();if(null==_[n*c+o])return e.collection();var s,a=e.collection(),l=n;for(a.merge(r);n!==o;)l=n,n=_[n*c+o],s=v[l*c+n],a.merge(s),a.merge(h(n));return a}}}},ny=Hv({weight:function(t){return 1},directed:!1,root:null}),oy={bellmanFord:function(t){var e=this,i=ny(t),n=i.weight,o=i.directed,r=i.root,s=n,a=this,l=this.cy(),c=this.byGroup(),d=c.edges,u=c.nodes,h=u.length,p=new zv,g=!1;r=l.collection(r)[0],d.unmergeBy((function(t){return t.isLoop()}));for(var f=d.length,m=function(t){var e=p.get(t.id());return e||(e={},p.set(t.id(),e)),e},_=function(t){return(H_(t)?l.$(t):t)[0]},v=0;v<h;v++){var y=u[v],b=m(y);y.same(r)?b.dist=0:b.dist=1/0,b.pred=null,b.edge=null}for(var E=!1,T=function(t,e,i,n,o,r){var s=n.dist+r;s<o.dist&&!i.same(n.edge)&&(o.dist=s,o.pred=t,o.edge=i,E=!0)},x=1;x<h;x++){E=!1;for(var k=0;k<f;k++){var S=d[k],C=S.source(),w=S.target(),I=s(S),R=m(C),A=m(w);T(C,0,S,R,A,I),o||T(w,0,S,A,R,I)}if(!E)break}if(E)for(var O=0;O<f;O++){var D=d[O],N=D.source(),M=D.target(),L=s(D),P=m(N).dist,B=m(M).dist;if(P+L<B||!o&&B+L<P){Mv("Graph contains a negative weight cycle for Bellman-Ford"),g=!0;break}}return{distanceTo:function(t){return m(_(t)).dist},pathTo:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=_(t),o=[],s=n;;){if(null==s)return e.spawn();var l=m(s),c=l.edge,d=l.pred;if(o.unshift(s[0]),s.same(i)&&o.length>0)break;null!=c&&o.unshift(c),s=d}return a.spawn(o)},hasNegativeWeightCycle:g,negativeWeightCycles:[]}}},ry=Math.sqrt(2),sy=function(t,e,i){0===i.length&&Dv("Karger-Stein must be run on a connected (sub)graph");for(var n=i[t],o=n[1],r=n[2],s=e[o],a=e[r],l=i,c=l.length-1;c>=0;c--){var d=l[c],u=d[1],h=d[2];(e[u]===s&&e[h]===a||e[u]===a&&e[h]===s)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var g=l[p];g[1]===a?(l[p]=g.slice(),l[p][1]=s):g[2]===a&&(l[p]=g.slice(),l[p][2]=s)}for(var f=0;f<e.length;f++)e[f]===a&&(e[f]=s);return l},ay=function(t,e,i,n){for(;i>n;){var o=Math.floor(Math.random()*e.length);e=sy(o,t,e),i--}return e},ly={kargerStein:function(){var t=this,e=this.byGroup(),i=e.nodes,n=e.edges;n.unmergeBy((function(t){return t.isLoop()}));var o=i.length,r=n.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),a=Math.floor(o/ry);if(!(o<2)){for(var l=[],c=0;c<r;c++){var d=n[c];l.push([c,i.indexOf(d.source()),i.indexOf(d.target())])}for(var u=1/0,h=[],p=new Array(o),g=new Array(o),f=new Array(o),m=function(t,e){for(var i=0;i<o;i++)e[i]=t[i]},_=0;_<=s;_++){for(var v=0;v<o;v++)g[v]=v;var y=ay(g,l.slice(),o,a),b=y.slice();m(g,f);var E=ay(g,y,a,2),T=ay(f,b,a,2);E.length<=T.length&&E.length<u?(u=E.length,h=E,m(g,p)):T.length<=E.length&&T.length<u&&(u=T.length,h=T,m(f,p))}for(var x=this.spawn(h.map((function(t){return n[t[0]]}))),k=this.spawn(),S=this.spawn(),C=p[0],w=0;w<p.length;w++){var I=p[w],R=i[w];I===C?k.merge(R):S.merge(R)}var A=function(e){var i=t.spawn();return e.forEach((function(e){i.merge(e),e.connectedEdges().forEach((function(e){t.contains(e)&&!x.contains(e)&&i.merge(e)}))})),i},O=[A(k),A(S)];return{cut:x,components:O,partition1:k,partition2:S}}Dv("At least 2 nodes are required for Karger-Stein algorithm")}},cy=function(t,e,i){return{x:t.x*e+i.x,y:t.y*e+i.y}},dy=function(t,e,i){return{x:(t.x-i.x)/e,y:(t.y-i.y)/e}},uy=function(t){return{x:t[0],y:t[1]}},hy=function(t,e){return Math.atan2(e,t)-Math.PI/2},py=Math.log2||function(t){return Math.log(t)/Math.log(2)},gy=function(t){return t>0?1:t<0?-1:0},fy=function(t,e){return Math.sqrt(my(t,e))},my=function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_y=function(t){for(var e=t.length,i=0,n=0;n<e;n++)i+=t[n];for(var o=0;o<e;o++)t[o]=t[o]/i;return t},vy=function(t,e,i,n){return(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*i},yy=function(t,e,i,n){return{x:vy(t.x,e.x,i.x,n),y:vy(t.y,e.y,i.y,n)}},by=function(t,e,i){return Math.max(t,Math.min(i,e))},Ey=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},Ty=function(t,e,i){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,i),t.y2=Math.max(t.y2,i),t.h=t.y2-t.y1},xy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ky=function(t){var e,i,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)e=i=n=o=r[0];else if(2===r.length)e=n=r[0],o=i=r[1];else if(4===r.length){var s=O_(r,4);e=s[0],i=s[1],n=s[2],o=s[3]}return t.x1-=o,t.x2+=i,t.y1-=e,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Sy=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},Cy=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},wy=function(t,e,i){return t.x1<=e&&e<=t.x2&&t.y1<=i&&i<=t.y2},Iy=function(t,e){return wy(t,e.x1,e.y1)&&wy(t,e.x2,e.y2)},Ry=function(t,e,i,n,o,r,s){var a,l=Yy(o,r),c=o/2,d=r/2,u=n-d-s;if((a=Vy(t,e,i,n,i-c+l-s,u,i+c-l+s,u,!1)).length>0)return a;var h=i+c+s;if((a=Vy(t,e,i,n,h,n-d+l-s,h,n+d-l+s,!1)).length>0)return a;var p=n+d+s;if((a=Vy(t,e,i,n,i-c+l-s,p,i+c-l+s,p,!1)).length>0)return a;var g,f=i-c-s;if((a=Vy(t,e,i,n,f,n-d+l-s,f,n+d-l+s,!1)).length>0)return a;var m=i-c+l,_=n-d+l;if((g=Hy(t,e,i,n,m,_,l+s)).length>0&&g[0]<=m&&g[1]<=_)return[g[0],g[1]];var v=i+c-l,y=n-d+l;if((g=Hy(t,e,i,n,v,y,l+s)).length>0&&g[0]>=v&&g[1]<=y)return[g[0],g[1]];var b=i+c-l,E=n+d-l;if((g=Hy(t,e,i,n,b,E,l+s)).length>0&&g[0]>=b&&g[1]>=E)return[g[0],g[1]];var T=i-c+l,x=n+d-l;return(g=Hy(t,e,i,n,T,x,l+s)).length>0&&g[0]<=T&&g[1]>=x?[g[0],g[1]]:[]},Ay=function(t,e,i,n,o,r,s){var a=s,l=Math.min(i,o),c=Math.max(i,o),d=Math.min(n,r),u=Math.max(n,r);return l-a<=t&&t<=c+a&&d-a<=e&&e<=u+a},Oy=function(t,e,i,n,o,r,s,a,l){var c=Math.min(i,s,o)-l,d=Math.max(i,s,o)+l,u=Math.min(n,a,r)-l,h=Math.max(n,a,r)+l;return!(t<c||t>d||e<u||e>h)},Dy=function(t,e,i,n,o,r,s,a){var l=[];!function(t,e,i,n,o){var r,s,a,l,c,d,u,h;0===t&&(t=1e-5),a=-27*(n/=t)+(e/=t)*(9*(i/=t)-e*e*2),r=(s=(3*i-e*e)/9)*s*s+(a/=54)*a,o[1]=0,u=e/3,r>0?(c=(c=a+Math.sqrt(r))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),d=(d=a-Math.sqrt(r))<0?-Math.pow(-d,1/3):Math.pow(d,1/3),o[0]=-u+c+d,u+=(c+d)/2,o[4]=o[2]=-u,u=Math.sqrt(3)*(-d+c)/2,o[3]=u,o[5]=-u):(o[5]=o[3]=0,0===r?(h=a<0?-Math.pow(-a,1/3):Math.pow(a,1/3),o[0]=2*h-u,o[4]=o[2]=-(h+u)):(l=(s=-s)*s*s,l=Math.acos(a/Math.sqrt(l)),h=2*Math.sqrt(s),o[0]=-u+h*Math.cos(l/3),o[2]=-u+h*Math.cos((l+2*Math.PI)/3),o[4]=-u+h*Math.cos((l+4*Math.PI)/3)))}(1*i*i-4*i*o+2*i*s+4*o*o-4*o*s+s*s+n*n-4*n*r+2*n*a+4*r*r-4*r*a+a*a,9*i*o-3*i*i-3*i*s-6*o*o+3*o*s+9*n*r-3*n*n-3*n*a-6*r*r+3*r*a,3*i*i-6*i*o+i*s-i*t+2*o*o+2*o*t-s*t+3*n*n-6*n*r+n*a-n*e+2*r*r+2*r*e-a*e,1*i*o-i*i+i*t-o*t+n*r-n*n+n*e-r*e,l);for(var c=[],d=0;d<6;d+=2)Math.abs(l[d+1])<1e-7&&l[d]>=0&&l[d]<=1&&c.push(l[d]);c.push(1),c.push(0);for(var u,h,p,g=-1,f=0;f<c.length;f++)u=Math.pow(1-c[f],2)*i+2*(1-c[f])*c[f]*o+c[f]*c[f]*s,h=Math.pow(1-c[f],2)*n+2*(1-c[f])*c[f]*r+c[f]*c[f]*a,p=Math.pow(u-t,2)+Math.pow(h-e,2),g>=0?p<g&&(g=p):g=p;return g},Ny=function(t,e,i,n,o,r){var s=[t-i,e-n],a=[o-i,r-n],l=a[0]*a[0]+a[1]*a[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*a[0]+s[1]*a[1],u=d*d/l;return d<0?c:u>l?(t-o)*(t-o)+(e-r)*(e-r):c-u},My=function(t,e,i){for(var n,o,r,s,a=0,l=0;l<i.length/2;l++)if(n=i[2*l],o=i[2*l+1],l+1<i.length/2?(r=i[2*(l+1)],s=i[2*(l+1)+1]):(r=i[2*(l+1-i.length/2)],s=i[2*(l+1-i.length/2)+1]),n==t&&r==t);else{if(!(n>=t&&t>=r||n<=t&&t<=r))continue;(t-n)/(r-n)*(s-o)+o>e&&a++}return a%2!=0},Ly=function(t,e,i,n,o,r,s,a,l){var c,d=new Array(i.length);null!=a[0]?(c=Math.atan(a[1]/a[0]),a[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=a;for(var u,h=Math.cos(-c),p=Math.sin(-c),g=0;g<d.length/2;g++)d[2*g]=r/2*(i[2*g]*h-i[2*g+1]*p),d[2*g+1]=s/2*(i[2*g+1]*h+i[2*g]*p),d[2*g]+=n,d[2*g+1]+=o;if(l>0){var f=By(d,-l);u=Py(f)}else u=d;return My(t,e,u)},Py=function(t){for(var e,i,n,o,r,s,a,l,c=new Array(t.length/2),d=0;d<t.length/4;d++){e=t[4*d],i=t[4*d+1],n=t[4*d+2],o=t[4*d+3],d<t.length/4-1?(r=t[4*(d+1)],s=t[4*(d+1)+1],a=t[4*(d+1)+2],l=t[4*(d+1)+3]):(r=t[0],s=t[1],a=t[2],l=t[3]);var u=Vy(e,i,n,o,r,s,a,l,!0);c[2*d]=u[0],c[2*d+1]=u[1]}return c},By=function(t,e){for(var i,n,o,r,s=new Array(2*t.length),a=0;a<t.length/2;a++){i=t[2*a],n=t[2*a+1],a<t.length/2-1?(o=t[2*(a+1)],r=t[2*(a+1)+1]):(o=t[0],r=t[1]);var l=r-n,c=-(o-i),d=Math.sqrt(l*l+c*c),u=l/d,h=c/d;s[4*a]=i+u*e,s[4*a+1]=n+h*e,s[4*a+2]=o+u*e,s[4*a+3]=r+h*e}return s},Fy=function(t,e,i,n,o,r,s){return t-=o,e-=r,(t/=i/2+s)*t+(e/=n/2+s)*e<=1},Hy=function(t,e,i,n,o,r,s){var a=[i-t,n-e],l=[t-o,e-r],c=a[0]*a[0]+a[1]*a[1],d=2*(l[0]*a[0]+l[1]*a[1]),u=d*d-4*c*(l[0]*l[0]+l[1]*l[1]-s*s);if(u<0)return[];var h=(-d+Math.sqrt(u))/(2*c),p=(-d-Math.sqrt(u))/(2*c),g=Math.min(h,p),f=Math.max(h,p),m=[];if(g>=0&&g<=1&&m.push(g),f>=0&&f<=1&&m.push(f),0===m.length)return[];var _=m[0]*a[0]+t,v=m[0]*a[1]+e;return m.length>1?m[0]==m[1]?[_,v]:[_,v,m[1]*a[0]+t,m[1]*a[1]+e]:[_,v]},Uy=function(t,e,i){return e<=t&&t<=i||i<=t&&t<=e?t:t<=e&&e<=i||i<=e&&e<=t?e:i},Vy=function(t,e,i,n,o,r,s,a,l){var c=t-o,d=i-t,u=s-o,h=e-r,p=n-e,g=a-r,f=u*h-g*c,m=d*h-p*c,_=g*d-u*p;if(0!==_){var v=f/_,y=m/_,b=-.001;return b<=v&&v<=1.001&&b<=y&&y<=1.001||l?[t+v*d,e+v*p]:[]}return 0===f||0===m?Uy(t,i,s)===s?[s,a]:Uy(t,i,o)===o?[o,r]:Uy(o,s,i)===i?[i,n]:[]:[]},Gy=function(t,e,i,n,o,r,s,a){var l,c,d,u,h,p,g=[],f=new Array(i.length),m=!0;if(null==r&&(m=!1),m){for(var _=0;_<f.length/2;_++)f[2*_]=i[2*_]*r+n,f[2*_+1]=i[2*_+1]*s+o;if(a>0){var v=By(f,-a);c=Py(v)}else c=f}else c=i;for(var y=0;y<c.length/2;y++)d=c[2*y],u=c[2*y+1],y<c.length/2-1?(h=c[2*(y+1)],p=c[2*(y+1)+1]):(h=c[0],p=c[1]),0!==(l=Vy(t,e,n,o,d,u,h,p)).length&&g.push(l[0],l[1]);return g},Wy=function(t,e,i){var n=[t[0]-e[0],t[1]-e[1]],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=(o-i)/o;return r<0&&(r=1e-5),[e[0]+r*n[0],e[1]+r*n[1]]},zy=function(t,e){var i=Xy(t,e);return i=jy(i)},jy=function(t){for(var e,i,n=t.length/2,o=1/0,r=1/0,s=-1/0,a=-1/0,l=0;l<n;l++)e=t[2*l],i=t[2*l+1],o=Math.min(o,e),s=Math.max(s,e),r=Math.min(r,i),a=Math.max(a,i);for(var c=2/(s-o),d=2/(a-r),u=0;u<n;u++)e=t[2*u]=t[2*u]*c,i=t[2*u+1]=t[2*u+1]*d,o=Math.min(o,e),s=Math.max(s,e),r=Math.min(r,i),a=Math.max(a,i);if(r<-1)for(var h=0;h<n;h++)i=t[2*h+1]=t[2*h+1]+(-1-r);return t},Xy=function(t,e){var i=1/t*2*Math.PI,n=t%2==0?Math.PI/2+i/2:Math.PI/2;n+=e;for(var o,r=new Array(2*t),s=0;s<t;s++)o=s*i+n,r[2*s]=Math.cos(o),r[2*s+1]=Math.sin(-o);return r},Yy=function(t,e){return Math.min(t/4,e/4,8)},Ky=function(t,e){return Math.min(t/10,e/10,8)},Jy=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},$y=Hv({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),qy={pageRank:function(t){for(var e=$y(t),i=e.dampingFactor,n=e.precision,o=e.iterations,r=e.weight,s=this._private.cy,a=this.byGroup(),l=a.nodes,c=a.edges,d=l.length,u=d*d,h=c.length,p=new Array(u),g=new Array(d),f=(1-i)/d,m=0;m<d;m++){for(var _=0;_<d;_++){p[m*d+_]=0}g[m]=0}for(var v=0;v<h;v++){var y=c[v],b=y.data("source"),E=y.data("target");if(b!==E){var T=l.indexOfId(b),x=l.indexOfId(E),k=r(y);p[x*d+T]+=k,g[T]+=k}}for(var S=1/d+f,C=0;C<d;C++)if(0===g[C])for(var w=0;w<d;w++){p[w*d+C]=S}else for(var I=0;I<d;I++){var R=I*d+C;p[R]=p[R]/g[C]+f}for(var A,O=new Array(d),D=new Array(d),N=0;N<d;N++)O[N]=1;for(var M=0;M<o;M++){for(var L=0;L<d;L++)D[L]=0;for(var P=0;P<d;P++)for(var B=0;B<d;B++){var F=P*d+B;D[P]+=p[F]*O[B]}_y(D),A=O,O=D,D=A;for(var H=0,U=0;U<d;U++){var V=A[U]-O[U];H+=V*V}if(H<n)break}return{rank:function(t){return t=s.collection(t)[0],O[l.indexOf(t)]}}}},Zy=Hv({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Qy={degreeCentralityNormalized:function(t){t=Zy(t);var e=this.cy(),i=this.nodes(),n=i.length;if(t.directed){for(var o={},r={},s=0,a=0,l=0;l<n;l++){var c=i[l],d=c.id();t.root=c;var u=this.degreeCentrality(t);s<u.indegree&&(s=u.indegree),a<u.outdegree&&(a=u.outdegree),o[d]=u.indegree,r[d]=u.outdegree}return{indegree:function(t){return 0==s?0:(H_(t)&&(t=e.filter(t)),o[t.id()]/s)},outdegree:function(t){return 0===a?0:(H_(t)&&(t=e.filter(t)),r[t.id()]/a)}}}for(var h={},p=0,g=0;g<n;g++){var f=i[g];t.root=f;var m=this.degreeCentrality(t);p<m.degree&&(p=m.degree),h[f.id()]=m.degree}return{degree:function(t){return 0===p?0:(H_(t)&&(t=e.filter(t)),h[t.id()]/p)}}},degreeCentrality:function(t){t=Zy(t);var e=this.cy(),i=this,n=t,o=n.root,r=n.weight,s=n.directed,a=n.alpha;if(o=e.collection(o)[0],s){for(var l=o.connectedEdges(),c=l.filter((function(t){return t.target().same(o)&&i.has(t)})),d=l.filter((function(t){return t.source().same(o)&&i.has(t)})),u=c.length,h=d.length,p=0,g=0,f=0;f<c.length;f++)p+=r(c[f]);for(var m=0;m<d.length;m++)g+=r(d[m]);return{indegree:Math.pow(u,1-a)*Math.pow(p,a),outdegree:Math.pow(h,1-a)*Math.pow(g,a)}}for(var _=o.connectedEdges().intersection(i),v=_.length,y=0,b=0;b<_.length;b++)y+=r(_[b]);return{degree:Math.pow(v,1-a)*Math.pow(y,a)}}};Qy.dc=Qy.degreeCentrality,Qy.dcn=Qy.degreeCentralityNormalised=Qy.degreeCentralityNormalized;var tb=Hv({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),eb={closenessCentralityNormalized:function(t){for(var e=tb(t),i=e.harmonic,n=e.weight,o=e.directed,r=this.cy(),s={},a=0,l=this.nodes(),c=this.floydWarshall({weight:n,directed:o}),d=0;d<l.length;d++){for(var u=0,h=l[d],p=0;p<l.length;p++)if(d!==p){var g=c.distance(h,l[p]);u+=i?1/g:g}i||(u=1/u),a<u&&(a=u),s[h.id()]=u}return{closeness:function(t){return 0==a?0:(t=H_(t)?r.filter(t)[0].id():t.id(),s[t]/a)}}},closenessCentrality:function(t){var e=tb(t),i=e.root,n=e.weight,o=e.directed,r=e.harmonic;i=this.filter(i)[0];for(var s=this.dijkstra({root:i,weight:n,directed:o}),a=0,l=this.nodes(),c=0;c<l.length;c++){var d=l[c];if(!d.same(i)){var u=s.distanceTo(d);a+=r?1/u:u}}return r?a:1/a}};eb.cc=eb.closenessCentrality,eb.ccn=eb.closenessCentralityNormalised=eb.closenessCentralityNormalized;var ib=Hv({weight:null,directed:!1}),nb={betweennessCentrality:function(t){for(var e=ib(t),i=e.directed,n=e.weight,o=null!=n,r=this.cy(),s=this.nodes(),a={},l={},c=0,d=function(t,e){l[t]=e,e>c&&(c=e)},u=function(t){return l[t]},h=0;h<s.length;h++){var p=s[h],g=p.id();a[g]=i?p.outgoers().nodes():p.openNeighborhood().nodes(),d(g,0)}for(var f=function(t){for(var e=s[t].id(),i=[],l={},c={},h={},p=new S_((function(t,e){return h[t]-h[e]})),g=0;g<s.length;g++){var f=s[g].id();l[f]=[],c[f]=0,h[f]=1/0}for(c[e]=1,h[e]=0,p.push(e);!p.empty();){var m=p.pop();if(i.push(m),o)for(var _=0;_<a[m].length;_++){var v=a[m][_],y=r.getElementById(m),b=void 0;b=y.edgesTo(v).length>0?y.edgesTo(v)[0]:v.edgesTo(y)[0];var E=n(b);v=v.id(),h[v]>h[m]+E&&(h[v]=h[m]+E,p.nodes.indexOf(v)<0?p.push(v):p.updateItem(v),c[v]=0,l[v]=[]),h[v]==h[m]+E&&(c[v]=c[v]+c[m],l[v].push(m))}else for(var T=0;T<a[m].length;T++){var x=a[m][T].id();h[x]==1/0&&(p.push(x),h[x]=h[m]+1),h[x]==h[m]+1&&(c[x]=c[x]+c[m],l[x].push(m))}}for(var k={},S=0;S<s.length;S++)k[s[S].id()]=0;for(;i.length>0;){for(var C=i.pop(),w=0;w<l[C].length;w++){var I=l[C][w];k[I]=k[I]+c[I]/c[C]*(1+k[C])}C!=s[t].id()&&d(C,u(C)+k[C])}},m=0;m<s.length;m++)f(m);var _={betweenness:function(t){var e=r.collection(t).id();return u(e)},betweennessNormalized:function(t){if(0==c)return 0;var e=r.collection(t).id();return u(e)/c}};return _.betweennessNormalised=_.betweennessNormalized,_}};nb.bc=nb.betweennessCentrality;var ob=Hv({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),rb=function(t,e){for(var i=0,n=0;n<e.length;n++)i+=e[n](t);return i},sb=function(t,e){for(var i,n=0;n<e;n++){i=0;for(var o=0;o<e;o++)i+=t[o*e+n];for(var r=0;r<e;r++)t[r*e+n]=t[r*e+n]/i}},ab=function(t,e,i){for(var n=new Array(i*i),o=0;o<i;o++){for(var r=0;r<i;r++)n[o*i+r]=0;for(var s=0;s<i;s++)for(var a=0;a<i;a++)n[o*i+a]+=t[o*i+s]*e[s*i+a]}return n},lb=function(t,e,i){for(var n=t.slice(0),o=1;o<i;o++)t=ab(t,n,e);return t},cb=function(t,e,i){for(var n=new Array(e*e),o=0;o<e*e;o++)n[o]=Math.pow(t[o],i);return sb(n,e),n},db=function(t,e,i,n){for(var o=0;o<i;o++){if(Math.round(t[o]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(e[o]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0},ub=function(t,e){for(var i=0;i<t.length;i++)if(!e[i]||t[i].id()!==e[i].id())return!1;return!0},hb=function(t){for(var e=this.nodes(),i=this.edges(),n=this.cy(),o=function(t){return ob(t)}(t),r={},s=0;s<e.length;s++)r[e[s].id()]=s;for(var a,l=e.length,c=l*l,d=new Array(c),u=0;u<c;u++)d[u]=0;for(var h=0;h<i.length;h++){var p=i[h],g=r[p.source().id()],f=r[p.target().id()],m=rb(p,o.attributes);d[g*l+f]+=m,d[f*l+g]+=m}!function(t,e,i){for(var n=0;n<e;n++)t[n*e+n]=i}(d,l,o.multFactor),sb(d,l);for(var _=!0,v=0;_&&v<o.maxIterations;)_=!1,a=lb(d,l,o.expandFactor),d=cb(a,l,o.inflateFactor),db(d,a,c,4)||(_=!0),v++;var y=function(t,e,i,n){for(var o=[],r=0;r<e;r++){for(var s=[],a=0;a<e;a++)Math.round(1e3*t[r*e+a])/1e3>0&&s.push(i[a]);0!==s.length&&o.push(n.collection(s))}return o}(d,l,e,n);return y=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t.length;i++)e!=i&&ub(t[e],t[i])&&t.splice(i,1);return t}(y)},pb={markovClustering:hb,mcl:hb},gb=function(t){return t},fb=function(t,e){return Math.abs(e-t)},mb=function(t,e,i){return t+fb(e,i)},_b=function(t,e,i){return t+Math.pow(i-e,2)},vb=function(t){return Math.sqrt(t)},yb=function(t,e,i){return Math.max(t,fb(e,i))},bb=function(t,e,i,n,o){for(var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gb,s=n,a=0;a<t;a++)s=o(s,e(a),i(a));return r(s)},Eb={euclidean:function(t,e,i){return t>=2?bb(t,e,i,0,_b,vb):bb(t,e,i,0,mb)},squaredEuclidean:function(t,e,i){return bb(t,e,i,0,_b)},manhattan:function(t,e,i){return bb(t,e,i,0,mb)},max:function(t,e,i){return bb(t,e,i,-1/0,yb)}};function Tb(t,e,i,n,o,r){var s;return s=U_(t)?t:Eb[t]||Eb.euclidean,0===e&&U_(t)?s(o,r):s(e,i,n,o,r)}Eb["squared-euclidean"]=Eb.squaredEuclidean,Eb.squaredeuclidean=Eb.squaredEuclidean;var xb=Hv({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),kb=function(t){return xb(t)},Sb=function(t,e,i,n,o){var r="kMedoids"!==o?function(t){return i[t]}:function(t){return n[t](i)},s=i,a=e;return Tb(t,n.length,r,(function(t){return n[t](e)}),s,a)},Cb=function(t,e,i){for(var n=i.length,o=new Array(n),r=new Array(n),s=new Array(e),a=null,l=0;l<n;l++)o[l]=t.min(i[l]).value,r[l]=t.max(i[l]).value;for(var c=0;c<e;c++){a=[];for(var d=0;d<n;d++)a[d]=Math.random()*(r[d]-o[d])+o[d];s[c]=a}return s},wb=function(t,e,i,n,o){for(var r=1/0,s=0,a=0;a<e.length;a++){var l=Sb(i,t,e[a],n,o);l<r&&(r=l,s=a)}return s},Ib=function(t,e,i){for(var n=[],o=null,r=0;r<e.length;r++)i[(o=e[r]).id()]===t&&n.push(o);return n},Rb=function(t,e,i){for(var n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++){if(Math.abs(t[n][o]-e[n][o])>i)return!1}return!0},Ab=function(t,e,i){for(var n=0;n<i;n++)if(t===e[n])return!0;return!1},Ob=function(t,e){var i=new Array(e);if(t.length<50)for(var n=0;n<e;n++){for(var o=t[Math.floor(Math.random()*t.length)];Ab(o,i,n);)o=t[Math.floor(Math.random()*t.length)];i[n]=o}else for(var r=0;r<e;r++)i[r]=t[Math.floor(Math.random()*t.length)];return i},Db=function(t,e,i){for(var n=0,o=0;o<e.length;o++)n+=Sb("manhattan",e[o],t,i,"kMedoids");return n},Nb=function(t,e,i,n,o){for(var r,s,a=0;a<e.length;a++)for(var l=0;l<t.length;l++)n[a][l]=Math.pow(i[a][l],o.m);for(var c=0;c<t.length;c++)for(var d=0;d<o.attributes.length;d++){r=0,s=0;for(var u=0;u<e.length;u++)r+=n[u][c]*o.attributes[d](e[u]),s+=n[u][c];t[c][d]=r/s}},Mb=function(t,e,i,n,o){for(var r=0;r<t.length;r++)e[r]=t[r].slice();for(var s,a,l,c=2/(o.m-1),d=0;d<i.length;d++)for(var u=0;u<n.length;u++){s=0;for(var h=0;h<i.length;h++)a=Sb(o.distance,n[u],i[d],o.attributes,"cmeans"),l=Sb(o.distance,n[u],i[h],o.attributes,"cmeans"),s+=Math.pow(a/l,c);t[u][d]=1/s}},Lb=function(t){var e,i,n,o,r=this.cy(),s=this.nodes(),a=kb(t);n=new Array(s.length);for(var l=0;l<s.length;l++)n[l]=new Array(a.k);i=new Array(s.length);for(var c=0;c<s.length;c++)i[c]=new Array(a.k);for(var d=0;d<s.length;d++){for(var u=0,h=0;h<a.k;h++)i[d][h]=Math.random(),u+=i[d][h];for(var p=0;p<a.k;p++)i[d][p]=i[d][p]/u}e=new Array(a.k);for(var g=0;g<a.k;g++)e[g]=new Array(a.attributes.length);o=new Array(s.length);for(var f=0;f<s.length;f++)o[f]=new Array(a.k);for(var m=!0,_=0;m&&_<a.maxIterations;)m=!1,Nb(e,s,i,o,a),Mb(i,n,e,s,a),Rb(i,n,a.sensitivityThreshold)||(m=!0),_++;return{clusters:function(t,e,i,n){for(var o,r,s=new Array(i.k),a=0;a<s.length;a++)s[a]=[];for(var l=0;l<e.length;l++){o=-1/0,r=-1;for(var c=0;c<e[0].length;c++)e[l][c]>o&&(o=e[l][c],r=c);s[r].push(t[l])}for(var d=0;d<s.length;d++)s[d]=n.collection(s[d]);return s}(s,i,a,r),degreeOfMembership:i}},Pb={kMeans:function(t){var e,i=this.cy(),n=this.nodes(),o=null,r=kb(t),s=new Array(r.k),a={};e=r.testMode?"number"==typeof r.testCentroids?Cb(n,r.k,r.attributes):"object"===C_(r.testCentroids)?r.testCentroids:Cb(n,r.k,r.attributes):Cb(n,r.k,r.attributes);for(var l,c,d,u=!0,h=0;u&&h<r.maxIterations;){for(var p=0;p<n.length;p++)a[(o=n[p]).id()]=wb(o,e,r.distance,r.attributes,"kMeans");u=!1;for(var g=0;g<r.k;g++){var f=Ib(g,n,a);if(0!==f.length){for(var m=r.attributes.length,_=e[g],v=new Array(m),y=new Array(m),b=0;b<m;b++){y[b]=0;for(var E=0;E<f.length;E++)o=f[E],y[b]+=r.attributes[b](o);v[b]=y[b]/f.length,l=v[b],c=_[b],d=r.sensitivityThreshold,Math.abs(c-l)<=d||(u=!0)}e[g]=v,s[g]=i.collection(f)}}h++}return s},kMedoids:function(t){var e,i,n=this.cy(),o=this.nodes(),r=null,s=kb(t),a=new Array(s.k),l={},c=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(e="object"===C_(s.testCentroids)?s.testCentroids:Ob(o,s.k)):e=Ob(o,s.k);for(var d=!0,u=0;d&&u<s.maxIterations;){for(var h=0;h<o.length;h++)l[(r=o[h]).id()]=wb(r,e,s.distance,s.attributes,"kMedoids");d=!1;for(var p=0;p<e.length;p++){var g=Ib(p,o,l);if(0!==g.length){c[p]=Db(e[p],g,s.attributes);for(var f=0;f<g.length;f++)(i=Db(g[f],g,s.attributes))<c[p]&&(c[p]=i,e[p]=g[f],d=!0);a[p]=n.collection(g)}}u++}return a},fuzzyCMeans:Lb,fcm:Lb},Bb=Hv({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Fb={single:"min",complete:"max"},Hb=function(t,e,i,n,o){for(var r,s=0,a=1/0,l=o.attributes,c=function(t,e){return Tb(o.distance,l.length,(function(e){return l[e](t)}),(function(t){return l[t](e)}),t,e)},d=0;d<t.length;d++){var u=t[d].key,h=i[u][n[u]];h<a&&(s=u,a=h)}if("threshold"===o.mode&&a>=o.threshold||"dendrogram"===o.mode&&1===t.length)return!1;var p,g=e[s],f=e[n[s]];p="dendrogram"===o.mode?{left:g,right:f,key:g.key}:{value:g.value.concat(f.value),key:g.key},t[g.index]=p,t.splice(f.index,1),e[g.key]=p;for(var m=0;m<t.length;m++){var _=t[m];g.key===_.key?r=1/0:"min"===o.linkage?(r=i[g.key][_.key],i[g.key][_.key]>i[f.key][_.key]&&(r=i[f.key][_.key])):"max"===o.linkage?(r=i[g.key][_.key],i[g.key][_.key]<i[f.key][_.key]&&(r=i[f.key][_.key])):r="mean"===o.linkage?(i[g.key][_.key]*g.size+i[f.key][_.key]*f.size)/(g.size+f.size):"dendrogram"===o.mode?c(_.value,g.value):c(_.value[0],g.value[0]),i[g.key][_.key]=i[_.key][g.key]=r}for(var v=0;v<t.length;v++){var y=t[v].key;if(n[y]===g.key||n[y]===f.key){for(var b=y,E=0;E<t.length;E++){var T=t[E].key;i[y][T]<i[y][b]&&(b=T)}n[y]=b}t[v].index=v}return g.key=f.key=g.index=f.index=null,!0},Ub=function t(e,i,n){e&&(e.value?i.push(e.value):(e.left&&t(e.left,i),e.right&&t(e.right,i)))},Vb=function t(e,i){if(!e)return"";if(e.left&&e.right){var n=t(e.left,i),o=t(e.right,i),r=i.add({group:"nodes",data:{id:n+","+o}});return i.add({group:"edges",data:{source:n,target:r.id()}}),i.add({group:"edges",data:{source:o,target:r.id()}}),r.id()}return e.value?e.value.id():void 0},Gb=function t(e,i,n){if(!e)return[];var o=[],r=[],s=[];return 0===i?(e.left&&Ub(e.left,o),e.right&&Ub(e.right,r),s=o.concat(r),[n.collection(s)]):1===i?e.value?[n.collection(e.value)]:(e.left&&Ub(e.left,o),e.right&&Ub(e.right,r),[n.collection(o),n.collection(r)]):e.value?[n.collection(e.value)]:(e.left&&(o=t(e.left,i-1,n)),e.right&&(r=t(e.right,i-1,n)),o.concat(r))},Wb=function(t){for(var e=this.cy(),i=this.nodes(),n=function(t){var e=Bb(t),i=Fb[e.linkage];return null!=i&&(e.linkage=i),e}(t),o=n.attributes,r=function(t,e){return Tb(n.distance,o.length,(function(e){return o[e](t)}),(function(t){return o[t](e)}),t,e)},s=[],a=[],l=[],c=[],d=0;d<i.length;d++){var u={value:"dendrogram"===n.mode?i[d]:[i[d]],key:d,index:d};s[d]=u,c[d]=u,a[d]=[],l[d]=0}for(var h=0;h<s.length;h++)for(var p=0;p<=h;p++){var g=void 0;g="dendrogram"===n.mode?h===p?1/0:r(s[h].value,s[p].value):h===p?1/0:r(s[h].value[0],s[p].value[0]),a[h][p]=g,a[p][h]=g,g<a[h][l[h]]&&(l[h]=p)}for(var f,m=Hb(s,c,a,l,n);m;)m=Hb(s,c,a,l,n);return"dendrogram"===n.mode?(f=Gb(s[0],n.dendrogramDepth,e),n.addDendrogram&&Vb(s[0],e)):(f=new Array(s.length),s.forEach((function(t,i){t.key=t.index=null,f[i]=e.collection(t.value)}))),f},zb={hierarchicalClustering:Wb,hca:Wb},jb=Hv({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Xb=function(t,e,i,n){var o=function(t,e){return n[e](t)};return-Tb(t,n.length,(function(t){return o(e,t)}),(function(t){return o(i,t)}),e,i)},Yb=function(t,e){return"median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(i<t.length&&t.splice(i,t.length-i),e>0&&t.splice(0,e)):t=t.slice(e,i);for(var r=0,s=t.length-1;s>=0;s--){var a=t[s];o?isFinite(a)||(t[s]=-1/0,r++):t.splice(s,1)}n&&t.sort((function(t,e){return t-e}));var l=t.length,c=Math.floor(l/2);return l%2!=0?t[c+1+r]:(t[c-1+r]+t[c+r])/2}(t):"mean"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=0,o=0,r=e;r<i;r++){var s=t[r];isFinite(s)&&(n+=s,o++)}return n/o}(t):"min"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=1/0,o=e;o<i;o++){var r=t[o];isFinite(r)&&(n=Math.min(r,n))}return n}(t):"max"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=-1/0,o=e;o<i;o++){var r=t[o];isFinite(r)&&(n=Math.max(r,n))}return n}(t):e},Kb=function(t,e,i){for(var n=[],o=0;o<t;o++){for(var r=-1,s=-1/0,a=0;a<i.length;a++){var l=i[a];e[o*t+l]>s&&(r=l,s=e[o*t+l])}r>0&&n.push(r)}for(var c=0;c<i.length;c++)n[i[c]]=i[c];return n},Jb=function(t){for(var e,i,n,o,r,s,a=this.cy(),l=this.nodes(),c=function(t){var e=t.damping,i=t.preference;.5<=e&&e<1||Dv("Damping must range on [0.5, 1).  Got: ".concat(e));var n=["median","mean","min","max"];return n.some((function(t){return t===i}))||W_(i)||Dv("Preference must be one of [".concat(n.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(i)),jb(t)}(t),d={},u=0;u<l.length;u++)d[l[u].id()]=u;i=(e=l.length)*e,n=new Array(i);for(var h=0;h<i;h++)n[h]=-1/0;for(var p=0;p<e;p++)for(var g=0;g<e;g++)p!==g&&(n[p*e+g]=Xb(c.distance,l[p],l[g],c.attributes));o=Yb(n,c.preference);for(var f=0;f<e;f++)n[f*e+f]=o;r=new Array(i);for(var m=0;m<i;m++)r[m]=0;s=new Array(i);for(var _=0;_<i;_++)s[_]=0;for(var v=new Array(e),y=new Array(e),b=new Array(e),E=0;E<e;E++)v[E]=0,y[E]=0,b[E]=0;for(var T,x=new Array(e*c.minIterations),k=0;k<x.length;k++)x[k]=0;for(T=0;T<c.maxIterations;T++){for(var S=0;S<e;S++){for(var C=-1/0,w=-1/0,I=-1,R=0,A=0;A<e;A++)v[A]=r[S*e+A],(R=s[S*e+A]+n[S*e+A])>=C?(w=C,C=R,I=A):R>w&&(w=R);for(var O=0;O<e;O++)r[S*e+O]=(1-c.damping)*(n[S*e+O]-C)+c.damping*v[O];r[S*e+I]=(1-c.damping)*(n[S*e+I]-w)+c.damping*v[I]}for(var D=0;D<e;D++){for(var N=0,M=0;M<e;M++)v[M]=s[M*e+D],y[M]=Math.max(0,r[M*e+D]),N+=y[M];N-=y[D],y[D]=r[D*e+D],N+=y[D];for(var L=0;L<e;L++)s[L*e+D]=(1-c.damping)*Math.min(0,N-y[L])+c.damping*v[L];s[D*e+D]=(1-c.damping)*(N-y[D])+c.damping*v[D]}for(var P=0,B=0;B<e;B++){var F=s[B*e+B]+r[B*e+B]>0?1:0;x[T%c.minIterations*e+B]=F,P+=F}if(P>0&&(T>=c.minIterations-1||T==c.maxIterations-1)){for(var H=0,U=0;U<e;U++){b[U]=0;for(var V=0;V<c.minIterations;V++)b[U]+=x[V*e+U];0!==b[U]&&b[U]!==c.minIterations||H++}if(H===e)break}}for(var G=function(t,e,i){for(var n=[],o=0;o<t;o++)e[o*t+o]+i[o*t+o]>0&&n.push(o);return n}(e,r,s),W=function(t,e,i){for(var n=Kb(t,e,i),o=0;o<i.length;o++){for(var r=[],s=0;s<n.length;s++)n[s]===i[o]&&r.push(s);for(var a=-1,l=-1/0,c=0;c<r.length;c++){for(var d=0,u=0;u<r.length;u++)d+=e[r[u]*t+r[c]];d>l&&(a=c,l=d)}i[o]=r[a]}return Kb(t,e,i)}(e,n,G),z={},j=0;j<G.length;j++)z[G[j]]=[];for(var X=0;X<l.length;X++){var Y=W[d[l[X].id()]];null!=Y&&z[Y].push(l[X])}for(var K=new Array(G.length),J=0;J<G.length;J++)K[J]=a.collection(z[G[J]]);return K},$b={affinityPropagation:Jb,ap:Jb},qb=Hv({root:void 0,directed:!1}),Zb=function(){var t=this,e={},i=0,n=0,o=[],r=[],s={},a=function a(l,c,d){l===d&&(n+=1),e[c]={id:i,low:i++,cutVertex:!1};var u,h,p,g,f=t.getElementById(c).connectedEdges().intersection(t);0===f.size()?o.push(t.spawn(t.getElementById(c))):f.forEach((function(i){u=i.source().id(),h=i.target().id(),(p=u===c?h:u)!==d&&(g=i.id(),s[g]||(s[g]=!0,r.push({x:c,y:p,edge:i})),p in e?e[c].low=Math.min(e[c].low,e[p].id):(a(l,p,c),e[c].low=Math.min(e[c].low,e[p].low),e[c].id<=e[p].low&&(e[c].cutVertex=!0,function(i,n){for(var s=r.length-1,a=[],l=t.spawn();r[s].x!=i||r[s].y!=n;)a.push(r.pop().edge),s--;a.push(r.pop().edge),a.forEach((function(i){var n=i.connectedNodes().intersection(t);l.merge(i),n.forEach((function(i){var n=i.id(),o=i.connectedEdges().intersection(t);l.merge(i),e[n].cutVertex?l.merge(o.filter((function(t){return t.isLoop()}))):l.merge(o)}))})),o.push(l)}(c,p))))}))};t.forEach((function(t){if(t.isNode()){var i=t.id();i in e||(n=0,a(i,i),e[i].cutVertex=n>1)}}));var l=Object.keys(e).filter((function(t){return e[t].cutVertex})).map((function(e){return t.getElementById(e)}));return{cut:t.spawn(l),components:o}},Qb=function(){var t=this,e={},i=0,n=[],o=[],r=t.spawn(t),s=function s(a){if(o.push(a),e[a]={index:i,low:i++,explored:!1},t.getElementById(a).connectedEdges().intersection(t).forEach((function(t){var i=t.target().id();i!==a&&(i in e||s(i),e[i].explored||(e[a].low=Math.min(e[a].low,e[i].low)))})),e[a].index===e[a].low){for(var l=t.spawn();;){var c=o.pop();if(l.merge(t.getElementById(c)),e[c].low=e[a].index,e[c].explored=!0,c===a)break}var d=l.edgesWith(l),u=l.merge(d);n.push(u),r=r.difference(u)}};return t.forEach((function(t){if(t.isNode()){var i=t.id();i in e||s(i)}})),{cut:r,components:n}},tE={};[Jv,qv,Zv,ty,iy,oy,ly,qy,Qy,eb,nb,pb,Pb,zb,$b,{hierholzer:function(t){if(!G_(t)){var e=arguments;t={root:e[0],directed:e[1]}}var i,n,o,r=qb(t),s=r.root,a=r.directed,l=this,c=!1;s&&(o=H_(s)?this.filter(s)[0].id():s[0].id());var d={},u={};a?l.forEach((function(t){var e=t.id();if(t.isNode()){var o=t.indegree(!0),r=t.outdegree(!0),s=o-r,a=r-o;1==s?i?c=!0:i=e:1==a?n?c=!0:n=e:(a>1||s>1)&&(c=!0),d[e]=[],t.outgoers().forEach((function(t){t.isEdge()&&d[e].push(t.id())}))}else u[e]=[void 0,t.target().id()]})):l.forEach((function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(i?n?c=!0:n=e:i=e),d[e]=[],t.connectedEdges().forEach((function(t){return d[e].push(t.id())}))):u[e]=[t.source().id(),t.target().id()]}));var h={found:!1,trail:void 0};if(c)return h;if(n&&i)if(a){if(o&&n!=o)return h;o=n}else{if(o&&n!=o&&i!=o)return h;o||(o=n)}else o||(o=l[0].id());var p=function(t){for(var e,i,n,o=t,r=[t];d[o].length;)e=d[o].shift(),i=u[e][0],o!=(n=u[e][1])?(d[n]=d[n].filter((function(t){return t!=e})),o=n):a||o==i||(d[i]=d[i].filter((function(t){return t!=e})),o=i),r.unshift(e),r.unshift(o);return r},g=[],f=[];for(f=p(o);1!=f.length;)0==d[f[0]].length?(g.unshift(l.getElementById(f.shift())),g.unshift(l.getElementById(f.shift()))):f=p(f.shift()).concat(f);for(var m in g.unshift(l.getElementById(f.shift())),d)if(d[m].length)return h;return h.found=!0,h.trail=this.spawn(g,!0),h}},{hopcroftTarjanBiconnected:Zb,htbc:Zb,htb:Zb,hopcroftTarjanBiconnectedComponents:Zb},{tarjanStronglyConnected:Qb,tsc:Qb,tscc:Qb,tarjanStronglyConnectedComponents:Qb}].forEach((function(t){rv(tE,t)}));var eE=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};eE.prototype={fulfill:function(t){return iE(this,1,"fulfillValue",t)},reject:function(t){return iE(this,2,"rejectReason",t)},then:function(t,e){var i=this,n=new eE;return i.onFulfilled.push(rE(t,n,"fulfill")),i.onRejected.push(rE(e,n,"reject")),nE(i),n.proxy}};var iE=function(t,e,i,n){return 0===t.state&&(t.state=e,t[i]=n,nE(t)),t},nE=function(t){1===t.state?oE(t,"onFulfilled",t.fulfillValue):2===t.state&&oE(t,"onRejected",t.rejectReason)},oE=function(t,e,i){if(0!==t[e].length){var n=t[e];t[e]=[];var o=function(){for(var t=0;t<n.length;t++)n[t](i)};"function"==typeof setImmediate?setImmediate(o):setTimeout(o,0)}},rE=function(t,e,i){return function(n){if("function"!=typeof t)e[i].call(e,n);else{var o;try{o=t(n)}catch(t){return void e.reject(t)}sE(e,o)}}},sE=function t(e,i){if(e!==i&&e.proxy!==i){var n;if("object"===C_(i)&&null!==i||"function"==typeof i)try{n=i.then}catch(t){return void e.reject(t)}if("function"!=typeof n)e.fulfill(i);else{var o=!1;try{n.call(i,(function(n){o||(o=!0,n===i?e.reject(new TypeError("circular thenable chain")):t(e,n))}),(function(t){o||(o=!0,e.reject(t))}))}catch(t){o||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};eE.all=function(t){return new eE((function(e,i){for(var n=new Array(t.length),o=0,r=function(i,r){n[i]=r,++o===t.length&&e(n)},s=0;s<t.length;s++)!function(e){var n=t[e];null!=n&&null!=n.then?n.then((function(t){r(e,t)}),(function(t){i(t)})):r(e,n)}(s)}))},eE.resolve=function(t){return new eE((function(e,i){e(t)}))},eE.reject=function(t){return new eE((function(e,i){i(t)}))};var aE="undefined"!=typeof Promise?Promise:eE,lE=function(t,e,i){var n=K_(t),o=!n,r=this._private=rv({duration:1e3},e,i);if(r.target=t,r.style=r.style||r.css,r.started=!1,r.playing=!1,r.hooked=!1,r.applying=!1,r.progress=0,r.completes=[],r.frames=[],r.complete&&U_(r.complete)&&r.completes.push(r.complete),o){var s=t.position();r.startPosition=r.startPosition||{x:s.x,y:s.y},r.startStyle=r.startStyle||t.cy().style().getAnimationStartStyle(t,r.style)}if(n){var a=t.pan();r.startPan={x:a.x,y:a.y},r.startZoom=t.zoom()}this.length=1,this[0]=this},cE=lE.prototype;rv(cE,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),j_(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,i=e.playing;return void 0===t?e.progress:(i&&this.pause(),e.progress=t,e.started=!1,i&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var i=function(e,i){var n=t[e];null!=n&&(t[e]=t[i],t[i]=n)};if(i("zoom","startZoom"),i("pan","startPan"),i("position","startPosition"),t.style)for(var n=0;n<t.style.length;n++){var o=t.style[n],r=o.name,s=t.startStyle[r];t.startStyle[r]=o,t.style[n]=s}return e&&this.play(),this},promise:function(t){var e,i=this._private;switch(t){case"frame":e=i.frames;break;default:case"complete":case"completed":e=i.completes}return new aE((function(t,i){e.push((function(){t()}))}))}}),cE.complete=cE.completed,cE.run=cE.play,cE.running=cE.playing;var dE={};[{animated:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var i=e[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var i=0;i<e.length;i++){e[i]._private.animation.queue=[]}return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var i=this,n=void 0!==i.length,o=n?i:[i],r=this._private.cy||this,s=!n,a=!s;if(!r.styleEnabled())return this;var l=r.style();if(t=rv({},t,e),0===Object.keys(t).length)return new lE(o[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(a&&(t.style=l.getPropsList(t.style||t.css),t.css=void 0),a&&null!=t.renderedPosition){var c=t.renderedPosition,d=r.pan(),u=r.zoom();t.position=dy(c,u,d)}if(s&&null!=t.panBy){var h=t.panBy,p=r.pan();t.pan={x:p.x+h.x,y:p.y+h.y}}var g=t.center||t.centre;if(s&&null!=g){var f=r.getCenterPan(g.eles,t.zoom);null!=f&&(t.pan=f)}if(s&&null!=t.fit){var m=t.fit,_=r.getFitViewport(m.eles||m.boundingBox,m.padding);null!=_&&(t.pan=_.pan,t.zoom=_.zoom)}if(s&&G_(t.zoom)){var v=r.getZoomedViewport(t.zoom);null!=v?(v.zoomed&&(t.zoom=v.zoom),v.panned&&(t.pan=v.pan)):t.zoom=null}return new lE(o[0],t)}},animate:function(){return function(t,e){var i=this,n=void 0!==i.length?i:[i];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=rv({},t,e));for(var o=0;o<n.length;o++){var r=n[o],s=r.animated()&&(void 0===t.queue||t.queue);r.animation(t,s?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var i=this,n=void 0!==i.length?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var r=0;r<n.length;r++){for(var s=n[r]._private,a=s.animation.current,l=0;l<a.length;l++){var c=a[l]._private;e&&(c.duration=0)}t&&(s.animation.queue=[]),e||(s.animation.current=[])}return o.notify("draw"),this}}},{data:function(t){return t=rv({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,i){var n=t,o=this,r=void 0!==o.length,s=r?o:[o],a=r?o[0]:o;if(H_(e)){var l;if(n.allowGetting&&void 0===i)return a&&(n.beforeGet(a),l=a._private[n.field][e]),l;if(n.allowSetting&&void 0!==i&&!n.immutableKeys[e]){var c=A_({},e,i);n.beforeSet(o,c);for(var d=0,u=s.length;d<u;d++){var h=s[d];n.canSet(h)&&(h._private[n.field][e]=i)}n.updateStyle&&o.updateStyle(),n.onSet(o),n.settingTriggersEvent&&o[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&G_(e)){var p,g,f=e,m=Object.keys(f);n.beforeSet(o,f);for(var _=0;_<m.length;_++){if(g=f[p=m[_]],!n.immutableKeys[p])for(var v=0;v<s.length;v++){var y=s[v];n.canSet(y)&&(y._private[n.field][p]=g)}}n.updateStyle&&o.updateStyle(),n.onSet(o),n.settingTriggersEvent&&o[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&U_(e)){var b=e;o.on(n.bindingEvent,b)}else if(n.allowGetting&&void 0===e){var E;return a&&(n.beforeGet(a),E=a._private[n.field]),E}return o}},removeData:function(t){return t=rv({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var i=t,n=this,o=void 0!==n.length?n:[n];if(H_(e)){for(var r=e.split(/\s+/),s=r.length,a=0;a<s;a++){var l=r[a];if(!$_(l))if(!i.immutableKeys[l])for(var c=0,d=o.length;c<d;c++)o[c]._private[i.field][l]=void 0}i.triggerEvent&&n[i.triggerFnName](i.event)}else if(void 0===e){for(var u=0,h=o.length;u<h;u++)for(var p=o[u]._private[i.field],g=Object.keys(p),f=0;f<g.length;f++){var m=g[f];!i.immutableKeys[m]&&(p[m]=void 0)}i.triggerEvent&&n[i.triggerFnName](i.event)}return n}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var i=this,n=Array.prototype.slice.call(arguments,0);return new aE((function(t,e){var o=n.concat([function(e){i.off.apply(i,r),t(e)}]),r=o.concat([]);i.on.apply(i,o)}))}}}].forEach((function(t){rv(dE,t)}));var uE={animate:dE.animate(),animation:dE.animation(),animated:dE.animated(),clearQueue:dE.clearQueue(),delay:dE.delay(),delayAnimation:dE.delayAnimation(),stop:dE.stop()},hE={classes:function(t){var e=this;if(void 0===t){var i=[];return e[0]._private.classes.forEach((function(t){return i.push(t)})),i}V_(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],o=new Xv(t),r=0;r<e.length;r++){for(var s=e[r],a=s._private,l=a.classes,c=!1,d=0;d<t.length;d++){var u=t[d];if(!l.has(u)){c=!0;break}}c||(c=l.size!==t.length),c&&(a.classes=o,n.push(s))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){V_(t)||(t=t.match(/\S+/g)||[]);for(var i=this,n=void 0===e,o=[],r=0,s=i.length;r<s;r++)for(var a=i[r],l=a._private.classes,c=!1,d=0;d<t.length;d++){var u=t[d],h=l.has(u),p=!1;e||n&&!h?(l.add(u),p=!0):(!e||n&&h)&&(l.delete(u),p=!0),!c&&p&&(o.push(a),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),i},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var i=this;if(null==e)e=250;else if(0===e)return i;return i.addClass(t),setTimeout((function(){i.removeClass(t)}),e),i}};hE.className=hE.classNames=hE.classes;var pE={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:nv,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};pE.variable="(?:[\\w-]|(?:\\\\"+pE.metaChar+"))+",pE.value=pE.string+"|"+pE.number,pE.className=pE.variable,pE.id=pE.variable,function(){var t,e,i;for(t=pE.comparatorOp.split("|"),i=0;i<t.length;i++)e=t[i],pE.comparatorOp+="|@"+e;for(t=pE.comparatorOp.split("|"),i=0;i<t.length;i++)(e=t[i]).indexOf("!")>=0||"="!==e&&(pE.comparatorOp+="|\\!"+e)}();var gE=0,fE=1,mE=2,_E=3,vE=4,yE=5,bE=6,EE=7,TE=8,xE=9,kE=10,SE=11,CE=12,wE=13,IE=14,RE=15,AE=16,OE=17,DE=18,NE=19,ME=20,LE=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return function(t,e){return-1*ov(t,e)}(t.selector,e.selector)})),PE=function(){for(var t,e={},i=0;i<LE.length;i++)e[(t=LE[i]).selector]=t.matches;return e}(),BE="("+LE.map((function(t){return t.selector})).join("|")+")",FE=function(t){return t.replace(new RegExp("\\\\("+pE.metaChar+")","g"),(function(t,e){return e}))},HE=function(t,e,i){t[t.length-1]=i},UE=[{name:"group",query:!0,regex:"("+pE.group+")",populate:function(t,e,i){var n=O_(i,1)[0];e.checks.push({type:gE,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:BE,populate:function(t,e,i){var n=O_(i,1)[0];e.checks.push({type:EE,value:n})}},{name:"id",query:!0,regex:"\\#("+pE.id+")",populate:function(t,e,i){var n=O_(i,1)[0];e.checks.push({type:TE,value:FE(n)})}},{name:"className",query:!0,regex:"\\.("+pE.className+")",populate:function(t,e,i){var n=O_(i,1)[0];e.checks.push({type:xE,value:FE(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+pE.variable+")\\s*\\]",populate:function(t,e,i){var n=O_(i,1)[0];e.checks.push({type:vE,field:FE(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+pE.variable+")\\s*("+pE.comparatorOp+")\\s*("+pE.value+")\\s*\\]",populate:function(t,e,i){var n=O_(i,3),o=n[0],r=n[1],s=n[2];s=null!=new RegExp("^"+pE.string+"$").exec(s)?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:_E,field:FE(o),operator:r,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+pE.boolOp+")\\s*("+pE.variable+")\\s*\\]",populate:function(t,e,i){var n=O_(i,2),o=n[0],r=n[1];e.checks.push({type:yE,field:FE(r),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+pE.meta+")\\s*("+pE.comparatorOp+")\\s*("+pE.number+")\\s*\\]\\]",populate:function(t,e,i){var n=O_(i,3),o=n[0],r=n[1],s=n[2];e.checks.push({type:bE,field:FE(o),operator:r,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:pE.separator,populate:function(t,e){var i=t.currentSubject,n=t.edgeCount,o=t.compoundCount,r=t[t.length-1];return null!=i&&(r.subject=i,t.currentSubject=null),r.edgeCount=n,r.compoundCount=o,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:pE.directedEdge,populate:function(t,e){if(null==t.currentSubject){var i={checks:[]},n=e,o={checks:[]};return i.checks.push({type:SE,source:n,target:o}),HE(t,0,i),t.edgeCount++,o}var r={checks:[]},s=e,a={checks:[]};return r.checks.push({type:CE,source:s,target:a}),HE(t,0,r),t.edgeCount++,a}},{name:"undirectedEdge",separator:!0,regex:pE.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var i={checks:[]},n=e,o={checks:[]};return i.checks.push({type:kE,nodes:[n,o]}),HE(t,0,i),t.edgeCount++,o}var r={checks:[]},s=e,a={checks:[]};return r.checks.push({type:IE,node:s,neighbor:a}),HE(t,0,r),a}},{name:"child",separator:!0,regex:pE.child,populate:function(t,e){if(null==t.currentSubject){var i={checks:[]},n={checks:[]},o=t[t.length-1];return i.checks.push({type:RE,parent:o,child:n}),HE(t,0,i),t.compoundCount++,n}if(t.currentSubject===e){var r={checks:[]},s=t[t.length-1],a={checks:[]},l={checks:[]},c={checks:[]},d={checks:[]};return r.checks.push({type:NE,left:s,right:a,subject:l}),l.checks=e.checks,e.checks=[{type:ME}],d.checks.push({type:ME}),a.checks.push({type:OE,parent:d,child:c}),HE(t,0,r),t.currentSubject=l,t.compoundCount++,c}var u={checks:[]},h={checks:[]},p=[{type:OE,parent:u,child:h}];return u.checks=e.checks,e.checks=p,t.compoundCount++,h}},{name:"descendant",separator:!0,regex:pE.descendant,populate:function(t,e){if(null==t.currentSubject){var i={checks:[]},n={checks:[]},o=t[t.length-1];return i.checks.push({type:AE,ancestor:o,descendant:n}),HE(t,0,i),t.compoundCount++,n}if(t.currentSubject===e){var r={checks:[]},s=t[t.length-1],a={checks:[]},l={checks:[]},c={checks:[]},d={checks:[]};return r.checks.push({type:NE,left:s,right:a,subject:l}),l.checks=e.checks,e.checks=[{type:ME}],d.checks.push({type:ME}),a.checks.push({type:DE,ancestor:d,descendant:c}),HE(t,0,r),t.currentSubject=l,t.compoundCount++,c}var u={checks:[]},h={checks:[]},p=[{type:DE,ancestor:u,descendant:h}];return u.checks=e.checks,e.checks=p,t.compoundCount++,h}},{name:"subject",modifier:!0,regex:pE.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return Mv("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var i=t[t.length-1].checks[0],n=null==i?null:i.type;n===SE?i.type=wE:n===kE&&(i.type=IE,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];UE.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var VE=function(t){for(var e,i,n,o=0;o<UE.length;o++){var r=UE[o],s=r.name,a=t.match(r.regexObj);if(null!=a){i=a,e=r,n=s;var l=a[0];t=t.substring(l.length);break}}return{expr:e,match:i,name:n,remaining:t}},GE={parse:function(t){var e=this,i=e.inputText=t,n=e[0]={checks:[]};for(e.length=1,i=function(t){var e=t.match(/^\s+/);if(e){var i=e[0];t=t.substring(i.length)}return t}(i);;){var o=VE(i);if(null==o.expr)return Mv("The selector `"+t+"`is invalid"),!1;var r=o.match.slice(1),s=o.expr.populate(e,n,r);if(!1===s)return!1;if(null!=s&&(n=s),(i=o.remaining).match(/^\s*$/))break}var a=e[e.length-1];null!=e.currentSubject&&(a.subject=e.currentSubject),a.edgeCount=e.edgeCount,a.compoundCount=e.compoundCount;for(var l=0;l<e.length;l++){var c=e[l];if(c.compoundCount>0&&c.edgeCount>0)return Mv("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Mv("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===c.edgeCount&&Mv("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return H_(e)?'"'+e+'"':t(e)},i=function(t){return" "+t+" "},n=function(n,r){var s=n.type,a=n.value;switch(s){case gE:var l=t(a);return l.substring(0,l.length-1);case _E:var c=n.field,d=n.operator;return"["+c+i(t(d))+e(a)+"]";case yE:var u=n.operator,h=n.field;return"["+t(u)+h+"]";case vE:return"["+n.field+"]";case bE:var p=n.operator;return"[["+n.field+i(t(p))+e(a)+"]]";case EE:return a;case TE:return"#"+a;case xE:return"."+a;case OE:case RE:return o(n.parent,r)+i(">")+o(n.child,r);case DE:case AE:return o(n.ancestor,r)+" "+o(n.descendant,r);case NE:var g=o(n.left,r),f=o(n.subject,r),m=o(n.right,r);return g+(g.length>0?" ":"")+f+m;case ME:return""}},o=function(t,e){return t.checks.reduce((function(i,o,r){return i+(e===t&&0===r?"$":"")+n(o,e)}),"")},r="",s=0;s<this.length;s++){var a=this[s];r+=o(a,a.subject),this.length>1&&s<this.length-1&&(r+=", ")}return this.toStringCache=r,r}},WE=function(t,e,i){var n,o,r,s=H_(t),a=W_(t),l=H_(i),c=!1,d=!1,u=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),d=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),c=!0),(s||l||c)&&(o=s||a?""+t:"",r=""+i),c&&(t=o=o.toLowerCase(),i=r=r.toLowerCase()),e){case"*=":n=o.indexOf(r)>=0;break;case"$=":n=o.indexOf(r,o.length-r.length)>=0;break;case"^=":n=0===o.indexOf(r);break;case"=":n=t===i;break;case">":u=!0,n=t>i;break;case">=":u=!0,n=t>=i;break;case"<":u=!0,n=t<i;break;case"<=":u=!0,n=t<=i;break;default:n=!1}return!d||null==t&&u||(n=!n),n},zE=function(t,e){return t.data(e)},jE=[],XE=function(t,e){return t.checks.every((function(t){return jE[t.type](t,e)}))};jE[gE]=function(t,e){var i=t.value;return"*"===i||i===e.group()},jE[EE]=function(t,e){return function(t,e){return PE[t](e)}(t.value,e)},jE[TE]=function(t,e){var i=t.value;return e.id()===i},jE[xE]=function(t,e){var i=t.value;return e.hasClass(i)},jE[bE]=function(t,e){var i=t.field,n=t.operator,o=t.value;return WE(function(t,e){return t[e]()}(e,i),n,o)},jE[_E]=function(t,e){var i=t.field,n=t.operator,o=t.value;return WE(zE(e,i),n,o)},jE[yE]=function(t,e){var i=t.field,n=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(zE(e,i),n)},jE[vE]=function(t,e){var i=t.field;return t.operator,void 0!==zE(e,i)},jE[kE]=function(t,e){var i=t.nodes[0],n=t.nodes[1],o=e.source(),r=e.target();return XE(i,o)&&XE(n,r)||XE(n,o)&&XE(i,r)},jE[IE]=function(t,e){return XE(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&XE(t.neighbor,e)}))},jE[SE]=function(t,e){return XE(t.source,e.source())&&XE(t.target,e.target())},jE[CE]=function(t,e){return XE(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&XE(t.target,e)}))},jE[wE]=function(t,e){return XE(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&XE(t.source,e)}))},jE[RE]=function(t,e){return XE(t.child,e)&&XE(t.parent,e.parent())},jE[OE]=function(t,e){return XE(t.parent,e)&&e.children().some((function(e){return XE(t.child,e)}))},jE[AE]=function(t,e){return XE(t.descendant,e)&&e.ancestors().some((function(e){return XE(t.ancestor,e)}))},jE[DE]=function(t,e){return XE(t.ancestor,e)&&e.descendants().some((function(e){return XE(t.descendant,e)}))},jE[NE]=function(t,e){return XE(t.subject,e)&&XE(t.left,e)&&XE(t.right,e)},jE[ME]=function(){return!0},jE[fE]=function(t,e){return t.value.has(e)},jE[mE]=function(t,e){return(0,t.value)(e)};var YE=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||H_(t)&&t.match(/^\s*$/)||(j_(t)?this.addQuery({checks:[{type:fE,value:t.collection()}]}):U_(t)?this.addQuery({checks:[{type:mE,value:t}]}):H_(t)?this.parse(t)||(this.invalid=!0):Dv("A selector must be created from a string; found "))},KE=YE.prototype;[GE,{matches:function(t){for(var e=0;e<this.length;e++){var i=this[e];if(XE(i,t))return!0}return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&e[0].checks[0].type===TE)return t.getElementById(e[0].checks[0].value).collection();var i=function(t){for(var i=0;i<e.length;i++){var n=e[i];if(XE(n,t))return!0}return!1};return null==e.text()&&(i=function(){return!0}),t.filter(i)}}].forEach((function(t){return rv(KE,t)})),KE.text=function(){return this.inputText},KE.size=function(){return this.length},KE.eq=function(t){return this[t]},KE.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},KE.addQuery=function(t){this[this.length++]=t},KE.selector=KE.toString;var JE={allAre:function(t){var e=new YE(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new YE(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var i=0;i<this.length;i++){if(e?t.apply(e,[this[i],i,this]):t(this[i],i,this))return!0}return!1},every:function(t,e){for(var i=0;i<this.length;i++){if(!(e?t.apply(e,[this[i],i,this]):t(this[i],i,this)))return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};JE.allAreNeighbours=JE.allAreNeighbors,JE.has=JE.contains,JE.equal=JE.equals=JE.same;var $E,qE,ZE=function(t,e){return function(i,n,o,r){var s,a=i,l=this;if(null==a?s="":j_(a)&&1===a.length&&(s=a.id()),1===l.length&&s){var c=l[0]._private,d=c.traversalCache=c.traversalCache||{},u=d[e]=d[e]||[],h=Ev(s),p=u[h];return p||(u[h]=t.call(l,i,n,o,r))}return t.call(l,i,n,o,r)}},QE={parent:function(t){var e=[];if(1===this.length){var i=this[0]._private.parent;if(i)return i}for(var n=0;n<this.length;n++){var o=this[n]._private.parent;o&&e.push(o)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],i=this.parent();i.nonempty();){for(var n=0;n<i.length;n++){var o=i[n];e.push(o)}i=i.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,i=0;i<this.length;i++){var n=this[i].parents();e=(e=e||n).intersect(n)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:ZE((function(t){for(var e=[],i=0;i<this.length;i++)for(var n=this[i]._private.children,o=0;o<n.length;o++)e.push(n[o]);return this.spawn(e,!0).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(i){for(var n=0;n<i.length;n++){var o=i[n];e.push(o),o.children().nonempty()&&t(o.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function tT(t,e,i,n){for(var o=[],r=new Xv,s=t.cy().hasCompoundNodes(),a=0;a<t.length;a++){var l=t[a];i?o.push(l):s&&n(o,r,l)}for(;o.length>0;){var c=o.shift();e(c),r.add(c.id()),s&&n(o,r,c)}return t}function eT(t,e,i){if(i.isParent())for(var n=i._private.children,o=0;o<n.length;o++){var r=n[o];e.has(r.id())||t.push(r)}}function iT(t,e,i){if(i.isChild()){var n=i._private.parent;e.has(n.id())||t.push(n)}}function nT(t,e,i){iT(t,e,i),eT(t,e,i)}QE.forEachDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return tT(this,t,e,eT)},QE.forEachUp=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return tT(this,t,e,iT)},QE.forEachUpAndDown=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return tT(this,t,e,nT)},QE.ancestors=QE.parents,($E=qE={data:dE.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:dE.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:dE.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:dE.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:dE.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:dE.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=$E.data,$E.removeAttr=$E.removeData;var oT,rT,sT=qE,aT={};function lT(t){return function(e){var i=this;if(void 0===e&&(e=!0),0!==i.length&&i.isNode()&&!i.removed()){for(var n=0,o=i[0],r=o._private.edges,s=0;s<r.length;s++){var a=r[s];!e&&a.isLoop()||(n+=t(o,a))}return n}}}function cT(t,e){return function(i){for(var n,o=this.nodes(),r=0;r<o.length;r++){var s=o[r][t](i);void 0===s||void 0!==n&&!e(s,n)||(n=s)}return n}}rv(aT,{degree:lT((function(t,e){return e.source().same(e.target())?2:1})),indegree:lT((function(t,e){return e.target().same(t)?1:0})),outdegree:lT((function(t,e){return e.source().same(t)?1:0}))}),rv(aT,{minDegree:cT("degree",(function(t,e){return t<e})),maxDegree:cT("degree",(function(t,e){return t>e})),minIndegree:cT("indegree",(function(t,e){return t<e})),maxIndegree:cT("indegree",(function(t,e){return t>e})),minOutdegree:cT("outdegree",(function(t,e){return t<e})),maxOutdegree:cT("outdegree",(function(t,e){return t>e}))}),rv(aT,{totalDegree:function(t){for(var e=0,i=this.nodes(),n=0;n<i.length;n++)e+=i[n].degree(t);return e}});var dT=function(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];if(!o.locked()){var r=o._private.position,s={x:null!=e.x?e.x-r.x:0,y:null!=e.y?e.y-r.y:0};!o.isParent()||0===s.x&&0===s.y||o.children().shift(s,i),o.dirtyBoundingBoxCache()}}},uT={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){dT(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(oT=rT={position:dE.data(uT),silentPosition:dE.data(rv({},uT,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){dT(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(G_(t))e?this.silentPosition(t):this.position(t);else if(U_(t)){var i=t,n=this.cy();n.startBatch();for(var o=0;o<this.length;o++){var r,s=this[o];(r=i(s,o))&&(e?s.silentPosition(r):s.position(r))}n.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,i){var n;if(G_(t)?(n={x:W_(t.x)?t.x:0,y:W_(t.y)?t.y:0},i=e):H_(t)&&W_(e)&&((n={x:0,y:0})[t]=e),null!=n){var o=this.cy();o.startBatch();for(var r=0;r<this.length;r++){var s=this[r],a=s.position(),l={x:a.x+n.x,y:a.y+n.y};i?s.silentPosition(l):s.position(l)}o.endBatch()}return this},silentShift:function(t,e){return G_(t)?this.shift(t,!0):H_(t)&&W_(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var i=this[0],n=this.cy(),o=n.zoom(),r=n.pan(),s=G_(t)?t:void 0,a=void 0!==s||void 0!==e&&H_(t);if(i&&i.isNode()){if(!a){var l=i.position();return s=cy(l,o,r),void 0===t?s:s[t]}for(var c=0;c<this.length;c++){var d=this[c];void 0!==e?d.position(t,(e-r[t])/o):void 0!==s&&d.position(dy(s,o,r))}}else if(!a)return;return this},relativePosition:function(t,e){var i=this[0],n=this.cy(),o=G_(t)?t:void 0,r=void 0!==o||void 0!==e&&H_(t),s=n.hasCompoundNodes();if(i&&i.isNode()){if(!r){var a=i.position(),l=s?i.parent():null,c=l&&l.length>0,d=c;c&&(l=l[0]);var u=d?l.position():{x:0,y:0};return o={x:a.x-u.x,y:a.y-u.y},void 0===t?o:o[t]}for(var h=0;h<this.length;h++){var p=this[h],g=s?p.parent():null,f=g&&g.length>0,m=f;f&&(g=g[0]);var _=m?g.position():{x:0,y:0};void 0!==e?p.position(t,e+_[t]):void 0!==o&&p.position({x:o.x+_.x,y:o.y+_.y})}}else if(!r)return;return this}}).modelPosition=oT.point=oT.position,oT.modelPositions=oT.points=oT.positions,oT.renderedPoint=oT.renderedPosition,oT.relativePoint=oT.relativePosition;var hT,pT,gT=rT;hT=pT={},pT.renderedBoundingBox=function(t){var e=this.boundingBox(t),i=this.cy(),n=i.zoom(),o=i.pan(),r=e.x1*n+o.x,s=e.x2*n+o.x,a=e.y1*n+o.y,l=e.y2*n+o.y;return{x1:r,x2:s,y1:a,y2:l,w:s-r,h:l-a}},pT.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(e){if(e.isParent()){var i=e._private;i.compoundBoundsClean=!1,i.bbCache=null,t||e.emitAndNotify("bounds")}})),this):this},pT.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function i(t){if(t.isParent()){var e=t._private,i=t.children(),n="include"===t.pstyle("compound-sizing-wrt-labels").value,o={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},r=i.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),s=e.position;0!==r.w&&0!==r.h||((r={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=s.x-r.w/2,r.x2=s.x+r.w/2,r.y1=s.y-r.h/2,r.y2=s.y+r.h/2);var a=o.width.left.value;"px"===o.width.left.units&&o.width.val>0&&(a=100*a/o.width.val);var l=o.width.right.value;"px"===o.width.right.units&&o.width.val>0&&(l=100*l/o.width.val);var c=o.height.top.value;"px"===o.height.top.units&&o.height.val>0&&(c=100*c/o.height.val);var d=o.height.bottom.value;"px"===o.height.bottom.units&&o.height.val>0&&(d=100*d/o.height.val);var u=_(o.width.val-r.w,a,l),h=u.biasDiff,p=u.biasComplementDiff,g=_(o.height.val-r.h,c,d),f=g.biasDiff,m=g.biasComplementDiff;e.autoPadding=function(t,e,i,n){if("%"!==i.units)return"px"===i.units?i.pfValue:0;switch(n){case"width":return t>0?i.pfValue*t:0;case"height":return e>0?i.pfValue*e:0;case"average":return t>0&&e>0?i.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?i.pfValue*e:i.pfValue*t:0;case"max":return t>0&&e>0?t>e?i.pfValue*t:i.pfValue*e:0;default:return 0}}(r.w,r.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(r.w,o.width.val),s.x=(-h+r.x1+r.x2+p)/2,e.autoHeight=Math.max(r.h,o.height.val),s.y=(-f+r.y1+r.y2+m)/2}function _(t,e,i){var n=0,o=0,r=e+i;return t>0&&r>0&&(n=e/r*t,o=i/r*t),{biasDiff:n,biasComplementDiff:o}}}for(var n=0;n<this.length;n++){var o=this[n],r=o._private;r.compoundBoundsClean&&!t||(i(o),e.batching()||(r.compoundBoundsClean=!0))}return this};var fT=function(t){return t===1/0||t===-1/0?0:t},mT=function(t,e,i,n,o){n-e!=0&&o-i!=0&&null!=e&&null!=i&&null!=n&&null!=o&&(t.x1=e<t.x1?e:t.x1,t.x2=n>t.x2?n:t.x2,t.y1=i<t.y1?i:t.y1,t.y2=o>t.y2?o:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},_T=function(t,e){return null==e?t:mT(t,e.x1,e.y1,e.x2,e.y2)},vT=function(t,e,i){return Gv(t,e,i)},yT=function(t,e,i){if(!e.cy().headless()){var n,o,r=e._private,s=r.rstyle,a=s.arrowWidth/2;if("none"!==e.pstyle(i+"-arrow-shape").value){"source"===i?(n=s.srcX,o=s.srcY):"target"===i?(n=s.tgtX,o=s.tgtY):(n=s.midX,o=s.midY);var l=r.arrowBounds=r.arrowBounds||{},c=l[i]=l[i]||{};c.x1=n-a,c.y1=o-a,c.x2=n+a,c.y2=o+a,c.w=c.x2-c.x1,c.h=c.y2-c.y1,xy(c,1),mT(t,c.x1,c.y1,c.x2,c.y2)}}},bT=function(t,e,i){if(!e.cy().headless()){var n;n=i?i+"-":"";var o=e._private,r=o.rstyle;if(e.pstyle(n+"label").strValue){var s,a,l,c,d=e.pstyle("text-halign"),u=e.pstyle("text-valign"),h=vT(r,"labelWidth",i),p=vT(r,"labelHeight",i),g=vT(r,"labelX",i),f=vT(r,"labelY",i),m=e.pstyle(n+"text-margin-x").pfValue,_=e.pstyle(n+"text-margin-y").pfValue,v=e.isEdge(),y=e.pstyle(n+"text-rotation"),b=e.pstyle("text-outline-width").pfValue,E=e.pstyle("text-border-width").pfValue/2,T=e.pstyle("text-background-padding").pfValue,x=p,k=h,S=k/2,C=x/2;if(v)s=g-S,a=g+S,l=f-C,c=f+C;else{switch(d.value){case"left":s=g-k,a=g;break;case"center":s=g-S,a=g+S;break;case"right":s=g,a=g+k}switch(u.value){case"top":l=f-x,c=f;break;case"center":l=f-C,c=f+C;break;case"bottom":l=f,c=f+x}}s+=m-Math.max(b,E)-T-2,a+=m+Math.max(b,E)+T+2,l+=_-Math.max(b,E)-T-2,c+=_+Math.max(b,E)+T+2;var w=i||"main",I=o.labelBounds,R=I[w]=I[w]||{};R.x1=s,R.y1=l,R.x2=a,R.y2=c,R.w=a-s,R.h=c-l;var A=v&&"autorotate"===y.strValue,O=null!=y.pfValue&&0!==y.pfValue;if(A||O){var D=A?vT(o.rstyle,"labelAngle",i):y.pfValue,N=Math.cos(D),M=Math.sin(D),L=(s+a)/2,P=(l+c)/2;if(!v){switch(d.value){case"left":L=a;break;case"right":L=s}switch(u.value){case"top":P=c;break;case"bottom":P=l}}var B=function(t,e){return{x:(t-=L)*N-(e-=P)*M+L,y:t*M+e*N+P}},F=B(s,l),H=B(s,c),U=B(a,l),V=B(a,c);s=Math.min(F.x,H.x,U.x,V.x),a=Math.max(F.x,H.x,U.x,V.x),l=Math.min(F.y,H.y,U.y,V.y),c=Math.max(F.y,H.y,U.y,V.y)}var G=w+"Rot",W=I[G]=I[G]||{};W.x1=s,W.y1=l,W.x2=a,W.y2=c,W.w=a-s,W.h=c-l,mT(t,s,l,a,c),mT(o.labelBounds.all,s,l,a,c)}return t}},ET=function(t){var e=0,i=function(t){return(t?1:0)<<e++},n=0;return n+=i(t.incudeNodes),n+=i(t.includeEdges),n+=i(t.includeLabels),n+=i(t.includeMainLabels),n+=i(t.includeSourceLabels),n+=i(t.includeTargetLabels),n+=i(t.includeOverlays)},TT=function(t){if(t.isEdge()){var e=t.source().position(),i=t.target().position(),n=function(t){return Math.round(t)};return function(t,e){var i={value:0,done:!1},n=0,o=t.length;return mv({next:function(){return n<o?i.value=t[n++]:i.done=!0,i}},e)}([n(e.x),n(e.y),n(i.x),n(i.y)])}return 0},xT=function(t,e){var i,n=t._private,o=t.isEdge(),r=(null==e?ST:ET(e))===ST,s=TT(t),a=n.bbCachePosKey===s,l=e.useCache&&a,c=function(t){return null==t._private.bbCache||t._private.styleDirty};if(!l||c(t)||o&&c(t.source())||c(t.target())?(a||t.recalculateRenderedStyle(l),i=function(t,e){var i,n,o,r,s,a,l,c=t._private.cy,d=c.styleEnabled(),u=c.headless(),h=Ey(),p=t._private,g=t.isNode(),f=t.isEdge(),m=p.rstyle,_=g&&d?t.pstyle("bounds-expansion").pfValue:[0],v=function(t){return"none"!==t.pstyle("display").value},y=!d||v(t)&&(!f||v(t.source())&&v(t.target()));if(y){var b=0;d&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(b=t.pstyle("overlay-padding").value);var E=0;if(d&&(E=t.pstyle("width").pfValue/2),g&&e.includeNodes){var T=t.position();s=T.x,a=T.y;var x=t.outerWidth()/2,k=t.outerHeight()/2;mT(h,i=s-x,o=a-k,n=s+x,r=a+k)}else if(f&&e.includeEdges)if(d&&!u){var S=t.pstyle("curve-style").strValue;if(i=Math.min(m.srcX,m.midX,m.tgtX),n=Math.max(m.srcX,m.midX,m.tgtX),o=Math.min(m.srcY,m.midY,m.tgtY),r=Math.max(m.srcY,m.midY,m.tgtY),mT(h,i-=E,o-=E,n+=E,r+=E),"haystack"===S){var C=m.haystackPts;if(C&&2===C.length){if(i=C[0].x,o=C[0].y,i>(n=C[1].x)){var w=i;i=n,n=w}if(o>(r=C[1].y)){var I=o;o=r,r=I}mT(h,i-E,o-E,n+E,r+E)}}else if("bezier"===S||"unbundled-bezier"===S||"segments"===S||"taxi"===S){var R;switch(S){case"bezier":case"unbundled-bezier":R=m.bezierPts;break;case"segments":case"taxi":R=m.linePts}if(null!=R)for(var A=0;A<R.length;A++){var O=R[A];i=O.x-E,n=O.x+E,o=O.y-E,r=O.y+E,mT(h,i,o,n,r)}}}else{var D=t.source().position(),N=t.target().position();if((i=D.x)>(n=N.x)){var M=i;i=n,n=M}if((o=D.y)>(r=N.y)){var L=o;o=r,r=L}mT(h,i-=E,o-=E,n+=E,r+=E)}if(d&&e.includeEdges&&f&&(yT(h,t,"mid-source"),yT(h,t,"mid-target"),yT(h,t,"source"),yT(h,t,"target")),d&&"yes"===t.pstyle("ghost").value){var P=t.pstyle("ghost-offset-x").pfValue,B=t.pstyle("ghost-offset-y").pfValue;mT(h,h.x1+P,h.y1+B,h.x2+P,h.y2+B)}var F=p.bodyBounds=p.bodyBounds||{};Sy(F,h),ky(F,_),xy(F,1),d&&(i=h.x1,n=h.x2,o=h.y1,r=h.y2,mT(h,i-b,o-b,n+b,r+b));var H=p.overlayBounds=p.overlayBounds||{};Sy(H,h),ky(H,_),xy(H,1);var U=p.labelBounds=p.labelBounds||{};null!=U.all?((l=U.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):U.all=Ey(),d&&e.includeLabels&&(e.includeMainLabels&&bT(h,t,null),f&&(e.includeSourceLabels&&bT(h,t,"source"),e.includeTargetLabels&&bT(h,t,"target")))}return h.x1=fT(h.x1),h.y1=fT(h.y1),h.x2=fT(h.x2),h.y2=fT(h.y2),h.w=fT(h.x2-h.x1),h.h=fT(h.y2-h.y1),h.w>0&&h.h>0&&y&&(ky(h,_),xy(h,1)),h}(t,kT),n.bbCache=i,n.bbCachePosKey=s):i=n.bbCache,!r){var d=t.isNode();i=Ey(),(e.includeNodes&&d||e.includeEdges&&!d)&&(e.includeOverlays?_T(i,n.overlayBounds):_T(i,n.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!o||e.includeSourceLabels&&e.includeTargetLabels)?_T(i,n.labelBounds.all):(e.includeMainLabels&&_T(i,n.labelBounds.mainRot),e.includeSourceLabels&&_T(i,n.labelBounds.sourceRot),e.includeTargetLabels&&_T(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},kT={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},ST=ET(kT),CT=Hv(kT);pT.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=Ey();var i=CT(t=t||kT),n=this;if(n.cy().styleEnabled())for(var o=0;o<n.length;o++){var r=n[o],s=r._private,a=TT(r),l=s.bbCachePosKey===a,c=i.useCache&&l&&!s.styleDirty;r.recalculateRenderedStyle(c)}this.updateCompoundBounds(!t.useCache);for(var d=0;d<n.length;d++){var u=n[d];_T(e,xT(u,i))}}else t=void 0===t?kT:CT(t),e=xT(this[0],t);return e.x1=fT(e.x1),e.y1=fT(e.y1),e.x2=fT(e.x2),e.y2=fT(e.y2),e.w=fT(e.x2-e.x1),e.h=fT(e.y2-e.y1),e},pT.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},pT.boundingBoxAt=function(t){var e=this.nodes(),i=this.cy(),n=i.hasCompoundNodes(),o=i.collection();if(n&&(o=e.filter((function(t){return t.isParent()})),e=e.not(o)),G_(t)){var r=t;t=function(){return r}}i.startBatch(),e.forEach((function(e,i){return e._private.bbAtOldPos=t(e,i)})).silentPositions(t),n&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0));var s=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions((function(t){return t._private.bbAtOldPos})),n&&(o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),o.updateCompoundBounds(!0)),i.endBatch(),s},hT.boundingbox=hT.bb=hT.boundingBox,hT.renderedBoundingbox=hT.renderedBoundingBox;var wT,IT,RT=pT;wT=IT={};var AT=function(t){t.uppercaseName=iv(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=iv(t.outerName),wT[t.name]=function(){var e=this[0],i=e._private,n=i.cy._private.styleEnabled;if(e){if(!n)return 1;if(e.isParent())return e.updateCompoundBounds(),i[t.autoName]||0;var o=e.pstyle(t.name);switch(o.strValue){case"label":return e.recalculateRenderedStyle(),i.rstyle[t.labelName]||0;default:return o.pfValue}}},wT["outer"+t.uppercaseName]=function(){var e=this[0],i=e._private.cy._private.styleEnabled;if(e)return i?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},wT["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},wT["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};AT({name:"width"}),AT({name:"height"}),IT.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},IT.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},IT.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var OT=IT,DT={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},NT=Object.keys(DT).reduce((function(t,e){var i=DT[e],n=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,i.get)},i.mult?t[n]=function(){return function(t,e){if(t.isEdge()){var i=t.cy(),n=i.pan(),o=i.zoom();return e(t).map((function(t){return cy(t,o,n)}))}}(this,i.get)}:t[n]=function(){return function(t,e){if(t.isEdge()){var i=t.cy();return cy(e(t),i.zoom(),i.pan())}}(this,i.get)},t}),{}),MT=rv({},gT,RT,OT,NT),LT=function(t,e){this.recycle(t,e)};function PT(){return!1}function BT(){return!0}LT.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=PT,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?BT:PT):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var i=this.position,n=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:i.x*n+o.x,y:i.y*n+o.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=BT;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=BT;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=BT,this.stopPropagation()},isDefaultPrevented:PT,isPropagationStopped:PT,isImmediatePropagationStopped:PT};var FT=/^([^.]+)(\.(?:[^.]+))?$/,HT={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},UT=Object.keys(HT),VT={};function GT(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VT,e=arguments.length>1?arguments[1]:void 0,i=0;i<UT.length;i++){var n=UT[i];this[n]=t[n]||HT[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var WT=GT.prototype,zT=function(t,e,i,n,o,r,s){U_(n)&&(o=n,n=null),s&&(r=null==r?s:rv({},r,s));for(var a=V_(i)?i:i.split(/\s+/),l=0;l<a.length;l++){var c=a[l];if(!$_(c)){var d=c.match(FT);if(d)if(!1===e(t,c,d[1],d[2]?d[2]:null,n,o,r))break}}},jT=function(t,e){return t.addEventFields(t.context,e),new LT(e.type,e)},XT=function(t,e,i){if("event"!==F_(i))if(G_(i))e(t,jT(t,i));else for(var n=V_(i)?i:i.split(/\s+/),o=0;o<n.length;o++){var r=n[o];if(!$_(r)){var s=r.match(FT);if(s){var a=s[1],l=s[2]?s[2]:null;e(t,jT(t,{type:a,namespace:l,target:t.context}))}}}else e(t,i)};WT.on=WT.addListener=function(t,e,i,n,o){return zT(this,(function(t,e,i,n,o,r,s){U_(r)&&t.listeners.push({event:e,callback:r,type:i,namespace:n,qualifier:o,conf:s})}),t,e,i,n,o),this},WT.one=function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},WT.removeListener=WT.off=function(t,e,i,n){var o=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var r=this.listeners,s=function(s){var a=r[s];zT(o,(function(e,i,n,o,l,c){if((a.type===n||"*"===t)&&(!o&&".*"!==a.namespace||a.namespace===o)&&(!l||e.qualifierCompare(a.qualifier,l))&&(!c||a.callback===c))return r.splice(s,1),!1}),t,e,i,n)},a=r.length-1;a>=0;a--)s(a);return this},WT.removeAllListeners=function(){return this.removeListener("*")},WT.emit=WT.trigger=function(t,e,i){var n=this.listeners,o=n.length;return this.emitting++,V_(e)||(e=[e]),XT(this,(function(t,r){null!=i&&(n=[{event:r.event,type:r.type,namespace:r.namespace,callback:i}],o=n.length);for(var s=function(i){var o=n[i];if(o.type===r.type&&(!o.namespace||o.namespace===r.namespace||".*"===o.namespace)&&t.eventMatches(t.context,o,r)){var s=[r];null!=e&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];t.push(n)}}(s,e),t.beforeEmit(t.context,o,r),o.conf&&o.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==o})));var a=t.callbackContext(t.context,o,r),l=o.callback.apply(a,s);t.afterEmit(t.context,o,r),!1===l&&(r.stopPropagation(),r.preventDefault())}},a=0;a<o;a++)s(a);t.bubble(t.context)&&!r.isPropagationStopped()&&t.parent(t.context).emit(r,e)}),t),this.emitting--,this};var YT={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,i){var n=e.qualifier;return null==n||t!==i.target&&X_(i.target)&&n.matches(i.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,i){return null!=e.qualifier?i.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},KT=function(t){return H_(t)?new YE(t):t},JT={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],i=e._private;i.emitter||(i.emitter=new GT(YT,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,i){for(var n=KT(e),o=0;o<this.length;o++){this[o].emitter().on(t,n,i)}return this},removeListener:function(t,e,i){for(var n=KT(e),o=0;o<this.length;o++){this[o].emitter().removeListener(t,n,i)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){this[t].emitter().removeAllListeners()}return this},one:function(t,e,i){for(var n=KT(e),o=0;o<this.length;o++){this[o].emitter().one(t,n,i)}return this},once:function(t,e,i){for(var n=KT(e),o=0;o<this.length;o++){this[o].emitter().on(t,n,i,{once:!0,onceCollection:this})}},emit:function(t,e){for(var i=0;i<this.length;i++){this[i].emitter().emit(t,e)}return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};dE.eventAliasesOn(JT);var $T={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),i=0;i<this.length;i++){var n=this[i];n.isNode()?t.push(n):e.push(n)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(H_(t)||j_(t))return new YE(t).filter(this);if(U_(t)){for(var i=this.spawn(),n=this,o=0;o<n.length;o++){var r=n[o];(e?t.apply(e,[r,o,n]):t(r,o,n))&&i.push(r)}return i}return this.spawn()},not:function(t){if(t){H_(t)&&(t=this.filter(t));for(var e=this.spawn(),i=0;i<this.length;i++){var n=this[i];t.has(n)||e.push(n)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(H_(t)){var e=t;return this.filter(e)}for(var i=this.spawn(),n=t,o=this.length<t.length,r=o?this:n,s=o?n:this,a=0;a<r.length;a++){var l=r[a];s.has(l)&&i.push(l)}return i},xor:function(t){var e=this._private.cy;H_(t)&&(t=e.$(t));var i=this.spawn(),n=t,o=function(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=o._private.data.id;e.hasElementWithId(r)||i.push(o)}};return o(this,n),o(n,this),i},diff:function(t){var e=this._private.cy;H_(t)&&(t=e.$(t));var i=this.spawn(),n=this.spawn(),o=this.spawn(),r=t,s=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],s=r._private.data.id;e.hasElementWithId(s)?o.merge(r):i.push(r)}};return s(this,r,i),s(r,this,n),{left:i,right:n,both:o}},add:function(t){var e=this._private.cy;if(!t)return this;if(H_(t)){var i=t;t=e.mutableElements().filter(i)}for(var n=this.spawnSelf(),o=0;o<t.length;o++){var r=t[o],s=!this.has(r);s&&n.push(r)}return n},merge:function(t){var e=this._private,i=e.cy;if(!t)return this;if(t&&H_(t)){var n=t;t=i.mutableElements().filter(n)}for(var o=e.map,r=0;r<t.length;r++){var s=t[r],a=s._private.data.id;if(!o.has(a)){var l=this.length++;this[l]=s,o.set(a,{ele:s,index:l})}}return this},unmergeAt:function(t){var e=this[t].id(),i=this._private.map;this[t]=void 0,i.delete(e);var n=t===this.length-1;if(this.length>1&&!n){var o=this.length-1,r=this[o],s=r._private.data.id;this[o]=void 0,this[t]=r,i.set(s,{ele:r,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var e=this._private,i=t._private.data.id,n=e.map.get(i);if(!n)return this;var o=n.index;return this.unmergeAt(o),this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&H_(t)){var i=t;t=e.mutableElements().filter(i)}for(var n=0;n<t.length;n++)this.unmergeOne(t[n]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--){t(this[e])&&this.unmergeAt(e)}return this},map:function(t,e){for(var i=[],n=this,o=0;o<n.length;o++){var r=n[o],s=e?t.apply(e,[r,o,n]):t(r,o,n);i.push(s)}return i},reduce:function(t,e){for(var i=e,n=this,o=0;o<n.length;o++)i=t(i,n[o],o,n);return i},max:function(t,e){for(var i,n=-1/0,o=this,r=0;r<o.length;r++){var s=o[r],a=e?t.apply(e,[s,r,o]):t(s,r,o);a>n&&(n=a,i=s)}return{value:n,ele:i}},min:function(t,e){for(var i,n=1/0,o=this,r=0;r<o.length;r++){var s=o[r],a=e?t.apply(e,[s,r,o]):t(s,r,o);a<n&&(n=a,i=s)}return{value:n,ele:i}}},qT=$T;qT.u=qT["|"]=qT["+"]=qT.union=qT.or=qT.add,qT["\\"]=qT["!"]=qT["-"]=qT.difference=qT.relativeComplement=qT.subtract=qT.not,qT.n=qT["&"]=qT["."]=qT.and=qT.intersection=qT.intersect,qT["^"]=qT["(+)"]=qT["(-)"]=qT.symmetricDifference=qT.symdiff=qT.xor,qT.fnFilter=qT.filterFn=qT.stdFilter=qT.filter,qT.complement=qT.abscomp=qT.absoluteComplement;var ZT=function(t,e){var i=t.cy().hasCompoundNodes();function n(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?i?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?wv:0}var o=n(t)-n(e);if(0!==o)return o;function r(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var s=r(t)-r(e);if(0!==s)return s;var a=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==a?a:t.poolIndex()-e.poolIndex()},QT={forEach:function(t,e){if(U_(t))for(var i=this.length,n=0;n<i;n++){var o=this[n];if(!1===(e?t.apply(e,[o,n,this]):t(o,n,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var i=[],n=this.length;null==e&&(e=n),null==t&&(t=0),t<0&&(t=n+t),e<0&&(e=n+e);for(var o=t;o>=0&&o<e&&o<n;o++)i.push(this[o]);return this.spawn(i)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!U_(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(ZT)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var i=e.data.parent?t.parents().size():0;return t.isParent()?i:wv-1}var n=e.source,o=e.target,r=n.zDepth(),s=o.zDepth();return Math.max(r,s,0)}}};QT.each=QT.forEach;var tx;tx="undefined",("undefined"==typeof Symbol?"undefined":C_(Symbol))!=tx&&C_(Symbol.iterator)!=tx&&(QT[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},i=0,n=this.length;return A_({next:function(){return i<n?e.value=t[i++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,(function(){return this}))});var ex=Hv({nodeDimensionsIncludeLabels:!1}),ix={layoutDimensions:function(t){var e;if(t=ex(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var i=this.boundingBox();e={w:i.w,h:i.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,i){var n=this.nodes().filter((function(t){return!t.isParent()})),o=this.cy(),r=e.eles,s=function(t){return t.id()},a=Z_(i,s);t.emit({type:"layoutstart",layout:t}),t.animations=[];var l=e.spacingFactor&&1!==e.spacingFactor,c=function(){if(!l)return null;for(var t=Ey(),e=0;e<n.length;e++){var i=n[e],o=a(i,e);Ty(t,o.x,o.y)}return t}(),d=Z_((function(t,i){var n=a(t,i);l&&(n=function(t,e,i){var n=e.x1+e.w/2,o=e.y1+e.h/2;return{x:n+(i.x-n)*t,y:o+(i.y-o)*t}}(Math.abs(e.spacingFactor),c,n));return null!=e.transform&&(n=e.transform(t,n)),n}),s);if(e.animate){for(var u=0;u<n.length;u++){var h=n[u],p=d(h,u);if(null==e.animateFilter||e.animateFilter(h,u)){var g=h.animation({position:p,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}else h.position(p)}if(e.fit){var f=o.animation({fit:{boundingBox:r.boundingBoxAt(d),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(f)}else if(void 0!==e.zoom&&void 0!==e.pan){var m=o.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(m)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),aE.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else n.positions(d),e.fit&&o.fit(e.eles,e.padding),null!=e.zoom&&o.zoom(e.zoom),e.pan&&o.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(rv({},t,{eles:this}))}};function nx(t,e,i){var n,o=i._private,r=o.styleCache=o.styleCache||[];return null!=(n=r[t])?n:n=r[t]=e(i)}function ox(t,e){return t=Ev(t),function(i){return nx(t,e,i)}}function rx(t,e){t=Ev(t);var i=function(t){return e.call(t)};return function(){var e=this[0];if(e)return nx(t,i,e)}}ix.createLayout=ix.makeLayout=ix.layout;var sx={recalculateRenderedStyle:function(t){var e=this.cy(),i=e.renderer(),n=e.styleEnabled();return i&&n&&i.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),i=function(t){return t._private.styleCache=null};e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(i)):this.forEach((function(t){i(t),t.connectedEdges().forEach(i)}));return this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var i=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=i;return t?n.emitAndNotify("style"):n.emit("style"),i.forEach((function(t){return t._private.styleDirty=!0})),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var i=this[e];i._private.styleDirty&&(i._private.styleDirty=!1,t.style().apply(i))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this[0],n=i.cy();if(n.styleEnabled()&&i){this.cleanStyle();var o=i._private.style[t];return null!=o?o:e?n.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var i=e.pstyle(t);return void 0!==i.pfValue?i.pfValue:i.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var i=this[0];return i?e.style().getRenderedStyle(i,t):void 0},style:function(t,e){var i=this.cy();if(!i.styleEnabled())return this;var n=i.style();if(G_(t)){var o=t;n.applyBypass(this,o,false),this.emitAndNotify("style")}else if(H_(t)){if(void 0===e){var r=this[0];return r?n.getStylePropertyValue(r,t):void 0}n.applyBypass(this,t,e,false),this.emitAndNotify("style")}else if(void 0===t){var s=this[0];return s?n.getRawStyle(s):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var i=e.style(),n=this;if(void 0===t)for(var o=0;o<n.length;o++){var r=n[o];i.removeAllBypasses(r,false)}else{t=t.split(/\s+/);for(var s=0;s<n.length;s++){var a=n[s];i.removeBypasses(a,t,false)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),i=this[0];if(i){var n=i._private,o=i.pstyle("opacity").value;if(!e)return o;var r=n.data.parent?i.parents():null;if(r)for(var s=0;s<r.length;s++){o*=r[s].pstyle("opacity").value}return o}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function ax(t,e){var i=t._private.data.parent?t.parents():null;if(i)for(var n=0;n<i.length;n++){if(!e(i[n]))return!1}return!0}function lx(t){var e=t.ok,i=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var o=this[0],r=t.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!r||ax(o,n);var a=s.source,l=s.target;return i(a)&&(!r||ax(a,i))&&(a===l||i(l)&&(!r||ax(l,i)))}}}var cx=ox("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));sx.takesUpSpace=rx("takesUpSpace",lx({ok:cx}));var dx=ox("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&cx(t)})),ux=ox("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&cx(t)}));sx.interactive=rx("interactive",lx({ok:dx,parentOk:ux,edgeOkViaNode:cx})),sx.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var hx=ox("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&cx(t)})),px=cx;sx.visible=rx("visible",lx({ok:hx,edgeOkViaNode:px})),sx.hidden=function(){var t=this[0];if(t)return!t.visible()},sx.isBundledBezier=rx("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),sx.bypass=sx.css=sx.style,sx.renderedCss=sx.renderedStyle,sx.removeBypass=sx.removeCss=sx.removeStyle,sx.pstyle=sx.parsedStyle;var gx={};function fx(t){return function(){var e=arguments,i=[];if(2===e.length){var n=e[0],o=e[1];this.on(t.event,n,o)}else if(1===e.length&&U_(e[0])){var r=e[0];this.on(t.event,r)}else if(0===e.length||1===e.length&&V_(e[0])){for(var s=1===e.length?e[0]:null,a=0;a<this.length;a++){var l=this[a],c=!t.ableField||l._private[t.ableField],d=l._private[t.field]!=t.value;if(t.overrideAble){var u=t.overrideAble(l);if(void 0!==u&&(c=u,!u))return this}c&&(l._private[t.field]=t.value,d&&i.push(l))}var h=this.spawn(i);h.updateStyle(),h.emit(t.event),s&&h.emit(s)}return this}}function mx(t){gx[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var i=t.overrideField(e);if(void 0!==i)return i}return e._private[t.field]}},gx[t.on]=fx({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),gx[t.off]=fx({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}mx({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),mx({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),mx({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),mx({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),gx.deselect=gx.unselect,gx.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},mx({field:"active",on:"activate",off:"unactivate"}),mx({field:"pannable",on:"panify",off:"unpanify"}),gx.inactive=function(){var t=this[0];if(t)return!t._private.active};var _x={},vx=function(t){return function(e){for(var i=[],n=0;n<this.length;n++){var o=this[n];if(o.isNode()){for(var r=!1,s=o.connectedEdges(),a=0;a<s.length;a++){var l=s[a],c=l.source(),d=l.target();if(t.noIncomingEdges&&d===o&&c!==o||t.noOutgoingEdges&&c===o&&d!==o){r=!0;break}}r||i.push(o)}}return this.spawn(i,!0).filter(e)}},yx=function(t){return function(e){for(var i=[],n=0;n<this.length;n++){var o=this[n];if(o.isNode())for(var r=o.connectedEdges(),s=0;s<r.length;s++){var a=r[s],l=a.source(),c=a.target();t.outgoing&&l===o?(i.push(a),i.push(c)):t.incoming&&c===o&&(i.push(a),i.push(l))}}return this.spawn(i,!0).filter(e)}},bx=function(t){return function(e){for(var i=this,n=[],o={};;){var r=t.outgoing?i.outgoers():i.incomers();if(0===r.length)break;for(var s=!1,a=0;a<r.length;a++){var l=r[a],c=l.id();o[c]||(o[c]=!0,n.push(l),s=!0)}if(!s)break;i=r}return this.spawn(n,!0).filter(e)}};function Ex(t){return function(e){for(var i=[],n=0;n<this.length;n++){var o=this[n]._private[t.attr];o&&i.push(o)}return this.spawn(i,!0).filter(e)}}function Tx(t){return function(e){var i=[],n=this._private.cy,o=t||{};H_(e)&&(e=n.$(e));for(var r=0;r<e.length;r++)for(var s=e[r]._private.edges,a=0;a<s.length;a++){var l=s[a],c=l._private.data,d=this.hasElementWithId(c.source)&&e.hasElementWithId(c.target),u=e.hasElementWithId(c.source)&&this.hasElementWithId(c.target);if(d||u){if(o.thisIsSrc||o.thisIsTgt){if(o.thisIsSrc&&!d)continue;if(o.thisIsTgt&&!u)continue}i.push(l)}}return this.spawn(i,!0)}}function xx(t){return t=rv({},{codirected:!1},t),function(e){for(var i=[],n=this.edges(),o=t,r=0;r<n.length;r++)for(var s=n[r]._private,a=s.source,l=a._private.data.id,c=s.data.target,d=a._private.edges,u=0;u<d.length;u++){var h=d[u],p=h._private.data,g=p.target,f=p.source,m=g===c&&f===l,_=l===g&&c===f;(o.codirected&&m||!o.codirected&&(m||_))&&i.push(h)}return this.spawn(i,!0).filter(e)}}_x.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},rv(_x,{roots:vx({noIncomingEdges:!0}),leaves:vx({noOutgoingEdges:!0}),outgoers:ZE(yx({outgoing:!0}),"outgoers"),successors:bx({outgoing:!0}),incomers:ZE(yx({incoming:!0}),"incomers"),predecessors:bx({incoming:!0})}),rv(_x,{neighborhood:ZE((function(t){for(var e=[],i=this.nodes(),n=0;n<i.length;n++)for(var o=i[n],r=o.connectedEdges(),s=0;s<r.length;s++){var a=r[s],l=a.source(),c=a.target(),d=o===l?c:l;d.length>0&&e.push(d[0]),e.push(a[0])}return this.spawn(e,!0).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),_x.neighbourhood=_x.neighborhood,_x.closedNeighbourhood=_x.closedNeighborhood,_x.openNeighbourhood=_x.openNeighborhood,rv(_x,{source:ZE((function(t){var e,i=this[0];return i&&(e=i._private.source||i.cy().collection()),e&&t?e.filter(t):e}),"source"),target:ZE((function(t){var e,i=this[0];return i&&(e=i._private.target||i.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:Ex({attr:"source"}),targets:Ex({attr:"target"})}),rv(_x,{edgesWith:ZE(Tx(),"edgesWith"),edgesTo:ZE(Tx({thisIsSrc:!0}),"edgesTo")}),rv(_x,{connectedEdges:ZE((function(t){for(var e=[],i=0;i<this.length;i++){var n=this[i];if(n.isNode())for(var o=n._private.edges,r=0;r<o.length;r++){var s=o[r];e.push(s)}}return this.spawn(e,!0).filter(t)}),"connectedEdges"),connectedNodes:ZE((function(t){for(var e=[],i=0;i<this.length;i++){var n=this[i];n.isEdge()&&(e.push(n.source()[0]),e.push(n.target()[0]))}return this.spawn(e,!0).filter(t)}),"connectedNodes"),parallelEdges:ZE(xx(),"parallelEdges"),codirectedEdges:ZE(xx({codirected:!0}),"codirectedEdges")}),rv(_x,{components:function(t){var e=this,i=e.cy(),n=i.collection(),o=null==t?e.nodes():t.nodes(),r=[];null!=t&&o.empty()&&(o=t.sources());var s=function(t,e){n.merge(t),o.unmerge(t),e.merge(t)};if(o.empty())return e.spawn();var a=function(){var t=i.collection();r.push(t);var n=o[0];s(n,t),e.bfs({directed:!1,roots:n,visit:function(e){return s(e,t)}}),t.forEach((function(i){i.connectedEdges().forEach((function(i){e.has(i)&&t.has(i.source())&&t.has(i.target())&&t.merge(i)}))}))};do{a()}while(o.length>0);return r},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),_x.componentsOf=_x.components;var kx=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var n=new zv,o=!1;if(e){if(e.length>0&&G_(e[0])&&!X_(e[0])){o=!0;for(var r=[],s=new Xv,a=0,l=e.length;a<l;a++){var c=e[a];null==c.data&&(c.data={});var d=c.data;if(null==d.id)d.id=Pv();else if(t.hasElementWithId(d.id)||s.has(d.id))continue;var u=new Yv(t,c,!1);r.push(u),s.add(d.id)}e=r}}else e=[];this.length=0;for(var h=0,p=e.length;h<p;h++){var g=e[h][0];if(null!=g){var f=g._private.data.id;i&&n.has(f)||(i&&n.set(f,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(t){this.lazyMap=t},rebuildMap:function(){for(var t=this.lazyMap=new zv,e=this.eles,i=0;i<e.length;i++){var n=e[i];t.set(n.id(),{index:i,ele:n})}}},i&&(this._private.map=n),o&&this.restore()}else Dv("A collection must have a reference to the core")},Sx=Yv.prototype=kx.prototype=Object.create(Array.prototype);Sx.instanceString=function(){return"collection"},Sx.spawn=function(t,e){return new kx(this.cy(),t,e)},Sx.spawnSelf=function(){return this.spawn(this)},Sx.cy=function(){return this._private.cy},Sx.renderer=function(){return this._private.cy.renderer()},Sx.element=function(){return this[0]},Sx.collection=function(){return Y_(this)?this:new kx(this._private.cy,[this])},Sx.unique=function(){return new kx(this._private.cy,this,!0)},Sx.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},Sx.getElementById=function(t){t=""+t;var e=this._private.cy,i=this._private.map.get(t);return i?i.ele:new kx(e)},Sx.$id=Sx.getElementById,Sx.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},Sx.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},Sx.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},Sx.json=function(t){var e=this.element(),i=this.cy();if(null==e&&t)return this;if(null!=e){var n=e._private;if(G_(t)){if(i.startBatch(),t.data){e.data(t.data);var o=n.data;if(e.isEdge()){var r=!1,s={},a=t.data.source,l=t.data.target;null!=a&&a!=o.source&&(s.source=""+a,r=!0),null!=l&&l!=o.target&&(s.target=""+l,r=!0),r&&(e=e.move(s))}else{var c="parent"in t.data,d=t.data.parent;!c||null==d&&null==o.parent||d==o.parent||(void 0===d&&(d=null),null!=d&&(d=""+d),e=e.move({parent:d}))}}t.position&&e.position(t.position);var u=function(i,o,r){var s=t[i];null!=s&&s!==n[i]&&(s?e[o]():e[r]())};return u("removed","remove","restore"),u("selected","select","unselect"),u("selectable","selectify","unselectify"),u("locked","lock","unlock"),u("grabbable","grabify","ungrabify"),u("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),i.endBatch(),this}if(void 0===t){var h={data:Lv(n.data),position:Lv(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var p=0;return n.classes.forEach((function(t){return h.classes+=0==p++?t:" "+t})),h}}},Sx.jsons=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e].json();t.push(i)}return t},Sx.clone=function(){for(var t=this.cy(),e=[],i=0;i<this.length;i++){var n=this[i].json(),o=new Yv(t,n,!1);e.push(o)}return new kx(t,e)},Sx.copy=Sx.clone,Sx.restore=function(){for(var t,e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this,r=o.cy(),s=r._private,a=[],l=[],c=0,d=o.length;c<d;c++){var u=o[c];n&&!u.removed()||(u.isNode()?a.push(u):l.push(u))}t=a.concat(l);var h=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var p=t[e],g=p._private,f=g.data;if(p.clearTraversalCache(),n||g.removed)if(void 0===f.id)f.id=Pv();else if(W_(f.id))f.id=""+f.id;else{if($_(f.id)||!H_(f.id)){Dv("Can not create element with invalid string ID `"+f.id+"`"),h();continue}if(r.hasElementWithId(f.id)){Dv("Can not create second element with ID `"+f.id+"`"),h();continue}}else;var m=f.id;if(p.isNode()){var _=g.position;null==_.x&&(_.x=0),null==_.y&&(_.y=0)}if(p.isEdge()){for(var v=p,y=["source","target"],b=y.length,E=!1,T=0;T<b;T++){var x=y[T],k=f[x];W_(k)&&(k=f[x]=""+f[x]),null==k||""===k?(Dv("Can not create edge `"+m+"` with unspecified "+x),E=!0):r.hasElementWithId(k)||(Dv("Can not create edge `"+m+"` with nonexistant "+x+" `"+k+"`"),E=!0)}if(E){h();continue}var S=r.getElementById(f.source),C=r.getElementById(f.target);S.same(C)?S._private.edges.push(v):(S._private.edges.push(v),C._private.edges.push(v)),v._private.source=S,v._private.target=C}g.map=new zv,g.map.set(m,{ele:p,index:0}),g.removed=!1,n&&r.addToPool(p)}for(var w=0;w<a.length;w++){var I=a[w],R=I._private.data;W_(R.parent)&&(R.parent=""+R.parent);var A=R.parent,O=null!=A;if(O){var D=r.getElementById(A);if(D.empty())R.parent=void 0;else{for(var N=!1,M=D;!M.empty();){if(I.same(M)){N=!0,R.parent=void 0;break}M=M.parent()}N||(D[0]._private.children.push(I),I._private.parent=D[0],s.hasCompoundNodes=!0)}}}if(t.length>0){for(var L=t.length===o.length?o:new kx(r,t),P=0;P<L.length;P++){var B=L[P];B.isNode()||(B.parallelEdges().clearTraversalCache(),B.source().clearTraversalCache(),B.target().clearTraversalCache())}(s.hasCompoundNodes?r.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(i),i?L.emitAndNotify("add"):n&&L.emit("add")}return o},Sx.removed=function(){var t=this[0];return t&&t._private.removed},Sx.inside=function(){var t=this[0];return t&&!t._private.removed},Sx.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,n=[],o={},r=i._private.cy;function s(t){for(var e=t._private.edges,i=0;i<e.length;i++)l(e[i])}function a(t){for(var e=t._private.children,i=0;i<e.length;i++)l(e[i])}function l(t){var i=o[t.id()];e&&t.removed()||i||(o[t.id()]=!0,t.isNode()?(n.push(t),s(t),a(t)):n.unshift(t))}for(var c=0,d=i.length;c<d;c++){var u=i[c];l(u)}function h(t,e){var i=t._private.edges;Uv(i,e),t.clearTraversalCache()}function p(t){t.clearTraversalCache()}var g=[];function f(t,e){e=e[0];var i=(t=t[0])._private.children,n=t.id();Uv(i,e),e._private.parent=null,g.ids[n]||(g.ids[n]=!0,g.push(t))}g.ids={},i.dirtyCompoundBoundsCache(),e&&r.removeFromPool(n);for(var m=0;m<n.length;m++){var _=n[m];if(_.isEdge()){var v=_.source()[0],y=_.target()[0];h(v,_),h(y,_);for(var b=_.parallelEdges(),E=0;E<b.length;E++){var T=b[E];p(T),T.isBundledBezier()&&T.dirtyBoundingBoxCache()}}else{var x=_.parent();0!==x.length&&f(x,_)}e&&(_._private.removed=!0)}var k=r._private.elements;r._private.hasCompoundNodes=!1;for(var S=0;S<k.length;S++){var C=k[S];if(C.isParent()){r._private.hasCompoundNodes=!0;break}}var w=new kx(this.cy(),n);w.size()>0&&(t?w.emitAndNotify("remove"):e&&w.emit("remove"));for(var I=0;I<g.length;I++){var R=g[I];e&&R.removed()||R.updateStyle()}return w},Sx.move=function(t){var e=this._private.cy,i=this,n=!1,o=!1,r=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var s=r(t.source),a=r(t.target),l=null!=s&&e.hasElementWithId(s),c=null!=a&&e.hasElementWithId(a);(l||c)&&(e.batch((function(){i.remove(n,o),i.emitAndNotify("moveout");for(var t=0;t<i.length;t++){var e=i[t],r=e._private.data;e.isEdge()&&(l&&(r.source=s),c&&(r.target=a))}i.restore(n,o)})),i.emitAndNotify("move"))}else if(void 0!==t.parent){var d=r(t.parent);if(null===d||e.hasElementWithId(d)){var u=null===d?void 0:d;e.batch((function(){var t=i.remove(n,o);t.emitAndNotify("moveout");for(var e=0;e<i.length;e++){var r=i[e],s=r._private.data;r.isNode()&&(s.parent=u)}t.restore(n,o)})),i.emitAndNotify("move")}}return this},[tE,uE,hE,JE,QE,sT,aT,MT,JT,$T,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},QT,ix,sx,gx,_x].forEach((function(t){rv(Sx,t)}));var Cx={add:function(t){var e,i=this;if(j_(t)){var n=t;if(n._private.cy===i)e=n.restore();else{for(var o=[],r=0;r<n.length;r++){var s=n[r];o.push(s.json())}e=new kx(i,o)}}else if(V_(t)){e=new kx(i,t)}else if(G_(t)&&(V_(t.nodes)||V_(t.edges))){for(var a=t,l=[],c=["nodes","edges"],d=0,u=c.length;d<u;d++){var h=c[d],p=a[h];if(V_(p))for(var g=0,f=p.length;g<f;g++){var m=rv({group:h},p[g]);l.push(m)}}e=new kx(i,l)}else{e=new Yv(i,t).collection()}return e},remove:function(t){if(j_(t));else if(H_(t)){var e=t;t=this.$(e)}return t.remove()}};var wx=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,i,n){var o={x:e.x+n.dx*i,v:e.v+n.dv*i,tension:e.tension,friction:e.friction};return{dx:o.v,dv:t(o)}}function i(i,n){var o={dx:i.v,dv:t(i)},r=e(i,.5*n,o),s=e(i,.5*n,r),a=e(i,n,s),l=1/6*(o.dx+2*(r.dx+s.dx)+a.dx),c=1/6*(o.dv+2*(r.dv+s.dv)+a.dv);return i.x=i.x+l*n,i.v=i.v+c*n,i}return function t(e,n,o){var r,s,a,l={x:-1,v:0,tension:null,friction:null},c=[0],d=0,u=1e-4;for(e=parseFloat(e)||500,n=parseFloat(n)||20,o=o||null,l.tension=e,l.friction=n,s=(r=null!==o)?(d=t(e,n))/o*.016:.016;a=i(a||l,s),c.push(1+a.x),d+=16,Math.abs(a.x)>u&&Math.abs(a.v)>u;);return r?function(t){return c[t*(c.length-1)|0]}:d}}(),Ix=function(t,e,i,n){var o=function(t,e,i,n){var o=4,r=.001,s=1e-7,a=10,l=11,c=1/(l-1),d="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var u=0;u<4;++u)if("number"!=typeof arguments[u]||isNaN(arguments[u])||!isFinite(arguments[u]))return!1;t=Math.min(t,1),i=Math.min(i,1),t=Math.max(t,0),i=Math.max(i,0);var h=d?new Float32Array(l):new Array(l);function p(t,e){return 1-3*e+3*t}function g(t,e){return 3*e-6*t}function f(t){return 3*t}function m(t,e,i){return((p(e,i)*t+g(e,i))*t+f(e))*t}function _(t,e,i){return 3*p(e,i)*t*t+2*g(e,i)*t+f(e)}function v(e,n){for(var r=0;r<o;++r){var s=_(n,t,i);if(0===s)return n;n-=(m(n,t,i)-e)/s}return n}function y(){for(var e=0;e<l;++e)h[e]=m(e*c,t,i)}function b(e,n,o){var r,l,c=0;do{(r=m(l=n+(o-n)/2,t,i)-e)>0?o=l:n=l}while(Math.abs(r)>s&&++c<a);return l}function E(e){for(var n=0,o=1,s=l-1;o!==s&&h[o]<=e;++o)n+=c;--o;var a=n+(e-h[o])/(h[o+1]-h[o])*c,d=_(a,t,i);return d>=r?v(e,a):0===d?a:b(e,n,n+c)}var T=!1;function x(){T=!0,t===e&&i===n||y()}var k=function(o){return T||x(),t===e&&i===n?o:0===o?0:1===o?1:m(E(o),e,n)};k.getControlPoints=function(){return[{x:t,y:e},{x:i,y:n}]};var S="generateBezier("+[t,e,i,n]+")";return k.toString=function(){return S},k}(t,e,i,n);return function(t,e,i){return t+(e-t)*o(i)}},Rx={linear:function(t,e,i){return t+(e-t)*i},ease:Ix(.25,.1,.25,1),"ease-in":Ix(.42,0,1,1),"ease-out":Ix(0,0,.58,1),"ease-in-out":Ix(.42,0,.58,1),"ease-in-sine":Ix(.47,0,.745,.715),"ease-out-sine":Ix(.39,.575,.565,1),"ease-in-out-sine":Ix(.445,.05,.55,.95),"ease-in-quad":Ix(.55,.085,.68,.53),"ease-out-quad":Ix(.25,.46,.45,.94),"ease-in-out-quad":Ix(.455,.03,.515,.955),"ease-in-cubic":Ix(.55,.055,.675,.19),"ease-out-cubic":Ix(.215,.61,.355,1),"ease-in-out-cubic":Ix(.645,.045,.355,1),"ease-in-quart":Ix(.895,.03,.685,.22),"ease-out-quart":Ix(.165,.84,.44,1),"ease-in-out-quart":Ix(.77,0,.175,1),"ease-in-quint":Ix(.755,.05,.855,.06),"ease-out-quint":Ix(.23,1,.32,1),"ease-in-out-quint":Ix(.86,0,.07,1),"ease-in-expo":Ix(.95,.05,.795,.035),"ease-out-expo":Ix(.19,1,.22,1),"ease-in-out-expo":Ix(1,0,0,1),"ease-in-circ":Ix(.6,.04,.98,.335),"ease-out-circ":Ix(.075,.82,.165,1),"ease-in-out-circ":Ix(.785,.135,.15,.86),spring:function(t,e,i){if(0===i)return Rx.linear;var n=wx(t,e,i);return function(t,e,i){return t+(e-t)*n(i)}},"cubic-bezier":Ix};function Ax(t,e,i,n,o){if(1===n)return i;if(e===i)return i;var r=o(e,i,n);return null==t||((t.roundValue||t.color)&&(r=Math.round(r)),void 0!==t.min&&(r=Math.max(r,t.min)),void 0!==t.max&&(r=Math.min(r,t.max))),r}function Ox(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Dx(t,e,i,n,o){var r=null!=o?o.type:null;i<0?i=0:i>1&&(i=1);var s=Ox(t,o),a=Ox(e,o);if(W_(s)&&W_(a))return Ax(r,s,a,i,n);if(V_(s)&&V_(a)){for(var l=[],c=0;c<a.length;c++){var d=s[c],u=a[c];if(null!=d&&null!=u){var h=Ax(r,d,u,i,n);l.push(h)}else l.push(u)}return l}}function Nx(t,e,i,n){var o=!n,r=t._private,s=e._private,a=s.easing,l=s.startTime,c=(n?t:t.cy()).style();if(!s.easingImpl)if(null==a)s.easingImpl=Rx.linear;else{var d,u,h;if(H_(a))d=c.parse("transition-timing-function",a).value;else d=a;H_(d)?(u=d,h=[]):(u=d[1],h=d.slice(2).map((function(t){return+t}))),h.length>0?("spring"===u&&h.push(s.duration),s.easingImpl=Rx[u].apply(null,h)):s.easingImpl=Rx[u]}var p,g=s.easingImpl;if(p=0===s.duration?1:(i-l)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),null==s.delay){var f=s.startPosition,m=s.position;if(m&&o&&!t.locked()){var _={};Mx(f.x,m.x)&&(_.x=Dx(f.x,m.x,p,g)),Mx(f.y,m.y)&&(_.y=Dx(f.y,m.y,p,g)),t.position(_)}var v=s.startPan,y=s.pan,b=r.pan,E=null!=y&&n;E&&(Mx(v.x,y.x)&&(b.x=Dx(v.x,y.x,p,g)),Mx(v.y,y.y)&&(b.y=Dx(v.y,y.y,p,g)),t.emit("pan"));var T=s.startZoom,x=s.zoom,k=null!=x&&n;k&&(Mx(T,x)&&(r.zoom=by(r.minZoom,Dx(T,x,p,g),r.maxZoom)),t.emit("zoom")),(E||k)&&t.emit("viewport");var S=s.style;if(S&&S.length>0&&o){for(var C=0;C<S.length;C++){var w=S[C],I=w.name,R=w,A=s.startStyle[I],O=Dx(A,R,p,g,c.properties[A.name]);c.overrideBypass(t,I,O)}t.emit("style")}}return s.progress=p,p}function Mx(t,e){return null!=t&&null!=e&&(!(!W_(t)||!W_(e))||!(!t||!e))}function Lx(t,e,i,n){var o=e._private;o.started=!0,o.startTime=i-o.progress*o.duration}function Px(t,e){var i=e._private.aniEles,n=[];function o(e,i){var o=e._private,r=o.animation.current,s=o.animation.queue,a=!1;if(0===r.length){var l=s.shift();l&&r.push(l)}for(var c=function(t){for(var e=t.length-1;e>=0;e--){(0,t[e])()}t.splice(0,t.length)},d=r.length-1;d>=0;d--){var u=r[d],h=u._private;h.stopped?(r.splice(d,1),h.hooked=!1,h.playing=!1,h.started=!1,c(h.frames)):(h.playing||h.applying)&&(h.playing&&h.applying&&(h.applying=!1),h.started||Lx(0,u,t),Nx(e,u,t,i),h.applying&&(h.applying=!1),c(h.frames),null!=h.step&&h.step(t),u.completed()&&(r.splice(d,1),h.hooked=!1,h.playing=!1,h.started=!1,c(h.completes)),a=!0)}return i||0!==r.length||0!==s.length||n.push(e),a}for(var r=!1,s=0;s<i.length;s++){var a=o(i[s]);r=r||a}var l=o(e,!0);(r||l)&&(i.length>0?e.notify("draw",i):e.notify("draw")),i.unmerge(n),e.emit("step")}var Bx={animate:dE.animate(),animation:dE.animation(),animated:dE.animated(),clearQueue:dE.clearQueue(),delay:dE.delay(),delayAnimation:dE.delayAnimation(),stop:dE.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,i){Px(i,t)}),e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&pv((function(i){Px(i,t),e()}))}()}}},Fx={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,i){var n=e.qualifier;return null==n||t!==i.target&&X_(i.target)&&n.matches(i.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,i){return null!=e.qualifier?i.target:t}},Hx=function(t){return H_(t)?new YE(t):t},Ux={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new GT(Fx,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,i){return this.emitter().on(t,Hx(e),i),this},removeListener:function(t,e,i){return this.emitter().removeListener(t,Hx(e),i),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,i){return this.emitter().one(t,Hx(e),i),this},once:function(t,e,i){return this.emitter().one(t,Hx(e),i),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};dE.eventAliasesOn(Ux);var Vx={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};Vx.jpeg=Vx.jpg;var Gx={layout:function(t){var e=this;if(null!=t)if(null!=t.name){var i=t.name,n=e.extension("layout",i);if(null!=n){var o;o=H_(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$();var r=new n(rv({},t,{cy:e,eles:o}));return r}Dv("No such layout `"+i+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Dv("A `name` must be specified to make a layout");else Dv("Layout options must be specified to make a layout")}};Gx.createLayout=Gx.makeLayout=Gx.layout;var Wx={notify:function(t,e){var i=this._private;if(this.batching()){i.batchNotifications=i.batchNotifications||{};var n=i.batchNotifications[t]=i.batchNotifications[t]||this.collection();null!=e&&n.merge(e)}else if(i.notificationsEnabled){var o=this.renderer();!this.destroyed()&&o&&o.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(i){var n=t.batchNotifications[i];n.empty()?e.notify(i):e.notify(i,n)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var i=Object.keys(t),n=0;n<i.length;n++){var o=i[n],r=t[o];e.getElementById(o).data(r)}}))}},zx=Hv({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),jx={renderTo:function(t,e,i,n){return this._private.renderer.renderTo(t,e,i,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this,i=e.extension("renderer",t.name);if(null!=i){void 0!==t.wheelSensitivity&&Mv("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=zx(t);n.cy=e,e._private.renderer=new i(n),this.notify("init")}else Dv("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};jx.invalidateDimensions=jx.resize;var Xx={collection:function(t,e){return H_(t)?this.$(t):j_(t)?t.collection():V_(t)?new kx(this,t,e):new kx(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};Xx.elements=Xx.filter=Xx.$;var Yx={};Yx.apply=function(t){for(var e=this,i=e._private.cy.collection(),n=0;n<t.length;n++){var o=t[n],r=e.getContextMeta(o);if(!r.empty){var s=e.getContextStyle(r),a=e.applyContextStyle(r,s,o);o._private.appliedInitStyle?e.updateTransitions(o,a.diffProps):o._private.appliedInitStyle=!0,e.updateStyleHints(o)&&i.push(o)}}return i},Yx.getPropertiesDiff=function(t,e){var i=this,n=i._private.propDiffs=i._private.propDiffs||{},o=t+"-"+e,r=n[o];if(r)return r;for(var s=[],a={},l=0;l<i.length;l++){var c=i[l],d="t"===t[l],u="t"===e[l],h=d!==u,p=c.mappedProperties.length>0;if(h||u&&p){var g=void 0;h&&p||h?g=c.properties:p&&(g=c.mappedProperties);for(var f=0;f<g.length;f++){for(var m=g[f],_=m.name,v=!1,y=l+1;y<i.length;y++){var b=i[y];if("t"===e[y]&&(v=null!=b.properties[m.name]))break}a[_]||v||(a[_]=!0,s.push(_))}}}return n[o]=s,s},Yx.getContextMeta=function(t){for(var e,i=this,n="",o=t._private.styleCxtKey||"",r=0;r<i.length;r++){var s=i[r];n+=s.selector&&s.selector.matches(t)?"t":"f"}return e=i.getPropertiesDiff(o,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},Yx.getContextStyle=function(t){var e=t.key,i=this._private.contextStyles=this._private.contextStyles||{};if(i[e])return i[e];for(var n={_private:{key:e}},o=0;o<this.length;o++){var r=this[o];if("t"===e[o])for(var s=0;s<r.properties.length;s++){var a=r.properties[s];n[a.name]=a}}return i[e]=n,n},Yx.applyContextStyle=function(t,e,i){for(var n=t.diffPropNames,o={},r=this.types,s=0;s<n.length;s++){var a=n[s],l=e[a],c=i.pstyle(a);if(!l){if(!c)continue;l=c.bypass?{name:a,deleteBypassed:!0}:{name:a,delete:!0}}if(c!==l){if(l.mapped===r.fn&&null!=c&&null!=c.mapping&&c.mapping.value===l.value){var d=c.mapping;if((d.fnValue=l.value(i))===d.prevFnValue)continue}var u=o[a]={prev:c};this.applyParsedProperty(i,l),u.next=i.pstyle(a),u.next&&u.next.bypass&&(u.next=u.next.bypassed)}}return{diffProps:o}},Yx.updateStyleHints=function(t){var e=t._private,i=this,n=i.propertyGroupNames,o=i.propertyGroupKeys,r=function(t,e,n){return i.getPropertiesHash(t,e,n)},s=e.styleKey;if(t.removed())return!1;var a="nodes"===e.group,l=t._private.style;n=Object.keys(l);for(var c=0;c<o.length;c++){var d=o[c];e.styleKeys[d]=[9261,5381]}for(var u,h=function(t,i){return e.styleKeys[i][0]=_v(t,e.styleKeys[i][0])},p=function(t,i){return e.styleKeys[i][1]=vv(t,e.styleKeys[i][1])},g=function(t,e){h(t,e),p(t,e)},f=function(t,e){for(var i=0;i<t.length;i++){var n=t.charCodeAt(i);h(n,e),p(n,e)}},m=0;m<n.length;m++){var _=n[m],v=l[_];if(null!=v){var y=this.properties[_],b=y.type,E=y.groupKey,T=void 0;null!=y.hashOverride?T=y.hashOverride(t,v):null!=v.pfValue&&(T=v.pfValue);var x=null==y.enums?v.value:null,k=null!=T,S=k||null!=x,C=v.units;if(b.number&&S&&!b.multiple)g(-128<(u=k?T:x)&&u<128&&Math.floor(u)!==u?2e9-(1024*u|0):u,E),k||null==C||f(C,E);else f(v.strValue,E)}}for(var w,I,R=[9261,5381],A=0;A<o.length;A++){var O=o[A],D=e.styleKeys[O];R[0]=_v(D[0],R[0]),R[1]=vv(D[1],R[1])}e.styleKey=(w=R[0],I=R[1],2097152*w+I);var N=e.styleKeys;e.labelDimsKey=yv(N.labelDimensions);var M=r(t,["label"],N.labelDimensions);if(e.labelKey=yv(M),e.labelStyleKey=yv(bv(N.commonLabel,M)),!a){var L=r(t,["source-label"],N.labelDimensions);e.sourceLabelKey=yv(L),e.sourceLabelStyleKey=yv(bv(N.commonLabel,L));var P=r(t,["target-label"],N.labelDimensions);e.targetLabelKey=yv(P),e.targetLabelStyleKey=yv(bv(N.commonLabel,P))}if(a){var B=e.styleKeys,F=B.nodeBody,H=B.nodeBorder,U=B.backgroundImage,V=B.compound,G=B.pie,W=[F,H,U,V,G].filter((function(t){return null!=t})).reduce(bv,[9261,5381]);e.nodeKey=yv(W),e.hasPie=null!=G&&9261!==G[0]&&5381!==G[1]}return s!==e.styleKey},Yx.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},Yx.applyParsedProperty=function(t,e){var i,n=this,o=e,r=t._private.style,s=n.types,a=n.properties[o.name].type,l=o.bypass,c=r[o.name],d=c&&c.bypass,u=t._private,h="mapping",p=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},g=function(){var e=p(c),i=p(o);n.checkTriggers(t,o.name,e,i)};if(o&&"pie"===o.name.substr(0,3)&&Mv("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(o=e=this.parse(e.name,"bezier",l)),o.delete)return r[o.name]=void 0,g(),!0;if(o.deleteBypassed)return c?!!c.bypass&&(c.bypassed=void 0,g(),!0):(g(),!0);if(o.deleteBypass)return c?!!c.bypass&&(r[o.name]=c.bypassed,g(),!0):(g(),!0);var f=function(){Mv("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case s.mapData:for(var m,_=o.field.split("."),v=u.data,y=0;y<_.length&&v;y++){v=v[_[y]]}if(null==v)return f(),!1;if(!W_(v))return Mv("Do not use continuous mappers without specifying numeric data (i.e. `"+o.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;var b=o.fieldMax-o.fieldMin;if((m=0===b?0:(v-o.fieldMin)/b)<0?m=0:m>1&&(m=1),a.color){var E=o.valueMin[0],T=o.valueMax[0],x=o.valueMin[1],k=o.valueMax[1],S=o.valueMin[2],C=o.valueMax[2],w=null==o.valueMin[3]?1:o.valueMin[3],I=null==o.valueMax[3]?1:o.valueMax[3],R=[Math.round(E+(T-E)*m),Math.round(x+(k-x)*m),Math.round(S+(C-S)*m),Math.round(w+(I-w)*m)];i={bypass:o.bypass,name:o.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else{if(!a.number)return!1;var A=o.valueMin+(o.valueMax-o.valueMin)*m;i=this.parse(o.name,A,o.bypass,h)}if(!i)return f(),!1;i.mapping=o,o=i;break;case s.data:for(var O=o.field.split("."),D=u.data,N=0;N<O.length&&D;N++){D=D[O[N]]}if(null!=D&&(i=this.parse(o.name,D,o.bypass,h)),!i)return f(),!1;i.mapping=o,o=i;break;case s.fn:var M=o.value,L=null!=o.fnValue?o.fnValue:M(t);if(o.prevFnValue=L,null==L)return Mv("Custom function mappers may not return null (i.e. `"+o.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(i=this.parse(o.name,L,o.bypass,h)))return Mv("Custom function mappers may not return invalid values for the property type (i.e. `"+o.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Lv(o),o=i;break;case void 0:break;default:return!1}return l?(o.bypassed=d?c.bypassed:c,r[o.name]=o):d?c.bypassed=o:r[o.name]=o,g(),!0},Yx.cleanElements=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),e)for(var o=n._private.style,r=Object.keys(o),s=0;s<r.length;s++){var a=r[s],l=o[a];null!=l&&(l.bypass?l.bypassed=null:o[a]=null)}else n._private.style={}}},Yx.update=function(){this._private.cy.mutableElements().updateStyle()},Yx.updateTransitions=function(t,e){var i=this,n=t._private,o=t.pstyle("transition-property").value,r=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(o.length>0&&r>0){for(var a={},l=!1,c=0;c<o.length;c++){var d=o[c],u=t.pstyle(d),h=e[d];if(h){var p=h.prev,g=null!=h.next?h.next:u,f=!1,m=void 0,_=1e-6;p&&(W_(p.pfValue)&&W_(g.pfValue)?(f=g.pfValue-p.pfValue,m=p.pfValue+_*f):W_(p.value)&&W_(g.value)?(f=g.value-p.value,m=p.value+_*f):V_(p.value)&&V_(g.value)&&(f=p.value[0]!==g.value[0]||p.value[1]!==g.value[1]||p.value[2]!==g.value[2],m=p.strValue),f&&(a[d]=g.strValue,this.applyBypass(t,d,m),l=!0))}}if(!l)return;n.transitioning=!0,new aE((function(e){s>0?t.delayAnimation(s).play().promise().then(e):e()})).then((function(){return t.animation({style:a,duration:r,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){i.removeBypasses(t,o),t.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(t,o),t.emitAndNotify("style"),n.transitioning=!1)},Yx.checkTrigger=function(t,e,i,n,o,r){var s=this.properties[e],a=o(s);null!=a&&a(i,n)&&r(s)},Yx.checkZOrderTrigger=function(t,e,i,n){var o=this;this.checkTrigger(t,e,i,n,(function(t){return t.triggersZOrder}),(function(){o._private.cy.notify("zorder",t)}))},Yx.checkBoundsTrigger=function(t,e,i,n){this.checkTrigger(t,e,i,n,(function(t){return t.triggersBounds}),(function(o){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"curve-style"!==e||"bezier"!==i&&"bezier"!==n||!o.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()}))}))},Yx.checkTriggers=function(t,e,i,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,i,n),this.checkBoundsTrigger(t,e,i,n)};var Kx={applyBypass:function(t,e,i,n){var o=[];if("*"===e||"**"===e){if(void 0!==i)for(var r=0;r<this.properties.length;r++){var s=this.properties[r].name,a=this.parse(s,i,!0);a&&o.push(a)}}else if(H_(e)){var l=this.parse(e,i,!0);l&&o.push(l)}else{if(!G_(e))return!1;var c=e;n=i;for(var d=Object.keys(c),u=0;u<d.length;u++){var h=d[u],p=c[h];if(void 0===p&&(p=c[tv(h)]),void 0!==p){var g=this.parse(h,p,!0);g&&o.push(g)}}}if(0===o.length)return!1;for(var f=!1,m=0;m<t.length;m++){for(var _=t[m],v={},y=void 0,b=0;b<o.length;b++){var E=o[b];if(n){var T=_.pstyle(E.name);y=v[E.name]={prev:T}}f=this.applyParsedProperty(_,Lv(E))||f,n&&(y.next=_.pstyle(E.name))}f&&this.updateStyleHints(_),n&&this.updateTransitions(_,v,true)}return f},overrideBypass:function(t,e,i){e=Q_(e);for(var n=0;n<t.length;n++){var o=t[n],r=o._private.style[e],s=this.properties[e].type,a=s.color,l=s.mutiple,c=r?null!=r.pfValue?r.pfValue:r.value:null;r&&r.bypass?(r.value=i,null!=r.pfValue&&(r.pfValue=i),r.strValue=a?"rgb("+i.join(",")+")":l?i.join(" "):""+i,this.updateStyleHints(o)):this.applyBypass(o,e,i),this.checkTriggers(o,e,c,i)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,i){for(var n=0;n<t.length;n++){for(var o=t[n],r={},s=0;s<e.length;s++){var a=e[s],l=this.properties[a],c=o.pstyle(l.name);if(c&&c.bypass){var d=this.parse(a,"",!0),u=r[l.name]={prev:c};this.applyParsedProperty(o,d),u.next=o.pstyle(l.name)}}this.updateStyleHints(o),i&&this.updateTransitions(o,r,true)}}},Jx={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(D_&&e&&D_.getComputedStyle)return D_.getComputedStyle(e).getPropertyValue(t)}},$x={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var i=this;if(t=t[0]){for(var n={},o=0;o<i.properties.length;o++){var r=i.properties[o],s=i.getStylePropertyValue(t,r.name,e);null!=s&&(n[r.name]=s,n[tv(r.name)]=s)}return n}},getIndexedStyle:function(t,e,i,n){var o=t.pstyle(e)[i][n];return null!=o?o:t.cy().style().getDefaultProperty(e)[i][0]},getStylePropertyValue:function(t,e,i){if(t=t[0]){var n=this.properties[e];n.alias&&(n=n.pointsTo);var o=n.type,r=t.pstyle(n.name);if(r){var s=r.value,a=r.units,l=r.strValue;if(i&&o.number&&null!=s&&W_(s)){var c=t.cy().zoom(),d=function(t){return t*c},u=function(t,e){return d(t)+e},h=V_(s);return(h?a.every((function(t){return null!=t})):null!=a)?h?s.map((function(t,e){return u(t,a[e])})).join(" "):u(s,a):h?s.map((function(t){return H_(t)?t:""+d(t)})).join(" "):""+d(s)}if(null!=l)return l}return null}},getAnimationStartStyle:function(t,e){for(var i={},n=0;n<e.length;n++){var o=e[n].name,r=t.pstyle(o);void 0!==r&&(r=G_(r)?this.parse(o,r.strValue):this.parse(o,r)),r&&(i[o]=r)}return i},getPropsList:function(t){var e=[],i=t,n=this.properties;if(i)for(var o=Object.keys(i),r=0;r<o.length;r++){var s=o[r],a=i[s],l=n[s]||n[Q_(s)],c=this.parse(l.name,a);c&&e.push(c)}return e},getNonDefaultPropertiesHash:function(t,e,i){var n,o,r,s,a,l,c=i.slice();for(a=0;a<e.length;a++)if(n=e[a],null!=(o=t.pstyle(n,!1)))if(null!=o.pfValue)c[0]=_v(s,c[0]),c[1]=vv(s,c[1]);else for(r=o.strValue,l=0;l<r.length;l++)s=r.charCodeAt(l),c[0]=_v(s,c[0]),c[1]=vv(s,c[1]);return c}};$x.getPropertiesHash=$x.getNonDefaultPropertiesHash;var qx={appendFromJson:function(t){for(var e=this,i=0;i<t.length;i++){var n=t[i],o=n.selector,r=n.style||n.css,s=Object.keys(r);e.selector(o);for(var a=0;a<s.length;a++){var l=s[a],c=r[l];e.css(l,c)}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var i=this[e],n=i.selector,o=i.properties,r={},s=0;s<o.length;s++){var a=o[s];r[a.name]=a.strValue}t.push({selector:n?n.toString():"core",style:r})}return t}},Zx={appendFromString:function(t){var e,i,n,o=this,r=""+t;function s(){r=r.length>e.length?r.substr(e.length):""}function a(){i=i.length>n.length?i.substr(n.length):""}for(r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(r.match(/^\s*$/))break;var l=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){Mv("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}e=l[0];var c=l[1];if("core"!==c)if(new YE(c).invalid){Mv("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}var d=l[2],u=!1;i=d;for(var h=[];;){if(i.match(/^\s*$/))break;var p=i.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!p){Mv("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),u=!0;break}n=p[0];var g=p[1],f=p[2];if(this.properties[g])o.parse(g,f)?(h.push({name:g,val:f}),a()):(Mv("Skipping property: Invalid property definition in: "+n),a());else Mv("Skipping property: Invalid property name in: "+n),a()}if(u){s();break}o.selector(c);for(var m=0;m<h.length;m++){var _=h[m];o.css(_.name,_.val)}s()}return o},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},Qx={};!function(){var t=nv,e=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(e){var i=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},n=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Qx.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:n,singleRegexMatchValue:!0},urls:{regexes:n,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return H_(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var o={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||(0==t&&0!=e||0!=t&&0==e)},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var i=$_(t),n=$_(e);return i&&!n||!i&&n}},r=Qx.types,s=[{name:"label",type:r.text,triggersBounds:o.any,triggersZOrder:o.emptyNonEmpty},{name:"text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any}],a=[{name:"source-label",type:r.text,triggersBounds:o.any},{name:"source-text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:r.size,triggersBounds:o.any}],l=[{name:"target-label",type:r.text,triggersBounds:o.any},{name:"target-text-rotation",type:r.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:r.size,triggersBounds:o.any}],c=[{name:"font-family",type:r.fontFamily,triggersBounds:o.any},{name:"font-style",type:r.fontStyle,triggersBounds:o.any},{name:"font-weight",type:r.fontWeight,triggersBounds:o.any},{name:"font-size",type:r.size,triggersBounds:o.any},{name:"text-transform",type:r.textTransform,triggersBounds:o.any},{name:"text-wrap",type:r.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:r.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:r.size,triggersBounds:o.any},{name:"text-outline-width",type:r.size,triggersBounds:o.any},{name:"line-height",type:r.positiveNumber,triggersBounds:o.any}],d=[{name:"text-valign",type:r.valign,triggersBounds:o.any},{name:"text-halign",type:r.halign,triggersBounds:o.any},{name:"color",type:r.color},{name:"text-outline-color",type:r.color},{name:"text-outline-opacity",type:r.zeroOneNumber},{name:"text-background-color",type:r.color},{name:"text-background-opacity",type:r.zeroOneNumber},{name:"text-background-padding",type:r.size,triggersBounds:o.any},{name:"text-border-opacity",type:r.zeroOneNumber},{name:"text-border-color",type:r.color},{name:"text-border-width",type:r.size,triggersBounds:o.any},{name:"text-border-style",type:r.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:r.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:r.justification}],u=[{name:"events",type:r.bool},{name:"text-events",type:r.bool}],h=[{name:"display",type:r.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:r.visibility,triggersZOrder:o.any},{name:"opacity",type:r.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:r.zeroOneNumber},{name:"min-zoomed-font-size",type:r.size},{name:"z-compound-depth",type:r.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:r.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:r.nonNegativeInt,triggersZOrder:o.any}],p=[{name:"overlay-padding",type:r.size,triggersBounds:o.any},{name:"overlay-color",type:r.color},{name:"overlay-opacity",type:r.zeroOneNumber,triggersBounds:o.zeroNonZero}],g=[{name:"transition-property",type:r.propList},{name:"transition-duration",type:r.time},{name:"transition-delay",type:r.time},{name:"transition-timing-function",type:r.easing}],f=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},m=[{name:"height",type:r.nodeSize,triggersBounds:o.any,hashOverride:f},{name:"width",type:r.nodeSize,triggersBounds:o.any,hashOverride:f},{name:"shape",type:r.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:r.polygonPointList,triggersBounds:o.any},{name:"background-color",type:r.color},{name:"background-fill",type:r.fill},{name:"background-opacity",type:r.zeroOneNumber},{name:"background-blacken",type:r.nOneOneNumber},{name:"background-gradient-stop-colors",type:r.colors},{name:"background-gradient-stop-positions",type:r.percentages},{name:"background-gradient-direction",type:r.gradientDirection},{name:"padding",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:r.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:r.boundsExpansion,triggersBounds:o.any}],_=[{name:"border-color",type:r.color},{name:"border-opacity",type:r.zeroOneNumber},{name:"border-width",type:r.size,triggersBounds:o.any},{name:"border-style",type:r.borderStyle}],v=[{name:"background-image",type:r.urls},{name:"background-image-crossorigin",type:r.bgCrossOrigin},{name:"background-image-opacity",type:r.zeroOneNumbers},{name:"background-image-containment",type:r.bgContainment},{name:"background-image-smoothing",type:r.bools},{name:"background-position-x",type:r.bgPos},{name:"background-position-y",type:r.bgPos},{name:"background-width-relative-to",type:r.bgRelativeTo},{name:"background-height-relative-to",type:r.bgRelativeTo},{name:"background-repeat",type:r.bgRepeat},{name:"background-fit",type:r.bgFit},{name:"background-clip",type:r.bgClip},{name:"background-width",type:r.bgWH},{name:"background-height",type:r.bgWH},{name:"background-offset-x",type:r.bgPos},{name:"background-offset-y",type:r.bgPos}],y=[{name:"position",type:r.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:r.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:r.size,triggersBounds:o.any},{name:"min-width-bias-left",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:r.size,triggersBounds:o.any},{name:"min-height-bias-top",type:r.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:r.sizeMaybePercent,triggersBounds:o.any}],b=[{name:"line-style",type:r.lineStyle},{name:"line-color",type:r.color},{name:"line-fill",type:r.fill},{name:"line-cap",type:r.lineCap},{name:"line-opacity",type:r.zeroOneNumber},{name:"line-dash-pattern",type:r.numbers},{name:"line-dash-offset",type:r.number},{name:"line-gradient-stop-colors",type:r.colors},{name:"line-gradient-stop-positions",type:r.percentages},{name:"curve-style",type:r.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:r.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:r.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:r.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:r.size,triggersBounds:o.any},{name:"control-point-distances",type:r.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:r.numbers,triggersBounds:o.any},{name:"segment-distances",type:r.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:r.numbers,triggersBounds:o.any},{name:"taxi-turn",type:r.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:r.size,triggersBounds:o.any},{name:"taxi-direction",type:r.axisDirection,triggersBounds:o.any},{name:"edge-distances",type:r.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:r.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:r.angle,triggersBounds:o.any},{name:"loop-sweep",type:r.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:r.size,triggersBounds:o.any},{name:"target-distance-from-node",type:r.size,triggersBounds:o.any}],E=[{name:"ghost",type:r.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:r.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:r.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:r.zeroOneNumber}],T=[{name:"selection-box-color",type:r.color},{name:"selection-box-opacity",type:r.zeroOneNumber},{name:"selection-box-border-color",type:r.color},{name:"selection-box-border-width",type:r.size},{name:"active-bg-color",type:r.color},{name:"active-bg-opacity",type:r.zeroOneNumber},{name:"active-bg-size",type:r.size},{name:"outside-texture-bg-color",type:r.color},{name:"outside-texture-bg-opacity",type:r.zeroOneNumber}],x=[];Qx.pieBackgroundN=16,x.push({name:"pie-size",type:r.sizeMaybePercent});for(var k=1;k<=Qx.pieBackgroundN;k++)x.push({name:"pie-"+k+"-background-color",type:r.color}),x.push({name:"pie-"+k+"-background-size",type:r.percent}),x.push({name:"pie-"+k+"-background-opacity",type:r.zeroOneNumber});var S=[],C=Qx.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:r.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:r.color},{name:"arrow-fill",type:r.arrowFill}].forEach((function(t){C.forEach((function(e){var i=e+"-"+t.name,n=t.type,o=t.triggersBounds;S.push({name:i,type:n,triggersBounds:o})}))}),{});var w=Qx.properties=[].concat(u,g,h,p,E,d,c,s,a,l,m,_,v,x,y,b,S,T),I=Qx.propertyGroups={behavior:u,transition:g,visibility:h,overlay:p,ghost:E,commonLabel:d,labelDimensions:c,mainLabel:s,sourceLabel:a,targetLabel:l,nodeBody:m,nodeBorder:_,backgroundImage:v,pie:x,compound:y,edgeLine:b,edgeArrow:S,core:T},R=Qx.propertyGroupNames={};(Qx.propertyGroupKeys=Object.keys(I)).forEach((function(t){R[t]=I[t].map((function(t){return t.name})),I[t].forEach((function(e){return e.groupKey=t}))}));var A=Qx.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Qx.propertyNames=w.map((function(t){return t.name}));for(var O=0;O<w.length;O++){var D=w[O];w[D.name]=D}for(var N=0;N<A.length;N++){var M=A[N],L=w[M.pointsTo],P={name:M.name,alias:!0,pointsTo:L};w.push(P),w[M.name]=P}}(),Qx.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Qx.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=rv({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var i=1;i<=Qx.pieBackgroundN;i++){var n=e.name.replace("{{i}}",i),o=e.value;t[n]=o}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(t,e){return Qx.arrowPrefixes.forEach((function(i){var n=i+"-"+e.name,o=e.value;t[n]=o})),t}),{})),i={},n=0;n<this.properties.length;n++){var o=this.properties[n];if(!o.pointsTo){var r=o.name,s=e[r],a=this.parse(r,s);i[r]=a}}return t.defaultProperties=i,t.defaultProperties},Qx.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var tk={parse:function(t,e,i,n){var o=this;if(U_(e))return o.parseImplWarn(t,e,i,n);var r,s=Tv(t,""+e,i?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),a=o.propCache=o.propCache||[];return(r=a[s])||(r=a[s]=o.parseImplWarn(t,e,i,n)),(i||"mapping"===n)&&(r=Lv(r))&&(r.value=Lv(r.value)),r},parseImplWarn:function(t,e,i,n){var o=this.parseImpl(t,e,i,n);return o||null==e||Mv("The style property `".concat(t,": ").concat(e,"` is invalid")),!o||"width"!==o.name&&"height"!==o.name||"label"!==e||Mv("The style value of `label` is deprecated for `"+o.name+"`"),o}};tk.parseImpl=function(t,e,i,n){var o=this;t=Q_(t);var r=o.properties[t],s=e,a=o.types;if(!r)return null;if(void 0===e)return null;r.alias&&(r=r.pointsTo,t=r.name);var l=H_(e);l&&(e=e.trim());var c,d,u=r.type;if(!u)return null;if(i&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(U_(e))return{name:t,value:e,strValue:"fn",mapped:a.fn,bypass:i};if(!l||n||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(c=new RegExp(a.data.regex).exec(e))){if(i)return!1;var h=a.data;return{name:t,value:c,strValue:""+e,mapped:h,field:c[1],bypass:i}}if(e.length>=10&&"m"===e[0]&&(d=new RegExp(a.mapData.regex).exec(e))){if(i)return!1;if(u.multiple)return!1;var p=a.mapData;if(!u.color&&!u.number)return!1;var g=this.parse(t,d[4]);if(!g||g.mapped)return!1;var f=this.parse(t,d[5]);if(!f||f.mapped)return!1;if(g.pfValue===f.pfValue||g.strValue===f.strValue)return Mv("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+g.strValue+"`"),this.parse(t,g.strValue);if(u.color){var m=g.value,_=f.value;if(!(m[0]!==_[0]||m[1]!==_[1]||m[2]!==_[2]||m[3]!==_[3]&&(null!=m[3]&&1!==m[3]||null!=_[3]&&1!==_[3])))return!1}return{name:t,value:d,strValue:""+e,mapped:p,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:g.value,valueMax:f.value,bypass:i}}}if(u.multiple&&"multiple"!==n){var v;if(v=l?e.split(/\s+/):V_(e)?e:[e],u.evenMultiple&&v.length%2!=0)return null;for(var y=[],b=[],E=[],T="",x=!1,k=0;k<v.length;k++){var S=o.parse(t,v[k],i,"multiple");x=x||H_(S.value),y.push(S.value),E.push(null!=S.pfValue?S.pfValue:S.value),b.push(S.units),T+=(k>0?" ":"")+S.strValue}return u.validate&&!u.validate(y,b)?null:u.singleEnum&&x?1===y.length&&H_(y[0])?{name:t,value:y[0],strValue:y[0],bypass:i}:null:{name:t,value:y,pfValue:E,strValue:T,bypass:i,units:b}}var C,w,I=function(){for(var n=0;n<u.enums.length;n++){if(u.enums[n]===e)return{name:t,value:e,strValue:""+e,bypass:i}}return null};if(u.number){var R,A="px";if(u.units&&(R=u.units),u.implicitUnits&&(A=u.implicitUnits),!u.unitless)if(l){var O="px|em"+(u.allowPercent?"|\\%":"");R&&(O=R);var D=e.match("^("+nv+")("+O+")?$");D&&(e=D[1],R=D[2]||A)}else R&&!u.implicitUnits||(R=A);if(e=parseFloat(e),isNaN(e)&&void 0===u.enums)return null;if(isNaN(e)&&void 0!==u.enums)return e=s,I();if(u.integer&&(!W_(w=e)||Math.floor(w)!==w))return null;if(void 0!==u.min&&(e<u.min||u.strictMin&&e===u.min)||void 0!==u.max&&(e>u.max||u.strictMax&&e===u.max))return null;var N={name:t,value:e,strValue:""+e+(R||""),units:R,bypass:i};return u.unitless||"px"!==R&&"em"!==R?N.pfValue=e:N.pfValue="px"!==R&&R?this.getEmSizeInPixels()*e:e,"ms"!==R&&"s"!==R||(N.pfValue="ms"===R?e:1e3*e),"deg"!==R&&"rad"!==R||(N.pfValue="rad"===R?e:(C=e,Math.PI*C/180)),"%"===R&&(N.pfValue=e/100),N}if(u.propList){var M=[],L=""+e;if("none"===L);else{for(var P=L.split(/\s*,\s*|\s+/),B=0;B<P.length;B++){var F=P[B].trim();o.properties[F]?M.push(F):Mv("`"+F+"` is not a valid property name")}if(0===M.length)return null}return{name:t,value:M,strValue:0===M.length?"none":M.join(" "),bypass:i}}if(u.color){var H=sv(e);return H?{name:t,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:i}:null}if(u.regex||u.regexes){if(u.enums){var U=I();if(U)return U}for(var V=u.regexes?u.regexes:[u.regex],G=0;G<V.length;G++){var W=new RegExp(V[G]).exec(e);if(W)return{name:t,value:u.singleRegexMatchValue?W[1]:W,strValue:""+e,bypass:i}}return null}return u.string?{name:t,value:""+e,strValue:""+e,bypass:i}:u.enums?I():null};var ek=function t(e){if(!(this instanceof t))return new t(e);K_(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):Dv("A style must have a core reference")},ik=ek.prototype;ik.instanceString=function(){return"style"},ik.clear=function(){for(var t=this._private,e=t.cy.elements(),i=0;i<this.length;i++)this[i]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach((function(t){var e=t[0]._private;e.styleDirty=!0,e.appliedInitStyle=!1})),this},ik.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ik.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},ik.selector=function(t){var e="core"===t?null:new YE(t),i=this.length++;return this[i]={selector:e,properties:[],mappedProperties:[],index:i},this},ik.css=function(){var t=this,e=arguments;if(1===e.length)for(var i=e[0],n=0;n<t.properties.length;n++){var o=t.properties[n],r=i[o.name];void 0===r&&(r=i[tv(o.name)]),void 0!==r&&this.cssRule(o.name,r)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},ik.style=ik.css,ik.cssRule=function(t,e){var i=this.parse(t,e);if(i){var n=this.length-1;this[n].properties.push(i),this[n].properties[i.name]=i,i.name.match(/pie-(\d+)-background-size/)&&i.value&&(this._private.hasPie=!0),i.mapped&&this[n].mappedProperties.push(i),!this[n].selector&&(this._private.coreStyle[i.name]=i)}return this},ik.append=function(t){return J_(t)?t.appendToStyle(this):V_(t)?this.appendFromJson(t):H_(t)&&this.appendFromString(t),this},ek.fromJson=function(t,e){var i=new ek(t);return i.fromJson(e),i},ek.fromString=function(t,e){return new ek(t).fromString(e)},[Yx,Kx,Jx,$x,qx,Zx,Qx,tk].forEach((function(t){rv(ik,t)})),ek.types=ik.types,ek.properties=ik.properties,ek.propertyGroups=ik.propertyGroups,ek.propertyGroupNames=ik.propertyGroupNames,ek.propertyGroupKeys=ik.propertyGroupKeys;var nk={style:function(t){t&&this.setStyle(t).update();return this._private.style},setStyle:function(t){var e=this._private;return J_(t)?e.style=t.generateStyle(this):V_(t)?e.style=ek.fromJson(this,t):H_(t)?e.style=ek.fromString(this,t):e.style=ek(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},ok={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,i,n,o,r=arguments,s=this._private.pan;switch(r.length){case 0:return s;case 1:if(H_(r[0]))return s[t=r[0]];if(G_(r[0])){if(!this._private.panningEnabled)return this;n=(i=r[0]).x,o=i.y,W_(n)&&(s.x=n),W_(o)&&(s.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=r[0],e=r[1],"x"!==t&&"y"!==t||!W_(e)||(s[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var i,n,o,r,s,a=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:G_(t)&&(r=(o=a[0]).x,s=o.y,W_(r)&&(l.x+=r),W_(s)&&(l.y+=s),this.emit("pan viewport"));break;case 2:n=e,"x"!==(i=t)&&"y"!==i||!W_(n)||(l[i]+=n),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var i=this.getFitViewport(t,e);if(i){var n=this._private;n.zoom=i.zoom,n.pan=i.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){if(W_(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var i,n;if(H_(t)){var o=t;t=this.$(o)}else if(G_(n=t)&&W_(n.x1)&&W_(n.x2)&&W_(n.y1)&&W_(n.y2)){var r=t;(i={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2}).w=i.x2-i.x1,i.h=i.y2-i.y1}else j_(t)||(t=this.mutableElements());if(!j_(t)||!t.empty()){i=i||t.boundingBox();var s,a=this.width(),l=this.height();if(e=W_(e)?e:0,!isNaN(a)&&!isNaN(l)&&a>0&&l>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0)return{zoom:s=(s=(s=Math.min((a-2*e)/i.w,(l-2*e)/i.h))>this._private.maxZoom?this._private.maxZoom:s)<this._private.minZoom?this._private.minZoom:s,pan:{x:(a-s*(i.x1+i.x2))/2,y:(l-s*(i.y1+i.y2))/2}}}}},zoomRange:function(t,e){var i=this._private;if(null==e){var n=t;t=n.min,e=n.max}return W_(t)&&W_(e)&&t<=e?(i.minZoom=t,i.maxZoom=e):W_(t)&&void 0===e&&t<=i.maxZoom?i.minZoom=t:W_(e)&&void 0===t&&e>=i.minZoom&&(i.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,i,n=this._private,o=n.pan,r=n.zoom,s=!1;if(n.zoomingEnabled||(s=!0),W_(t)?i=t:G_(t)&&(i=t.level,null!=t.position?e=cy(t.position,r,o):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||n.panningEnabled||(s=!0)),i=(i=i>n.maxZoom?n.maxZoom:i)<n.minZoom?n.minZoom:i,s||!W_(i)||i===r||null!=e&&(!W_(e.x)||!W_(e.y)))return null;if(null!=e){var a=o,l=r,c=i;return{zoomed:!0,panned:!0,zoom:c,pan:{x:-c/l*(e.x-a.x)+e.x,y:-c/l*(e.y-a.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:i,pan:o}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),i=this._private;return null!=e&&e.zoomed?(i.zoom=e.zoom,e.panned&&(i.pan.x=e.pan.x,i.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,i=!0,n=!0,o=[],r=!1,s=!1;if(!t)return this;if(W_(t.zoom)||(i=!1),G_(t.pan)||(n=!1),!i&&!n)return this;if(i){var a=t.zoom;a<e.minZoom||a>e.maxZoom||!e.zoomingEnabled?r=!0:(e.zoom=a,o.push("zoom"))}if(n&&(!r||!t.cancelOnFailedZoom)&&e.panningEnabled){var l=t.pan;W_(l.x)&&(e.pan.x=l.x,s=!1),W_(l.y)&&(e.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(H_(t)){var i=t;t=this.mutableElements().filter(i)}else j_(t)||(t=this.mutableElements());if(0!==t.length){var n=t.boundingBox(),o=this.width(),r=this.height();return{x:(o-(e=void 0===e?this._private.zoom:e)*(n.x1+n.x2))/2,y:(r-e*(n.y1+n.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,e=t.container;return t.sizeCache=t.sizeCache||(e?function(){var t=D_.getComputedStyle(e),i=function(e){return parseFloat(t.getPropertyValue(e))};return{width:e.clientWidth-i("padding-left")-i("padding-right"),height:e.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,i=this.renderedExtent(),n={x1:(i.x1-t.x)/e,x2:(i.x2-t.x)/e,y1:(i.y1-t.y)/e,y2:(i.y2-t.y)/e};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};ok.centre=ok.center,ok.autolockNodes=ok.autolock,ok.autoungrabifyNodes=ok.autoungrabify;var rk={data:dE.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:dE.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:dE.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:dE.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};rk.attr=rk.data,rk.removeAttr=rk.removeData;var sk=function(t){var e=this,i=(t=rv({},t)).container;i&&!z_(i)&&z_(i[0])&&(i=i[0]);var n=i?i._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var o=n.readies=n.readies||[];i&&(i._cyreg=n),n.cy=e;var r=void 0!==D_&&void 0!==i&&!t.headless,s=t;s.layout=rv({name:r?"grid":"null"},s.layout),s.renderer=rv({name:r?"canvas":"null"},s.renderer);var a=function(t,e,i){return void 0!==e?e:void 0!==i?i:t},l=this._private={container:i,ready:!1,options:s,elements:new kx(this),listeners:[],aniEles:new kx(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:a(!0,s.zoomingEnabled),userZoomingEnabled:a(!0,s.userZoomingEnabled),panningEnabled:a(!0,s.panningEnabled),userPanningEnabled:a(!0,s.userPanningEnabled),boxSelectionEnabled:a(!0,s.boxSelectionEnabled),autolock:a(!1,s.autolock,s.autolockNodes),autoungrabify:a(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:a(!1,s.autounselectify),styleEnabled:void 0===s.styleEnabled?r:s.styleEnabled,zoom:W_(s.zoom)?s.zoom:1,pan:{x:G_(s.pan)&&W_(s.pan.x)?s.pan.x:0,y:G_(s.pan)&&W_(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});l.styleEnabled&&e.setStyle([]);var c=rv({},s,s.renderer);e.initRenderer(c);!function(t,e){if(t.some(q_))return aE.all(t).then(e);e(t)}([s.style,s.elements],(function(t){var i=t[0],r=t[1];l.styleEnabled&&e.style().append(i),function(t,i,n){e.notifications(!1);var o=e.mutableElements();o.length>0&&o.remove(),null!=t&&(G_(t)||V_(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",i),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",n),e.emit("done")}));var r=rv({},e._private.options.layout);r.eles=e.elements(),e.layout(r).run()}(r,(function(){e.startAnimationLoop(),l.ready=!0,U_(s.ready)&&e.on("ready",s.ready);for(var t=0;t<o.length;t++){var i=o[t];e.on("ready",i)}n&&(n.readies=[]),e.emit("ready")}),s.done)}))},ak=sk.prototype;rv(ak,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,i=e._private,n=i.options;return!z_(t)&&z_(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),i.container=t,i.styleEnabled=!0,e.invalidateSize(),e.initRenderer(rv({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),e.startAnimationLoop(),e.style(n.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Lv(this._private.options)},json:function(t){var e=this,i=e._private,n=e.mutableElements();if(G_(t)){if(e.startBatch(),t.elements){var o={},r=function(t,i){for(var n=[],r=[],s=0;s<t.length;s++){var a=t[s];if(a.data.id){var l=""+a.data.id,c=e.getElementById(l);o[l]=!0,0!==c.length?r.push({ele:c,json:a}):i?(a.group=i,n.push(a)):n.push(a)}else Mv("cy.json() cannot handle elements without an ID attribute")}e.add(n);for(var d=0;d<r.length;d++){var u=r[d],h=u.ele,p=u.json;h.json(p)}};if(V_(t.elements))r(t.elements);else for(var s=["nodes","edges"],a=0;a<s.length;a++){var l=s[a],c=t.elements[l];V_(c)&&r(c,l)}var d=e.collection();n.filter((function(t){return!o[t.id()]})).forEach((function(t){t.isParent()?d.merge(t):t.remove()})),d.forEach((function(t){return t.children().move({parent:null})})),d.forEach((function(t){return function(t){return e.getElementById(t.id())}(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==i.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===i.pan.x&&t.pan.y===i.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var u=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],h=0;h<u.length;h++){var p=u[h];null!=t[p]&&e[p](t[p])}return e.endBatch(),this}var g={};!!t?g.elements=this.elements().map((function(t){return t.json()})):(g.elements={},n.forEach((function(t){var e=t.group();g.elements[e]||(g.elements[e]=[]),g.elements[e].push(t.json())}))),this._private.styleEnabled&&(g.style=e.style().json()),g.data=Lv(e.data());var f=i.options;return g.zoomingEnabled=i.zoomingEnabled,g.userZoomingEnabled=i.userZoomingEnabled,g.zoom=i.zoom,g.minZoom=i.minZoom,g.maxZoom=i.maxZoom,g.panningEnabled=i.panningEnabled,g.userPanningEnabled=i.userPanningEnabled,g.pan=Lv(i.pan),g.boxSelectionEnabled=i.boxSelectionEnabled,g.renderer=Lv(f.renderer),g.hideEdgesOnViewport=f.hideEdgesOnViewport,g.textureOnViewport=f.textureOnViewport,g.wheelSensitivity=f.wheelSensitivity,g.motionBlur=f.motionBlur,g}}),ak.$id=ak.getElementById,[Cx,Bx,Ux,Vx,Gx,Wx,jx,Xx,nk,ok,rk].forEach((function(t){rv(ak,t)}));var lk={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},ck=function(t){return t.scratch("breadthfirst")},dk=function(t,e){return t.scratch("breadthfirst",e)};function uk(t){this.options=rv({},lk,t)}uk.prototype.run=function(){var t,e=this.options,i=e,n=e.cy,o=i.eles,r=o.nodes().filter((function(t){return!t.isParent()})),s=o,a=i.directed,l=i.maximal||i.maximalAdjustments>0,c=Ey(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(j_(i.roots))t=i.roots;else if(V_(i.roots)){for(var d=[],u=0;u<i.roots.length;u++){var h=i.roots[u],p=n.getElementById(h);d.push(p)}t=n.collection(d)}else if(H_(i.roots))t=n.$(i.roots);else if(a)t=r.roots();else{var g=o.components();t=n.collection();for(var f=function(e){var i=g[e],n=i.maxDegree(!1),o=i.filter((function(t){return t.degree(!1)===n}));t=t.add(o)},m=0;m<g.length;m++)f(m)}var _=[],v={},y=function(t,e){null==_[e]&&(_[e]=[]);var i=_[e].length;_[e].push(t),dk(t,{index:i,depth:e})};s.bfs({roots:t,directed:i.directed,visit:function(t,e,i,n,o){var r=t[0],s=r.id();y(r,o),v[s]=!0}});for(var b=[],E=0;E<r.length;E++){var T=r[E];v[T.id()]||b.push(T)}var x=function(t){for(var e=_[t],i=0;i<e.length;i++){var n=e[i];null!=n?dk(n,{depth:t,index:i}):(e.splice(i,1),i--)}},k=function(){for(var t=0;t<_.length;t++)x(t)},S=function(t,e){for(var i=ck(t),n=t.incomers().filter((function(t){return t.isNode()&&o.has(t)})),r=-1,s=t.id(),a=0;a<n.length;a++){var l=n[a],c=ck(l);r=Math.max(r,c.depth)}return i.depth<=r&&(e[s]?null:(function(t,e){var i=ck(t),n=i.depth,o=i.index;_[n][o]=null,y(t,e)}(t,r+1),e[s]=!0,!0))};if(a&&l){var C=[],w={},I=function(t){return C.push(t)};for(r.forEach((function(t){return C.push(t)}));C.length>0;){var R=C.shift(),A=S(R,w);if(A)R.outgoers().filter((function(t){return t.isNode()&&o.has(t)})).forEach(I);else if(null===A){Mv("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var O=0;if(i.avoidOverlap)for(var D=0;D<r.length;D++){var N=r[D].layoutDimensions(i),M=N.w,L=N.h;O=Math.max(O,M,L)}for(var P={},B=function(t){if(P[t.id()])return P[t.id()];for(var e=ck(t).depth,i=t.neighborhood(),n=0,o=0,s=0;s<i.length;s++){var a=i[s];if(!a.isEdge()&&!a.isParent()&&r.has(a)){var l=ck(a);if(null!=l){var c=l.index,d=l.depth;if(null!=c&&null!=d){var u=_[d].length;d<e&&(n+=c/u,o++)}}}}return n/=o=Math.max(1,o),0===o&&(n=0),P[t.id()]=n,n},F=function(t,e){var i=B(t)-B(e);return 0===i?ov(t.id(),e.id()):i},H=0;H<_.length;H++)_[H].sort(F),x(H);for(var U=[],V=0;V<b.length;V++)U.push(b[V]);_.unshift(U),k();for(var G=0,W=0;W<_.length;W++)G=Math.max(_[W].length,G);var z=c.x1+c.w/2,j=c.x1+c.h/2,X=_.reduce((function(t,e){return Math.max(t,e.length)}),0);return o.nodes().layoutPositions(this,i,(function(t){var e=ck(t),n=e.depth,o=e.index,r=_[n].length,s=Math.max(c.w/((i.grid?X:r)+1),O),a=Math.max(c.h/(_.length+1),O),l=Math.min(c.w/2/_.length,c.h/2/_.length);if(l=Math.max(l,O),i.circle){var d=l*n+l-(_.length>0&&_[0].length<=3?l/2:0),u=2*Math.PI/_[n].length*o;return 0===n&&1===_[0].length&&(d=1),{x:z+d*Math.cos(u),y:j+d*Math.sin(u)}}return{x:z+(o+1-(r+1)/2)*s,y:(n+1)*a}})),this};var hk={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function pk(t){this.options=rv({},hk,t)}pk.prototype.run=function(){var t=this.options,e=t,i=t.cy,n=e.eles,o=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=n.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));for(var s,a=Ey(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),l=a.x1+a.w/2,c=a.y1+a.h/2,d=(void 0===e.sweep?2*Math.PI-2*Math.PI/r.length:e.sweep)/Math.max(1,r.length-1),u=0,h=0;h<r.length;h++){var p=r[h].layoutDimensions(e),g=p.w,f=p.h;u=Math.max(u,g,f)}if(s=W_(e.radius)?e.radius:r.length<=1?0:Math.min(a.h,a.w)/2-u,r.length>1&&e.avoidOverlap){u*=1.75;var m=Math.cos(d)-Math.cos(0),_=Math.sin(d)-Math.sin(0),v=Math.sqrt(u*u/(m*m+_*_));s=Math.max(v,s)}return n.nodes().layoutPositions(this,e,(function(t,i){var n=e.startAngle+i*d*(o?1:-1),r=s*Math.cos(n),a=s*Math.sin(n);return{x:l+r,y:c+a}})),this};var gk,fk={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function mk(t){this.options=rv({},fk,t)}mk.prototype.run=function(){for(var t=this.options,e=t,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,n=t.cy,o=e.eles,r=o.nodes().not(":parent"),s=Ey(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),a=s.x1+s.w/2,l=s.y1+s.h/2,c=[],d=0,u=0;u<r.length;u++){var h,p=r[u];h=e.concentric(p),c.push({value:h,node:p}),p._private.scratch.concentric=h}r.updateStyle();for(var g=0;g<r.length;g++){var f=r[g].layoutDimensions(e);d=Math.max(d,f.w,f.h)}c.sort((function(t,e){return e.value-t.value}));for(var m=e.levelWidth(r),_=[[]],v=_[0],y=0;y<c.length;y++){var b=c[y];if(v.length>0)Math.abs(v[0].value-b.value)>=m&&(v=[],_.push(v));v.push(b)}var E=d+e.minNodeSpacing;if(!e.avoidOverlap){var T=_.length>0&&_[0].length>1,x=(Math.min(s.w,s.h)/2-E)/(_.length+T?1:0);E=Math.min(E,x)}for(var k=0,S=0;S<_.length;S++){var C=_[S],w=void 0===e.sweep?2*Math.PI-2*Math.PI/C.length:e.sweep,I=C.dTheta=w/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var R=Math.cos(I)-Math.cos(0),A=Math.sin(I)-Math.sin(0),O=Math.sqrt(E*E/(R*R+A*A));k=Math.max(O,k)}C.r=k,k+=E}if(e.equidistant){for(var D=0,N=0,M=0;M<_.length;M++){var L=_[M].r-N;D=Math.max(D,L)}N=0;for(var P=0;P<_.length;P++){var B=_[P];0===P&&(N=B.r),B.r=N,N+=D}}for(var F={},H=0;H<_.length;H++)for(var U=_[H],V=U.dTheta,G=U.r,W=0;W<U.length;W++){var z=U[W],j=e.startAngle+(i?1:-1)*V*W,X={x:a+G*Math.cos(j),y:l+G*Math.sin(j)};F[z.node.id()]=X}return o.nodes().layoutPositions(this,e,(function(t){var e=t.id();return F[e]})),this};var _k={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function vk(t){this.options=rv({},_k,t),this.options.layout=this}vk.prototype.run=function(){var t=this.options,e=t.cy,i=this;i.stopped=!1,!0!==t.animate&&!1!==t.animate||i.emit({type:"layoutstart",layout:i}),gk=!0===t.debug;var n=yk(e,i,t);gk&&undefined(),t.randomize&&Tk(n);var o=gv(),r=function(){kk(n,e,t),!0===t.fit&&e.fit(t.padding)},s=function(e){return!(i.stopped||e>=t.numIter)&&(Sk(n,t),n.temperature=n.temperature*t.coolingFactor,!(n.temperature<t.minTemp))},a=function(){if(!0===t.animate||!1===t.animate)r(),i.one("layoutstop",t.stop),i.emit({type:"layoutstop",layout:i});else{var e=t.eles.nodes(),o=xk(n,t,e);e.layoutPositions(i,t,o)}},l=0,c=!0;if(!0===t.animate){!function e(){for(var i=0;c&&i<t.refresh;)c=s(l),l++,i++;c?(gv()-o>=t.animationThreshold&&r(),pv(e)):(Bk(n,t),a())}()}else{for(;c;)c=s(l),l++;Bk(n,t),a()}return this},vk.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},vk.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var yk=function(t,e,i){for(var n=i.eles.edges(),o=i.eles.nodes(),r={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:i.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:Ey(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},s=i.eles.components(),a={},l=0;l<s.length;l++)for(var c=s[l],d=0;d<c.length;d++){a[c[d].id()]=l}for(l=0;l<r.nodeSize;l++){var u=(m=o[l]).layoutDimensions(i);(D={}).isLocked=m.locked(),D.id=m.data("id"),D.parentId=m.data("parent"),D.cmptId=a[m.id()],D.children=[],D.positionX=m.position("x"),D.positionY=m.position("y"),D.offsetX=0,D.offsetY=0,D.height=u.w,D.width=u.h,D.maxX=D.positionX+D.width/2,D.minX=D.positionX-D.width/2,D.maxY=D.positionY+D.height/2,D.minY=D.positionY-D.height/2,D.padLeft=parseFloat(m.style("padding")),D.padRight=parseFloat(m.style("padding")),D.padTop=parseFloat(m.style("padding")),D.padBottom=parseFloat(m.style("padding")),D.nodeRepulsion=U_(i.nodeRepulsion)?i.nodeRepulsion(m):i.nodeRepulsion,r.layoutNodes.push(D),r.idToIndex[D.id]=l}var h=[],p=0,g=-1,f=[];for(l=0;l<r.nodeSize;l++){var m,_=(m=r.layoutNodes[l]).parentId;null!=_?r.layoutNodes[r.idToIndex[_]].children.push(m.id):(h[++g]=m.id,f.push(m.id))}for(r.graphSet.push(f);p<=g;){var v=h[p++],y=r.idToIndex[v],b=r.layoutNodes[y].children;if(b.length>0){r.graphSet.push(b);for(l=0;l<b.length;l++)h[++g]=b[l]}}for(l=0;l<r.graphSet.length;l++){var E=r.graphSet[l];for(d=0;d<E.length;d++){var T=r.idToIndex[E[d]];r.indexToGraph[T]=l}}for(l=0;l<r.edgeSize;l++){var x=n[l],k={};k.id=x.data("id"),k.sourceId=x.data("source"),k.targetId=x.data("target");var S=U_(i.idealEdgeLength)?i.idealEdgeLength(x):i.idealEdgeLength,C=U_(i.edgeElasticity)?i.edgeElasticity(x):i.edgeElasticity,w=r.idToIndex[k.sourceId],I=r.idToIndex[k.targetId];if(r.indexToGraph[w]!=r.indexToGraph[I]){for(var R=bk(k.sourceId,k.targetId,r),A=r.graphSet[R],O=0,D=r.layoutNodes[w];-1===A.indexOf(D.id);)D=r.layoutNodes[r.idToIndex[D.parentId]],O++;for(D=r.layoutNodes[I];-1===A.indexOf(D.id);)D=r.layoutNodes[r.idToIndex[D.parentId]],O++;S*=O*i.nestingFactor}k.idealLength=S,k.elasticity=C,r.layoutEdges.push(k)}return r},bk=function(t,e,i){var n=Ek(t,e,0,i);return 2>n.count?0:n.graph},Ek=function t(e,i,n,o){var r=o.graphSet[n];if(-1<r.indexOf(e)&&-1<r.indexOf(i))return{count:2,graph:n};for(var s=0,a=0;a<r.length;a++){var l=r[a],c=o.idToIndex[l],d=o.layoutNodes[c].children;if(0!==d.length){var u=t(e,i,o.indexToGraph[o.idToIndex[d[0]]],o);if(0!==u.count){if(1!==u.count)return u;if(2===++s)break}}}return{count:s,graph:n}},Tk=function(t,e){for(var i=t.clientWidth,n=t.clientHeight,o=0;o<t.nodeSize;o++){var r=t.layoutNodes[o];0!==r.children.length||r.isLocked||(r.positionX=Math.random()*i,r.positionY=Math.random()*n)}},xk=function(t,e,i){var n=t.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(i.forEach((function(e){var i=t.layoutNodes[t.idToIndex[e.data("id")]];o.x1=Math.min(o.x1,i.positionX),o.x2=Math.max(o.x2,i.positionX),o.y1=Math.min(o.y1,i.positionY),o.y2=Math.max(o.y2,i.positionY)})),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(i,r){var s=t.layoutNodes[t.idToIndex[i.data("id")]];if(e.boundingBox){var a=(s.positionX-o.x1)/o.w,l=(s.positionY-o.y1)/o.h;return{x:n.x1+a*n.w,y:n.y1+l*n.h}}return{x:s.positionX,y:s.positionY}}},kk=function(t,e,i){var n=i.layout,o=i.eles.nodes(),r=xk(t,i,o);o.positions(r),!0!==t.ready&&(t.ready=!0,n.one("layoutready",i.ready),n.emit({type:"layoutready",layout:this}))},Sk=function(t,e,i){Ck(t,e),Ok(t),Dk(t,e),Nk(t),Mk(t)},Ck=function(t,e){for(var i=0;i<t.graphSet.length;i++)for(var n=t.graphSet[i],o=n.length,r=0;r<o;r++)for(var s=t.layoutNodes[t.idToIndex[n[r]]],a=r+1;a<o;a++){var l=t.layoutNodes[t.idToIndex[n[a]]];Ik(s,l,t,e)}},wk=function(t){return-t+2*t*Math.random()},Ik=function(t,e,i,n){if(t.cmptId===e.cmptId||i.isCompound){var o=e.positionX-t.positionX,r=e.positionY-t.positionY;0===o&&0===r&&(o=wk(1),r=wk(1));var s=Rk(t,e,o,r);if(s>0)var a=(c=n.nodeOverlap*s)*o/(f=Math.sqrt(o*o+r*r)),l=c*r/f;else{var c,d=Ak(t,o,r),u=Ak(e,-1*o,-1*r),h=u.x-d.x,p=u.y-d.y,g=h*h+p*p,f=Math.sqrt(g);a=(c=(t.nodeRepulsion+e.nodeRepulsion)/g)*h/f,l=c*p/f}t.isLocked||(t.offsetX-=a,t.offsetY-=l),e.isLocked||(e.offsetX+=a,e.offsetY+=l)}},Rk=function(t,e,i,n){if(i>0)var o=t.maxX-e.minX;else o=e.maxX-t.minX;if(n>0)var r=t.maxY-e.minY;else r=e.maxY-t.minY;return o>=0&&r>=0?Math.sqrt(o*o+r*r):0},Ak=function(t,e,i){var n=t.positionX,o=t.positionY,r=t.height||1,s=t.width||1,a=i/e,l=r/s,c={};return 0===e&&0<i||0===e&&0>i?(c.x=n,c.y=o+r/2,c):0<e&&-1*l<=a&&a<=l?(c.x=n+s/2,c.y=o+s*i/2/e,c):0>e&&-1*l<=a&&a<=l?(c.x=n-s/2,c.y=o-s*i/2/e,c):0<i&&(a<=-1*l||a>=l)?(c.x=n+r*e/2/i,c.y=o+r/2,c):0>i&&(a<=-1*l||a>=l)?(c.x=n-r*e/2/i,c.y=o-r/2,c):c},Ok=function(t,e){for(var i=0;i<t.edgeSize;i++){var n=t.layoutEdges[i],o=t.idToIndex[n.sourceId],r=t.layoutNodes[o],s=t.idToIndex[n.targetId],a=t.layoutNodes[s],l=a.positionX-r.positionX,c=a.positionY-r.positionY;if(0!==l||0!==c){var d=Ak(r,l,c),u=Ak(a,-1*l,-1*c),h=u.x-d.x,p=u.y-d.y,g=Math.sqrt(h*h+p*p),f=Math.pow(n.idealLength-g,2)/n.elasticity;if(0!==g)var m=f*h/g,_=f*p/g;else m=0,_=0;r.isLocked||(r.offsetX+=m,r.offsetY+=_),a.isLocked||(a.offsetX-=m,a.offsetY-=_)}}},Dk=function(t,e){for(var i=0;i<t.graphSet.length;i++){var n=t.graphSet[i],o=n.length;if(0===i)var r=t.clientHeight/2,s=t.clientWidth/2;else{var a=t.layoutNodes[t.idToIndex[n[0]]],l=t.layoutNodes[t.idToIndex[a.parentId]];r=l.positionX,s=l.positionY}for(var c=0;c<o;c++){var d=t.layoutNodes[t.idToIndex[n[c]]];if(!d.isLocked){var u=r-d.positionX,h=s-d.positionY,p=Math.sqrt(u*u+h*h);if(p>1){var g=e.gravity*u/p,f=e.gravity*h/p;d.offsetX+=g,d.offsetY+=f}}}}},Nk=function(t,e){var i=[],n=0,o=-1;for(i.push.apply(i,t.graphSet[0]),o+=t.graphSet[0].length;n<=o;){var r=i[n++],s=t.idToIndex[r],a=t.layoutNodes[s],l=a.children;if(0<l.length&&!a.isLocked){for(var c=a.offsetX,d=a.offsetY,u=0;u<l.length;u++){var h=t.layoutNodes[t.idToIndex[l[u]]];h.offsetX+=c,h.offsetY+=d,i[++o]=l[u]}a.offsetX=0,a.offsetY=0}}},Mk=function(t,e){for(var i=0;i<t.nodeSize;i++){0<(o=t.layoutNodes[i]).children.length&&(o.maxX=void 0,o.minX=void 0,o.maxY=void 0,o.minY=void 0)}for(i=0;i<t.nodeSize;i++){if(!(0<(o=t.layoutNodes[i]).children.length||o.isLocked)){var n=Lk(o.offsetX,o.offsetY,t.temperature);o.positionX+=n.x,o.positionY+=n.y,o.offsetX=0,o.offsetY=0,o.minX=o.positionX-o.width,o.maxX=o.positionX+o.width,o.minY=o.positionY-o.height,o.maxY=o.positionY+o.height,Pk(o,t)}}for(i=0;i<t.nodeSize;i++){var o;0<(o=t.layoutNodes[i]).children.length&&!o.isLocked&&(o.positionX=(o.maxX+o.minX)/2,o.positionY=(o.maxY+o.minY)/2,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY)}},Lk=function(t,e,i){var n=Math.sqrt(t*t+e*e);if(n>i)var o={x:i*t/n,y:i*e/n};else o={x:t,y:e};return o},Pk=function t(e,i){var n=e.parentId;if(null!=n){var o=i.layoutNodes[i.idToIndex[n]],r=!1;return(null==o.maxX||e.maxX+o.padRight>o.maxX)&&(o.maxX=e.maxX+o.padRight,r=!0),(null==o.minX||e.minX-o.padLeft<o.minX)&&(o.minX=e.minX-o.padLeft,r=!0),(null==o.maxY||e.maxY+o.padBottom>o.maxY)&&(o.maxY=e.maxY+o.padBottom,r=!0),(null==o.minY||e.minY-o.padTop<o.minY)&&(o.minY=e.minY-o.padTop,r=!0),r?t(o,i):void 0}},Bk=function(t,e){for(var i=t.layoutNodes,n=[],o=0;o<i.length;o++){var r=i[o],s=r.cmptId;(n[s]=n[s]||[]).push(r)}var a=0;for(o=0;o<n.length;o++){if(f=n[o]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var l=0;l<f.length;l++){var c=f[l];f.x1=Math.min(f.x1,c.positionX-c.width/2),f.x2=Math.max(f.x2,c.positionX+c.width/2),f.y1=Math.min(f.y1,c.positionY-c.height/2),f.y2=Math.max(f.y2,c.positionY+c.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,a+=f.w*f.h}}n.sort((function(t,e){return e.w*e.h-t.w*t.h}));var d=0,u=0,h=0,p=0,g=Math.sqrt(a)*t.clientWidth/t.clientHeight;for(o=0;o<n.length;o++){var f;if(f=n[o]){for(l=0;l<f.length;l++){(c=f[l]).isLocked||(c.positionX+=d-f.x1,c.positionY+=u-f.y1)}d+=f.w+e.componentSpacing,h+=f.w+e.componentSpacing,p=Math.max(p,f.h),h>g&&(u+=p+e.componentSpacing,d=0,h=0,p=0)}}},Fk={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Hk(t){this.options=rv({},Fk,t)}Hk.prototype.run=function(){var t=this.options,e=t,i=t.cy,n=e.eles,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));var r=Ey(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()});if(0===r.h||0===r.w)n.nodes().layoutPositions(this,e,(function(t){return{x:r.x1,y:r.y1}}));else{var s=o.size(),a=Math.sqrt(s*r.h/r.w),l=Math.round(a),c=Math.round(r.w/r.h*a),d=function(t){if(null==t)return Math.min(l,c);Math.min(l,c)==l?l=t:c=t},u=function(t){if(null==t)return Math.max(l,c);Math.max(l,c)==l?l=t:c=t},h=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=h&&null!=p)l=h,c=p;else if(null!=h&&null==p)l=h,c=Math.ceil(s/l);else if(null==h&&null!=p)c=p,l=Math.ceil(s/c);else if(c*l>s){var g=d(),f=u();(g-1)*f>=s?d(g-1):(f-1)*g>=s&&u(f-1)}else for(;c*l<s;){var m=d(),_=u();(_+1)*m>=s?u(_+1):d(m+1)}var v=r.w/c,y=r.h/l;if(e.condense&&(v=0,y=0),e.avoidOverlap)for(var b=0;b<o.length;b++){var E=o[b],T=E._private.position;null!=T.x&&null!=T.y||(T.x=0,T.y=0);var x=E.layoutDimensions(e),k=e.avoidOverlapPadding,S=x.w+k,C=x.h+k;v=Math.max(v,S),y=Math.max(y,C)}for(var w={},I=function(t,e){return!!w["c-"+t+"-"+e]},R=function(t,e){w["c-"+t+"-"+e]=!0},A=0,O=0,D=function(){++O>=c&&(O=0,A++)},N={},M=0;M<o.length;M++){var L=o[M],P=e.position(L);if(P&&(void 0!==P.row||void 0!==P.col)){var B={row:P.row,col:P.col};if(void 0===B.col)for(B.col=0;I(B.row,B.col);)B.col++;else if(void 0===B.row)for(B.row=0;I(B.row,B.col);)B.row++;N[L.id()]=B,R(B.row,B.col)}}o.layoutPositions(this,e,(function(t,e){var i,n;if(t.locked()||t.isParent())return!1;var o=N[t.id()];if(o)i=o.col*v+v/2+r.x1,n=o.row*y+y/2+r.y1;else{for(;I(A,O);)D();i=O*v+v/2+r.x1,n=A*y+y/2+r.y1,R(A,O),D()}return{x:i,y:n}}))}return this};var Uk={ready:function(){},stop:function(){}};function Vk(t){this.options=rv({},Uk,t)}Vk.prototype.run=function(){var t=this.options,e=t.eles,i=this;return t.cy,i.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),i.one("layoutready",t.ready),i.emit("layoutready"),i.one("layoutstop",t.stop),i.emit("layoutstop"),this},Vk.prototype.stop=function(){return this};var Gk={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Wk(t){this.options=rv({},Gk,t)}Wk.prototype.run=function(){var t=this.options,e=t.eles.nodes(),i=U_(t.positions);return e.layoutPositions(this,t,(function(e,n){var o=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(i)return t.positions(e);var n=t.positions[e._private.data.id];return null==n?null:n}(e);return!e.locked()&&null!=o&&o})),this};var zk={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function jk(t){this.options=rv({},zk,t)}jk.prototype.run=function(){var t=this.options,e=t.cy,i=t.eles,n=Ey(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return i.nodes().layoutPositions(this,t,(function(t,e){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}})),this};var Xk=[{name:"breadthfirst",impl:uk},{name:"circle",impl:pk},{name:"concentric",impl:mk},{name:"cose",impl:vk},{name:"grid",impl:Hk},{name:"null",impl:Vk},{name:"preset",impl:Wk},{name:"random",impl:jk}];function Yk(t){this.options=t,this.notifications=0}var Kk=function(){},Jk=function(){throw new Error("A headless instance can not render images")};Yk.prototype={recalculateRenderedStyle:Kk,notify:function(){this.notifications++},init:Kk,isHeadless:function(){return!0},png:Jk,jpg:Jk};var $k={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,i=function(t,e,i,n,o,r,s){var a=o.x-i/2-s,l=o.x+i/2+s,c=o.y-i/2-s,d=o.y+i/2+s;return a<=t&&t<=l&&c<=e&&e<=d},n=function(t,e,i,n,o){var r=t*Math.cos(n)-e*Math.sin(n),s=(t*Math.sin(n)+e*Math.cos(n))*i;return{x:r*i+o.x,y:s+o.y}},o=function(t,e,i,o){for(var r=[],s=0;s<t.length;s+=2){var a=t[s],l=t[s+1];r.push(n(a,l,e,i,o))}return r},r=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(n.x,n.y)}return e},s=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},a=function(n,a){H_(a)&&(a=t[a]),t[n]=rv({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,i,n,s,a){var l=r(o(this.points,i+2*a,n,s));return My(t,e,l)},roughCollide:i,draw:function(t,i,n,r){var s=o(this.points,i,n,r);e.arrowShapeImpl("polygon")(t,s)},spacing:function(t){return 0},gap:s},a)};a("none",{collide:Rv,roughCollide:Rv,draw:Ov,spacing:Av,gap:Av}),a("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),a("arrow","triangle"),a("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:i,draw:function(t,i,r,s,a){var l=o(this.points,i,r,s),c=this.controlPoint,d=n(c[0],c[1],i,r,s);e.arrowShapeImpl(this.name)(t,l,d)},gap:function(t){return.8*s(t)}}),a("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,i,n,s,a,l){var c=r(o(this.points,i+2*l,n,s)),d=r(o(this.pointsTee,i+2*l,n,s));return My(t,e,c)||My(t,e,d)},draw:function(t,i,n,r,s){var a=o(this.points,i,n,r),l=o(this.pointsTee,i,n,r);e.arrowShapeImpl(this.name)(t,a,l)}}),a("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,i,n,s,a,l){var c=s,d=Math.pow(c.x-t,2)+Math.pow(c.y-e,2)<=Math.pow((i+2*l)*this.radius,2),u=r(o(this.points,i+2*l,n,s));return My(t,e,u)||d},draw:function(t,i,n,r,s){var a=o(this.pointsTr,i,n,r);e.arrowShapeImpl(this.name)(t,a,r.x,r.y,this.radius*i)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),a("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var i=this.baseCrossLinePts.slice(),n=e/t;return i[3]=i[3]-n,i[5]=i[5]-n,i},collide:function(t,e,i,n,s,a,l){var c=r(o(this.points,i+2*l,n,s)),d=r(o(this.crossLinePts(i,a),i+2*l,n,s));return My(t,e,c)||My(t,e,d)},draw:function(t,i,n,r,s){var a=o(this.points,i,n,r),l=o(this.crossLinePts(i,s),i,n,r);e.arrowShapeImpl(this.name)(t,a,l)}}),a("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*s(t)}}),a("circle",{radius:.15,collide:function(t,e,i,n,o,r,s){var a=o;return Math.pow(a.x-t,2)+Math.pow(a.y-e,2)<=Math.pow((i+2*s)*this.radius,2)},draw:function(t,i,n,o,r){e.arrowShapeImpl(this.name)(t,o.x,o.y,this.radius*i)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),a("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),a("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),a("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),a("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},qk={projectIntoViewport:function(t,e){var i=this.cy,n=this.findContainerClientCoords(),o=n[0],r=n[1],s=n[4],a=i.pan(),l=i.zoom();return[((t-o)/s-a.x)/l,((e-r)/s-a.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),i=D_.getComputedStyle(t),n=function(t){return parseFloat(i.getPropertyValue(t))},o=n("padding-left"),r=n("padding-right"),s=n("padding-top"),a=n("padding-bottom"),l=n("border-left-width"),c=n("border-right-width"),d=n("border-top-width"),u=(n("border-bottom-width"),t.clientWidth),h=t.clientHeight,p=o+r,g=s+a,f=l+c,m=e.width/(u+f),_=u-p,v=h-g,y=e.left+o+l,b=e.top+s+d;return this.containerBB=[y,b,_,v,m]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,i,n){return this.findNearestElements(t,e,i,n)[0]},findNearestElements:function(t,e,i,n){var o,r,s=this,a=this,l=a.getCachedZSortedEles(),c=[],d=a.cy.zoom(),u=a.cy.hasCompoundNodes(),h=(n?24:8)/d,p=(n?8:2)/d,g=(n?8:2)/d,f=1/0;function m(t,e){if(t.isNode()){if(r)return;r=t,c.push(t)}if(t.isEdge()&&(null==e||e<f))if(o){if(o.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&o.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var i=0;i<c.length;i++)if(c[i].isEdge()){c[i]=t,o=t,f=null!=e?e:f;break}}else c.push(t),o=t,f=null!=e?e:f}function _(i){var n=i.outerWidth()+2*p,o=i.outerHeight()+2*p,r=n/2,l=o/2,c=i.position();if(c.x-r<=t&&t<=c.x+r&&c.y-l<=e&&e<=c.y+l&&a.nodeShapes[s.getNodeShape(i)].checkPoint(t,e,0,n,o,c.x,c.y))return m(i,0),!0}function v(i){var n,o=i._private,r=o.rscratch,l=i.pstyle("width").pfValue,d=i.pstyle("arrow-scale").value,p=l/2+h,g=p*p,f=2*p,v=o.source,y=o.target;if("segments"===r.edgeType||"straight"===r.edgeType||"haystack"===r.edgeType){for(var b=r.allpts,E=0;E+3<b.length;E+=2)if(Ay(t,e,b[E],b[E+1],b[E+2],b[E+3],f)&&g>(n=Ny(t,e,b[E],b[E+1],b[E+2],b[E+3])))return m(i,n),!0}else if("bezier"===r.edgeType||"multibezier"===r.edgeType||"self"===r.edgeType||"compound"===r.edgeType)for(b=r.allpts,E=0;E+5<r.allpts.length;E+=4)if(Oy(t,e,b[E],b[E+1],b[E+2],b[E+3],b[E+4],b[E+5],f)&&g>(n=Dy(t,e,b[E],b[E+1],b[E+2],b[E+3],b[E+4],b[E+5])))return m(i,n),!0;v=v||o.source,y=y||o.target;var T=s.getArrowWidth(l,d),x=[{name:"source",x:r.arrowStartX,y:r.arrowStartY,angle:r.srcArrowAngle},{name:"target",x:r.arrowEndX,y:r.arrowEndY,angle:r.tgtArrowAngle},{name:"mid-source",x:r.midX,y:r.midY,angle:r.midsrcArrowAngle},{name:"mid-target",x:r.midX,y:r.midY,angle:r.midtgtArrowAngle}];for(E=0;E<x.length;E++){var k=x[E],S=a.arrowShapes[i.pstyle(k.name+"-arrow-shape").value],C=i.pstyle("width").pfValue;if(S.roughCollide(t,e,T,k.angle,{x:k.x,y:k.y},C,h)&&S.collide(t,e,T,k.angle,{x:k.x,y:k.y},C,h))return m(i),!0}u&&c.length>0&&(_(v),_(y))}function y(t,e,i){return Gv(t,e,i)}function b(i,n){var o,r=i._private,s=g;o=n?n+"-":"",i.boundingBox();var a=r.labelBounds[n||"main"],l=i.pstyle(o+"label").value;if("yes"===i.pstyle("text-events").strValue&&l){var c=y(r.rscratch,"labelX",n),d=y(r.rscratch,"labelY",n),u=y(r.rscratch,"labelAngle",n),h=i.pstyle(o+"text-margin-x").pfValue,p=i.pstyle(o+"text-margin-y").pfValue,f=a.x1-s-h,_=a.x2+s-h,v=a.y1-s-p,b=a.y2+s-p;if(u){var E=Math.cos(u),T=Math.sin(u),x=function(t,e){return{x:(t-=c)*E-(e-=d)*T+c,y:t*T+e*E+d}},k=x(f,v),S=x(f,b),C=x(_,v),w=x(_,b),I=[k.x+h,k.y+p,C.x+h,C.y+p,w.x+h,w.y+p,S.x+h,S.y+p];if(My(t,e,I))return m(i),!0}else if(wy(a,t,e))return m(i),!0}}i&&(l=l.interactive);for(var E=l.length-1;E>=0;E--){var T=l[E];T.isNode()?_(T)||b(T):v(T)||b(T)||b(T,"source")||b(T,"target")}return c},getAllInBox:function(t,e,i,n){for(var o,r,s=this.getCachedZSortedEles().interactive,a=[],l=Math.min(t,i),c=Math.max(t,i),d=Math.min(e,n),u=Math.max(e,n),h=Ey({x1:t=l,y1:e=d,x2:i=c,y2:n=u}),p=0;p<s.length;p++){var g=s[p];if(g.isNode()){var f=g,m=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Cy(h,m)&&!Iy(m,h)&&a.push(f)}else{var _=g,v=_._private,y=v.rscratch;if(null!=y.startX&&null!=y.startY&&!wy(h,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!wy(h,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var b=v.rstyle.bezierPts||v.rstyle.linePts||v.rstyle.haystackPts,E=!0,T=0;T<b.length;T++)if(o=h,r=b[T],!wy(o,r.x,r.y)){E=!1;break}E&&a.push(_)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||a.push(_)}}return a}},Zk={calculateArrowAngles:function(t){var e,i,n,o,r,s,a=t._private.rscratch,l="haystack"===a.edgeType,c="bezier"===a.edgeType,d="multibezier"===a.edgeType,u="segments"===a.edgeType,h="compound"===a.edgeType,p="self"===a.edgeType;if(l?(n=a.haystackPts[0],o=a.haystackPts[1],r=a.haystackPts[2],s=a.haystackPts[3]):(n=a.arrowStartX,o=a.arrowStartY,r=a.arrowEndX,s=a.arrowEndY),f=a.midX,m=a.midY,u)e=n-a.segpts[0],i=o-a.segpts[1];else if(d||h||p||c){var g=a.allpts;e=n-vy(g[0],g[2],g[4],.1),i=o-vy(g[1],g[3],g[5],.1)}else e=n-f,i=o-m;a.srcArrowAngle=hy(e,i);var f=a.midX,m=a.midY;if(l&&(f=(n+r)/2,m=(o+s)/2),e=r-n,i=s-o,u)if((g=a.allpts).length/2%2==0){var _=(v=g.length/2)-2;e=g[v]-g[_],i=g[v+1]-g[_+1]}else{_=(v=g.length/2-1)-2;var v,y=v+2;e=g[v]-g[_],i=g[v+1]-g[_+1]}else if(d||h||p){var b,E,T,x,g=a.allpts;if(a.ctrlpts.length/2%2==0){var k=(S=(C=g.length/2-1)+2)+2;b=vy(g[C],g[S],g[k],0),E=vy(g[C+1],g[S+1],g[k+1],0),T=vy(g[C],g[S],g[k],1e-4),x=vy(g[C+1],g[S+1],g[k+1],1e-4)}else{var S,C;k=(S=g.length/2-1)+2;b=vy(g[C=S-2],g[S],g[k],.4999),E=vy(g[C+1],g[S+1],g[k+1],.4999),T=vy(g[C],g[S],g[k],.5),x=vy(g[C+1],g[S+1],g[k+1],.5)}e=T-b,i=x-E}(a.midtgtArrowAngle=hy(e,i),a.midDispX=e,a.midDispY=i,e*=-1,i*=-1,u)&&((g=a.allpts).length/2%2==0||(e=-(g[y=(v=g.length/2-1)+2]-g[v]),i=-(g[y+1]-g[v+1])));if(a.midsrcArrowAngle=hy(e,i),u)e=r-a.segpts[a.segpts.length-2],i=s-a.segpts[a.segpts.length-1];else if(d||h||p||c){var w=(g=a.allpts).length;e=r-vy(g[w-6],g[w-4],g[w-2],.9),i=s-vy(g[w-5],g[w-3],g[w-1],.9)}else e=r-f,i=s-m;a.tgtArrowAngle=hy(e,i)}};Zk.getArrowWidth=Zk.getArrowHeight=function(t,e){var i=this.arrowWidthCache=this.arrowWidthCache||{},n=i[t+", "+e];return n||(n=Math.max(Math.pow(13.37*t,.9),29)*e,i[t+", "+e]=n,n)};var Qk={};function tS(t){var e=[];if(null!=t){for(var i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e.push({x:n,y:o})}return e}}Qk.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=i._private,o=n.rscratch;if(!o.haystack){var r=2*Math.random()*Math.PI;o.source={x:Math.cos(r),y:Math.sin(r)},r=2*Math.random()*Math.PI,o.target={x:Math.cos(r),y:Math.sin(r)}}var s=n.source,a=n.target,l=s.position(),c=a.position(),d=s.width(),u=a.width(),h=s.height(),p=a.height(),g=i.pstyle("haystack-radius").value/2;o.haystackPts=o.allpts=[o.source.x*d*g+l.x,o.source.y*h*g+l.y,o.target.x*u*g+c.x,o.target.y*p*g+c.y],o.midX=(o.allpts[0]+o.allpts[2])/2,o.midY=(o.allpts[1]+o.allpts[3])/2,o.edgeType="haystack",o.haystack=!0,this.storeEdgeProjections(i),this.calculateArrowAngles(i),this.recalculateEdgeLabelProjections(i),this.calculateLabelAngles(i)}},Qk.findSegmentsPoints=function(t,e){var i=t._private.rscratch,n=e.posPts,o=e.intersectionPts,r=e.vectorNormInverse,s=t.pstyle("edge-distances").value,a=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),c=Math.min(a.pfValue.length,l.pfValue.length);i.edgeType="segments",i.segpts=[];for(var d=0;d<c;d++){var u=a.pfValue[d],h=l.pfValue[d],p=1-u,g=u,f="node-position"===s?n:o,m={x:f.x1*p+f.x2*g,y:f.y1*p+f.y2*g};i.segpts.push(m.x+r.x*h,m.y+r.y*h)}},Qk.findLoopPoints=function(t,e,i,n){var o=t._private.rscratch,r=e.dirCounts,s=e.srcPos,a=t.pstyle("control-point-distances"),l=a?a.pfValue[0]:void 0,c=t.pstyle("loop-direction").pfValue,d=t.pstyle("loop-sweep").pfValue,u=t.pstyle("control-point-step-size").pfValue;o.edgeType="self";var h=i,p=u;n&&(h=0,p=l);var g=c-Math.PI/2,f=g-d/2,m=g+d/2,_=String(c+"_"+d);h=void 0===r[_]?r[_]=0:++r[_],o.ctrlpts=[s.x+1.4*Math.cos(f)*p*(h/3+1),s.y+1.4*Math.sin(f)*p*(h/3+1),s.x+1.4*Math.cos(m)*p*(h/3+1),s.y+1.4*Math.sin(m)*p*(h/3+1)]},Qk.findCompoundLoopPoints=function(t,e,i,n){var o=t._private.rscratch;o.edgeType="compound";var r=e.srcPos,s=e.tgtPos,a=e.srcW,l=e.srcH,c=e.tgtW,d=e.tgtH,u=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),p=h?h.pfValue[0]:void 0,g=i,f=u;n&&(g=0,f=p);var m={x:r.x-a/2,y:r.y-l/2},_={x:s.x-c/2,y:s.y-d/2},v={x:Math.min(m.x,_.x),y:Math.min(m.y,_.y)},y=Math.max(.5,Math.log(.01*a)),b=Math.max(.5,Math.log(.01*c));o.ctrlpts=[v.x,v.y-(1+Math.pow(50,1.12)/100)*f*(g/3+1)*y,v.x-(1+Math.pow(50,1.12)/100)*f*(g/3+1)*b,v.y]},Qk.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},Qk.findBezierPoints=function(t,e,i,n,o){var r=t._private.rscratch,s=e.vectorNormInverse,a=e.posPts,l=e.intersectionPts,c=t.pstyle("edge-distances").value,d=t.pstyle("control-point-step-size").pfValue,u=t.pstyle("control-point-distances"),h=t.pstyle("control-point-weights"),p=u&&h?Math.min(u.value.length,h.value.length):1,g=u?u.pfValue[0]:void 0,f=h.value[0],m=n;r.edgeType=m?"multibezier":"bezier",r.ctrlpts=[];for(var _=0;_<p;_++){var v=(.5-e.eles.length/2+i)*d*(o?-1:1),y=void 0,b=gy(v);m&&(g=u?u.pfValue[_]:d,f=h.value[_]);var E=void 0!==(y=n?g:void 0!==g?b*g:void 0)?y:v,T=1-f,x=f,k="node-position"===c?a:l,S={x:k.x1*T+k.x2*x,y:k.y1*T+k.y2*x};r.ctrlpts.push(S.x+s.x*E,S.y+s.y*E)}},Qk.findTaxiPoints=function(t,e){var i=t._private.rscratch;i.edgeType="segments";var n="vertical",o="horizontal",r="leftward",s="rightward",a="downward",l="upward",c=e.posPts,d=e.srcW,u=e.srcH,h=e.tgtW,p=e.tgtH,g="node-position"!==t.pstyle("edge-distances").value,f=t.pstyle("taxi-direction").value,m=f,_=t.pstyle("taxi-turn"),v="%"===_.units,y=_.pfValue,b=y<0,E=t.pstyle("taxi-turn-min-distance").pfValue,T=g?(d+h)/2:0,x=g?(u+p)/2:0,k=c.x2-c.x1,S=c.y2-c.y1,C=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},w=C(k,T),I=C(S,x),R=!1;"auto"===m?f=Math.abs(w)>Math.abs(I)?o:n:m===l||m===a?(f=n,R=!0):m!==r&&m!==s||(f=o,R=!0);var A,O=f===n,D=O?I:w,N=O?S:k,M=gy(N),L=!1;(R&&(v||b)||!(m===a&&N<0||m===l&&N>0||m===r&&N>0||m===s&&N<0)||(D=(M*=-1)*Math.abs(D),L=!0),v)?A=(y<0?1+y:y)*D:A=(y<0?D:0)+y*M;var P=function(t){return Math.abs(t)<E||Math.abs(t)>=Math.abs(D)},B=P(A),F=P(Math.abs(D)-Math.abs(A));if((B||F)&&!L)if(O){var H=Math.abs(N)<=u/2,U=Math.abs(k)<=h/2;if(H){var V=(c.x1+c.x2)/2,G=c.y1,W=c.y2;i.segpts=[V,G,V,W]}else if(U){var z=(c.y1+c.y2)/2,j=c.x1,X=c.x2;i.segpts=[j,z,X,z]}else i.segpts=[c.x1,c.y2]}else{var Y=Math.abs(N)<=d/2,K=Math.abs(S)<=p/2;if(Y){var J=(c.y1+c.y2)/2,$=c.x1,q=c.x2;i.segpts=[$,J,q,J]}else if(K){var Z=(c.x1+c.x2)/2,Q=c.y1,tt=c.y2;i.segpts=[Z,Q,Z,tt]}else i.segpts=[c.x2,c.y1]}else if(O){var et=c.y1+A+(g?u/2*M:0),it=c.x1,nt=c.x2;i.segpts=[it,et,nt,et]}else{var ot=c.x1+A+(g?d/2*M:0),rt=c.y1,st=c.y2;i.segpts=[ot,rt,ot,st]}},Qk.tryToCorrectInvalidPoints=function(t,e){var i=t._private.rscratch;if("bezier"===i.edgeType){var n=e.srcPos,o=e.tgtPos,r=e.srcW,s=e.srcH,a=e.tgtW,l=e.tgtH,c=e.srcShape,d=e.tgtShape,u=!W_(i.startX)||!W_(i.startY),h=!W_(i.arrowStartX)||!W_(i.arrowStartY),p=!W_(i.endX)||!W_(i.endY),g=!W_(i.arrowEndX)||!W_(i.arrowEndY),f=3*(this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth),m=fy({x:i.ctrlpts[0],y:i.ctrlpts[1]},{x:i.startX,y:i.startY}),_=m<f,v=fy({x:i.ctrlpts[0],y:i.ctrlpts[1]},{x:i.endX,y:i.endY}),y=v<f,b=!1;if(u||h||_){b=!0;var E={x:i.ctrlpts[0]-n.x,y:i.ctrlpts[1]-n.y},T=Math.sqrt(E.x*E.x+E.y*E.y),x={x:E.x/T,y:E.y/T},k=Math.max(r,s),S={x:i.ctrlpts[0]+2*x.x*k,y:i.ctrlpts[1]+2*x.y*k},C=c.intersectLine(n.x,n.y,r,s,S.x,S.y,0);_?(i.ctrlpts[0]=i.ctrlpts[0]+x.x*(f-m),i.ctrlpts[1]=i.ctrlpts[1]+x.y*(f-m)):(i.ctrlpts[0]=C[0]+x.x*f,i.ctrlpts[1]=C[1]+x.y*f)}if(p||g||y){b=!0;var w={x:i.ctrlpts[0]-o.x,y:i.ctrlpts[1]-o.y},I=Math.sqrt(w.x*w.x+w.y*w.y),R={x:w.x/I,y:w.y/I},A=Math.max(r,s),O={x:i.ctrlpts[0]+2*R.x*A,y:i.ctrlpts[1]+2*R.y*A},D=d.intersectLine(o.x,o.y,a,l,O.x,O.y,0);y?(i.ctrlpts[0]=i.ctrlpts[0]+R.x*(f-v),i.ctrlpts[1]=i.ctrlpts[1]+R.y*(f-v)):(i.ctrlpts[0]=D[0]+R.x*f,i.ctrlpts[1]=D[1]+R.y*f)}b&&this.findEndpoints(t)}},Qk.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var i=0;i+1<e.ctrlpts.length;i+=2)e.allpts.push(e.ctrlpts[i],e.ctrlpts[i+1]),i+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[i]+e.ctrlpts[i+2])/2,(e.ctrlpts[i+1]+e.ctrlpts[i+3])/2);var n;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,.5,e.midX=vy(e.allpts[n],e.allpts[n+2],e.allpts[n+4],.5),e.midY=vy(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var o=e.segpts.length/2,r=o-2;e.midX=(e.segpts[r]+e.segpts[o])/2,e.midY=(e.segpts[r+1]+e.segpts[o+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}},Qk.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||W_(e.startX)&&W_(e.startY)&&W_(e.endX)&&W_(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Mv("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Qk.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var i=this,n=i.cy.hasCompoundNodes(),o={map:new zv,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var i=this.map.get(t[0]);null==i&&(i=new zv,this.map.set(t[0],i)),i.set(t[1],e)}},r=[],s=[],a=0;a<t.length;a++){var l=t[a],c=l._private,d=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==d){var u="unbundled-bezier"===d||"segments"===d||"straight"===d||"taxi"===d,h="unbundled-bezier"===d||"bezier"===d,p=c.source,g=c.target,f=[p.poolIndex(),g.poolIndex()].sort(),m=o.get(f);null==m&&(m={eles:[]},o.set(f,m),r.push(f)),m.eles.push(l),u&&(m.hasUnbundled=!0),h&&(m.hasBezier=!0)}else s.push(l)}for(var _=function(t){var s=r[t],a=o.get(s),l=void 0;if(!a.hasUnbundled){var c=a.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));Vv(a.eles),c.forEach((function(t){return a.eles.push(t)})),a.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var d=a.eles[0],u=d.source(),h=d.target();if(u.poolIndex()>h.poolIndex()){var p=u;u=h,h=p}var g=a.srcPos=u.position(),f=a.tgtPos=h.position(),m=a.srcW=u.outerWidth(),_=a.srcH=u.outerHeight(),v=a.tgtW=h.outerWidth(),y=a.tgtH=h.outerHeight(),b=a.srcShape=i.nodeShapes[e.getNodeShape(u)],E=a.tgtShape=i.nodeShapes[e.getNodeShape(h)];a.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var T=0;T<a.eles.length;T++){var x=a.eles[T],k=x[0]._private.rscratch,S=x.pstyle("curve-style").value,C="unbundled-bezier"===S||"segments"===S||"taxi"===S,w=!u.same(x.source());if(!a.calculatedIntersection&&u!==h&&(a.hasBezier||a.hasUnbundled)){a.calculatedIntersection=!0;var I=b.intersectLine(g.x,g.y,m,_,f.x,f.y,0),R=a.srcIntn=I,A=E.intersectLine(f.x,f.y,v,y,g.x,g.y,0),O=a.tgtIntn=A,D=a.intersectionPts={x1:I[0],x2:A[0],y1:I[1],y2:A[1]},N=a.posPts={x1:g.x,x2:f.x,y1:g.y,y2:f.y},M=A[1]-I[1],L=A[0]-I[0],P=Math.sqrt(L*L+M*M),B=a.vector={x:L,y:M},F=a.vectorNorm={x:B.x/P,y:B.y/P},H={x:-F.y,y:F.x};a.nodesOverlap=!W_(P)||E.checkPoint(I[0],I[1],0,v,y,f.x,f.y)||b.checkPoint(A[0],A[1],0,m,_,g.x,g.y),a.vectorNormInverse=H,l={nodesOverlap:a.nodesOverlap,dirCounts:a.dirCounts,calculatedIntersection:!0,hasBezier:a.hasBezier,hasUnbundled:a.hasUnbundled,eles:a.eles,srcPos:f,tgtPos:g,srcW:v,srcH:y,tgtW:m,tgtH:_,srcIntn:O,tgtIntn:R,srcShape:E,tgtShape:b,posPts:{x1:N.x2,y1:N.y2,x2:N.x1,y2:N.y1},intersectionPts:{x1:D.x2,y1:D.y2,x2:D.x1,y2:D.y1},vector:{x:-B.x,y:-B.y},vectorNorm:{x:-F.x,y:-F.y},vectorNormInverse:{x:-H.x,y:-H.y}}}var U=w?l:a;k.nodesOverlap=U.nodesOverlap,k.srcIntn=U.srcIntn,k.tgtIntn=U.tgtIntn,n&&(u.isParent()||u.isChild()||h.isParent()||h.isChild())&&(u.parents().anySame(h)||h.parents().anySame(u)||u.same(h)&&u.isParent())?e.findCompoundLoopPoints(x,U,T,C):u===h?e.findLoopPoints(x,U,T,C):"segments"===S?e.findSegmentsPoints(x,U):"taxi"===S?e.findTaxiPoints(x,U):"straight"===S||!C&&a.eles.length%2==1&&T===Math.floor(a.eles.length/2)?e.findStraightEdgePoints(x):e.findBezierPoints(x,U,T,C,w),e.findEndpoints(x),e.tryToCorrectInvalidPoints(x,U),e.checkForInvalidEdgeWarning(x),e.storeAllpts(x),e.storeEdgeProjections(x),e.calculateArrowAngles(x),e.recalculateEdgeLabelProjections(x),e.calculateLabelAngles(x)}},v=0;v<r.length;v++)_(v);this.findHaystackPoints(s)}},Qk.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),tS(e.segpts)},Qk.getControlPoints=function(t){var e=t[0]._private.rscratch,i=e.edgeType;if("bezier"===i||"multibezier"===i||"self"===i||"compound"===i)return this.recalculateRenderedStyle(t),tS(e.ctrlpts)},Qk.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var eS={manualEndptToPx:function(t,e){var i=t.position(),n=t.outerWidth(),o=t.outerHeight();if(2===e.value.length){var r=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(r[0]=r[0]*n),"%"===e.units[1]&&(r[1]=r[1]*o),r[0]+=i.x,r[1]+=i.y,r}var s=e.pfValue[0];s=-Math.PI/2+s;var a=2*Math.max(n,o),l=[i.x+Math.cos(s)*a,i.y+Math.sin(s)*a];return this.nodeShapes[this.getNodeShape(t)].intersectLine(i.x,i.y,n,o,l[0],l[1],0)},findEndpoints:function(t){var e,i,n,o,r,s=this,a=t.source()[0],l=t.target()[0],c=a.position(),d=l.position(),u=t.pstyle("target-arrow-shape").value,h=t.pstyle("source-arrow-shape").value,p=t.pstyle("target-distance-from-node").pfValue,g=t.pstyle("source-distance-from-node").pfValue,f=t.pstyle("curve-style").value,m=t._private.rscratch,_=m.edgeType,v="self"===_||"compound"===_,y="bezier"===_||"multibezier"===_||v,b="bezier"!==_,E="straight"===_||"segments"===_,T="segments"===_,x=y||b||E,k=v||"taxi"===f,S=t.pstyle("source-endpoint"),C=k?"outside-to-node":S.value,w=t.pstyle("target-endpoint"),I=k?"outside-to-node":w.value;if(m.srcManEndpt=S,m.tgtManEndpt=w,y){var R=[m.ctrlpts[0],m.ctrlpts[1]];i=b?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:R,n=R}else if(E){var A=T?m.segpts.slice(0,2):[d.x,d.y];i=T?m.segpts.slice(m.segpts.length-2):[c.x,c.y],n=A}if("inside-to-node"===I)e=[d.x,d.y];else if(w.units)e=this.manualEndptToPx(l,w);else if("outside-to-line"===I)e=m.tgtIntn;else if("outside-to-node"===I||"outside-to-node-or-label"===I?o=i:"outside-to-line"!==I&&"outside-to-line-or-label"!==I||(o=[c.x,c.y]),e=s.nodeShapes[this.getNodeShape(l)].intersectLine(d.x,d.y,l.outerWidth(),l.outerHeight(),o[0],o[1],0),"outside-to-node-or-label"===I||"outside-to-line-or-label"===I){var O=l._private.rscratch,D=O.labelWidth,N=O.labelHeight,M=O.labelX,L=O.labelY,P=D/2,B=N/2,F=l.pstyle("text-valign").value;"top"===F?L-=B:"bottom"===F&&(L+=B);var H=l.pstyle("text-halign").value;"left"===H?M-=P:"right"===H&&(M+=P);var U=Gy(o[0],o[1],[M-P,L-B,M+P,L-B,M+P,L+B,M-P,L+B],d.x,d.y);if(U.length>0){var V=c,G=my(V,uy(e)),W=my(V,uy(U)),z=G;if(W<G&&(e=U,z=W),U.length>2)my(V,{x:U[2],y:U[3]})<z&&(e=[U[2],U[3]])}}var j=Wy(e,i,s.arrowShapes[u].spacing(t)+p),X=Wy(e,i,s.arrowShapes[u].gap(t)+p);if(m.endX=X[0],m.endY=X[1],m.arrowEndX=j[0],m.arrowEndY=j[1],"inside-to-node"===C)e=[c.x,c.y];else if(S.units)e=this.manualEndptToPx(a,S);else if("outside-to-line"===C)e=m.srcIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?r=n:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(r=[d.x,d.y]),e=s.nodeShapes[this.getNodeShape(a)].intersectLine(c.x,c.y,a.outerWidth(),a.outerHeight(),r[0],r[1],0),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var Y=a._private.rscratch,K=Y.labelWidth,J=Y.labelHeight,$=Y.labelX,q=Y.labelY,Z=K/2,Q=J/2,tt=a.pstyle("text-valign").value;"top"===tt?q-=Q:"bottom"===tt&&(q+=Q);var et=a.pstyle("text-halign").value;"left"===et?$-=Z:"right"===et&&($+=Z);var it=Gy(r[0],r[1],[$-Z,q-Q,$+Z,q-Q,$+Z,q+Q,$-Z,q+Q],c.x,c.y);if(it.length>0){var nt=d,ot=my(nt,uy(e)),rt=my(nt,uy(it)),st=ot;if(rt<ot&&(e=[it[0],it[1]],st=rt),it.length>2)my(nt,{x:it[2],y:it[3]})<st&&(e=[it[2],it[3]])}}var at=Wy(e,n,s.arrowShapes[h].spacing(t)+g),lt=Wy(e,n,s.arrowShapes[h].gap(t)+g);m.startX=lt[0],m.startY=lt[1],m.arrowStartX=at[0],m.arrowStartY=at[1],x&&(W_(m.startX)&&W_(m.startY)&&W_(m.endX)&&W_(m.endY)?m.badLine=!1:m.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}},iS={};function nS(t,e,i){for(var n=function(t,e,i,n){return vy(t,e,i,n)},o=e._private.rstyle.bezierPts,r=0;r<t.bezierProjPcts.length;r++){var s=t.bezierProjPcts[r];o.push({x:n(i[0],i[2],i[4],s),y:n(i[1],i[3],i[5],s)})}}iS.storeEdgeProjections=function(t){var e=t._private,i=e.rscratch,n=i.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){e.rstyle.bezierPts=[];for(var o=0;o+5<i.allpts.length;o+=4)nS(this,t,i.allpts.slice(o,o+6))}else if("segments"===n){var r=e.rstyle.linePts=[];for(o=0;o+1<i.allpts.length;o+=2)r.push({x:i.allpts[o],y:i.allpts[o+1]})}else if("haystack"===n){var s=i.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},iS.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var oS={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!$_(e)){var i,n,o=t._private,r=t.width(),s=t.height(),a=t.padding(),l=t.position(),c=t.pstyle("text-halign").strValue,d=t.pstyle("text-valign").strValue,u=o.rscratch,h=o.rstyle;switch(c){case"left":i=l.x-r/2-a;break;case"right":i=l.x+r/2+a;break;default:i=l.x}switch(d){case"top":n=l.y-s/2-a;break;case"bottom":n=l.y+s/2+a;break;default:n=l.y}u.labelX=i,u.labelY=n,h.labelX=i,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},rS=function(t,e){var i=Math.atan(e/t);return 0===t&&i<0&&(i*=-1),i},sS=function(t,e){var i=e.x-t.x,n=e.y-t.y;return rS(i,n)};oS.recalculateEdgeLabelProjections=function(t){var e,i=t._private,n=i.rscratch,o=this,r={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(r.mid||r.source||r.target){e={x:n.midX,y:n.midY};var s=function(t,e,n){Wv(i.rscratch,t,e,n),Wv(i.rstyle,t,e,n)};s("labelX",null,e.x),s("labelY",null,e.y);var a=rS(n.midDispX,n.midDispY);s("labelAutoAngle",null,a);var l=function t(){if(t.cache)return t.cache;for(var e=[],r=0;r+5<n.allpts.length;r+=4){var s={x:n.allpts[r],y:n.allpts[r+1]},a={x:n.allpts[r+2],y:n.allpts[r+3]},l={x:n.allpts[r+4],y:n.allpts[r+5]};e.push({p0:s,p1:a,p2:l,startDist:0,length:0,segments:[]})}var c=i.rstyle.bezierPts,d=o.bezierProjPcts.length;function u(t,e,i,n,o){var r=fy(e,i),s=t.segments[t.segments.length-1],a={p0:e,p1:i,t0:n,t1:o,startDist:s?s.startDist+s.length:0,length:r};t.segments.push(a),t.length+=r}for(var h=0;h<e.length;h++){var p=e[h],g=e[h-1];g&&(p.startDist=g.startDist+g.length),u(p,p.p0,c[h*d],0,o.bezierProjPcts[0]);for(var f=0;f<d-1;f++)u(p,c[h*d+f],c[h*d+f+1],o.bezierProjPcts[f],o.bezierProjPcts[f+1]);u(p,c[h*d+d-1],p.p2,o.bezierProjPcts[d-1],1)}return t.cache=e},c=function(i){var o,a="source"===i;if(r[i]){var c=t.pstyle(i+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var d,u=l(),h=0,p=0,g=0;g<u.length;g++){for(var f=u[a?g:u.length-1-g],m=0;m<f.segments.length;m++){var _=f.segments[a?m:f.segments.length-1-m],v=g===u.length-1&&m===f.segments.length-1;if(h=p,(p+=_.length)>=c||v){d={cp:f,segment:_};break}}if(d)break}var y=d.cp,b=d.segment,E=(c-h)/b.length,T=b.t1-b.t0,x=a?b.t0+T*E:b.t1-T*E;x=by(0,x,1),e=yy(y.p0,y.p1,y.p2,x),o=function(t,e,i,n){var o=by(0,n-.001,1),r=by(0,n+.001,1),s=yy(t,e,i,o),a=yy(t,e,i,r);return sS(s,a)}(y.p0,y.p1,y.p2,x);break;case"straight":case"segments":case"haystack":for(var k,S,C,w,I=0,R=n.allpts.length,A=0;A+3<R&&(a?(C={x:n.allpts[A],y:n.allpts[A+1]},w={x:n.allpts[A+2],y:n.allpts[A+3]}):(C={x:n.allpts[R-2-A],y:n.allpts[R-1-A]},w={x:n.allpts[R-4-A],y:n.allpts[R-3-A]}),S=I,!((I+=k=fy(C,w))>=c));A+=2);var O=(c-S)/k;O=by(0,O,1),e=function(t,e,i,n){var o=e.x-t.x,r=e.y-t.y,s=fy(t,e),a=o/s,l=r/s;return i=null==i?0:i,n=null!=n?n:i*s,{x:t.x+a*n,y:t.y+l*n}}(C,w,O),o=sS(C,w)}s("labelX",i,e.x),s("labelY",i,e.y),s("labelAutoAngle",i,o)}};c("source"),c("target"),this.applyLabelDimensions(t)}},oS.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},oS.applyPrefixedLabelDimensions=function(t,e){var i=t._private,n=this.getLabelText(t,e),o=this.calculateLabelDimensions(t,n),r=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,a=Gv(i.rscratch,"labelWrapCachedLines",e)||[],l="wrap"!==s?1:Math.max(a.length,1),c=o.height/l,d=c*r,u=o.width,h=o.height+(l-1)*(r-1)*c;Wv(i.rstyle,"labelWidth",e,u),Wv(i.rscratch,"labelWidth",e,u),Wv(i.rstyle,"labelHeight",e,h),Wv(i.rscratch,"labelHeight",e,h),Wv(i.rscratch,"labelLineHeight",e,d)},oS.getLabelText=function(t,e){var i=t._private,n=e?e+"-":"",o=t.pstyle(n+"label").strValue,r=t.pstyle("text-transform").value,s=function(t,n){return n?(Wv(i.rscratch,t,e,n),n):Gv(i.rscratch,t,e)};if(!o)return"";"none"==r||("uppercase"==r?o=o.toUpperCase():"lowercase"==r&&(o=o.toLowerCase()));var a=t.pstyle("text-wrap").value;if("wrap"===a){var l=s("labelKey");if(null!=l&&s("labelWrapKey")===l)return s("labelWrapCachedText");for(var c=o.split("\n"),d=t.pstyle("text-max-width").pfValue,u="anywhere"===t.pstyle("text-overflow-wrap").value,h=[],p=/[\s\u200b]+/,g=u?"":" ",f=0;f<c.length;f++){var m=c[f],_=this.calculateLabelDimensions(t,m).width;if(u){var v=m.split("").join("â€‹");m=v}if(_>d){for(var y=m.split(p),b="",E=0;E<y.length;E++){var T=y[E],x=0===b.length?T:b+g+T;this.calculateLabelDimensions(t,x).width<=d?b+=T+g:(b&&h.push(b),b=T+g)}b.match(/^[\s\u200b]+$/)||h.push(b)}else h.push(m)}s("labelWrapCachedLines",h),o=s("labelWrapCachedText",h.join("\n")),s("labelWrapKey",l)}else if("ellipsis"===a){var k=t.pstyle("text-max-width").pfValue,S="",C=!1;if(this.calculateLabelDimensions(t,o).width<k)return o;for(var w=0;w<o.length;w++){if(this.calculateLabelDimensions(t,S+o[w]+"â€¦").width>k)break;S+=o[w],w===o.length-1&&(C=!0)}return C||(S+="â€¦"),S}return o},oS.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,i=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(i){case"left":return"right";case"right":return"left";default:return"center"}},oS.calculateLabelDimensions=function(t,e){var i=Ev(e,t._private.labelDimsKey),n=this.labelDimCache||(this.labelDimCache=[]),o=n[i];if(null!=o)return o;var r=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,a=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var u=c.style;u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none"}d.font="".concat(r," ").concat(l," ").concat(s,"px ").concat(a);for(var h=0,p=0,g=e.split("\n"),f=0;f<g.length;f++){var m=g[f],_=d.measureText(m),v=Math.ceil(_.width),y=s;h=Math.max(v,h),p+=y}return h+=0,p+=0,n[i]={width:h,height:p}},oS.calculateLabelAngle=function(t,e){var i=t._private.rscratch,n=t.isEdge(),o=e?e+"-":"",r=t.pstyle(o+"text-rotation"),s=r.strValue;return"none"===s?0:n&&"autorotate"===s?i.labelAutoAngle:"autorotate"===s?0:r.pfValue},oS.calculateLabelAngles=function(t){var e=this,i=t.isEdge(),n=t._private.rscratch;n.labelAngle=e.calculateLabelAngle(t),i&&(n.sourceLabelAngle=e.calculateLabelAngle(t,"source"),n.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var aS={},lS=!1;aS.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return lS||(Mv("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),lS=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var i=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(i).name}return e};var cS={registerCalculationListeners:function(){var t=this.cy,e=t.collection(),i=this,n=function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),i)for(var n=0;n<t.length;n++){var o=t[n],r=o._private,s=r.rstyle;s.clean=!1,s.cleanConnected=!1}};i.binder(t).on("bounds.* dirty.*",(function(t){var e=t.target;n(e)})).on("style.* background.*",(function(t){var e=t.target;n(e,!1)}));var o=function(o){if(o){var r=i.onUpdateEleCalcsFns;e.cleanStyle();for(var s=0;s<e.length;s++){var a=e[s],l=a._private.rstyle;a.isNode()&&!l.cleanConnected&&(n(a.connectedEdges()),l.cleanConnected=!0)}if(r)for(var c=0;c<r.length;c++){(0,r[c])(o,e)}i.recalculateRenderedStyle(e),e=t.collection()}};i.flushRenderedStyleQueue=function(){o(!0)},i.beforeRender(o,i.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var i=function(t){return t._private.rstyle.cleanConnected},n=[],o=[];if(!this.destroyed){void 0===e&&(e=!0);for(var r=0;r<t.length;r++){var s=t[r],a=s._private,l=a.rstyle;!s.isEdge()||i(s.source())&&i(s.target())||(l.clean=!1),e&&l.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===a.group?o.push(s):n.push(s),l.clean=!0)}for(var c=0;c<o.length;c++){var d=o[c],u=d._private.rstyle,h=d.position();this.recalculateNodeLabelProjection(d),u.nodeX=h.x,u.nodeY=h.y,u.nodeW=d.pstyle("width").pfValue,u.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var p=0;p<n.length;p++){var g=n[p]._private,f=g.rstyle,m=g.rscratch;f.srcX=m.arrowStartX,f.srcY=m.arrowStartY,f.tgtX=m.arrowEndX,f.tgtY=m.arrowEndY,f.midX=m.midX,f.midY=m.midY,f.labelAngle=m.labelAngle,f.sourceLabelAngle=m.sourceLabelAngle,f.targetLabelAngle=m.targetLabelAngle}}}},dS={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],i=0;i<t.length;i++){var n=(o=t[i])._private.rscratch;o.grabbed()&&!o.isParent()?e.push(o):n.inDragLayer?t.drag.push(o):t.nondrag.push(o)}for(i=0;i<e.length;i++){var o=e[i];t.drag.push(o)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ZT),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},uS={};[qk,Zk,Qk,eS,iS,oS,aS,cS,dS].forEach((function(t){rv(uS,t)}));var hS={getCachedImage:function(t,e,i){var n=this.imageCache=this.imageCache||{},o=n[t];if(o)return o.image.complete||o.image.addEventListener("load",i),o.image;var r=(o=n[t]=n[t]||{}).image=new Image;r.addEventListener("load",i),r.addEventListener("error",(function(){r.error=!0}));var s="data:";return t.substring(0,s.length).toLowerCase()===s||(r.crossOrigin=e),r.src=t,r}},pS={registerBinding:function(t,e,i,n){var o=Array.prototype.slice.apply(arguments,[1]),r=this.binder(t);return r.on.apply(r,o)}};pS.binder=function(t){var e,i=this,n=t===window||t===document||t===document.body||(e=t,"undefined"!=typeof HTMLElement&&e instanceof HTMLElement);if(null==i.supportsPassiveEvents){var o=!1;try{var r=Object.defineProperty({},"passive",{get:function(){return o=!0,!0}});window.addEventListener("test",null,r)}catch(t){}i.supportsPassiveEvents=o}var s=function(e,o,r){var s=Array.prototype.slice.call(arguments);return n&&i.supportsPassiveEvents&&(s[2]={capture:null!=r&&r,passive:!1,once:!1}),i.bindings.push({target:t,args:s}),(t.addEventListener||t.on).apply(t,s),this};return{on:s,addEventListener:s,addListener:s,bind:s}},pS.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},pS.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()},pS.load=function(){var t=this,e=function(t){return t.selected()},i=function(e,i,n,o){null==e&&(e=t.cy);for(var r=0;r<i.length;r++){var s=i[r];e.emit({originalEvent:n,type:s,position:o})}},n=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},o=function(e,i){var n=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable())for(var o=0;i&&o<i.length;o++){if((e=i[o]).isNode()&&e.isParent()&&!e.pannable()){n=!1;break}}else n=!0;return n},r=function(t){t[0]._private.rscratch.inDragLayer=!0},s=function(t){t[0]._private.rscratch.isGrabTarget=!0},a=function(t,e){var i=e.addToList;i.has(t)||(i.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,i){i=i||{};var n=e.cy().hasCompoundNodes();i.inDragLayer&&(e.forEach(r),e.neighborhood().stdFilter((function(t){return!n||t.isEdge()})).forEach(r)),i.addToList&&e.forEach((function(t){a(t,i)})),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var i=t.descendants();e.inDragLayer&&(i.forEach(r),i.connectedEdges().forEach(r)),e.addToList&&e.addToList.unmerge(i)}}(e,i),u(e,{inDragLayer:i.inDragLayer}),t.updateCachedGrabbedEles()},c=l,d=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},u=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var i=t.ancestors().orphans();if(!i.same(t)){var n=i.descendants().spawnSelf().merge(i).unmerge(t).unmerge(t.descendants()),o=n.connectedEdges();e.inDragLayer&&(o.forEach(r),n.forEach(r)),e.addToList&&n.forEach((function(t){a(t,e)}))}}},h=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,g="undefined"!=typeof ResizeObserver;p?(t.removeObserver=new MutationObserver((function(e){for(var i=0;i<e.length;i++){var n=e[i].removedNodes;if(n)for(var o=0;o<n.length;o++){if(n[o]===t.container){t.destroy();break}}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var f=k_((function(){t.cy.resize()}),100);p&&(t.styleObserver=new MutationObserver(f),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",f),g&&(t.resizeObserver=new ResizeObserver(f),t.resizeObserver.observe(t.container));var m=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,(function(e){t.registerBinding(e,"transitionend",m),t.registerBinding(e,"animationend",m),t.registerBinding(e,"scroll",m)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var _=function(e){for(var i=t.findContainerClientCoords(),n=i[0],o=i[1],r=i[2],s=i[3],a=e.touches?e.touches:[e],l=!1,c=0;c<a.length;c++){var d=a[c];if(n<=d.clientX&&d.clientX<=n+r&&o<=d.clientY&&d.clientY<=o+s){l=!0;break}}if(!l)return!1;for(var u=t.container,h=e.target.parentNode,p=!1;h;){if(h===u){p=!0;break}h=h.parentNode}return!!p};t.registerBinding(t.container,"mousedown",(function(e){if(_(e)){e.preventDefault(),h(),t.hoverData.capture=!0,t.hoverData.which=e.which;var n=t.cy,o=[e.clientX,e.clientY],r=t.projectIntoViewport(o[0],o[1]),a=t.selection,d=t.findNearestElements(r[0],r[1],!0,!1),u=d[0],p=t.dragData.possibleDragElements;t.hoverData.mdownPos=r,t.hoverData.mdownGPos=o;if(3==e.which){t.hoverData.cxtStarted=!0;var g={originalEvent:e,type:"cxttapstart",position:{x:r[0],y:r[1]}};u?(u.activate(),u.emit(g),t.hoverData.down=u):n.emit(g),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(u&&u.activate(),null!=u&&t.nodeIsGrabbable(u)){var f=function(t){return{originalEvent:e,type:t,position:{x:r[0],y:r[1]}}};if(s(u),u.selected()){p=t.dragData.possibleDragElements=n.collection();var m=n.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));l(m,{addToList:p}),u.emit(f("grabon")),m.forEach((function(t){t.emit(f("grab"))}))}else p=t.dragData.possibleDragElements=n.collection(),c(u,{addToList:p}),u.emit(f("grabon")).emit(f("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=u,t.hoverData.downs=d,t.hoverData.downTime=(new Date).getTime(),i(u,["mousedown","tapstart","vmousedown"],e,{x:r[0],y:r[1]}),null==u?(a[4]=1,t.data.bgActivePosistion={x:r[0],y:r[1]},t.redrawHint("select",!0),t.redraw()):u.pannable()&&(a[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var i=t.hoverData.down;i?i.emit({originalEvent:e,type:"taphold",position:{x:r[0],y:r[1]}}):n.emit({originalEvent:e,type:"taphold",position:{x:r[0],y:r[1]}})}}),t.tapholdDuration)}a[0]=a[2]=r[0],a[1]=a[3]=r[1]}}),!1),t.registerBinding(window,"mousemove",(function(e){if(t.hoverData.capture||_(e)){var r=!1,s=t.cy,a=s.zoom(),c=[e.clientX,e.clientY],u=t.projectIntoViewport(c[0],c[1]),h=t.hoverData.mdownPos,p=t.hoverData.mdownGPos,g=t.selection,f=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(f=t.findNearestElement(u[0],u[1],!0,!1));var m,v=t.hoverData.last,y=t.hoverData.down,b=[u[0]-g[2],u[1]-g[3]],E=t.dragData.possibleDragElements;if(p){var T=c[0]-p[0],x=T*T,k=c[1]-p[1],S=x+k*k;t.hoverData.isOverThresholdDrag=m=S>=t.desktopTapThreshold2}var C=n(e);m&&(t.hoverData.tapholdCancelled=!0);r=!0,i(f,["mousemove","vmousemove","tapdrag"],e,{x:u[0],y:u[1]});var w=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||s.emit({originalEvent:e,type:"boxstart",position:{x:u[0],y:u[1]}}),g[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(m){var I={originalEvent:e,type:"cxtdrag",position:{x:u[0],y:u[1]}};y?y.emit(I):s.emit(I),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&f===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:u[0],y:u[1]}}),t.hoverData.cxtOver=f,f&&f.emit({originalEvent:e,type:"cxtdragover",position:{x:u[0],y:u[1]}}))}}else if(t.hoverData.dragging){if(r=!0,s.panningEnabled()&&s.userPanningEnabled()){var R;if(t.hoverData.justStartedPan){var A=t.hoverData.mdownPos;R={x:(u[0]-A[0])*a,y:(u[1]-A[1])*a},t.hoverData.justStartedPan=!1}else R={x:b[0]*a,y:b[1]*a};s.panBy(R),t.hoverData.dragged=!0}u=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=g[4]||null!=y&&!y.pannable()){if(y&&y.pannable()&&y.active()&&y.unactivate(),y&&y.grabbed()||f==v||(v&&i(v,["mouseout","tapdragout"],e,{x:u[0],y:u[1]}),f&&i(f,["mouseover","tapdragover"],e,{x:u[0],y:u[1]}),t.hoverData.last=f),y)if(m){if(s.boxSelectionEnabled()&&C)y&&y.grabbed()&&(d(E),y.emit("freeon"),E.emit("free"),t.dragData.didDrag&&(y.emit("dragfreeon"),E.emit("dragfree"))),w();else if(y&&y.grabbed()&&t.nodeIsDraggable(y)){var O=!t.dragData.didDrag;O&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var D=s.collection();t.hoverData.draggingEles||l(E,{inDragLayer:!0});var N={x:0,y:0};if(W_(b[0])&&W_(b[1])&&(N.x+=b[0],N.y+=b[1],O)){var M=t.hoverData.dragDelta;M&&W_(M[0])&&W_(M[1])&&(N.x+=M[0],N.y+=M[1])}for(var L=0;L<E.length;L++){var P=E[L];t.nodeIsDraggable(P)&&P.grabbed()&&D.push(P)}t.hoverData.draggingEles=!0,D.silentShift(N).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(b[0]),e.push(b[1])):(e[0]+=b[0],e[1]+=b[1])}();r=!0}else if(m){if(t.hoverData.dragging||!s.boxSelectionEnabled()||!C&&s.panningEnabled()&&s.userPanningEnabled()){if(!t.hoverData.selecting&&s.panningEnabled()&&s.userPanningEnabled()){o(y,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,g[4]=0,t.data.bgActivePosistion=uy(h),t.redrawHint("select",!0),t.redraw())}}else w();y&&y.pannable()&&y.active()&&y.unactivate()}return g[2]=u[0],g[3]=u[1],r?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),t.registerBinding(window,"mouseup",(function(o){if(t.hoverData.capture){t.hoverData.capture=!1;var r=t.cy,s=t.projectIntoViewport(o.clientX,o.clientY),a=t.selection,l=t.findNearestElement(s[0],s[1],!0,!1),c=t.dragData.possibleDragElements,u=t.hoverData.down,h=n(o);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,u&&u.unactivate(),3===t.hoverData.which){var p={originalEvent:o,type:"cxttapend",position:{x:s[0],y:s[1]}};if(u?u.emit(p):r.emit(p),!t.hoverData.cxtDragged){var g={originalEvent:o,type:"cxttap",position:{x:s[0],y:s[1]}};u?u.emit(g):r.emit(g)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(i(l,["mouseup","tapend","vmouseup"],o,{x:s[0],y:s[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||i(u,["click","tap","vclick"],o,{x:s[0],y:s[1]}),null!=u||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||n(o)||(r.$(e).unselect(["tapunselect"]),c.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=c=r.collection()),l!=u||t.dragData.didDrag||t.hoverData.selecting||null!=l&&l._private.selectable&&(t.hoverData.dragging||("additive"===r.selectionType()||h?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):h||(r.$(e).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var f=r.collection(t.getAllInBox(a[0],a[1],a[2],a[3]));t.redrawHint("select",!0),f.length>0&&t.redrawHint("eles",!0),r.emit({type:"boxend",originalEvent:o,position:{x:s[0],y:s[1]}});var m=function(t){return t.selectable()&&!t.selected()};"additive"===r.selectionType()||h||r.$(e).unmerge(f).unselect(),f.emit("box").stdFilter(m).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!a[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var _=u&&u.grabbed();d(c),_&&(u.emit("freeon"),c.emit("free"),t.dragData.didDrag&&(u.emit("dragfreeon"),c.emit("dragfree")))}}a[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1);var v,y,b,E,T,x,k,S,C,w,I,R,A,O=function(e){if(!t.scrollingPage){var i=t.cy,n=i.zoom(),o=i.pan(),r=t.projectIntoViewport(e.clientX,e.clientY),s=[r[0]*n+o.x,r[1]*n+o.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(i.panningEnabled()&&i.userPanningEnabled()&&i.zoomingEnabled()&&i.userZoomingEnabled()){var a;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),a=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,a*=t.wheelSensitivity,1===e.deltaMode&&(a*=33);var l=i.zoom()*Math.pow(10,a);"gesturechange"===e.type&&(l=t.gestureStartZoom*e.scale),i.zoom({level:l,renderedPosition:{x:s[0],y:s[1]}})}}};t.registerBinding(t.container,"wheel",O,!0),t.registerBinding(window,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(e){t.hasTouchStarted||O(e)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var i=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:i[0],y:i[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var i=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:i[0],y:i[1]}})}),!1);var D,N,M,L,P=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},B=function(t,e,i,n){return(i-t)*(i-t)+(n-e)*(n-e)};if(t.registerBinding(t.container,"touchstart",D=function(e){if(t.hasTouchStarted=!0,_(e)){h(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var n=t.cy,o=t.touchData.now,r=t.touchData.earlier;if(e.touches[0]){var a=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);o[0]=a[0],o[1]=a[1]}if(e.touches[1]){a=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);o[2]=a[0],o[3]=a[1]}if(e.touches[2]){a=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);o[4]=a[0],o[5]=a[1]}if(e.touches[1]){t.touchData.singleTouchMoved=!0,d(t.dragData.touchDragEles);var u=t.findContainerClientCoords();C=u[0],w=u[1],I=u[2],R=u[3],v=e.touches[0].clientX-C,y=e.touches[0].clientY-w,b=e.touches[1].clientX-C,E=e.touches[1].clientY-w,A=0<=v&&v<=I&&0<=b&&b<=I&&0<=y&&y<=R&&0<=E&&E<=R;var p=n.pan(),g=n.zoom();T=P(v,y,b,E),x=B(v,y,b,E),S=[((k=[(v+b)/2,(y+E)/2])[0]-p.x)/g,(k[1]-p.y)/g];if(x<4e4&&!e.touches[2]){var f=t.findNearestElement(o[0],o[1],!0,!0),m=t.findNearestElement(o[2],o[3],!0,!0);return f&&f.isNode()?(f.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}}),t.touchData.start=f):m&&m.isNode()?(m.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}}),t.touchData.start=m):n.emit({originalEvent:e,type:"cxttapstart",position:{x:o[0],y:o[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])n.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var O=t.findNearestElements(o[0],o[1],!0,!0),D=O[0];if(null!=D&&(D.activate(),t.touchData.start=D,t.touchData.starts=O,t.nodeIsGrabbable(D))){var N=t.dragData.touchDragEles=n.collection(),M=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),D.selected()?(M=n.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),l(M,{addToList:N})):c(D,{addToList:N}),s(D);var L=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};D.emit(L("grabon")),M?M.forEach((function(t){t.emit(L("grab"))})):D.emit(L("grab"))}i(D,["touchstart","tapstart","vmousedown"],e,{x:o[0],y:o[1]}),null==D&&(t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||i(t.touchData.start,["taphold"],e,{x:o[0],y:o[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var F=t.touchData.startPosition=[],H=0;H<o.length;H++)F[H]=r[H]=o[H];var U=e.touches[0];t.touchData.startGPosition=[U.clientX,U.clientY]}}},!1),t.registerBinding(window,"touchmove",N=function(e){var n=t.touchData.capture;if(n||_(e)){var r=t.selection,s=t.cy,a=t.touchData.now,c=t.touchData.earlier,u=s.zoom();if(e.touches[0]){var h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=h[0],a[1]=h[1]}if(e.touches[1]){h=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);a[2]=h[0],a[3]=h[1]}if(e.touches[2]){h=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);a[4]=h[0],a[5]=h[1]}var p,g=t.touchData.startGPosition;if(n&&e.touches[0]&&g){for(var f=[],m=0;m<a.length;m++)f[m]=a[m]-c[m];var k=e.touches[0].clientX-g[0],I=k*k,R=e.touches[0].clientY-g[1];p=I+R*R>=t.touchTapThreshold2}if(n&&t.touchData.cxt){e.preventDefault();var O=e.touches[0].clientX-C,D=e.touches[0].clientY-w,N=e.touches[1].clientX-C,M=e.touches[1].clientY-w,L=B(O,D,N,M);if(L/x>=2.25||L>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var F={originalEvent:e,type:"cxttapend",position:{x:a[0],y:a[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(F),t.touchData.start=null):s.emit(F)}}if(n&&t.touchData.cxt){F={originalEvent:e,type:"cxtdrag",position:{x:a[0],y:a[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(F):s.emit(F),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var H=t.findNearestElement(a[0],a[1],!0,!0);t.touchData.cxtOver&&H===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:a[0],y:a[1]}}),t.touchData.cxtOver=H,H&&H.emit({originalEvent:e,type:"cxtdragover",position:{x:a[0],y:a[1]}}))}else if(n&&e.touches[2]&&s.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||s.emit({originalEvent:e,type:"boxstart",position:{x:a[0],y:a[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,r[4]=1,r&&0!==r.length&&void 0!==r[0]?(r[2]=(a[0]+a[2]+a[4])/3,r[3]=(a[1]+a[3]+a[5])/3):(r[0]=(a[0]+a[2]+a[4])/3,r[1]=(a[1]+a[3]+a[5])/3,r[2]=(a[0]+a[2]+a[4])/3+1,r[3]=(a[1]+a[3]+a[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(n&&e.touches[1]&&!t.touchData.didSelect&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),Q=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var U=0;U<Q.length;U++){var V=Q[U]._private;V.grabbed=!1,V.rscratch.inDragLayer=!1}}var G=t.touchData.start,W=(O=e.touches[0].clientX-C,D=e.touches[0].clientY-w,N=e.touches[1].clientX-C,M=e.touches[1].clientY-w,P(O,D,N,M)),z=W/T;if(A){var j=(O-v+(N-b))/2,X=(D-y+(M-E))/2,Y=s.zoom(),K=Y*z,J=s.pan(),$=S[0]*Y+J.x,q=S[1]*Y+J.y,Z={x:-K/Y*($-J.x-j)+$,y:-K/Y*(q-J.y-X)+q};if(G&&G.active()){var Q=t.dragData.touchDragEles;d(Q),t.redrawHint("drag",!0),t.redrawHint("eles",!0),G.unactivate().emit("freeon"),Q.emit("free"),t.dragData.didDrag&&(G.emit("dragfreeon"),Q.emit("dragfree"))}s.viewport({zoom:K,pan:Z,cancelOnFailedZoom:!0}),T=W,v=O,y=D,b=N,E=M,t.pinching=!0}if(e.touches[0]){h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=h[0],a[1]=h[1]}if(e.touches[1]){h=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);a[2]=h[0],a[3]=h[1]}if(e.touches[2]){h=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);a[4]=h[0],a[5]=h[1]}}else if(e.touches[0]&&!t.touchData.didSelect){var tt=t.touchData.start,et=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(H=t.findNearestElement(a[0],a[1],!0,!0)),n&&null!=tt&&e.preventDefault(),n&&null!=tt&&t.nodeIsDraggable(tt))if(p){Q=t.dragData.touchDragEles;var it=!t.dragData.didDrag;it&&l(Q,{inDragLayer:!0}),t.dragData.didDrag=!0;var nt={x:0,y:0};if(W_(f[0])&&W_(f[1]))if(nt.x+=f[0],nt.y+=f[1],it)t.redrawHint("eles",!0),(ot=t.touchData.dragDelta)&&W_(ot[0])&&W_(ot[1])&&(nt.x+=ot[0],nt.y+=ot[1]);t.hoverData.draggingEles=!0,Q.silentShift(nt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==c[0]&&t.touchData.startPosition[1]==c[1]&&t.redrawHint("eles",!0),t.redraw()}else{var ot;0===(ot=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(ot.push(f[0]),ot.push(f[1])):(ot[0]+=f[0],ot[1]+=f[1])}if(i(tt||H,["touchmove","tapdrag","vmousemove"],e,{x:a[0],y:a[1]}),tt&&tt.grabbed()||H==et||(et&&et.emit({originalEvent:e,type:"tapdragout",position:{x:a[0],y:a[1]}}),H&&H.emit({originalEvent:e,type:"tapdragover",position:{x:a[0],y:a[1]}})),t.touchData.last=H,n)for(U=0;U<a.length;U++)a[U]&&t.touchData.startPosition[U]&&p&&(t.touchData.singleTouchMoved=!0);if(n&&(null==tt||tt.pannable())&&s.panningEnabled()&&s.userPanningEnabled()){o(tt,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=uy(t.touchData.startPosition)),t.swipePanning?s.panBy({x:f[0]*u,y:f[1]*u}):p&&(t.swipePanning=!0,s.panBy({x:k*u,y:R*u}),tt&&(tt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));h=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);a[0]=h[0],a[1]=h[1]}}for(m=0;m<a.length;m++)c[m]=a[m];n&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",M=function(e){var i=t.touchData.start;t.touchData.capture=!1,i&&i.unactivate()}),t.registerBinding(window,"touchend",L=function(n){var o=t.touchData.start;if(t.touchData.capture){0===n.touches.length&&(t.touchData.capture=!1),n.preventDefault();var r=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var s,a=t.cy,l=a.zoom(),c=t.touchData.now,u=t.touchData.earlier;if(n.touches[0]){var h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=h[0],c[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=h[0],c[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=h[0],c[5]=h[1]}if(o&&o.unactivate(),t.touchData.cxt){if(s={originalEvent:n,type:"cxttapend",position:{x:c[0],y:c[1]}},o?o.emit(s):a.emit(s),!t.touchData.cxtDragged){var p={originalEvent:n,type:"cxttap",position:{x:c[0],y:c[1]}};o?o.emit(p):a.emit(p)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&a.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var g=a.collection(t.getAllInBox(r[0],r[1],r[2],r[3]));r[0]=void 0,r[1]=void 0,r[2]=void 0,r[3]=void 0,r[4]=0,t.redrawHint("select",!0),a.emit({type:"boxend",originalEvent:n,position:{x:c[0],y:c[1]}});g.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),g.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=o&&o.unactivate(),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var f=t.dragData.touchDragEles;if(null!=o){var m=o._private.grabbed;d(f),t.redrawHint("drag",!0),t.redrawHint("eles",!0),m&&(o.emit("freeon"),f.emit("free"),t.dragData.didDrag&&(o.emit("dragfreeon"),f.emit("dragfree"))),i(o,["touchend","tapend","vmouseup","tapdragout"],n,{x:c[0],y:c[1]}),o.unactivate(),t.touchData.start=null}else{var _=t.findNearestElement(c[0],c[1],!0,!0);i(_,["touchend","tapend","vmouseup","tapdragout"],n,{x:c[0],y:c[1]})}var v=t.touchData.startPosition[0]-c[0],y=v*v,b=t.touchData.startPosition[1]-c[1],E=(y+b*b)*l*l;t.touchData.singleTouchMoved||(o||a.$(":selected").unselect(["tapunselect"]),i(o,["tap","vclick"],n,{x:c[0],y:c[1]})),null!=o&&!t.dragData.didDrag&&o._private.selectable&&E<t.touchTapThreshold2&&!t.pinching&&("single"===a.selectionType()?(a.$(e).unmerge(o).unselect(["tapunselect"]),o.select(["tapselect"])):o.selected()?o.unselect(["tapunselect"]):o.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var T=0;T<c.length;T++)u[T]=c[T];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),n.touches.length<2&&(1===n.touches.length&&(t.touchData.startGPosition=[n.touches[0].clientX,n.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var F=[],H=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},U=function(t){F.push(function(t){return{event:t,touch:H(t)}}(t))},V=function(t){for(var e=0;e<F.length;e++){if(F[e].event.pointerId===t.pointerId)return void F.splice(e,1)}},G=function(t){t.touches=F.map((function(t){return t.touch}))},W=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){W(t)||(t.preventDefault(),U(t),G(t),D(t))})),t.registerBinding(t.container,"pointerup",(function(t){W(t)||(V(t),G(t),L(t))})),t.registerBinding(t.container,"pointercancel",(function(t){W(t)||(V(t),G(t),M())})),t.registerBinding(t.container,"pointermove",(function(t){W(t)||(t.preventDefault(),function(t){var e=F.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=H(t)}(t),G(t),N(t))}))}};var gS={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl("polygon",t,e,i,n,o,this.points)},intersectLine:function(t,e,i,n,o,r,s){return Gy(o,r,this.points,t,e,i/2,n/2,s)},checkPoint:function(t,e,i,n,o,r,s){return Ly(t,e,this.points,r,s,n,o,[0,-1],i)}}}};gS.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl(this.name,t,e,i,n,o)},intersectLine:function(t,e,i,n,o,r,s){return function(t,e,i,n,o,r){var s=i-t,a=n-e;s/=o,a/=r;var l=Math.sqrt(s*s+a*a),c=l-1;if(c<0)return[];var d=c/l;return[(i-t)*d+t,(n-e)*d+e]}(o,r,t,e,i/2+s,n/2+s)},checkPoint:function(t,e,i,n,o,r,s){return Fy(t,e,n,o,r,s,i)}}},gS.generateRoundPolygon=function(t,e){for(var i=new Array(2*e.length),n=0;n<e.length/2;n++){var o=2*n,r=void 0;r=n<e.length/2-1?2*(n+1):0,i[4*n]=e[o],i[4*n+1]=e[o+1];var s=e[r]-e[o],a=e[r+1]-e[o+1],l=Math.sqrt(s*s+a*a);i[4*n+2]=s/l,i[4*n+3]=a/l}return this.nodeShapes[t]={renderer:this,name:t,points:i,draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl("round-polygon",t,e,i,n,o,this.points)},intersectLine:function(t,e,i,n,o,r,s){return function(t,e,i,n,o,r,s,a){for(var l,c=[],d=new Array(i.length),u=r/2,h=s/2,p=Ky(r,s),g=0;g<i.length/4;g++){var f,m=void 0;m=0===g?i.length-2:4*g-2,f=4*g+2;var _=n+u*i[4*g],v=o+h*i[4*g+1],y=-i[m]*i[f]-i[m+1]*i[f+1],b=p/Math.tan(Math.acos(y)/2),E=_-b*i[m],T=v-b*i[m+1],x=_+b*i[f],k=v+b*i[f+1];0===g?(d[i.length-2]=E,d[i.length-1]=T):(d[4*g-2]=E,d[4*g-1]=T),d[4*g]=x,d[4*g+1]=k;var S=i[m+1],C=-i[m];S*i[f]+C*i[f+1]<0&&(S*=-1,C*=-1),0!==(l=Hy(t,e,n,o,E+S*p,T+C*p,p)).length&&c.push(l[0],l[1])}for(var w=0;w<d.length/4;w++)0!==(l=Vy(t,e,n,o,d[4*w],d[4*w+1],d[4*w+2],d[4*w+3],!1)).length&&c.push(l[0],l[1]);if(c.length>2){for(var I=[c[0],c[1]],R=Math.pow(I[0]-t,2)+Math.pow(I[1]-e,2),A=1;A<c.length/2;A++){var O=Math.pow(c[2*A]-t,2)+Math.pow(c[2*A+1]-e,2);O<=R&&(I[0]=c[2*A],I[1]=c[2*A+1],R=O)}return I}return c}(o,r,this.points,t,e,i,n)},checkPoint:function(t,e,i,n,o,r,s){return function(t,e,i,n,o,r,s){for(var a=new Array(i.length),l=r/2,c=s/2,d=Ky(r,s),u=d*d,h=0;h<i.length/4;h++){var p,g=void 0;g=0===h?i.length-2:4*h-2,p=4*h+2;var f=n+l*i[4*h],m=o+c*i[4*h+1],_=-i[g]*i[p]-i[g+1]*i[p+1],v=d/Math.tan(Math.acos(_)/2),y=f-v*i[g],b=m-v*i[g+1],E=f+v*i[p],T=m+v*i[p+1];a[4*h]=y,a[4*h+1]=b,a[4*h+2]=E,a[4*h+3]=T;var x=i[g+1],k=-i[g];x*i[p]+k*i[p+1]<0&&(x*=-1,k*=-1);var S=y+x*d,C=b+k*d;if(Math.pow(S-t,2)+Math.pow(C-e,2)<=u)return!0}return My(t,e,a)}(t,e,this.points,r,s,n,o)}}},gS.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:zy(4,0),draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl(this.name,t,e,i,n,o)},intersectLine:function(t,e,i,n,o,r,s){return Ry(o,r,t,e,i,n,s)},checkPoint:function(t,e,i,n,o,r,s){var a=Yy(n,o),l=2*a;return!!Ly(t,e,this.points,r,s,n,o-l,[0,-1],i)||(!!Ly(t,e,this.points,r,s,n-l,o,[0,-1],i)||(!!Fy(t,e,l,l,r-n/2+a,s-o/2+a,i)||(!!Fy(t,e,l,l,r+n/2-a,s-o/2+a,i)||(!!Fy(t,e,l,l,r+n/2-a,s+o/2-a,i)||!!Fy(t,e,l,l,r-n/2+a,s+o/2-a,i)))))}}},gS.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:zy(4,0),draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl(this.name,t,e,i,n,o)},generateCutTrianglePts:function(t,e,i,n){var o=this.cornerLength,r=e/2,s=t/2,a=i-s,l=i+s,c=n-r,d=n+r;return{topLeft:[a,c+o,a+o,c,a+o,c+o],topRight:[l-o,c,l,c+o,l-o,c+o],bottomRight:[l,d-o,l-o,d,l-o,d-o],bottomLeft:[a+o,d,a,d-o,a+o,d-o]}},intersectLine:function(t,e,i,n,o,r,s){var a=this.generateCutTrianglePts(i+2*s,n+2*s,t,e),l=[].concat.apply([],[a.topLeft.splice(0,4),a.topRight.splice(0,4),a.bottomRight.splice(0,4),a.bottomLeft.splice(0,4)]);return Gy(o,r,l,t,e)},checkPoint:function(t,e,i,n,o,r,s){if(Ly(t,e,this.points,r,s,n,o-2*this.cornerLength,[0,-1],i))return!0;if(Ly(t,e,this.points,r,s,n-2*this.cornerLength,o,[0,-1],i))return!0;var a=this.generateCutTrianglePts(n,o,r,s);return My(t,e,a.topLeft)||My(t,e,a.topRight)||My(t,e,a.bottomRight)||My(t,e,a.bottomLeft)}}},gS.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:zy(4,0),draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl(this.name,t,e,i,n,o)},intersectLine:function(t,e,i,n,o,r,s){var a=this.generateBarrelBezierPts(i+2*s,n+2*s,t,e),l=function(t){var e=yy({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),i=yy({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),n=yy({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,i.x,i.y,n.x,n.y,t[4],t[5]]},c=[].concat(l(a.topLeft),l(a.topRight),l(a.bottomRight),l(a.bottomLeft));return Gy(o,r,c,t,e)},generateBarrelBezierPts:function(t,e,i,n){var o=e/2,r=t/2,s=i-r,a=i+r,l=n-o,c=n+o,d=Jy(t,e),u=d.heightOffset,h=d.widthOffset,p=d.ctrlPtOffsetPct*t,g={topLeft:[s,l+u,s+p,l,s+h,l],topRight:[a-h,l,a-p,l,a,l+u],bottomRight:[a,c-u,a-p,c,a-h,c],bottomLeft:[s+h,c,s+p,c,s,c-u]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(t,e,i,n,o,r,s){var a=Jy(n,o),l=a.heightOffset,c=a.widthOffset;if(Ly(t,e,this.points,r,s,n,o-2*l,[0,-1],i))return!0;if(Ly(t,e,this.points,r,s,n-2*c,o,[0,-1],i))return!0;for(var d=this.generateBarrelBezierPts(n,o,r,s),u=function(t,e,i){var n,o,r=i[4],s=i[2],a=i[0],l=i[5],c=i[1],d=Math.min(r,a),u=Math.max(r,a),h=Math.min(l,c),p=Math.max(l,c);if(d<=t&&t<=u&&h<=e&&e<=p){var g=[(n=r)-2*(o=s)+a,2*(o-n),n],f=function(t,e,i,n){var o=e*e-4*t*(i-=n);if(o<0)return[];var r=Math.sqrt(o),s=2*t;return[(-e+r)/s,(-e-r)/s]}(g[0],g[1],g[2],t).filter((function(t){return 0<=t&&t<=1}));if(f.length>0)return f[0]}return null},h=Object.keys(d),p=0;p<h.length;p++){var g=d[h[p]],f=u(t,e,g);if(null!=f){var m=g[5],_=g[3],v=g[1],y=vy(m,_,v,f);if(g.isTop&&y<=e)return!0;if(g.isBottom&&e<=y)return!0}}return!1}}},gS.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:zy(4,0),draw:function(t,e,i,n,o){this.renderer.nodeShapeImpl(this.name,t,e,i,n,o)},intersectLine:function(t,e,i,n,o,r,s){var a=e-(n/2+s),l=Vy(o,r,t,e,t-(i/2+s),a,t+(i/2+s),a,!1);return l.length>0?l:Ry(o,r,t,e,i,n,s)},checkPoint:function(t,e,i,n,o,r,s){var a=Yy(n,o),l=2*a;if(Ly(t,e,this.points,r,s,n,o-l,[0,-1],i))return!0;if(Ly(t,e,this.points,r,s,n-l,o,[0,-1],i))return!0;var c=n/2+2*i,d=o/2+2*i;return!!My(t,e,[r-c,s-d,r-c,s,r+c,s,r+c,s-d])||(!!Fy(t,e,l,l,r+n/2-a,s+o/2-a,i)||!!Fy(t,e,l,l,r-n/2+a,s+o/2-a,i))}}},gS.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",zy(3,0)),this.generateRoundPolygon("round-triangle",zy(3,0)),this.generatePolygon("rectangle",zy(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var i=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",i),this.generateRoundPolygon("round-diamond",i),this.generatePolygon("pentagon",zy(5,0)),this.generateRoundPolygon("round-pentagon",zy(5,0)),this.generatePolygon("hexagon",zy(6,0)),this.generateRoundPolygon("round-hexagon",zy(6,0)),this.generatePolygon("heptagon",zy(7,0)),this.generateRoundPolygon("round-heptagon",zy(7,0)),this.generatePolygon("octagon",zy(8,0)),this.generateRoundPolygon("round-octagon",zy(8,0));var n=new Array(20),o=Xy(5,0),r=Xy(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var a=0;a<r.length/2;a++)r[2*a]*=s,r[2*a+1]*=s;for(a=0;a<5;a++)n[4*a]=o[2*a],n[4*a+1]=o[2*a+1],n[4*a+2]=r[2*a],n[4*a+3]=r[2*a+1];n=jy(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),t.makePolygon=function(t){var i,n="polygon-"+t.join("$");return(i=this[n])?i:e.generatePolygon(n,t)}};var fS={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Fv();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&Dv("Priority is not optional for beforeRender");var i=this.beforeRenderCallbacks;i.push({fn:t,priority:e}),i.sort((function(t,e){return e.priority-t.priority}))}}},mS=function(t,e,i){for(var n=t.beforeRenderCallbacks,o=0;o<n.length;o++)n[o].fn(e,i)};fS.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;pv((function i(n){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){mS(t,!0,n);var o=gv();t.render(t.renderOptions);var r=t.lastDrawTime=gv();void 0===t.averageRedrawTime&&(t.averageRedrawTime=r-o),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=r-o;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else mS(t,!1,n);t.skipFrame=!1,pv(i)}}))}};var _S=function(t){this.init(t)},vS=_S.prototype;vS.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],vS.init=function(t){var e=this;e.options=t,e.cy=t.cy;var i=e.container=t.cy.container();if(D_){var n=D_.document,o=n.head,r="__________cytoscape_stylesheet",s="__________cytoscape_container",a=null!=n.getElementById(r);if(i.className.indexOf(s)<0&&(i.className=(i.className||"")+" "+s),!a){var l=n.createElement("style");l.id=r,l.innerHTML="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}"static"===D_.getComputedStyle(i).getPropertyValue("position")&&Mv("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=W_(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},vS.notify=function(t,e){var i=this,n=i.cy;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&i.invalidateCachedZSortedEles(),"viewport"===t&&i.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container)),i.redrawHint("eles",!0),i.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):i.destroy():i.load())},vS.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var i=t.bindings[e],n=i.target;(n.off||n.removeEventListener).apply(n,i.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},vS.isHeadless=function(){return!1},[$k,uS,hS,pS,gS,fS].forEach((function(t){rv(vS,t)}));var yS=function(t){return function(){var e=this,i=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var n=k_((function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()}),t.deqRedrawThreshold),o=t.priority||Ov;i.beforeRender((function(o,r){var s=gv(),a=i.averageRedrawTime,l=i.lastRedrawTime,c=[],d=i.cy.extent(),u=i.getPixelRatio();for(o||i.flushRenderedStyleQueue();;){var h=gv(),p=h-s,g=h-r;if(l<16.666666666666668){var f=16.666666666666668-(o?a:0);if(g>=t.deqFastCost*f)break}else if(o){if(p>=t.deqCost*l||p>=t.deqAvgCost*a)break}else if(g>=16.666666666666668*t.deqNoDrawCost)break;var m=t.deq(e,u,d);if(!(m.length>0))break;for(var _=0;_<m.length;_++)c.push(m[_])}c.length>0&&(t.onDeqd(e,c),!o&&t.shouldRedraw(e,c,u,d)&&n())}),o(e))}}},bS=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rv;w_(this,t),this.idsByKey=new zv,this.keyForId=new zv,this.cachesByLvl=new zv,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=i}return R_(t,[{key:"getIdsFor",value:function(t){null==t&&Dv("Can not get id list for null key");var e=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new Xv,e.set(t,i)),i}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),i=this.keyForId.get(e),n=this.getKey(t);this.deleteIdForKey(i,e),this.addIdForKey(n,e),this.keyForId.set(e,n)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),i=this.keyForId.get(e);this.deleteIdForKey(i,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,i=this.lvls,n=e.get(t);return n||(n=new zv,e.set(t,n),i.push(t)),n}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var i=this.getKey(t),n=this.getCache(i,e);return null!=n&&this.updateKeyMappingFor(t),n}},{key:"getForCachedKey",value:function(t,e){var i=this.keyForId.get(t.id());return this.getCache(i,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var i=this.getKey(t);return this.hasCache(i,e)}},{key:"setCache",value:function(t,e,i){i.key=t,this.getCachesAt(e).set(t,i)}},{key:"set",value:function(t,e,i){var n=this.getKey(t);this.setCache(n,e,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var i=this.getKey(t);this.deleteCache(i,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(i){return e.deleteCache(t,i)}))}},{key:"invalidate",value:function(t){var e=t.id(),i=this.keyForId.get(e);this.deleteKeyMappingFor(t);var n=this.doesEleInvalidateKey(t);return n&&this.invalidateKey(i),n||0===this.getNumberOfIdsForKey(i)}}]),t}(),ES={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},TS=Hv({getKey:null,doesEleInvalidateKey:Rv,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Iv,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xS=function(t,e){var i=this;i.renderer=t,i.onDequeues=[];var n=TS(e);rv(i,n),i.lookup=new bS(n.getKey,n.doesEleInvalidateKey),i.setupDequeueing()},kS=xS.prototype;kS.reasons=ES,kS.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},kS.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},kS.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new S_((function(t,e){return e.reqs-t.reqs}))},kS.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},kS.getElement=function(t,e,i,n,o){var r=this,s=this.renderer,a=s.cy.zoom(),l=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed())return null;if(!r.allowEdgeTxrCaching&&t.isEdge()||!r.allowParentTxrCaching&&t.isParent())return null;if(null==n&&(n=Math.ceil(py(a*i))),n<-4)n=-4;else if(a>=7.99||n>3)return null;var c=Math.pow(2,n),d=e.h*c,u=e.w*c,h=s.eleTextBiggerThanMin(t,c);if(!this.isVisible(t,h))return null;var p,g=l.get(t,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;if(p=d<=25?25:d<=50?50:50*Math.ceil(d/50),d>1024||u>1024)return null;var f=r.getTextureQueue(p),m=f[f.length-2],_=function(){return r.recycleTexture(p,u)||r.addTexture(p,u)};m||(m=f[f.length-1]),m||(m=_()),m.width-m.usedWidth<u&&(m=_());for(var v,y=function(t){return t&&t.scaledLabelShown===h},b=o&&o===ES.dequeue,E=o&&o===ES.highQuality,T=o&&o===ES.downscale,x=n+1;x<=3;x++){var k=l.get(t,x);if(k){v=k;break}}var S=v&&v.level===n+1?v:null,C=function(){m.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,m.usedWidth,0,u,d)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,u,p),y(S))C();else if(y(v)){if(!E)return r.queueElement(t,v.level-1),v;for(var w=v.level;w>n;w--)S=r.getElement(t,e,i,w,ES.downscale);C()}else{var I;if(!b&&!E&&!T)for(var R=n-1;R>=-4;R--){var A=l.get(t,R);if(A){I=A;break}}if(y(I))return r.queueElement(t,n),I;m.context.translate(m.usedWidth,0),m.context.scale(c,c),this.drawElement(m.context,t,e,h,!1),m.context.scale(1/c,1/c),m.context.translate(-m.usedWidth,0)}return g={x:m.usedWidth,texture:m,level:n,scale:c,width:u,height:d,scaledLabelShown:h},m.usedWidth+=Math.ceil(u+8),m.eleCaches.push(g),l.set(t,n,g),r.checkTextureFullness(m),g},kS.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},kS.invalidateElement=function(t){var e=this,i=e.lookup,n=[];if(i.isInvalid(t)){for(var o=-4;o<=3;o++){var r=i.getForCachedKey(t,o);r&&n.push(r)}if(i.invalidate(t))for(var s=0;s<n.length;s++){var a=n[s],l=a.texture;l.invalidatedWidth+=a.width,a.invalidated=!0,e.checkTextureUtility(l)}e.removeFromQueue(t)}},kS.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},kS.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Uv(e,t):t.fullnessChecks++},kS.retireTexture=function(t){var e=t.height,i=this.getTextureQueue(e),n=this.lookup;Uv(i,t),t.retired=!0;for(var o=t.eleCaches,r=0;r<o.length;r++){var s=o[r];n.deleteCache(s.key,s.level)}Vv(o),this.getRetiredTextureQueue(e).push(t)},kS.addTexture=function(t,e){var i={};return this.getTextureQueue(t).push(i),i.eleCaches=[],i.height=t,i.width=Math.max(1024,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=this.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},kS.recycleTexture=function(t,e){for(var i=this.getTextureQueue(t),n=this.getRetiredTextureQueue(t),o=0;o<n.length;o++){var r=n[o];if(r.width>=e)return r.retired=!1,r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,Vv(r.eleCaches),r.context.setTransform(1,0,0,1,0,0),r.context.clearRect(0,0,r.width,r.height),Uv(n,r),i.push(r),r}},kS.queueElement=function(t,e){var i=this.getElementQueue(),n=this.getElementKeyToQueue(),o=this.getKey(t),r=n[o];if(r)r.level=Math.max(r.level,e),r.eles.merge(t),r.reqs++,i.updateItem(r);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};i.push(s),n[o]=s}},kS.dequeue=function(t){for(var e=this,i=e.getElementQueue(),n=e.getElementKeyToQueue(),o=[],r=e.lookup,s=0;s<1&&i.size()>0;s++){var a=i.pop(),l=a.key,c=a.eles[0],d=r.hasCache(c,a.level);if(n[l]=null,!d){o.push(a);var u=e.getBoundingBox(c);e.getElement(c,u,t,a.level,ES.dequeue)}}return o},kS.removeFromQueue=function(t){var e=this.getElementQueue(),i=this.getElementKeyToQueue(),n=this.getKey(t),o=i[n];null!=o&&(1===o.eles.length?(o.reqs=wv,e.updateItem(o),e.pop(),i[n]=null):o.eles.unmerge(t))},kS.onDequeue=function(t){this.onDequeues.push(t)},kS.offDequeue=function(t){Uv(this.onDequeues,t)},kS.setupDequeueing=yS({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,i){return t.dequeue(e,i)},onDeqd:function(t,e){for(var i=0;i<t.onDequeues.length;i++){(0,t.onDequeues[i])(e)}},shouldRedraw:function(t,e,i,n){for(var o=0;o<e.length;o++)for(var r=e[o].eles,s=0;s<r.length;s++){var a=r[s].boundingBox();if(Cy(a,n))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var SS=function(t){var e=this,i=e.renderer=t,n=i.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=gv()-500,e.skipping=!1,e.eleTxrDeqs=n.collection(),e.scheduleElementRefinement=k_((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),i.beforeRender((function(t,i){i-e.lastInvalidationTime<=250?e.skipping=!0:e.skipping=!1}),i.beforeRenderPriorities.lyrTxrSkip);e.layersQueue=new S_((function(t,e){return e.reqs-t.reqs})),e.setupDequeueing()},CS=SS.prototype,wS=0,IS=Math.pow(2,53)-1;CS.makeLayer=function(t,e){var i=Math.pow(2,e),n=Math.ceil(t.w*i),o=Math.ceil(t.h*i),r=this.renderer.makeOffscreenCanvas(n,o),s={id:wS=++wS%IS,bb:t,level:e,width:n,height:o,canvas:r,context:r.getContext("2d"),eles:[],elesQueue:[],reqs:0},a=s.context,l=-s.bb.x1,c=-s.bb.y1;return a.scale(i,i),a.translate(l,c),s},CS.getLayers=function(t,e,i){var n=this,o=n.renderer.cy.zoom(),r=n.firstGet;if(n.firstGet=!1,null==i)if((i=Math.ceil(py(o*e)))<-4)i=-4;else if(o>=3.99||i>2)return null;n.validateLayersElesOrdering(i,t);var s,a,l=n.layersByLevel,c=Math.pow(2,i),d=l[i]=l[i]||[];if(n.levelIsComplete(i,t))return d;!function(){var e=function(e){if(n.validateLayersElesOrdering(e,t),n.levelIsComplete(e,t))return a=l[e],!0},o=function(t){if(!a)for(var n=i+t;-4<=n&&n<=2&&!e(n);n+=t);};o(1),o(-1);for(var r=d.length-1;r>=0;r--){var s=d[r];s.invalid&&Uv(d,s)}}();var u=function(e){var o=(e=e||{}).after;if(function(){if(!s){s=Ey();for(var e=0;e<t.length;e++)i=s,n=t[e].boundingBox(),i.x1=Math.min(i.x1,n.x1),i.x2=Math.max(i.x2,n.x2),i.w=i.x2-i.x1,i.y1=Math.min(i.y1,n.y1),i.y2=Math.max(i.y2,n.y2),i.h=i.y2-i.y1}var i,n}(),s.w*c*(s.h*c)>16e6)return null;var r=n.makeLayer(s,i);if(null!=o){var a=d.indexOf(o)+1;d.splice(a,0,r)}else(void 0===e.insert||e.insert)&&d.unshift(r);return r};if(n.skipping&&!r)return null;for(var h=null,p=t.length/1,g=!r,f=0;f<t.length;f++){var m=t[f],_=m._private.rscratch,v=_.imgLayerCaches=_.imgLayerCaches||{},y=v[i];if(y)h=y;else{if((!h||h.eles.length>=p||!Iy(h.bb,m.boundingBox()))&&!(h=u({insert:!0,after:h})))return null;a||g?n.queueLayer(h,m):n.drawEleInLayer(h,m,i,e),h.eles.push(m),v[i]=h}}return a||(g?null:d)},CS.getEleLevelForLayerLevel=function(t,e){return t},CS.drawEleInLayer=function(t,e,i,n){var o=this.renderer,r=t.context,s=e.boundingBox();0!==s.w&&0!==s.h&&e.visible()&&(i=this.getEleLevelForLayerLevel(i,n),o.setImgSmoothing(r,!1),o.drawCachedElement(r,e,null,null,i,true),o.setImgSmoothing(r,!0))},CS.levelIsComplete=function(t,e){var i=this.layersByLevel[t];if(!i||0===i.length)return!1;for(var n=0,o=0;o<i.length;o++){var r=i[o];if(r.reqs>0)return!1;if(r.invalid)return!1;n+=r.eles.length}return n===e.length},CS.validateLayersElesOrdering=function(t,e){var i=this.layersByLevel[t];if(i)for(var n=0;n<i.length;n++){for(var o=i[n],r=-1,s=0;s<e.length;s++)if(o.eles[0]===e[s]){r=s;break}if(r<0)this.invalidateLayer(o);else{var a=r;for(s=0;s<o.eles.length;s++)if(o.eles[s]!==e[a+s]){this.invalidateLayer(o);break}}}},CS.updateElementsInLayers=function(t,e){for(var i=X_(t[0]),n=0;n<t.length;n++)for(var o=i?null:t[n],r=i?t[n]:t[n].ele,s=r._private.rscratch,a=s.imgLayerCaches=s.imgLayerCaches||{},l=-4;l<=2;l++){var c=a[l];c&&(o&&this.getEleLevelForLayerLevel(c.level)!==o.level||e(c,r,o))}},CS.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var i=this.layersByLevel[e];if(i&&i.length>0){t=!0;break}}return t},CS.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=gv(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,i,n){e.invalidateLayer(t)})))},CS.invalidateLayer=function(t){if(this.lastInvalidationTime=gv(),!t.invalid){var e=t.level,i=t.eles,n=this.layersByLevel[e];Uv(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var o=0;o<i.length;o++){var r=i[o]._private.rscratch.imgLayerCaches;r&&(r[e]=null)}}},CS.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,i,n){var o=t.replacement;if(o||((o=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,o.eles=t.eles),!o.reqs)for(var r=0;r<o.eles.length;r++)e.queueLayer(o,o.eles[r])}))},CS.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},CS.queueLayer=function(t,e){var i=this.layersQueue,n=t.elesQueue,o=n.hasId=n.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;n.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,i.updateItem(t)):(t.reqs=1,i.push(t))}},CS.dequeue=function(t){for(var e=this,i=e.layersQueue,n=[],o=0;o<1&&0!==i.size();){var r=i.peek();if(r.replacement)i.pop();else if(r.replaces&&r!==r.replaces.replacement)i.pop();else if(r.invalid)i.pop();else{var s=r.elesQueue.shift();s&&(e.drawEleInLayer(r,s,r.level,t),o++),0===n.length&&n.push(!0),0===r.elesQueue.length&&(i.pop(),r.reqs=0,r.replaces&&e.applyLayerReplacement(r),e.requestRedraw())}}return n},CS.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],i=t.replaces,n=e.indexOf(i);if(!(n<0||i.invalid)){e[n]=t;for(var o=0;o<t.eles.length;o++){var r=t.eles[o]._private,s=r.imgLayerCaches=r.imgLayerCaches||{};s&&(s[t.level]=t)}this.requestRedraw()}},CS.requestRedraw=k_((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),CS.setupDequeueing=yS({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:Ov,shouldRedraw:Iv,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var RS,AS={};function OS(t,e){for(var i=0;i<e.length;i++){var n=e[i];t.lineTo(n.x,n.y)}}function DS(t,e,i){for(var n,o=0;o<e.length;o++){var r=e[o];0===o&&(n=r),t.lineTo(r.x,r.y)}t.quadraticCurveTo(i.x,i.y,n.x,n.y)}function NS(t,e,i){t.beginPath&&t.beginPath();for(var n=e,o=0;o<n.length;o++){var r=n[o];t.lineTo(r.x,r.y)}var s=i,a=i[0];t.moveTo(a.x,a.y);for(o=1;o<s.length;o++){r=s[o];t.lineTo(r.x,r.y)}t.closePath&&t.closePath()}function MS(t,e,i,n,o){t.beginPath&&t.beginPath(),t.arc(i,n,o,0,2*Math.PI,!1);var r=e,s=r[0];t.moveTo(s.x,s.y);for(var a=0;a<r.length;a++){var l=r[a];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function LS(t,e,i,n){t.arc(e,i,n,0,2*Math.PI,!1)}AS.arrowShapeImpl=function(t){return(RS||(RS={polygon:OS,"triangle-backcurve":DS,"triangle-tee":NS,"circle-triangle":MS,"triangle-cross":NS,circle:LS}))[t]};var PS={drawElement:function(t,e,i,n,o,r){e.isNode()?this.drawNode(t,e,i,n,o,r):this.drawEdge(t,e,i,n,o,r)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,i,n,o,r,s,a){var l=this,c=i.getBoundingBox(e);if(0!==c.w&&0!==c.h){var d=i.getElement(e,c,n,o,r);if(null!=d){var u=a(l,e);if(0===u)return;var h,p,g,f,m,_,v=s(l,e),y=c.x1,b=c.y1,E=c.w,T=c.h;if(0!==v){var x=i.getRotationPoint(e);g=x.x,f=x.y,t.translate(g,f),t.rotate(v),(m=l.getImgSmoothing(t))||l.setImgSmoothing(t,!0);var k=i.getRotationOffset(e);h=k.x,p=k.y}else h=y,p=b;1!==u&&(_=t.globalAlpha,t.globalAlpha=_*u),t.drawImage(d.texture.canvas,d.x,0,d.width,d.height,h,p,E,T),1!==u&&(t.globalAlpha=_),0!==v&&(t.rotate(-v),t.translate(-g,-f),m||l.setImgSmoothing(t,!1))}else i.drawElement(t,e)}}},BS=function(){return 0},FS=function(t,e){return t.getTextAngle(e,null)},HS=function(t,e){return t.getTextAngle(e,"source")},US=function(t,e){return t.getTextAngle(e,"target")},VS=function(t,e){return e.effectiveOpacity()},GS=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};PS.drawCachedElement=function(t,e,i,n,o,r){var s=this,a=s.data,l=a.eleTxrCache,c=a.lblTxrCache,d=a.slbTxrCache,u=a.tlbTxrCache,h=e.boundingBox(),p=!0===r?l.reasons.highQuality:null;if(0!==h.w&&0!==h.h&&e.visible()&&(!n||Cy(h,n))){var g=e.isEdge(),f=e.element()._private.rscratch.badLine;s.drawCachedElementPortion(t,e,l,i,o,p,BS,VS),g&&f||s.drawCachedElementPortion(t,e,c,i,o,p,FS,GS),g&&!f&&(s.drawCachedElementPortion(t,e,d,i,o,p,HS,GS),s.drawCachedElementPortion(t,e,u,i,o,p,US,GS)),s.drawElementOverlay(t,e)}},PS.drawElements=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];this.drawElement(t,n)}},PS.drawCachedElements=function(t,e,i,n){for(var o=0;o<e.length;o++){var r=e[o];this.drawCachedElement(t,r,i,n)}},PS.drawCachedNodes=function(t,e,i,n){for(var o=0;o<e.length;o++){var r=e[o];r.isNode()&&this.drawCachedElement(t,r,i,n)}},PS.drawLayeredElements=function(t,e,i,n){var o=this.data.lyrTxrCache.getLayers(e,i);if(o)for(var r=0;r<o.length;r++){var s=o[r],a=s.bb;0!==a.w&&0!==a.h&&t.drawImage(s.canvas,a.x1,a.y1,a.w,a.h)}else this.drawCachedElements(t,e,i,n)};var WS={drawEdge:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,a=e._private.rscratch;if((!r||e.visible())&&!a.badLine&&null!=a.allpts&&!isNaN(a.allpts[0])){var l;i&&(l=i,t.translate(-l.x1,-l.y1));var c=r?e.pstyle("opacity").value:1,d=r?e.pstyle("line-opacity").value:1,u=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,g=c*d,f=c*d,m=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;t.lineWidth=h,t.lineCap=p,s.eleStrokeStyle(t,e,i),s.drawEdgePath(e,t,a.allpts,u),t.lineCap="butt"},_=function(){o&&s.drawEdgeOverlay(t,e)},v=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;s.drawArrowheads(t,e,i)},y=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var b="yes"===e.pstyle("ghost").value;if(b){var E=e.pstyle("ghost-offset-x").pfValue,T=e.pstyle("ghost-offset-y").pfValue,x=e.pstyle("ghost-opacity").value,k=g*x;t.translate(E,T),m(k),v(k),t.translate(-E,-T)}m(),v(),_(),y(),i&&t.translate(l.x1,l.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var i=e.pstyle("overlay-opacity").value;if(0!==i){var n=this,o=n.usePaths(),r=e._private.rscratch,s=2*e.pstyle("overlay-padding").pfValue,a=e.pstyle("overlay-color").value;t.lineWidth=s,"self"!==r.edgeType||o?t.lineCap="round":t.lineCap="butt",n.colorStrokeStyle(t,a[0],a[1],a[2],i),n.drawEdgePath(e,t,r.allpts,"solid")}}},drawEdgePath:function(t,e,i,n){var o,r=t._private.rscratch,s=e,a=!1,l=this.usePaths(),c=t.pstyle("line-dash-pattern").pfValue,d=t.pstyle("line-dash-offset").pfValue;if(l){var u=i.join("$");r.pathCacheKey&&r.pathCacheKey===u?(o=e=r.pathCache,a=!0):(o=e=new Path2D,r.pathCacheKey=u,r.pathCache=o)}if(s.setLineDash)switch(n){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(c),s.lineDashOffset=d;break;case"solid":s.setLineDash([])}if(!a&&!r.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(i[0],i[1]),r.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<i.length;h+=4)e.quadraticCurveTo(i[h],i[h+1],i[h+2],i[h+3]);break;case"straight":case"segments":case"haystack":for(var p=2;p+1<i.length;p+=2)e.lineTo(i[p],i[p+1])}e=s,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,i){var n=e._private.rscratch,o="haystack"===n.edgeType;o||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,i),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,i),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,i),o||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,i)},drawArrowhead:function(t,e,i,n,o,r,s){if(!(isNaN(n)||null==n||isNaN(o)||null==o||isNaN(r)||null==r)){var a=this,l=e.pstyle(i+"-arrow-shape").value;if("none"!==l){var c="hollow"===e.pstyle(i+"-arrow-fill").value?"both":"filled",d=e.pstyle(i+"-arrow-fill").value,u=e.pstyle("width").pfValue,h=e.pstyle("opacity").value;void 0===s&&(s=h);var p=t.globalCompositeOperation;1===s&&"hollow"!==d||(t.globalCompositeOperation="destination-out",a.colorFillStyle(t,255,255,255,1),a.colorStrokeStyle(t,255,255,255,1),a.drawArrowShape(e,t,c,u,l,n,o,r),t.globalCompositeOperation=p);var g=e.pstyle(i+"-arrow-color").value;a.colorFillStyle(t,g[0],g[1],g[2],s),a.colorStrokeStyle(t,g[0],g[1],g[2],s),a.drawArrowShape(e,t,d,u,l,n,o,r)}}},drawArrowShape:function(t,e,i,n,o,r,s,a){var l,c=this,d=this.usePaths()&&"triangle-cross"!==o,u=!1,h=e,p={x:r,y:s},g=t.pstyle("arrow-scale").value,f=this.getArrowWidth(n,g),m=c.arrowShapes[o];if(d){var _=c.arrowPathCache=c.arrowPathCache||[],v=Ev(o),y=_[v];null!=y?(l=e=y,u=!0):(l=e=new Path2D,_[v]=l)}u||(e.beginPath&&e.beginPath(),d?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,f,a,p,n),e.closePath&&e.closePath()),e=h,d&&(e.translate(r,s),e.rotate(a),e.scale(f,f)),"filled"!==i&&"both"!==i||(d?e.fill(l):e.fill()),"hollow"!==i&&"both"!==i||(e.lineWidth=(m.matchEdgeWidth?n:1)/(d?f:1),e.lineJoin="miter",d?e.stroke(l):e.stroke()),d&&(e.scale(1/f,1/f),e.rotate(-a),e.translate(-r,-s))}},zS={safeDrawImage:function(t,e,i,n,o,r,s,a,l,c){o<=0||r<=0||l<=0||c<=0||t.drawImage(e,i,n,o,r,s,a,l,c)},drawInscribedImage:function(t,e,i,n,o){var r=this,s=i.position(),a=s.x,l=s.y,c=i.cy().style(),d=c.getIndexedStyle.bind(c),u=d(i,"background-fit","value",n),h=d(i,"background-repeat","value",n),p=i.width(),g=i.height(),f=2*i.padding(),m=p+("inner"===d(i,"background-width-relative-to","value",n)?0:f),_=g+("inner"===d(i,"background-height-relative-to","value",n)?0:f),v=i._private.rscratch,y="node"===d(i,"background-clip","value",n),b=d(i,"background-image-opacity","value",n)*o,E=d(i,"background-image-smoothing","value",n),T=e.width||e.cachedW,x=e.height||e.cachedH;null!=T&&null!=x||(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,x=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=T,S=x;if("auto"!==d(i,"background-width","value",n)&&(k="%"===d(i,"background-width","units",n)?d(i,"background-width","pfValue",n)*m:d(i,"background-width","pfValue",n)),"auto"!==d(i,"background-height","value",n)&&(S="%"===d(i,"background-height","units",n)?d(i,"background-height","pfValue",n)*_:d(i,"background-height","pfValue",n)),0!==k&&0!==S){if("contain"===u)k*=C=Math.min(m/k,_/S),S*=C;else if("cover"===u){var C;k*=C=Math.max(m/k,_/S),S*=C}var w=a-m/2,I=d(i,"background-position-x","units",n),R=d(i,"background-position-x","pfValue",n);w+="%"===I?(m-k)*R:R;var A=d(i,"background-offset-x","units",n),O=d(i,"background-offset-x","pfValue",n);w+="%"===A?(m-k)*O:O;var D=l-_/2,N=d(i,"background-position-y","units",n),M=d(i,"background-position-y","pfValue",n);D+="%"===N?(_-S)*M:M;var L=d(i,"background-offset-y","units",n),P=d(i,"background-offset-y","pfValue",n);D+="%"===L?(_-S)*P:P,v.pathCache&&(w-=a,D-=l,a=0,l=0);var B=t.globalAlpha;t.globalAlpha=b;var F=r.getImgSmoothing(t),H=!1;if("no"===E&&F?(r.setImgSmoothing(t,!1),H=!0):"yes"!==E||F||(r.setImgSmoothing(t,!0),H=!0),"no-repeat"===h)y&&(t.save(),v.pathCache?t.clip(v.pathCache):(r.nodeShapes[r.getNodeShape(i)].draw(t,a,l,m,_),t.clip())),r.safeDrawImage(t,e,0,0,T,x,w,D,k,S),y&&t.restore();else{var U=t.createPattern(e,h);t.fillStyle=U,r.nodeShapes[r.getNodeShape(i)].draw(t,a,l,m,_),t.translate(w,D),t.fill(),t.translate(-w,-D)}t.globalAlpha=B,H&&r.setImgSmoothing(t,F)}}},jS={};function XS(t,e,i,n,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+o-r),t.quadraticCurveTo(e+n,i+o,e+n-r,i+o),t.lineTo(e+r,i+o),t.quadraticCurveTo(e,i+o,e,i+o-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath(),t.fill()}jS.eleTextBiggerThanMin=function(t,e){if(!e){var i=t.cy().zoom(),n=this.getPixelRatio(),o=Math.ceil(py(i*n));e=Math.pow(2,o)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},jS.drawElementText=function(t,e,i,n,o){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==n){if(r&&!s.eleTextBiggerThanMin(e))return}else if(!1===n)return;if(e.isNode()){var a=e.pstyle("label");if(!a||!a.value)return;var l=s.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var c=e.element()._private.rscratch.badLine,d=e.pstyle("label"),u=e.pstyle("source-label"),h=e.pstyle("target-label");if(c||(!d||!d.value)&&(!u||!u.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var p,g=!i;i&&(p=i,t.translate(-p.x1,-p.y1)),null==o?(s.drawText(t,e,null,g,r),e.isEdge()&&(s.drawText(t,e,"source",g,r),s.drawText(t,e,"target",g,r))):s.drawText(t,e,o,g,r),i&&t.translate(p.x1,p.y1)},jS.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var i=0;i<this.fontCaches.length;i++)if((e=this.fontCaches[i]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},jS.setupTextStyle=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue+"px",r=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,a=i?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*a,c=e.pstyle("color").value,d=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+o+" "+r,t.lineJoin="round",this.colorFillStyle(t,c[0],c[1],c[2],a),this.colorStrokeStyle(t,d[0],d[1],d[2],l)},jS.getTextAngle=function(t,e){var i=t._private.rscratch,n=e?e+"-":"",o=t.pstyle(n+"text-rotation"),r=Gv(i,"labelAngle",e);return"autorotate"===o.strValue?t.isEdge()?r:0:"none"===o.strValue?0:o.pfValue},jS.drawText=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=e._private,s=r.rscratch,a=o?e.effectiveOpacity():1;if(!o||0!==a&&0!==e.pstyle("text-opacity").value){"main"===i&&(i=null);var l,c,d=Gv(s,"labelX",i),u=Gv(s,"labelY",i),h=this.getLabelText(e,i);if(null!=h&&""!==h&&!isNaN(d)&&!isNaN(u)){this.setupTextStyle(t,e,o);var p,g=i?i+"-":"",f=Gv(s,"labelWidth",i),m=Gv(s,"labelHeight",i),_=e.pstyle(g+"text-margin-x").pfValue,v=e.pstyle(g+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;switch(y&&(b="center",E="center"),d+=_,u+=v,0!==(p=n?this.getTextAngle(e,i):0)&&(l=d,c=u,t.translate(l,c),t.rotate(p),d=0,u=0),E){case"top":break;case"center":u+=m/2;break;case"bottom":u+=m}var T=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,k=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue;if(T>0||k>0&&x>0){var C=d-S;switch(b){case"left":C-=f;break;case"center":C-=f/2}var w=u-m-S,I=f+2*S,R=m+2*S;if(T>0){var A=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+T*a+")";var D=e.pstyle("text-background-shape").strValue;0===D.indexOf("round")?XS(t,C,w,I,R,2):t.fillRect(C,w,I,R),t.fillStyle=A}if(k>0&&x>0){var N=t.strokeStyle,M=t.lineWidth,L=e.pstyle("text-border-color").value,P=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+x*a+")",t.lineWidth=k,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=k/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(C,w,I,R),"double"===P){var B=k/2;t.strokeRect(C+B,w+B,I-2*B,R-2*B)}t.setLineDash&&t.setLineDash([]),t.lineWidth=M,t.strokeStyle=N}}var F=2*e.pstyle("text-outline-width").pfValue;if(F>0&&(t.lineWidth=F),"wrap"===e.pstyle("text-wrap").value){var H=Gv(s,"labelWrapCachedLines",i),U=Gv(s,"labelLineHeight",i),V=f/2,G=this.getLabelJustification(e);switch("auto"===G||("left"===b?"left"===G?d+=-f:"center"===G&&(d+=-V):"center"===b?"left"===G?d+=-V:"right"===G&&(d+=V):"right"===b&&("center"===G?d+=V:"right"===G&&(d+=f))),E){case"top":u-=(H.length-1)*U;break;case"center":case"bottom":u-=(H.length-1)*U}for(var W=0;W<H.length;W++)F>0&&t.strokeText(H[W],d,u),t.fillText(H[W],d,u),u+=U}else F>0&&t.strokeText(h,d,u),t.fillText(h,d,u);0!==p&&(t.rotate(-p),t.translate(-l,-c))}}};var YS={drawNode:function(t,e,i){var n,o,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,c=e._private,d=c.rscratch,u=e.position();if(W_(u.x)&&W_(u.y)&&(!a||e.visible())){var h,p,g=a?e.effectiveOpacity():1,f=l.usePaths(),m=!1,_=e.padding();n=e.width()+2*_,o=e.height()+2*_,i&&(p=i,t.translate(-p.x1,-p.y1));for(var v=e.pstyle("background-image"),y=v.value,b=new Array(y.length),E=new Array(y.length),T=0,x=0;x<y.length;x++){var k=y[x],S=b[x]=null!=k&&"none"!==k;if(S){var C=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);T++,E[x]=l.getCachedImage(k,C,(function(){c.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var w=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*g,A=e.pstyle("border-color").value,O=e.pstyle("border-style").value,D=e.pstyle("border-opacity").value*g;t.lineJoin="miter";var N=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;l.eleFillStyle(t,e,i)},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;l.colorStrokeStyle(t,A[0],A[1],A[2],e)},L=e.pstyle("shape").strValue,P=e.pstyle("shape-polygon-points").pfValue;if(f){t.translate(u.x,u.y);var B=l.nodePathCache=l.nodePathCache||[],F=Tv("polygon"===L?L+","+P.join(","):L,""+o,""+n),H=B[F];null!=H?(h=H,m=!0,d.pathCache=h):(h=new Path2D,B[F]=d.pathCache=h)}var U=function(){if(!m){var i=u;f&&(i={x:0,y:0}),l.nodeShapes[l.getNodeShape(e)].draw(h||t,i.x,i.y,n,o)}f?t.fill(h):t.fill()},V=function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=c.backgrounding,r=0,s=0;s<E.length;s++){var a=e.cy().style().getIndexedStyle(e,"background-image-containment","value",s);n&&"over"===a||!n&&"inside"===a?r++:b[s]&&E[s].complete&&!E[s].error&&(r++,l.drawInscribedImage(t,E[s],e,s,i))}c.backgrounding=!(r===T),o!==c.backgrounding&&e.updateStyle(!1)},G=function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;l.hasPie(e)&&(l.drawPie(t,e,r),i&&(f||l.nodeShapes[l.getNodeShape(e)].draw(t,u.x,u.y,n,o)))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,i=(w>0?w:-w)*e,n=w>0?0:255;0!==w&&(l.colorFillStyle(t,n,n,n,i),f?t.fill(h):t.fill())},z=function(){if(I>0){if(t.lineWidth=I,t.lineCap="butt",t.setLineDash)switch(O){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(f?t.stroke(h):t.stroke(),"double"===O){t.lineWidth=I/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",f?t.stroke(h):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}},j=function(){s&&l.drawNodeOverlay(t,e,u,n,o)},X=function(){l.drawElementText(t,e,null,r)},Y="yes"===e.pstyle("ghost").value;if(Y){var K=e.pstyle("ghost-offset-x").pfValue,J=e.pstyle("ghost-offset-y").pfValue,$=e.pstyle("ghost-opacity").value,q=$*g;t.translate(K,J),N($*R),U(),V(q,!0),M($*D),z(),G(0!==w||0!==I),V(q,!1),W(q),t.translate(-K,-J)}N(),U(),V(g,!0),M(),z(),G(0!==w||0!==I),V(g,!1),W(),f&&t.translate(-u.x,-u.y),X(),j(),i&&t.translate(p.x1,p.y1)}},drawNodeOverlay:function(t,e,i,n,o){if(e.visible()){var r=e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-opacity").value,a=e.pstyle("overlay-color").value;if(s>0){if(i=i||e.position(),null==n||null==o){var l=e.padding();n=e.width()+2*l,o=e.height()+2*l}this.colorFillStyle(t,a[0],a[1],a[2],s),this.nodeShapes.roundrectangle.draw(t,i.x,i.y,n+2*r,o+2*r),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,i,n){e=e[0],n=n||e.position();var o=e.cy().style(),r=e.pstyle("pie-size"),s=n.x,a=n.y,l=e.width(),c=e.height(),d=Math.min(l,c)/2,u=0;this.usePaths()&&(s=0,a=0),"%"===r.units?d*=r.pfValue:void 0!==r.pfValue&&(d=r.pfValue/2);for(var h=1;h<=o.pieBackgroundN;h++){var p=e.pstyle("pie-"+h+"-background-size").value,g=e.pstyle("pie-"+h+"-background-color").value,f=e.pstyle("pie-"+h+"-background-opacity").value*i,m=p/100;m+u>1&&(m=1-u);var _=1.5*Math.PI+2*Math.PI*u,v=_+2*Math.PI*m;0===p||u>=1||u+m>1||(t.beginPath(),t.moveTo(s,a),t.arc(s,a,d,_,v),t.closePath(),this.colorFillStyle(t,g[0],g[1],g[2],f),t.fill(),u+=m)}}},KS={};KS.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},KS.paintCache=function(t){for(var e,i=this.paintCaches=this.paintCaches||[],n=!0,o=0;o<i.length;o++)if((e=i[o]).context===t){n=!1;break}return n&&(e={context:t},i.push(e)),e},KS.createGradientStyleFor=function(t,e,i,n,o){var r,s=this.usePaths(),a=i.pstyle(e+"-gradient-stop-colors").value,l=i.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(i.isEdge()){var c=i.sourceEndpoint(),d=i.targetEndpoint(),u=i.midpoint(),h=fy(c,u),p=fy(d,u);r=t.createRadialGradient(u.x,u.y,0,u.x,u.y,Math.max(h,p))}else{var g=s?{x:0,y:0}:i.position(),f=i.paddedWidth(),m=i.paddedHeight();r=t.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(f,m))}else if(i.isEdge()){var _=i.sourceEndpoint(),v=i.targetEndpoint();r=t.createLinearGradient(_.x,_.y,v.x,v.y)}else{var y=s?{x:0,y:0}:i.position(),b=i.paddedWidth()/2,E=i.paddedHeight()/2;switch(i.pstyle("background-gradient-direction").value){case"to-bottom":r=t.createLinearGradient(y.x,y.y-E,y.x,y.y+E);break;case"to-top":r=t.createLinearGradient(y.x,y.y+E,y.x,y.y-E);break;case"to-left":r=t.createLinearGradient(y.x+b,y.y,y.x-b,y.y);break;case"to-right":r=t.createLinearGradient(y.x-b,y.y,y.x+b,y.y);break;case"to-bottom-right":case"to-right-bottom":r=t.createLinearGradient(y.x-b,y.y-E,y.x+b,y.y+E);break;case"to-top-right":case"to-right-top":r=t.createLinearGradient(y.x-b,y.y+E,y.x+b,y.y-E);break;case"to-bottom-left":case"to-left-bottom":r=t.createLinearGradient(y.x+b,y.y-E,y.x-b,y.y+E);break;case"to-top-left":case"to-left-top":r=t.createLinearGradient(y.x+b,y.y+E,y.x-b,y.y-E)}}if(!r)return null;for(var T=l.length===a.length,x=a.length,k=0;k<x;k++)r.addColorStop(T?l[k]:k/(x-1),"rgba("+a[k][0]+","+a[k][1]+","+a[k][2]+","+o+")");return r},KS.gradientFillStyle=function(t,e,i,n){var o=this.createGradientStyleFor(t,"background",e,i,n);if(!o)return null;t.fillStyle=o},KS.colorFillStyle=function(t,e,i,n,o){t.fillStyle="rgba("+e+","+i+","+n+","+o+")"},KS.eleFillStyle=function(t,e,i){var n=e.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(t,e,n,i);else{var o=e.pstyle("background-color").value;this.colorFillStyle(t,o[0],o[1],o[2],i)}},KS.gradientStrokeStyle=function(t,e,i,n){var o=this.createGradientStyleFor(t,"line",e,i,n);if(!o)return null;t.strokeStyle=o},KS.colorStrokeStyle=function(t,e,i,n,o){t.strokeStyle="rgba("+e+","+i+","+n+","+o+")"},KS.eleStrokeStyle=function(t,e,i){var n=e.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(t,e,n,i);else{var o=e.pstyle("line-color").value;this.colorStrokeStyle(t,o[0],o[1],o[2],i)}},KS.matchCanvasSize=function(t){var e=this,i=e.data,n=e.findContainerClientCoords(),o=n[2],r=n[3],s=e.getPixelRatio(),a=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(s=a);var l,c=o*s,d=r*s;if(c!==e.canvasWidth||d!==e.canvasHeight){e.fontCaches=null;var u=i.canvasContainer;u.style.width=o+"px",u.style.height=r+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)(l=i.canvases[h]).width=c,l.height=d,l.style.width=o+"px",l.style.height=r+"px";for(h=0;h<e.BUFFER_COUNT;h++)(l=i.bufferCanvases[h]).width=c,l.height=d,l.style.width=o+"px",l.style.height=r+"px";e.textureMult=1,s<=1&&(l=i.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,l.width=c*e.textureMult,l.height=d*e.textureMult),e.canvasWidth=c,e.canvasHeight=d}},KS.renderTo=function(t,e,i,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:i,drawAllLayers:!0,forcedPxRatio:n})},KS.render=function(t){var e=(t=t||Fv()).forcedContext,i=t.drawAllLayers,n=t.drawOnlyNodeLayer,o=t.forcedZoom,r=t.forcedPan,s=this,a=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,l=s.cy,c=s.data,d=c.canvasNeedsRedraw,u=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),h=void 0!==t.motionBlur?t.motionBlur:s.motionBlur,p=s.motionBlurPxRatio,g=l.hasCompoundNodes(),f=s.hoverData.draggingEles,m=!(!s.hoverData.selecting&&!s.touchData.selecting),_=h=h&&!e&&s.motionBlurEnabled&&!m;e||(s.prevPxRatio!==a&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=a),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),h&&(null==s.mbFrames&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(_=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!u&&(d[s.NODE]=!0,d[s.SELECT_BOX]=!0);var v=l.style(),y=l.zoom(),b=void 0!==o?o:y,E=l.pan(),T={x:E.x,y:E.y},x={zoom:y,pan:{x:E.x,y:E.y}},k=s.prevViewport;void 0===k||x.zoom!==k.zoom||x.pan.x!==k.pan.x||x.pan.y!==k.pan.y||f&&!g||(s.motionBlurPxRatio=1),r&&(T=r),b*=a,T.x*=a,T.y*=a;var S=s.getCachedZSortedEles();function C(t,e,i,n,o){var r=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,s.motionBlurTransparency),t.fillRect(e,i,n,o),t.globalCompositeOperation=r}function w(t,n){var a,l,d,u;s.clearingMotionBlur||t!==c.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]&&t!==c.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]?(a=T,l=b,d=s.canvasWidth,u=s.canvasHeight):(a={x:E.x*p,y:E.y*p},l=y*p,d=s.canvasWidth*p,u=s.canvasHeight*p),t.setTransform(1,0,0,1,0,0),"motionBlur"===n?C(t,0,0,d,u):e||void 0!==n&&!n||t.clearRect(0,0,d,u),i||(t.translate(a.x,a.y),t.scale(l,l)),r&&t.translate(r.x,r.y),o&&t.scale(o,o)}if(u||(s.textureDrawLastFrame=!1),u){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=l.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var I=s.data.bufferContexts[s.TEXTURE_BUFFER];I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:I,drawOnlyNodeLayer:!0,forcedPxRatio:a*s.textureMult}),(x=s.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:s.canvasWidth,height:s.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}d[s.DRAG]=!1,d[s.NODE]=!1;var R=c.contexts[s.NODE],A=s.textureCache.texture;x=s.textureCache.viewport;R.setTransform(1,0,0,1,0,0),h?C(R,0,0,x.width,x.height):R.clearRect(0,0,x.width,x.height);var O=v.core("outside-texture-bg-color").value,D=v.core("outside-texture-bg-opacity").value;s.colorFillStyle(R,O[0],O[1],O[2],D),R.fillRect(0,0,x.width,x.height);y=l.zoom();w(R,!1),R.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/a,x.height/x.zoom/a),R.drawImage(A,x.mpan.x,x.mpan.y,x.width/x.zoom/a,x.height/x.zoom/a)}else s.textureOnViewport&&!e&&(s.textureCache=null);var N=l.extent(),M=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles||s.cy.animated(),L=s.hideEdgesOnViewport&&M,P=[];if(P[s.NODE]=!d[s.NODE]&&h&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,P[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),P[s.DRAG]=!d[s.DRAG]&&h&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,P[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),d[s.NODE]||i||n||P[s.NODE]){var B=h&&!P[s.NODE]&&1!==p;w(R=e||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:c.contexts[s.NODE]),h&&!B?"motionBlur":void 0),L?s.drawCachedNodes(R,S.nondrag,a,N):s.drawLayeredElements(R,S.nondrag,a,N),s.debug&&s.drawDebugPoints(R,S.nondrag),i||h||(d[s.NODE]=!1)}if(!n&&(d[s.DRAG]||i||P[s.DRAG])){B=h&&!P[s.DRAG]&&1!==p;w(R=e||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:c.contexts[s.DRAG]),h&&!B?"motionBlur":void 0),L?s.drawCachedNodes(R,S.drag,a,N):s.drawCachedElements(R,S.drag,a,N),s.debug&&s.drawDebugPoints(R,S.drag),i||h||(d[s.DRAG]=!1)}if(s.showFps||!n&&d[s.SELECT_BOX]&&!i){if(w(R=e||c.contexts[s.SELECT_BOX]),1==s.selection[4]&&(s.hoverData.selecting||s.touchData.selecting)){y=s.cy.zoom();var F=v.core("selection-box-border-width").value/y;R.lineWidth=F,R.fillStyle="rgba("+v.core("selection-box-color").value[0]+","+v.core("selection-box-color").value[1]+","+v.core("selection-box-color").value[2]+","+v.core("selection-box-opacity").value+")",R.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),F>0&&(R.strokeStyle="rgba("+v.core("selection-box-border-color").value[0]+","+v.core("selection-box-border-color").value[1]+","+v.core("selection-box-border-color").value[2]+","+v.core("selection-box-opacity").value+")",R.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(c.bgActivePosistion&&!s.hoverData.selecting){y=s.cy.zoom();var H=c.bgActivePosistion;R.fillStyle="rgba("+v.core("active-bg-color").value[0]+","+v.core("active-bg-color").value[1]+","+v.core("active-bg-color").value[2]+","+v.core("active-bg-opacity").value+")",R.beginPath(),R.arc(H.x,H.y,v.core("active-bg-size").pfValue/y,0,2*Math.PI),R.fill()}var U=s.lastRedrawTime;if(s.showFps&&U){U=Math.round(U);var V=Math.round(1e3/U);R.setTransform(1,0,0,1,0,0),R.fillStyle="rgba(255, 0, 0, 0.75)",R.strokeStyle="rgba(255, 0, 0, 0.75)",R.lineWidth=1,R.fillText("1 frame = "+U+" ms = "+V+" fps",0,20);R.strokeRect(0,30,250,20),R.fillRect(0,30,250*Math.min(V/60,1),20)}i||(d[s.SELECT_BOX]=!1)}if(h&&1!==p){var G=c.contexts[s.NODE],W=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],z=c.contexts[s.DRAG],j=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],X=function(t,e,i){t.setTransform(1,0,0,1,0,0),i||!_?t.clearRect(0,0,s.canvasWidth,s.canvasHeight):C(t,0,0,s.canvasWidth,s.canvasHeight);var n=p;t.drawImage(e,0,0,s.canvasWidth*n,s.canvasHeight*n,0,0,s.canvasWidth,s.canvasHeight)};(d[s.NODE]||P[s.NODE])&&(X(G,W,P[s.NODE]),d[s.NODE]=!1),(d[s.DRAG]||P[s.DRAG])&&(X(z,j,P[s.DRAG]),d[s.DRAG]=!1)}s.prevViewport=x,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),h&&(s.motionBlurTimeout=setTimeout((function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!u,s.mbFrames=0,d[s.NODE]=!0,d[s.DRAG]=!0,s.redraw()}),100)),e||l.emit("render")};for(var JS={drawPolygonPath:function(t,e,i,n,o,r){var s=n/2,a=o/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*r[0],i+a*r[1]);for(var l=1;l<r.length/2;l++)t.lineTo(e+s*r[2*l],i+a*r[2*l+1]);t.closePath()},drawRoundPolygonPath:function(t,e,i,n,o,r){var s=n/2,a=o/2,l=Ky(n,o);t.beginPath&&t.beginPath();for(var c=0;c<r.length/4;c++){var d,u=void 0;u=0===c?r.length-2:4*c-2,d=4*c+2;var h=e+s*r[4*c],p=i+a*r[4*c+1],g=-r[u]*r[d]-r[u+1]*r[d+1],f=l/Math.tan(Math.acos(g)/2),m=h-f*r[u],_=p-f*r[u+1],v=h+f*r[d],y=p+f*r[d+1];0===c?t.moveTo(m,_):t.lineTo(m,_),t.arcTo(h,p,v,y,l)}t.closePath()},drawRoundRectanglePath:function(t,e,i,n,o){var r=n/2,s=o/2,a=Yy(n,o);t.beginPath&&t.beginPath(),t.moveTo(e,i-s),t.arcTo(e+r,i-s,e+r,i,a),t.arcTo(e+r,i+s,e,i+s,a),t.arcTo(e-r,i+s,e-r,i,a),t.arcTo(e-r,i-s,e,i-s,a),t.lineTo(e,i-s),t.closePath()},drawBottomRoundRectanglePath:function(t,e,i,n,o){var r=n/2,s=o/2,a=Yy(n,o);t.beginPath&&t.beginPath(),t.moveTo(e,i-s),t.lineTo(e+r,i-s),t.lineTo(e+r,i),t.arcTo(e+r,i+s,e,i+s,a),t.arcTo(e-r,i+s,e-r,i,a),t.lineTo(e-r,i-s),t.lineTo(e,i-s),t.closePath()},drawCutRectanglePath:function(t,e,i,n,o){var r=n/2,s=o/2;t.beginPath&&t.beginPath(),t.moveTo(e-r+8,i-s),t.lineTo(e+r-8,i-s),t.lineTo(e+r,i-s+8),t.lineTo(e+r,i+s-8),t.lineTo(e+r-8,i+s),t.lineTo(e-r+8,i+s),t.lineTo(e-r,i+s-8),t.lineTo(e-r,i-s+8),t.closePath()},drawBarrelPath:function(t,e,i,n,o){var r=n/2,s=o/2,a=e-r,l=e+r,c=i-s,d=i+s,u=Jy(n,o),h=u.widthOffset,p=u.heightOffset,g=u.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(a,c+p),t.lineTo(a,d-p),t.quadraticCurveTo(a+g,d,a+h,d),t.lineTo(l-h,d),t.quadraticCurveTo(l-g,d,l,d-p),t.lineTo(l,c+p),t.quadraticCurveTo(l-g,c,l-h,c),t.lineTo(a+h,c),t.quadraticCurveTo(a+g,c,a,c+p),t.closePath()}},$S=Math.sin(0),qS=Math.cos(0),ZS={},QS={},tC=Math.PI/40,eC=0*Math.PI;eC<2*Math.PI;eC+=tC)ZS[eC]=Math.sin(eC),QS[eC]=Math.cos(eC);JS.drawEllipsePath=function(t,e,i,n,o){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,i,n/2,o/2,0,0,2*Math.PI);else for(var r,s,a=n/2,l=o/2,c=0*Math.PI;c<2*Math.PI;c+=tC)r=e-a*ZS[c]*$S+a*QS[c]*qS,s=i+l*QS[c]*$S+l*ZS[c]*qS,0===c?t.moveTo(r,s):t.lineTo(r,s);t.closePath()};var iC={};function nC(t){var e=t.indexOf(",");return t.substr(e+1)}function oC(t,e,i){var n=function(){return e.toDataURL(i,t.quality)};switch(t.output){case"blob-promise":return new aE((function(n,o){try{e.toBlob((function(t){null!=t?n(t):o(new Error("`canvas.toBlob()` sent a null value in its callback"))}),i,t.quality)}catch(t){o(t)}}));case"blob":return function(t,e){for(var i=atob(t),n=new ArrayBuffer(i.length),o=new Uint8Array(n),r=0;r<i.length;r++)o[r]=i.charCodeAt(r);return new Blob([n],{type:e})}(nC(n()),i);case"base64":return nC(n());case"base64uri":default:return n()}}iC.createBuffer=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,[i,i.getContext("2d")]},iC.bufferCanvasImage=function(t){var e=this.cy,i=e.mutableElements().boundingBox(),n=this.findContainerClientCoords(),o=t.full?Math.ceil(i.w):n[2],r=t.full?Math.ceil(i.h):n[3],s=W_(t.maxWidth)||W_(t.maxHeight),a=this.getPixelRatio(),l=1;if(void 0!==t.scale)o*=t.scale,r*=t.scale,l=t.scale;else if(s){var c=1/0,d=1/0;W_(t.maxWidth)&&(c=l*t.maxWidth/o),W_(t.maxHeight)&&(d=l*t.maxHeight/r),o*=l=Math.min(c,d),r*=l}s||(o*=a,r*=a,l*=a);var u=document.createElement("canvas");u.width=o,u.height=r,u.style.width=o+"px",u.style.height=r+"px";var h=u.getContext("2d");if(o>0&&r>0){h.clearRect(0,0,o,r),h.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)h.translate(-i.x1*l,-i.y1*l),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(i.x1*l,i.y1*l);else{var g=e.pan(),f={x:g.x*l,y:g.y*l};l*=e.zoom(),h.translate(f.x,f.y),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(-f.x,-f.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,o,r),h.fill())}return u},iC.png=function(t){return oC(t,this.bufferCanvasImage(t),"image/png")},iC.jpg=function(t){return oC(t,this.bufferCanvasImage(t),"image/jpeg")};var rC={nodeShapeImpl:function(t,e,i,n,o,r,s){switch(t){case"ellipse":return this.drawEllipsePath(e,i,n,o,r);case"polygon":return this.drawPolygonPath(e,i,n,o,r,s);case"round-polygon":return this.drawRoundPolygonPath(e,i,n,o,r,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,i,n,o,r);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,i,n,o,r);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,i,n,o,r);case"barrel":return this.drawBarrelPath(e,i,n,o,r)}}},sC=lC,aC=lC.prototype;function lC(t){var e=this;e.data={canvases:new Array(aC.CANVAS_LAYERS),contexts:new Array(aC.CANVAS_LAYERS),canvasNeedsRedraw:new Array(aC.CANVAS_LAYERS),bufferCanvases:new Array(aC.BUFFER_COUNT),bufferContexts:new Array(aC.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=n,o.position="relative",o.zIndex="0",o.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style[i]=n;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};N_&&N_.userAgent.match(/msie|trident|edge/i)&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var a=0;a<aC.CANVAS_LAYERS;a++){var l=e.data.canvases[a]=document.createElement("canvas");e.data.contexts[a]=l.getContext("2d"),Object.keys(s).forEach((function(t){l.style[t]=s[t]})),l.style.position="absolute",l.setAttribute("data-id","layer"+a),l.style.zIndex=String(aC.CANVAS_LAYERS-a),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[a]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[aC.NODE].setAttribute("data-id","layer"+aC.NODE+"-node"),e.data.canvases[aC.SELECT_BOX].setAttribute("data-id","layer"+aC.SELECT_BOX+"-selectbox"),e.data.canvases[aC.DRAG].setAttribute("data-id","layer"+aC.DRAG+"-drag");for(a=0;a<aC.BUFFER_COUNT;a++)e.data.bufferCanvases[a]=document.createElement("canvas"),e.data.bufferContexts[a]=e.data.bufferCanvases[a].getContext("2d"),e.data.bufferCanvases[a].style.position="absolute",e.data.bufferCanvases[a].setAttribute("data-id","buffer"+a),e.data.bufferCanvases[a].style.zIndex=String(-a-1),e.data.bufferCanvases[a].style.visibility="hidden";e.pathsEnabled=!0;var c=Ey(),d=function(t){return{x:-t.w/2,y:-t.h/2}},u=function(t){return t.boundingBox(),t[0]._private.bodyBounds},h=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||c},p=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||c},g=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||c},f=function(t,e){return e},m=function(t,e,i){var n=t?t+"-":"";return{x:e.x+i.pstyle(n+"text-margin-x").pfValue,y:e.y+i.pstyle(n+"text-margin-y").pfValue}},_=function(t,e,i){var n=t[0]._private.rscratch;return{x:n[e],y:n[i]}},v=e.data.eleTxrCache=new xS(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,i,n,o,r){return e.drawElement(t,i,n,!1,!1,r)},getBoundingBox:u,getRotationPoint:function(t){return{x:((e=u(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return d(u(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),y=e.data.lblTxrCache=new xS(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,i,n,o,r){return e.drawElementText(t,i,n,o,"main",r)},getBoundingBox:h,getRotationPoint:function(t){return m("",_(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=h(t),i=d(h(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":i.x=-e.w;break;case"right":i.x=0}switch(t.pstyle("text-valign").value){case"top":i.y=-e.h;break;case"bottom":i.y=0}}return i},isVisible:f}),b=e.data.slbTxrCache=new xS(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,i,n,o,r){return e.drawElementText(t,i,n,o,"source",r)},getBoundingBox:p,getRotationPoint:function(t){return m("source",_(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return d(p(t))},isVisible:f}),E=e.data.tlbTxrCache=new xS(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,i,n,o,r){return e.drawElementText(t,i,n,o,"target",r)},getBoundingBox:g,getRotationPoint:function(t){return m("target",_(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return d(g(t))},isVisible:f}),T=e.data.lyrTxrCache=new SS(e);e.onUpdateEleCalcs((function(t,e){v.invalidateElements(e),y.invalidateElements(e),b.invalidateElements(e),E.invalidateElements(e),T.invalidateElements(e);for(var i=0;i<e.length;i++){var n=e[i]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}));var x=function(t){for(var e=0;e<t.length;e++)T.enqueueElementRefinement(t[e].ele)};v.onDequeue(x),y.onDequeue(x),b.onDequeue(x),E.onDequeue(x)}aC.CANVAS_LAYERS=3,aC.SELECT_BOX=0,aC.DRAG=1,aC.NODE=2,aC.BUFFER_COUNT=3,aC.TEXTURE_BUFFER=0,aC.MOTIONBLUR_BUFFER_NODE=1,aC.MOTIONBLUR_BUFFER_DRAG=2,aC.redrawHint=function(t,e){var i=this;switch(t){case"eles":i.data.canvasNeedsRedraw[aC.NODE]=e;break;case"drag":i.data.canvasNeedsRedraw[aC.DRAG]=e;break;case"select":i.data.canvasNeedsRedraw[aC.SELECT_BOX]=e}};var cC="undefined"!=typeof Path2D;aC.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},aC.usePaths=function(){return cC&&this.pathsEnabled},aC.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},aC.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},aC.makeOffscreenCanvas=function(t,e){var i;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":C_(OffscreenCanvas))?i=new OffscreenCanvas(t,e):((i=document.createElement("canvas")).width=t,i.height=e),i},[AS,PS,WS,zS,jS,YS,KS,JS,iC,rC].forEach((function(t){rv(aC,t)}));var dC=[{type:"layout",extensions:Xk},{type:"renderer",extensions:[{name:"null",impl:Yk},{name:"base",impl:_S},{name:"canvas",impl:sC}]}],uC={},hC={};function pC(t,e,i){var n=i,o=function(i){Dv("Can not register `"+e+"` for `"+t+"` since `"+i+"` already exists in the prototype and can not be overridden")};if("core"===t){if(sk.prototype[e])return o(e);sk.prototype[e]=i}else if("collection"===t){if(kx.prototype[e])return o(e);kx.prototype[e]=i}else if("layout"===t){for(var r=function(t){this.options=t,i.call(this,t),G_(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},s=r.prototype=Object.create(i.prototype),a=[],l=0;l<a.length;l++){var c=a[l];s[c]=s[c]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var d=i.prototype.stop;s.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var i=0;i<e.length;i++)e[i].stop()}return d?d.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var u=function(t){return t._private.cy},h={addEventFields:function(t,e){e.layout=t,e.cy=u(t),e.target=t},bubble:function(){return!0},parent:function(t){return u(t)}};rv(s,{createEmitter:function(){return this._private.emitter=new GT(h,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),dE.eventAliasesOn(s),n=r}else if("renderer"===t&&"null"!==e&&"base"!==e){var p=gC("renderer","base"),g=p.prototype,f=i,m=i.prototype,_=function(){p.apply(this,arguments),f.apply(this,arguments)},v=_.prototype;for(var y in g){var b=g[y];if(null!=m[y])return o(y);v[y]=b}for(var E in m)v[E]=m[E];g.clientFunctions.forEach((function(t){v[t]=v[t]||function(){Dv("Renderer does not implement `renderer."+t+"()` on its prototype")}})),n=_}return lv({map:uC,keys:[t,e],value:n})}function gC(t,e){return cv({map:uC,keys:[t,e]})}function fC(t,e,i,n,o){return lv({map:hC,keys:[t,e,i,n],value:o})}function mC(t,e,i,n){return cv({map:hC,keys:[t,e,i,n]})}var _C=function(){return 2===arguments.length?gC.apply(null,arguments):3===arguments.length?pC.apply(null,arguments):4===arguments.length?mC.apply(null,arguments):5===arguments.length?fC.apply(null,arguments):void Dv("Invalid extension access syntax")};sk.prototype.extension=_C,dC.forEach((function(t){t.extensions.forEach((function(e){pC(t.type,e.name,e.impl)}))}));var vC=function t(){if(!(this instanceof t))return new t;this.length=0},yC=vC.prototype;yC.instanceString=function(){return"stylesheet"},yC.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},yC.css=function(t,e){var i=this.length-1;if(H_(t))this[i].properties.push({name:t,value:e});else if(G_(t))for(var n=t,o=Object.keys(n),r=0;r<o.length;r++){var s=o[r],a=n[s];if(null!=a){var l=ek.properties[s]||ek.properties[tv(s)];if(null!=l){var c=l.name,d=a;this[i].properties.push({name:c,value:d})}}}return this},yC.style=yC.css,yC.generateStyle=function(t){var e=new ek(t);return this.appendToStyle(e)},yC.appendToStyle=function(t){for(var e=0;e<this.length;e++){var i=this[e],n=i.selector,o=i.properties;t.selector(n);for(var r=0;r<o.length;r++){var s=o[r];t.css(s.name,s.value)}}return t};var bC=function(t){return void 0===t&&(t={}),G_(t)?new sk(t):H_(t)?_C.apply(_C,arguments):void 0};bC.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(bC),t.apply(null,e),this},bC.warnings=function(t){return Nv(t)},bC.version="3.18.1",bC.stylesheet=bC.Stylesheet=vC;var EC=bC;class TC extends Mm{constructor(){super(...arguments),this.workflowsToDisplay=[ys.GENESIS,ys.CALL_ZOME,ys.INCOMING_DHT_OPS,ys.INTEGRATE_DHT_OPS,ys.PRODUCE_DHT_OPS,ys.PUBLISH_DHT_OPS,ys.APP_VALIDATION,ys.SYS_VALIDATION],this.workflowDelay=1e3,this.hideErrors=!1,this.stepByStep=!1,this._onPause=!1,this._callZomeTasks=[],this._runningTasks={},this._errors=[]}observedCells(){return[this.cell]}onNewObservedCell(t){return[t.workflowExecutor.before((async t=>{this.workflowsToDisplay.includes(t.type)&&(t.type===ys.CALL_ZOME?this._callZomeTasks.push(t):(this._runningTasks[t.type]||(this._runningTasks[t.type]=0),this._runningTasks[t.type]+=1),this.requestUpdate(),this.stepByStep?(this.dispatchEvent(new CustomEvent("execution-paused",{detail:{paused:!0},composed:!0,bubbles:!0})),await new Promise((t=>this._resumeObservable.subscribe((()=>t(null))))),this.dispatchEvent(new CustomEvent("execution-paused",{detail:{paused:!1},composed:!0,bubbles:!0}))):await na(this.workflowDelay))})),t.workflowExecutor.success((async t=>{t.type===ys.CALL_ZOME?this._callZomeTasks=this._callZomeTasks.filter((e=>e!==t)):this._runningTasks[t.type]&&(this._runningTasks[t.type]-=1,0===this._runningTasks[t.type]&&delete this._runningTasks[t.type]),this.requestUpdate()})),t.workflowExecutor.error((async(t,e)=>{if(t.type===ys.CALL_ZOME?this._callZomeTasks=this._callZomeTasks.filter((e=>e!==t)):this._runningTasks[t.type]&&(this._runningTasks[t.type]-=1,0===this._runningTasks[t.type]&&delete this._runningTasks[t.type]),!this.hideErrors){const i={task:t,error:e};this._errors.push(i),this.requestUpdate(),this.stepByStep?(this.dispatchEvent(new CustomEvent("execution-paused",{detail:{paused:!0},composed:!0,bubbles:!0})),await new Promise((t=>this._resumeObservable.subscribe((()=>t(null))))),this.dispatchEvent(new CustomEvent("execution-paused",{detail:{paused:!1},composed:!0,bubbles:!0}))):await na(this.workflowDelay);const n=this._errors.findIndex((t=>t===i));this._errors.splice(n,1)}this.requestUpdate()}))]}sortTasks(t){return t.sort(((t,e)=>bs(t[0])-bs(e[0])))}showTasks(){return 0!==Object.keys(this._runningTasks).length||0!==this._errors.length||0!==this._callZomeTasks.length}render(){if(!this.showTasks())return F(Lf||(Lf=Rm``));const t=this.sortTasks(Object.entries(this._runningTasks));return F(Pf||(Pf=Rm` <mwc-card class="tasks-card"> <mwc-list style="max-height:300px;overflow-y:auto;width:200px"> ${0} ${0} ${0} </mwc-list> ${0} </mwc-card> `),this._callZomeTasks.map((t=>F(Bf||(Bf=Rm` <mwc-list-item twoline graphic="icon" style="--mdc-list-item-graphic-margin:4px"> <mwc-icon slot="graphic" style="color:green">call_made</mwc-icon> <span>${0}</span> <span slot="secondary">Zome: ${0}</span> </mwc-list-item> `),t.details.fnName,t.details.zome))),this._errors.map((t=>F(Ff||(Ff=Rm` <mwc-list-item twoline graphic="icon" style="--mdc-list-item-graphic-margin:4px"> <mwc-icon slot="graphic" style="color:red">error_outline</mwc-icon> <span> ${0} </span> <span slot="secondary"> ${0}</span> </mwc-list-item> `),t.error.message,t.task.type===ys.CALL_ZOME?`${t.task.details.fnName} in ${t.task.details.zome}`:t.task.type))),t.map((([t,e])=>F(Hf||(Hf=Rm` <mwc-list-item twoline graphic="icon" style="--mdc-list-item-graphic-margin:4px"> <mwc-icon slot="graphic">miscellaneous_services</mwc-icon> <span> ${0} ${0} </span> <span slot="secondary">Cell Workflow</span> </mwc-list-item> `),e>1?e+"x":"",t))),this.stepByStep?F(Uf||(Uf=Rm``)):F(Vf||(Vf=Rm` <mwc-linear-progress indeterminate></mwc-linear-progress> `)))}static get styles(){return[Lm,st(Gf||(Gf=Rm`.tasks-card{width:auto}`))]}static get scopedElements(){return{"mwc-card":ld,"mwc-list":_u,"mwc-icon":ul,"mwc-list-item":xd,"mwc-linear-progress":ap}}}Am([$({type:Object}),Om("design:type",Ys)],TC.prototype,"cell",void 0),Am([$({type:Array}),Om("design:type",Array)],TC.prototype,"workflowsToDisplay",void 0),Am([$({type:Number}),Om("design:type",Number)],TC.prototype,"workflowDelay",void 0),Am([$({type:Boolean,attribute:"hide-errors"}),Om("design:type",Object)],TC.prototype,"hideErrors",void 0),Am([$({type:Boolean}),Om("design:type",Boolean)],TC.prototype,"stepByStep",void 0),Am([$({type:Array}),Om("design:type",Array)],TC.prototype,"_callZomeTasks",void 0),Am([$({type:Object}),Om("design:type",Object)],TC.prototype,"_runningTasks",void 0),Am([$({type:Object}),Om("design:type",Array)],TC.prototype,"_errors",void 0);class xC extends Mm{renderHelpDialog(){return F(Wf||(Wf=Rm` <mwc-dialog id="help-dialog" .heading="${0}"> <slot></slot> <mwc-button slot="primaryAction" dialogAction="cancel"> Got it! </mwc-button> </mwc-dialog> `),this.heading)}render(){return F(zf||(zf=Rm` ${0} <mwc-icon-button icon="help_outline" @click="${0}"></mwc-icon-button> `),this.renderHelpDialog(),(()=>this._helpDialog.show()))}static get scopedElements(){return{"mwc-icon-button":ei,"mwc-button":bl,"mwc-dialog":qu}}}function kC(t){const e={},i=[];for(const n of t){const t=n.agentPubKey,o=n.p2p.getNeighbors();for(const n of o)e[n]&&e[n][t]||i.push({data:{id:`${t}->${n}`,source:t,target:n},classes:["neighbor-edge"]}),e[t]||(e[t]={}),e[t][n]=!0;for(const e of n.p2p.farKnownPeers)i.push({data:{id:`${t}->${e}`,source:t,target:e},classes:["far-neighbor-edge"]})}return i}Am([$({type:String}),Om("design:type",String)],xC.prototype,"heading",void 0),Am([Z("#help-dialog"),Om("design:type",qu)],xC.prototype,"_helpDialog",void 0);const SC={name:"circle",startAngle:2*Math.PI,ready:t=>{t.cy.resize()}};class CC extends Mm{constructor(){super(...arguments),this.animationDelay=2e3,this.workflowsToDisplay=[ys.CALL_ZOME,ys.APP_VALIDATION],this.networkRequestsToDisplay=[Ks.PUBLISH_REQUEST,Ks.CALL_REMOTE],this.hideTimeController=!1,this.stepByStep=!1,this._resumeObservable=new Gp,this._onPause=!1,this._neighborEdges=[]}async firstUpdated(){window.addEventListener("scroll",(()=>{this._cy.resize(),this.requestUpdate()})),this._cy=EC({container:this._graph,boxSelectionEnabled:!1,autoungrabify:!0,userPanningEnabled:!1,userZoomingEnabled:!1,layout:SC,style:"\n  node {\n    background-color: lightblue;\n    border-color: black;\n    border-width: 2px;\n    label: data(label);\n    font-size: 20px;\n    width: 50px;\n    height: 50px;\n  }\n  \n  .selected {\n    border-width: 4px;\n    border-color: black;\n    border-style: solid;\n  }\n\n  .highlighted {\n    background-color: yellow;\n  }\n\n  edge {\n    width: 1;\n  }\n\n  .network-request {\n    target-arrow-shape: triangle;\n    label: data(label);\n  }\n\n  .neighbor-edge {\n    line-style: dotted;\n  }\n\n  .far-neighbor-edge {\n    line-style: dotted;\n    opacity: 0.2;\n  }\n\n  .network-request {\n    width: 10px;\n    height: 10px;\n    background-color: grey;\n    border-width: 0px;\n  }\n"}),this._cy.on("tap","node",(t=>{this.updatePlayground({activeAgentPubKey:t.target.id()})}));let t=!1;this._cy.on("render",(()=>{0!==this._cy.width()&&(t||(t=!0,setTimeout((()=>{this.setupGraphNodes()}))))}))}highlightNodesWithEntry(){const t=Bm(this.activeDna,this.conductors);if(t.forEach((t=>this._cy.getElementById(t.agentPubKey).removeClass("highlighted"))),this.activeHash){const e=function(t,e){return Pr(t)===Cr.ENTRY?e.filter((e=>{return i=e.getState(),n=t,void 0!==i.metadata.system_meta[n];var i,n})):e.filter((e=>{return i=e.getState(),n=t,"StoreElement"===i.metadata.misc_meta[n];var i,n}))}(this.activeHash,t);for(const t of e)this._cy.getElementById(t.agentPubKey).addClass("highlighted")}}observedCells(){return Bm(this.activeDna,this.conductors)}onNewObservedCell(t){return[t.p2p.networkRequestsExecutor.before((async t=>{if(this.requestUpdate(),!this.networkRequestsToDisplay.includes(t.type))return;if(t.toAgent===t.fromAgent)return;const e=this._cy.getElementById(t.fromAgent);if(!e.position())return;const i=this._cy.getElementById(t.toAgent),n=e.position(),o=i.position();let r=t.type;if(t.type===Ks.PUBLISH_REQUEST){const e=t.details.dhtOps;r=`Publish: ${qo(Object.values(e).map((t=>t.type))).join(", ")}`}const s=this._cy.add([{group:"nodes",data:{networkRequest:t,label:r},position:{x:n.x+1,y:n.y+1},classes:["network-request"]}]);if(this.stepByStep){const t={x:(o.x-n.x)/2+n.x,y:(o.y-n.y)/2+n.y};s.animate({position:t,duration:this.animationDelay/2}),await na(this.animationDelay/2),this._onPause=!0,await new Promise((t=>this._resumeObservable.subscribe((()=>t(null))))),this._onPause=!1,s.animate({position:o,duration:this.animationDelay/2}),await na(this.animationDelay/2)}else s.animate({position:i.position(),duration:this.animationDelay}),await na(this.animationDelay);this._cy.remove(s)}))]}onCellsChanged(){this.setupGraphNodes()}setupGraphNodes(){const t=this._observedCells.sort(((t,e)=>Nr(t.agentPubKey)-Nr(e.agentPubKey))).map((t=>({data:{id:t.agentPubKey,label:`${t.agentPubKey.substr(0,10)}...`},classes:["cell"]})));this._layout&&this._layout.stop(),this._cy.remove("node"),this._cy.remove("edge"),this._cy.add(t);const e=kC(this._observedCells);this._cy.add(e),this._layout=this._cy.elements().makeLayout(SC),this._layout.run(),this._cy.fit(t,t.length<3?170:0),this._cy.center()}updated(t){super.updated(t);const e=kC(this._observedCells);this._neighborEdges.length!=e.length&&(this._neighborEdges=e,this._cy.add(e)),this.observedCells().forEach((t=>this._cy.getElementById(t.agentPubKey).removeClass("selected"))),this._cy.getElementById(this.activeAgentPubKey).addClass("selected"),this.highlightNodesWithEntry(),t.has("_onPause")&&this._cy.style().selector(".cell").style({opacity:this._onPause?.4:1})}renderTimeController(){return this.hideTimeController?F(jf||(jf=Rm``)):F(Xf||(Xf=Rm` <div class="row center-content"> ${0} <span class="vertical-divider" style="margin:0 16px;margin-right:24px"></span> <mwc-formfield label="Step By Step" style="margin-right:16px"> <mwc-switch id="step-by-step-switch" .checked="${0}" @change="${0}"></mwc-switch> </mwc-formfield> </div> `),this.stepByStep?F(Yf||(Yf=Rm` <mwc-icon-button .disabled="${0}" icon="play_arrow" style="${0}" @click="${0}"></mwc-icon-button> `),!this._onPause,qt({"background-color":this._onPause?"#dbdbdb":"white","border-radius":"50%"}),(()=>this._resumeObservable.next())):F(Kf||(Kf=Rm` <mwc-slider style="margin-right:16px" .value="${0}" pin .min="${0}" .max="${0}" @change="${0}"></mwc-slider> <mwc-icon style="margin:0 8px">speed</mwc-icon> `),7e3-this.animationDelay,1e3,7e3,(t=>this.animationDelay=7e3-t.target.value)),this.stepByStep,(t=>{this.stepByStep=t.target.checked,this._onPause&&this._resumeObservable.next()}))}renderHelp(){return F(Jf||(Jf=Rm` <holochain-playground-help-button heading="DHT Cells" class="block-help"> <span> This is a visual interactive representation of a holochain <a href="https://developer.holochain.org/docs/concepts/4_public_data_on_the_dht/" target="_blank">DHT</a>, with ${0} nodes. <br> <br> In the DHT, all nodes have a <strong>public and private key</strong>. The public key is visible and shared througout the network, but private keys never leave their nodes. This public key is of 256 bits an it's actually the node's ID, which you can see labeled besides the nodes (encoded in base58 strings). <br> <br> If you pay attention, you will see that <strong>all nodes in the DHT are ordered alphabetically</strong>. This is because the nodes organize themselves in neighborhoods: they are more connected with the nodes that are closest to their ID, and less connected with the nodes that are far. </span> </holochain-playground-help-button> `),this.conductors.length)}renderTasksTooltips(){if(!this._cy||!this._observedCells)return F($f||($f=Rm``));const t=this._cy.nodes().map((t=>{const e=t.id();return{cell:this._observedCells.find((t=>t.agentPubKey===e)),position:t.renderedPosition()}}));return F(qf||(qf=Rm`${0}`),t.map((({cell:t,position:e})=>{const i=this._cy.width()/2>e.x,n=this._cy.height()/2>e.y,o=e.x+(i?-250:50),r=e.y+(n?-50:50);return F(Zf||(Zf=Rm`<holochain-playground-cell-tasks .workflowsToDisplay="${0}" .workflowDelay="${0}" .cell="${0}" style="${0}" .stepByStep="${0}" ._onPause="${0}" ._resumeObservable="${0}" @execution-paused="${0}"> </holochain-playground-cell-tasks>`),this.workflowsToDisplay,this.animationDelay,t,qt({top:`${r}px`,left:`${o}px`,position:"absolute","z-index":"3"}),this.stepByStep,this._onPause,this._resumeObservable,(t=>this._onPause=t.detail.paused))})))}renderCopyButton(){return F(Qf||(Qf=Rm``))}renderBottomToolbar(){const t=Object.values(ys),e=Object.values(Ks);return F(tm||(tm=Rm` <div class="row center-content" style="margin:16px;position:relative"> <mwc-button label="Visible Worfklows" style="--mdc-theme-primary:rgba(0,0,0,0.7)" icon="arrow_drop_down" id="active-workflows-button" trailingIcon @click="${0}"></mwc-button> <mwc-menu corner="BOTTOM_END" multi activatable id="active-workflows-menu" .anchor="${0}" @selected="${0}"> ${0} </mwc-menu> <mwc-button label="Visible Network Requests" style="--mdc-theme-primary:rgba(0,0,0,0.7)" icon="arrow_drop_down" id="network-requests-button" trailingIcon @click="${0}"></mwc-button> <mwc-menu corner="BOTTOM_END" multi activatable id="network-requests-menu" .anchor="${0}" @selected="${0}"> ${0} </mwc-menu> <span style="flex:1"></span> ${0} </div> `),(()=>this._activeWorkflowsMenu.show()),this._activeWorkflowsButton,(e=>this.workflowsToDisplay=[...e.detail.index].map((e=>t[e]))),t.map((t=>F(em||(em=Rm` <mwc-list-item graphic="icon" .selected="${0}" .activated="${0}"> ${0} ${0} </mwc-list-item> `),this.workflowsToDisplay.includes(t),this.workflowsToDisplay.includes(t),this.workflowsToDisplay.includes(t)?F(im||(im=Rm` <mwc-icon slot="graphic">check</mwc-icon> `)):F(nm||(nm=Rm``)),t))),(()=>this._networkRequestsMenu.show()),this._networkRequestsButton,(t=>this.networkRequestsToDisplay=[...t.detail.index].map((t=>e[t]))),e.map((t=>F(om||(om=Rm` <mwc-list-item graphic="icon" .selected="${0}" .activated="${0}"> ${0} ${0} </mwc-list-item> `),this.networkRequestsToDisplay.includes(t),this.networkRequestsToDisplay.includes(t),this.networkRequestsToDisplay.includes(t)?F(rm||(rm=Rm` <mwc-icon slot="graphic">check</mwc-icon> `)):F(sm||(sm=Rm``)),t))),this.renderTimeController())}render(){return F(am||(am=Rm` <mwc-card class="block-card" style="position:relative"> ${0} ${0} ${0} <div class="column fill"> <span class="block-title" style="margin:16px">DHT Cells</span> <div id="graph" class="fill" style="${0}"></div> ${0} </div> </mwc-card> `),this.renderHelp(),this.renderTasksTooltips(),this.renderCopyButton(),qt({"background-color":this._onPause?"#dbdbdba0":"white"}),this.renderBottomToolbar())}static get styles(){return[Lm,st(lm||(lm=Rm`:host{display:flex}`))]}static get scopedElements(){return{"mwc-card":ld,"mwc-menu-surface":hh,"mwc-button":bl,"mwc-icon":ul,"mwc-menu":ng,"mwc-list-item":xd,"mwc-slider":Wh,"mwc-switch":ep,"mwc-formfield":vp,"mwc-icon-button":ei,"holochain-playground-help-button":xC,"holochain-playground-cell-tasks":TC}}}Am([$({type:Number}),Om("design:type",Number)],CC.prototype,"animationDelay",void 0),Am([$({type:Array}),Om("design:type",Array)],CC.prototype,"workflowsToDisplay",void 0),Am([$({type:Array}),Om("design:type",Array)],CC.prototype,"networkRequestsToDisplay",void 0),Am([$({type:Boolean,attribute:"hide-time-controller"}),Om("design:type",Boolean)],CC.prototype,"hideTimeController",void 0),Am([$({type:Boolean,attribute:"step-by-step"}),Om("design:type",Object)],CC.prototype,"stepByStep",void 0),Am([Z("#graph"),Om("design:type",Object)],CC.prototype,"_graph",void 0),Am([Z("#active-workflows-button"),Om("design:type",bl)],CC.prototype,"_activeWorkflowsButton",void 0),Am([Z("#active-workflows-menu"),Om("design:type",ng)],CC.prototype,"_activeWorkflowsMenu",void 0),Am([Z("#network-requests-button"),Om("design:type",bl)],CC.prototype,"_networkRequestsButton",void 0),Am([Z("#network-requests-menu"),Om("design:type",ng)],CC.prototype,"_networkRequestsMenu",void 0),Am([$({type:Boolean}),Om("design:type",Object)],CC.prototype,"_onPause",void 0);class wC extends Mm{constructor(){super(...arguments),this.processing=!1}static get styles(){return Lm}get activeCell(){return Fm(this.activeDna,this.activeAgentPubKey,this.conductors)||this.allCells[0]}get allCells(){return Bm(this.activeDna,this.conductors)}renderStatsHelp(){return F(cm||(cm=Rm` <mwc-dialog id="stats-help" heading="DHT Statistics Help"> <span> This panel contains statistics for the current state of the DHT. <br> <br> Having a redundancy factor of ${0}, it will <strong> replicate every DHT Op in the ${0} nodes that are closest to its neighborhood </strong>. <br> <br> The number of <strong>DHT Ops (DHT Operation Transforms) is a measure of the load that the DHT has to hold</strong>. A DHT Op is the command that a node receives to indicate it has to change something in its shard of the DHT. Example of DHT Ops are "StoreEntry", "RegisterAddLink". </span> <mwc-button slot="primaryAction" dialogAction="cancel"> Got it! </mwc-button> </mwc-dialog> `),Hm(this.activeCell),Hm(this.activeCell))}async republish(){const t=parseInt(this.nNodes.value),e=this.allCells.length;parseInt(this.rFactor.value),this.activeDna;let i=this.conductors;if(t>e){const n=t-e;i=await ra(n,i,ia())}else if(t<e){const n=e-t,o=t=>Math.max(...Pm(this.activeDna,t).map((t=>t.getState().sourceChain.length)));i=i.sort(((t,e)=>o(t)-o(e))),i.splice(0,n)}this.processing=!1}updateDHTStats(){this.processing=!0,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.republish()}),400)}render(){return F(dm||(dm=Rm` ${0} <div class="column" style="position:relative"> <div style="padding:16px"> <span class="title">Global DHT Stats</span> <mwc-icon-button style="position:absolute;right:8px;top:8px" icon="help_outline" @click="${0}"></mwc-icon-button> <div class="row center-content"> <div class="row center-content" style="padding-right:16px"> <span style="margin-right:8px">Number of nodes: </span><mwc-textfield id="number-of-nodes" min="1" max="50" outlined type="number" style="width:5em" .disabled="${0}" @change="${0}" .value="${0}"></mwc-textfield> </div> <div class="row center-content" style="padding-right:24px"> <span style="margin-right:8px">Redundancy factor: </span><mwc-textfield id="r-factor" min="1" max="50" outlined type="number" .disabled="${0}" style="width:5em" @change="${0}" .value="${0}"></mwc-textfield> </div> <div class="column fill"> <span style="margin-bottom:2px">Unique DHT Ops: <strong>${0}</strong></span> <span style="margin-bottom:2px">Median DHT Ops per node: <strong>${0}</strong></span> <span>Global DHT Ops: <strong>${0}</strong></span> </div> </div> </div> ${0} </div> `),this.renderStatsHelp(),(()=>this.statsHelp.open=!0),void 0!==this.conductorsUrls,(()=>this.updateDHTStats()),this.allCells.length.toString(),void 0!==this.conductorsUrls,(()=>this.updateDHTStats()),Hm(this.activeCell).toString(),function(t){const e={};for(const i of t)for(const t of Object.keys(i.getState().integratedDHTOps))e[t]={};return Object.keys(e).length}(this.allCells),function(t){const e=[];for(const i of t)e.push(Object.keys(i.getState().integratedDHTOps).length);e.sort();const i=Math.floor(e.length/2);return e.sort(((t,e)=>t-e))[i]}(this.allCells),function(t){let e=0;for(const i of t)e+=Object.keys(i.getState().integratedDHTOps).length;return e}(this.allCells),this.processing?F(um||(um=Rm`<mwc-linear-progress indeterminate></mwc-linear-progress>`)):F(hm||(hm=Rm``)))}static get scopedElements(){return{"mwc-linear-progress":ap,"mwc-textfield":sl,"mwc-icon-button":ei,"mwc-dialog":qu}}}function IC(t,e,i){const n={},o={},r={};for(const e of t){const t=e.getState();for(const i of Wr(t)){n[i]=Gr(t,i),o[i]||(o[i]=[]),o[i].push(zr(t,i));const s=n[i].headers[0];s&&s.header.content.entry_type&&(r[i]=ls(e,s.header.content.entry_type))}}const s=function(t,e){return t.sort(((t,i)=>function(t,e,i){const n=Object.values(t[e].headers).sort(AC),o=Object.values(t[i].headers).sort(AC);return n.length>0?bi(n[0].header.content.timestamp):0-o.length>0?bi(o[0].header.content.timestamp):0}(e,t,i)))}(Object.keys(n),n),a=[],l=[],c={};for(const t of s){const s=n[t],d=s.entry,u=s.headers[0],h=r[t];if(c[h]||(c[h]=0),!i.includes(h)){if(l.push({data:{id:t,data:d,label:`${h}${c[h]}`},classes:[h]}),e){const e=e_(d.content);if("object"==typeof e){const i=Object.keys(d.content);for(const n of i){const i=`${t}:${n}`;l.push({data:{id:i,parent:t}}),l.push({data:{id:`${i}:key`,label:n,parent:i}}),l.push({data:{id:`${i}:value`,label:e[n],parent:i}})}}else l.push({data:{id:`${t}:content`,label:e,parent:t}})}if(as(u.header.content.entry_type)){const e=RC(Object.keys(n),d.content);for(const n of e)i.includes(r[n.target])||a.push({data:{id:`${t}->${n.target}`,source:t,target:n.target,label:n.label},classes:["implicit"]})}const p=o[t];if(p){const e=Yr(p);for(const n of e){const e=n.tag&&"string"!=typeof n.tag?JSON.stringify(n.tag):n.tag,o=n.target;if(!i.includes(r[o])){const i={data:{id:`${t}->${o}`,source:t,target:o},classes:["explicit"]};e&&(i.data.label=e),a.push(i)}}}const g=s.headers.filter((e=>e.header.content.original_header_address&&e.header.content.original_entry_address===t));for(const e of g){const i=e.header.content.entry_hash;a.push({data:{id:`${t}-updated-by-${i}`,source:t,target:i,label:"updated by"},classes:["update-edge"]})}const f=l.find((e=>e.data.id===t));s.updates.length>0&&f.classes.push("updated"),s.deletes.length>0&&f.classes.push("deleted")}c[h]+=1}return{entries:[...l,...a],entryTypes:Object.keys(c)}}function RC(t,e){if(!e)return[];if("string"==typeof e)return t.includes(e)?[{label:void 0,target:e}]:[];if(Array.isArray(e)&&e.length>0&&"string"==typeof e[0])return e.filter((e=>t.includes(e))).map((t=>({target:t,label:void 0})));if("object"==typeof e){const i=Object.entries(e).map((([e,i])=>{const n=RC(t,i);for(const t of n)t.label||(t.label=e);return n}));return[].concat(...i)}return[]}function AC(t,e){return bi(t.header.content.timestamp)-bi(e.header.content.timestamp)}Am([Z("#stats-help"),Om("design:type",qu)],wC.prototype,"statsHelp",void 0),Am([Z("#number-of-nodes"),Om("design:type",sl)],wC.prototype,"nNodes",void 0),Am([Z("#r-factor"),Om("design:type",sl)],wC.prototype,"rFactor",void 0),Am([$({type:Boolean}),Om("design:type",Boolean)],wC.prototype,"processing",void 0);var OC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i){this.source=t,this.target=e,this.type=i};e.PowerEdge=i;var n=function(){function t(t,e,i,n){var o=this;if(this.linkAccessor=i,this.modules=new Array(t),this.roots=[],n)this.initModulesFromGroup(n);else{this.roots.push(new s);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new r(a))}this.R=e.length,e.forEach((function(t){var e=o.modules[i.getSourceIndex(t)],n=o.modules[i.getTargetIndex(t)],r=i.getType(t);e.outgoing.add(r,n),n.incoming.add(r,e)}))}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var i=0;i<t.leaves.length;++i){var n=t.leaves[i],o=new r(n.id);this.modules[n.id]=o,e.add(o)}if(t.groups)for(var l=0;l<t.groups.length;++l){var c=t.groups[l],d={};for(var u in c)"leaves"!==u&&"groups"!==u&&c.hasOwnProperty(u)&&(d[u]=c[u]);e.add(new r(-1-l,new a,new a,this.initModulesFromGroup(c),d))}return e},t.prototype.merge=function(t,e,i){void 0===i&&(i=0);var n=t.incoming.intersection(e.incoming),o=t.outgoing.intersection(e.outgoing),a=new s;a.add(t),a.add(e);var l=new r(this.modules.length,o,n,a);this.modules.push(l);var c=function(i,n,o){i.forAll((function(i,r){i.forAll((function(i){var s=i[n];s.add(r,l),s.remove(r,t),s.remove(r,e),t[o].remove(r,i),e[o].remove(r,i)}))}))};return c(o,"incoming","outgoing"),c(n,"outgoing","incoming"),this.R-=n.count()+o.count(),this.roots[i].remove(t),this.roots[i].remove(e),this.roots[i].add(l),l},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),i=e.length,n=new Array(i*(i-1)),o=0,r=0,s=i-1;r<s;++r)for(var a=r+1;a<i;++a){var l=e[r],c=e[a];n[o]={id:o,nEdges:this.nEdges(l,c),a:l,b:c},o++}return n},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort((function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}))[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var i=t.incoming.intersection(e.incoming),n=t.outgoing.intersection(e.outgoing);return this.R-i.count()-n.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[];return o(this.roots[0],{},n),this.allEdges().forEach((function(o){var r=e.modules[o.source],s=e.modules[o.target];t.push(new i(void 0===r.gid?o.source:n[r.gid],void 0===s.gid?o.target:n[s.gid],o.type))})),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,i){e.forAll((function(e){e.getEdges(i),t.getEdges(e.children,i)}))},t}();function o(t,e,i){t.forAll((function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var n=e;if(t.gid=i.length,!t.isIsland()||t.isPredefined()){if(n={id:t.gid},t.isPredefined())for(var r in t.definition)n[r]=t.definition[r];e.groups||(e.groups=[]),e.groups.push(t.gid),i.push(n)}o(t.children,n,i)}}))}e.Configuration=n;var r=function(){function t(t,e,i,n,o){void 0===e&&(e=new a),void 0===i&&(i=new a),void 0===n&&(n=new s),this.id=t,this.outgoing=e,this.incoming=i,this.children=n,this.definition=o}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll((function(n,o){n.forAll((function(n){t.push(new i(e.id,n.id,o))}))}))},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=r;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var i=new t;return i.table=function(t,e){var i={};for(var n in t)n in e&&(i[n]=t[n]);return i}(this.table,e.table),i},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll((function(e){e.isPredefined()||t.push(e)})),t},t}();e.ModuleSet=s;var a=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules((function(i){e||i.id!=t||(e=!0)})),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var i=this.sets[t];i.remove(e),0===i.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll((function(e,i){return e.forAll(t)}))},t.prototype.intersection=function(e){var i=new t;return this.forAll((function(t,n){if(n in e.sets){var o=t.intersection(e.sets[n]),r=o.count();r>0&&(i.sets[n]=o,i.n+=r)}})),i},t}();e.LinkSets=a,e.getGroups=function(t,e,i,o){for(var r=t.length,s=new n(r,e,i,o);s.greedyMerge(););var a=[],l=s.getGroupHierarchy(a);return a.forEach((function(e){var i=function(i){var n=e[i];"number"==typeof n&&(e[i]=t[n])};i("source"),i("target")})),{groups:l,powerEdges:a}}})),DC=r_((function(t,e){function i(t,e){var i={};for(var n in t)i[n]={};for(var n in e)i[n]={};return Object.keys(i).length}function n(t,e){var i=0;for(var n in t)void 0!==e[n]&&++i;return i}function o(t,e,i,n){var o=function(t,e){var i={},n=function(t,e){void 0===i[t]&&(i[t]={}),i[t][e]={}};return t.forEach((function(t){var i=e.getSourceIndex(t),o=e.getTargetIndex(t);n(i,o),n(o,i)})),i}(t,n);t.forEach((function(t){var r=o[n.getSourceIndex(t)],s=o[n.getTargetIndex(t)];n.setLength(t,1+e*i(r,s))}))}function r(t,e,i){var n=[],o=0,r=[],s=[];function a(t){t.index=t.lowlink=o++,r.push(t),t.onStack=!0;for(var e=0,i=t.out;e<i.length;e++){var n=i[e];void 0===n.index?(a(n),t.lowlink=Math.min(t.lowlink,n.lowlink)):n.onStack&&(t.lowlink=Math.min(t.lowlink,n.index))}if(t.lowlink===t.index){for(var l=[];r.length&&((n=r.pop()).onStack=!1,l.push(n),n!==t););s.push(l.map((function(t){return t.id})))}}for(var l=0;l<t;l++)n.push({id:l,out:[]});for(var c=0,d=e;c<d.length;c++){var u=d[c],h=n[i.getSourceIndex(u)],p=n[i.getTargetIndex(u)];h.out.push(p)}for(var g=0,f=n;g<f.length;g++){var m=f[g];void 0===m.index&&a(m)}return s}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,r){void 0===r&&(r=1),o(t,r,(function(t,e){return Math.sqrt(i(t,e)-n(t,e))}),e)},e.jaccardLinkLengths=function(t,e,r){void 0===r&&(r=1),o(t,r,(function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:n(t,e)/i(t,e)}),e)},e.generateDirectedEdgeConstraints=function(t,e,i,n){var o=r(t,e,n),s={};o.forEach((function(t,e){return t.forEach((function(t){return s[t]=e}))}));var a=[];return e.forEach((function(t){var e=n.getSourceIndex(t),o=n.getTargetIndex(t);s[e]!==s[o]&&a.push({axis:i,left:e,right:o,gap:n.getMinSeparation(t)})})),a},e.stronglyConnectedComponents=r})),NC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=i;var n=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var r=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new i,this.minD=Number.MAX_VALUE;for(var s,a=r;a--;)for(s=r;--s>a;){var l=e[a][s];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(r),this.H[a]=new Array(r),s=r;s--;)this.H[a][s]=new Array(r);this.Hd[a]=new Array(r),this.a[a]=new Array(r),this.b[a]=new Array(r),this.c[a]=new Array(r),this.d[a]=new Array(r),this.e[a]=new Array(r),this.ia[a]=new Array(r),this.ib[a]=new Array(r),this.xtmp[a]=new Array(r)}}return t.createSquareMatrix=function(t,e){for(var i=new Array(t),n=0;n<t;++n){i[n]=new Array(t);for(var o=0;o<t;++o)i[n][o]=e(n,o)}return i},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),i=0,n=0;n<this.k;++n){var o=e[n]=this.random.getNextBetween(.01,1)-.5;i+=o*o}return i=Math.sqrt(i),e.map((function(e){return e*(t.minD/i)}))},t.prototype.computeDerivatives=function(t){var e=this,i=this.n;if(!(i<1)){for(var n,o=new Array(this.k),r=new Array(this.k),s=new Array(this.k),a=0,l=0;l<i;++l){for(n=0;n<this.k;++n)s[n]=this.g[n][l]=0;for(var c=0;c<i;++c)if(l!==c){for(var d=i;d--;){var u=0;for(n=0;n<this.k;++n){var h=o[n]=t[n][l]-t[n][c];u+=r[n]=h*h}if(u>1e-9)break;var p=this.offsetDir();for(n=0;n<this.k;++n)t[n][c]+=p[n]}var g=Math.sqrt(u),f=this.D[l][c],m=null!=this.G?this.G[l][c]:1;if(m>1&&g>f||!isFinite(f))for(n=0;n<this.k;++n)this.H[n][l][c]=0;else{m>1&&(m=1);var _=f*f,v=2*m*(g-f)/(_*g),y=g*g*g,b=2*-m/(_*y);for(isFinite(v)||console.log(v),n=0;n<this.k;++n)this.g[n][l]+=o[n]*v,s[n]-=this.H[n][l][c]=b*(y+f*(r[n]-u)+g*u)}}for(n=0;n<this.k;++n)a=Math.max(a,this.H[n][l][l]=s[n])}var E=this.snapGridSize/2,T=this.snapGridSize,x=this.snapStrength/(E*E),k=this.numGridSnapNodes;for(l=0;l<k;++l)for(n=0;n<this.k;++n){var S=this.x[n][l],C=S/T,w=C%1,I=C-w;-E<(h=Math.abs(w)<=.5?S-I*T:S>0?S-(I+1)*T:S-(I-1)*T)&&h<=E&&(this.scaleSnapByMaxH?(this.g[n][l]+=a*x*h,this.H[n][l][l]+=a*x):(this.g[n][l]+=x*h,this.H[n][l][l]+=x))}this.locks.isEmpty()||this.locks.apply((function(i,o){for(n=0;n<e.k;++n)e.H[n][i][i]+=a,e.g[n][i]-=a*(o[n]-t[n][i])}))}},t.dotProd=function(t,e){for(var i=0,n=t.length;n--;)i+=t[n]*e[n];return i},t.rightMultiply=function(e,i,n){for(var o=e.length;o--;)n[o]=t.dotProd(e[o],i)},t.prototype.computeStepSize=function(e){for(var i=0,n=0,o=0;o<this.k;++o)i+=t.dotProd(this.g[o],e[o]),t.rightMultiply(this.H[o],e[o],this.Hd[o]),n+=t.dotProd(e[o],this.Hd[o]);return 0!==n&&isFinite(n)?1*i/n:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var i=t.length,n=e[0].length,o=0;o<i;++o)for(var r=0;r<n;++r)e[o][r]=t[o][r]},t.prototype.stepAndProject=function(e,i,n,o){t.copy(e,i),this.takeDescentStep(i[0],n[0],o),this.project&&this.project[0](e[0],e[1],i[0]),this.takeDescentStep(i[1],n[1],o),this.project&&this.project[1](i[0],e[1],i[1]);for(var r=2;r<this.k;r++)this.takeDescentStep(i[r],n[r],o)},t.mApply=function(t,e,i){for(var n=t;n-- >0;)for(var o=e;o-- >0;)i(n,o)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var i=this;this.computeDerivatives(t);var n=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,n),this.project){this.matrixApply((function(n,o){return i.e[n][o]=t[n][o]-e[n][o]}));var o=this.computeStepSize(this.e);o=Math.max(.2,Math.min(o,1)),this.stepAndProject(t,e,this.e,o)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,i=!1;!i&&t-- >0;){var n=this.rungeKutta();i=Math.abs(e/n-1)<this.threshold,e=n}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var i=0;return this.matrixApply((function(t,n){var o=(e.a[t][n]+2*e.b[t][n]+2*e.c[t][n]+e.d[t][n])/6,r=e.x[t][n]-o;i+=r*r,e.x[t][n]=o})),i},t.mid=function(e,i,n){t.mApply(e.length,e[0].length,(function(t,o){return n[t][o]=e[t][o]+(i[t][o]-e[t][o])/2}))},t.prototype.takeDescentStep=function(t,e,i){for(var n=0;n<this.n;++n)t[n]=t[n]-i*e[n]},t.prototype.computeStress=function(){for(var t=0,e=0,i=this.n-1;e<i;++e)for(var n=e+1,o=this.n;n<o;++n){for(var r=0,s=0;s<this.k;++s){var a=this.x[s][e]-this.x[s][n];r+=a*a}r=Math.sqrt(r);var l=this.D[e][n];if(isFinite(l)){var c=l-r;t+=c*c/(l*l)}}return t},t.zeroDistance=1e-10,t}();e.Descent=n;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=o})),MC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,i=t.offset/t.scale,n=t.weight;this.AB+=n*e*i,this.AD+=n*e*t.desiredPosition,this.A2+=n*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=i;var n=function(){function t(t,e,i,n){void 0===n&&(n=!1),this.left=t,this.right=e,this.gap=i,this.equality=n,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=i,this.equality=n}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=n;var o=function(){function t(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1),this.desiredPosition=t,this.weight=e,this.scale=i,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var i=function(i,n){return i.active&&t!==n&&e(i,n)};this.cOut.forEach((function(t){return i(t,t.right)})),this.cIn.forEach((function(t){return i(t,t.left)}))},t}();e.Variable=o;var r=function(){function t(t){this.vars=[],t.offset=0,this.ps=new i(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,i){var n=this,o=t.dfdv();return t.visitNeighbours(e,(function(e,r){var s=n.compute_lm(r,t,i);r===e.right?(o+=s*e.left.scale,e.lm=s):(o+=s*e.right.scale,e.lm=-s),i(e)})),o/t.scale},t.prototype.populateSplitBlock=function(t,e){var i=this;t.visitNeighbours(e,(function(e,n){n.offset=t.offset+(n===e.right?e.gap:-e.gap),i.addVariable(n),i.populateSplitBlock(n,t)}))},t.prototype.traverse=function(t,e,i,n){var o=this;void 0===i&&(i=this.vars[0]),void 0===n&&(n=null),i.visitNeighbours(n,(function(n,r){e.push(t(n)),o.traverse(t,e,r,i)}))},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,(function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)})),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,(function(){}));var i=null;return this.findPath(t,null,e,(function(t,e){!t.equality&&t.right===e&&(null===i||t.lm<i.lm)&&(i=t)})),i},t.prototype.findPath=function(t,e,i,n){var o=this,r=!1;return t.visitNeighbours(e,(function(e,s){r||s!==i&&!o.findPath(s,t,i,n)||(r=!0,n(e,s))})),r},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var i=t.cOut.length;i--;){var n=t.cOut[i];if(n.active&&this.isActiveDirectedPathBetween(n.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var i=new t(e);return i.populateSplitBlock(e,null),i},t.prototype.splitBetween=function(e,i){var n=this.findMinLMBetween(e,i);if(null!==n){var o=t.split(n);return{constraint:n,lb:o[0],rb:o[1]}}return null},t.prototype.mergeAcross=function(t,e,i){e.active=!0;for(var n=0,o=t.vars.length;n<o;++n){var r=t.vars[n];r.offset+=i,this.addVariable(r)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var i=this.vars[e],n=i.position()-i.desiredPosition;t+=n*n*i.weight}return t},t}();e.Block=r;var s=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var i=new r(t[e]);this.list[e]=i,i.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,i=this.list[e];this.list.length=e,t!==i&&(this.list[t.blockInd]=i,i.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,i=t.right.block,n=t.right.offset-t.left.offset-t.gap;e.vars.length<i.vars.length?(i.mergeAcross(e,t,n),this.remove(e)):(e.mergeAcross(i,t,-n),this.remove(i))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach((function(t){return t.updateWeightedPosition()}))},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach((function(i){var n=i.findMinLM();null!==n&&n.lm<a.LAGRANGIAN_TOLERANCE&&(i=n.left.block,r.split(n).forEach((function(t){return e.insert(t)})),e.remove(i),t.push(n))}))},t}();e.Blocks=s;var a=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach((function(t){t.cIn=[],t.cOut=[]})),this.cs=e,e.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),this.inactive=e.map((function(t){return t.active=!1,t})),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map((function(t){return t.active=!1,t})),this.bs=new s(this.vs),this.bs.forEach((function(e,i){return e.posn=t[i]}))},t.prototype.setDesiredPositions=function(t){this.vs.forEach((function(e,i){return e.desiredPosition=t[i]}))},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,i=null,n=this.inactive,o=n.length,r=o,s=0;s<o;++s){var a=n[s];if(!a.unsatisfiable){var l=a.slack();if((a.equality||l<e)&&(e=l,i=a,r=s,a.equality))break}}return r!==o&&(e<t.ZERO_UPPERBOUND&&!i.active||i.equality)&&(n[r]=n[o-1],n.length=o-1),i},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new s(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var i=e.left.block;if(i!==e.right.block)this.bs.merge(e);else{if(i.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var n=i.splitBetween(e.left,e.right);if(null===n){e.unsatisfiable=!0;continue}this.bs.insert(n.lb),this.bs.insert(n.rb),this.bs.remove(i),this.inactive.push(n.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=a,e.removeOverlapInOneDimension=function(t,e,i){for(var r=t.map((function(t){return new o(t.desiredCenter)})),s=[],l=t.length,c=0;c<l-1;c++){var d=t[c],u=t[c+1];s.push(new n(r[c],r[c+1],(d.size+u.size)/2))}var h=r[0],p=r[l-1],g=t[0].size/2,f=t[l-1].size/2,m=null,_=null;return e&&(m=new o(e,1e3*h.weight),r.push(m),s.push(new n(m,h,g))),i&&(_=new o(i,1e3*p.weight),r.push(_),s.push(new n(p,_,f))),new a(r,s).solve(),{newCenters:r.slice(0,t.length).map((function(t){return t.position()})),lowerBound:m?m.position():h.position()-g,upperBound:_?_.position():p.position()+f}}})),LC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.findIter=function(t){for(var e=this._root,i=this.iterator();null!==e;){var n=this._comparator(t,e.data);if(0===n)return i._cursor=e,i;i._ancestors.push(e),e=e.get_child(n>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var i=this._comparator(t,e.data);if(0===i)return e.data;e=e.get_child(i>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,(function(t,i){return e(i,t)}))},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,i=this.iterator();null!==(e=i.next());)t(e)},t.prototype.reach=function(t){for(var e,i=this.iterator();null!==(e=i.prev());)t(e)},t.prototype._bound=function(t,e){for(var i=this._root,n=this.iterator();null!==i;){var o=this._comparator(t,i.data);if(0===o)return n._cursor=i,n;n._ancestors.push(i),i=i.get_child(o>0)}for(var r=n._ancestors.length-1;r>=0;--r)if(e(t,(i=n._ancestors[r]).data)>0)return n._cursor=i,n._ancestors.length=r,n;return n._ancestors.length=0,n},t}();e.TreeBase=n;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var r=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var i=t.call(this)||this;return i._root=null,i._comparator=e,i.size=0,i}return i(e,t),e.prototype.insert=function(t){var i=!1;if(null===this._root)this._root=new r(t),i=!0,this.size++;else{var n=new r(void 0),o=!1,s=!1,a=null,l=n,c=null,d=this._root;for(l.right=this._root;;){if(null===d?(d=new r(t),c.set_child(o,d),i=!0,this.size++):e.is_red(d.left)&&e.is_red(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),e.is_red(d)&&e.is_red(c)){var u=l.right===a;d===c.get_child(s)?l.set_child(u,e.single_rotate(a,!s)):l.set_child(u,e.double_rotate(a,!s))}var h=this._comparator(d.data,t);if(0===h)break;s=o,o=h<0,null!==a&&(l=a),a=c,c=d,d=d.get_child(o)}this._root=n.right}return this._root.red=!1,i},e.prototype.remove=function(t){if(null===this._root)return!1;var i=new r(void 0),n=i;n.right=this._root;for(var o=null,s=null,a=null,l=!0;null!==n.get_child(l);){var c=l;s=o,o=n,n=n.get_child(l);var d=this._comparator(t,n.data);if(l=d>0,0===d&&(a=n),!e.is_red(n)&&!e.is_red(n.get_child(l)))if(e.is_red(n.get_child(!l))){var u=e.single_rotate(n,l);o.set_child(c,u),o=u}else if(!e.is_red(n.get_child(!l))){var h=o.get_child(!c);if(null!==h)if(e.is_red(h.get_child(!c))||e.is_red(h.get_child(c))){var p=s.right===o;e.is_red(h.get_child(c))?s.set_child(p,e.double_rotate(o,c)):e.is_red(h.get_child(!c))&&s.set_child(p,e.single_rotate(o,c));var g=s.get_child(p);g.red=!0,n.red=!0,g.left.red=!1,g.right.red=!1}else o.red=!1,h.red=!0,n.red=!0}}return null!==a&&(a.data=n.data,o.set_child(o.right===n,n.get_child(null===n.left)),this.size--),this._root=i.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var i=t.get_child(!e);return t.set_child(!e,i.get_child(e)),i.set_child(e,t),t.red=!0,i.red=!1,i},e.double_rotate=function(t,i){return t.set_child(!i,e.single_rotate(t.get_child(!i),!i)),e.single_rotate(t,i)},e}(n);e.RBTree=s})),PC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function n(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce((function(t,e){return e.bounds.union(t)}),o.empty()):o.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce((function(t,e){return n(e).union(t)}),t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}Object.defineProperty(e,"__esModule",{value:!0}),e.computeGroupBounds=n;var o=function(){function t(t,e,i,n){this.x=t,this.X=e,this.y=i,this.Y=n}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),i=t.cx();return e<=i&&t.x<this.X?this.X-t.x:i<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),i=t.cy();return e<=i&&t.y<this.Y?this.Y-t.y:i<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,i,n,o){for(var r=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],s=[],a=0;a<4;++a){var l=t.lineIntersection(e,i,n,o,r[a][0],r[a][1],r[a][2],r[a][3]);null!==l&&s.push({x:l.x,y:l.y})}return s},t.prototype.rayIntersection=function(t,e){var i=this.lineIntersections(this.cx(),this.cy(),t,e);return i.length>0?i[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,i,n,o,r,s,a){var l=i-t,c=s-o,d=n-e,u=a-r,h=u*l-c*d;if(0==h)return null;var p=t-o,g=e-r,f=(c*g-u*p)/h,m=(l*g-d*p)/h;return f>=0&&f<=1&&m>=0&&m<=1?{x:t+f*l,y:e+f*d}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=o,e.makeEdgeBetween=function(t,e,i){var n=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},o=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},r=o.x-n.x,s=o.y-n.y,a=Math.sqrt(r*r+s*s),l=a-i;return{sourceIntersection:n,targetIntersection:o,arrowStart:{x:n.x+l*r/a,y:n.y+l*s/a}}},e.makeEdgeTo=function(t,e,i){var n=e.rayIntersection(t.x,t.y);n||(n={x:e.cx(),y:e.cy()});var o=n.x-t.x,r=n.y-t.y,s=Math.sqrt(o*o+r*r);return{x:n.x-i*o/s,y:n.y-i*r/s}};var r=function(t,e,i){this.v=t,this.r=e,this.pos=i,this.prev=l(),this.next=l()},s=function(t,e,i){this.isOpen=t,this.v=e,this.pos=i};function a(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function l(){return new LC.RBTree((function(t,e){return t.pos-e.pos}))}var c={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,i,n){return new o(i-n/2,i+n/2,t,e)},findNeighbours:function(t,e){var i=function(i,n){for(var o,r=e.findIter(t);null!==(o=r[i]());){var s=o.r.overlapX(t.r);if((s<=0||s<=o.r.overlapY(t.r))&&(t[i].insert(o),o[n].insert(t)),s<=0)break}};i("next","prev"),i("prev","next")}},d={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,i,n){return new o(t,e,i-n/2,i+n/2)},findNeighbours:function(t,e){var i=function(i,n){var o=e.findIter(t)[i]();null!==o&&o.r.overlapX(t.r)>0&&(t[i].insert(o),o[n].insert(t))};i("next","prev"),i("prev","next")}};function u(t,e,i,n){void 0===n&&(n=!1);var o=t.padding,r=void 0!==t.groups?t.groups.length:0,s=void 0!==t.leaves?t.leaves.length:0,a=r?t.groups.reduce((function(t,n){return t.concat(u(n,e,i,!0))}),[]):[],l=(n?2:0)+s+r,c=new Array(l),d=new Array(l),p=0,g=function(t,e){d[p]=t,c[p++]=e};if(n){var f=t.bounds,m=e.getCentre(f),_=e.getSize(f)/2,v=e.getOpen(f),y=e.getClose(f),b=m-_+o/2,E=m+_-o/2;t.minVar.desiredPosition=b,g(e.makeRect(v,y,b,o),t.minVar),t.maxVar.desiredPosition=E,g(e.makeRect(v,y,E,o),t.maxVar)}s&&t.leaves.forEach((function(t){return g(t.bounds,t.variable)})),r&&t.groups.forEach((function(t){var i=t.bounds;g(e.makeRect(e.getOpen(i),e.getClose(i),e.getCentre(i),e.getSize(i)),t.minVar)}));var T=h(d,c,e,i);return r&&(c.forEach((function(t){t.cOut=[],t.cIn=[]})),T.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),t.groups.forEach((function(t){var i=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach((function(t){return t.gap+=i})),t.minVar.cOut.forEach((function(e){e.left=t.maxVar,e.gap+=i}))}))),a.concat(T)}function h(t,e,i,n){var o,c=t.length,d=2*c;console.assert(e.length>=c);var u=new Array(d);for(o=0;o<c;++o){var h=t[o],p=new r(e[o],h,i.getCentre(h));u[o]=new s(!0,p,i.getOpen(h)),u[o+c]=new s(!1,p,i.getClose(h))}u.sort(a);var g=new Array,f=l();for(o=0;o<d;++o){var m=u[o];p=m.v;if(m.isOpen)f.insert(p),i.findNeighbours(p,f);else{f.remove(p);var _=function(t,e){var o=(i.getSize(t.r)+i.getSize(e.r))/2+n;g.push(new MC.Constraint(t.v,e.v,o))},v=function(t,e,i){for(var n,o=p[t].iterator();null!==(n=o[t]());)i(n,p),n[e].remove(p)};v("prev","next",(function(t,e){return _(t,e)})),v("next","prev",(function(t,e){return _(e,t)}))}}return console.assert(0===f.size),g}function p(t,e){return h(t,e,c,1e-6)}function g(t,e){return h(t,e,d,1e-6)}function f(t){return u(t,c,1e-6)}function m(t){return u(t,d,1e-6)}e.generateXConstraints=p,e.generateYConstraints=g,e.generateXGroupConstraints=f,e.generateYGroupConstraints=m,e.removeOverlaps=function(t){var e=t.map((function(t){return new MC.Variable(t.cx())})),i=p(t,e),n=new MC.Solver(e,i);n.solve(),e.forEach((function(e,i){return t[i].setXCentre(e.position())})),e=t.map((function(t){return new MC.Variable(t.cy())})),i=g(t,e),(n=new MC.Solver(e,i)).solve(),e.forEach((function(e,i){return t[i].setYCentre(e.position())}))};var _=function(t){function e(e,i){var n=t.call(this,0,i)||this;return n.index=e,n}return i(e,t),e}(MC.Variable);e.IndexedVariable=_;var v=function(){function t(t,e,i,r,s){var a=this;if(void 0===i&&(i=null),void 0===r&&(r=null),void 0===s&&(s=!1),this.nodes=t,this.groups=e,this.rootGroup=i,this.avoidOverlaps=s,this.variables=t.map((function(t,e){return t.variable=new _(e,1)})),r&&this.createConstraints(r),s&&i&&void 0!==i.groups){t.forEach((function(t){if(t.width&&t.height){var e=t.width/2,i=t.height/2;t.bounds=new o(t.x-e,t.x+e,t.y-i,t.y+i)}else t.bounds=new o(t.x,t.x,t.y,t.y)})),n(i);var l=t.length;e.forEach((function(t){a.variables[l]=t.minVar=new _(l++,void 0!==t.stiffness?t.stiffness:.01),a.variables[l]=t.maxVar=new _(l++,void 0!==t.stiffness?t.stiffness:.01)}))}}return t.prototype.createSeparation=function(t){return new MC.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var i="x",n="width";"x"===t.axis&&(i="y",n="height");var o=t.offsets.map((function(t){return e.nodes[t.node]})).sort((function(t,e){return t[i]-e[i]})),r=null;o.forEach((function(t){if(r){var e=r[i]+r[n];e>t[i]&&(t[i]=e)}r=t}))}},t.prototype.createAlignment=function(t){var e=this,i=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var n="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach((function(t){var o=e.nodes[t.node].variable;n.push(new MC.Constraint(i,o,t.offset,!0))}))},t.prototype.createConstraints=function(t){var e=this,i=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter((function(t){return"x"===t.axis&&i(t)})).map((function(t){return e.createSeparation(t)})),this.yConstraints=t.filter((function(t){return"y"===t.axis&&i(t)})).map((function(t){return e.createSeparation(t)})),t.filter((function(t){return"alignment"===t.type})).forEach((function(t){return e.createAlignment(t)}))},t.prototype.setupVariablesAndBounds=function(t,e,i,n){this.nodes.forEach((function(r,s){r.fixed?(r.variable.weight=r.fixedWeight?r.fixedWeight:1e3,i[s]=n(r)):r.variable.weight=1;var a=(r.width||0)/2,l=(r.height||0)/2,c=t[s],d=e[s];r.bounds=new o(c-a,c+a,d-l,d+l)}))},t.prototype.xProject=function(t,e,i){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,i,(function(t){return t.px}),this.xConstraints,f,(function(t){return t.bounds.setXCentre(i[t.variable.index]=t.variable.position())}),(function(t){var e=i[t.minVar.index]=t.minVar.position(),n=i[t.maxVar.index]=t.maxVar.position(),o=t.padding/2;t.bounds.x=e-o,t.bounds.X=n+o}))},t.prototype.yProject=function(t,e,i){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,i,(function(t){return t.py}),this.yConstraints,m,(function(t){return t.bounds.setYCentre(i[t.variable.index]=t.variable.position())}),(function(t){var e=i[t.minVar.index]=t.minVar.position(),n=i[t.maxVar.index]=t.maxVar.position(),o=t.padding/2;t.bounds.y=e-o,t.bounds.Y=n+o}))},t.prototype.projectFunctions=function(){var t=this;return[function(e,i,n){return t.xProject(e,i,n)},function(e,i,n){return t.yProject(e,i,n)}]},t.prototype.project=function(t,e,i,o,r,s,a,l,c){this.setupVariablesAndBounds(t,e,o,r),this.rootGroup&&this.avoidOverlaps&&(n(this.rootGroup),s=s.concat(a(this.rootGroup))),this.solve(this.variables,s,i,o),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),n(this.rootGroup))},t.prototype.solve=function(t,e,i,n){var o=new MC.Solver(t,e);o.setStartingPositions(i),o.setDesiredPositions(n),o.solve()},t}();e.Projection=v})),BC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",i=!1,n=0;n<this.subheaps.length;++n){var o=this.subheaps[n];o.elem?(i&&(e+=","),e+=o.toString(t),i=!0):i=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach((function(e){return e.forEach(t)})))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce((function(t,e){return t+e.count()}),0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every((function(i){return t(e.elem,i.elem)&&i.isHeap(t)}))},t.prototype.insert=function(e,i){return this.merge(new t(e),i)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var i=this.subheaps.pop().merge(this.subheaps.pop(),e),n=this.mergePairs(e);return i.merge(n,e)},t.prototype.decreaseKey=function(e,i,n,o){var r=e.removeMin(o);e.elem=r.elem,e.subheaps=r.subheaps,null!==n&&null!==r.elem&&n(e.elem,e);var s=new t(i);return null!==n&&n(i,s),this.merge(s,o)},t}();e.PairingHeap=i;var n=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var o,r=0;o=e[r];++r)t=new i(o),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,i){void 0===i&&(i=null),this.root=this.root.decreaseKey(t,e,i,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=n})),FC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.id=t,this.distance=e},n=function(t){this.id=t,this.neighbours=[]},o=function(t,e,i){this.node=t,this.prev=e,this.d=i},r=function(){function t(t,e,o,r,s){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var a=this.n;a--;)this.neighbours[a]=new n(a);for(a=this.es.length;a--;){var l=this.es[a],c=o(l),d=r(l),u=s(l);this.neighbours[c].neighbours.push(new i(d,u)),this.neighbours[d].neighbours.push(new i(c,u))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,i){var n=new BC.PriorityQueue((function(t,e){return t.d<=e.d})),r=this.neighbours[t],s=new o(r,null,0),a={};for(n.push(s);!n.empty()&&(r=(s=n.pop()).node).id!==e;)for(var l=r.neighbours.length;l--;){var c=r.neighbours[l],d=this.neighbours[c.id];if(!s.prev||d.id!==s.prev.node.id){var u=d.id+","+r.id;if(!(u in a&&a[u]<=s.d)){var h=s.prev?i(s.prev.node.id,r.id,d.id):0,p=s.d+c.distance+h;a[u]=p,n.push(new o(d,s,p))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var i=new BC.PriorityQueue((function(t,e){return t.d<=e.d})),n=this.neighbours.length,o=new Array(n);n--;){var r=this.neighbours[n];r.d=n===t?0:Number.POSITIVE_INFINITY,r.q=i.push(r)}for(;!i.empty();){var s=i.pop();if(o[s.id]=s.d,s.id===e){for(var a=[],l=s;void 0!==l.prev;)a.push(l.prev.id),l=l.prev;return a}for(n=s.neighbours.length;n--;){var c=s.neighbours[n],d=(l=this.neighbours[c.id],s.d+c.distance);s.d!==Number.MAX_VALUE&&l.d>d&&(l.d=d,l.prev=s,i.reduceKey(l.q,l,(function(t,e){return t.q=e})))}}return o},t}();e.Calculator=r})),HC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.Point=n;var o=function(t,e,i,n){this.x1=t,this.y1=e,this.x2=i,this.y2=n};e.LineSegment=o;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n);function s(t,e,i){return(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)}function a(t,e,i){return s(t,e,i)>0}function l(t,e,i){return s(t,e,i)<0}function c(t,e){var i,n,o,r,s=e.length-1;if(l(t,e[1],e[0])&&!a(t,e[s-1],e[0]))return 0;for(i=0,n=s;;){if(n-i==1)return a(t,e[i],e[n])?i:n;if((r=l(t,e[(o=Math.floor((i+n)/2))+1],e[o]))&&!a(t,e[o-1],e[o]))return o;a(t,e[i+1],e[i])?r||a(t,e[i],e[o])?n=o:i=o:r&&l(t,e[i],e[o])?n=o:i=o}}function d(t,e){var i,n,o,r,s=e.length-1;if(a(t,e[s-1],e[0])&&!l(t,e[1],e[0]))return 0;for(i=0,n=s;;){if(n-i==1)return l(t,e[i],e[n])?i:n;if(r=l(t,e[(o=Math.floor((i+n)/2))+1],e[o]),a(t,e[o-1],e[o])&&!r)return o;l(t,e[i+1],e[i])?r?l(t,e[i],e[o])?n=o:i=o:n=o:r?i=o:a(t,e[i],e[o])?n=o:i=o}}function u(t,e,i,n,o,r){var s,a;a=n(t[s=i(e[0],t)],e);for(var l=!1;!l;){for(l=!0;s===t.length-1&&(s=0),!o(e[a],t[s],t[s+1]);)++s;for(;0===a&&(a=e.length-1),!r(t[s],e[a],e[a-1]);)--a,l=!1}return{t1:s,t2:a}}function h(t,e){return u(t,e,c,d,a,l)}e.PolyPoint=r,e.isLeft=s,e.ConvexHull=function(t){var e,i=t.slice(0).sort((function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y})),n=t.length,o=i[0].x;for(e=1;e<n&&i[e].x===o;++e);var r=e-1,a=[];if(a.push(i[0]),r===n-1)i[r].y!==i[0].y&&a.push(i[r]);else{var l,c=n-1,d=i[n-1].x;for(e=n-2;e>=0&&i[e].x===d;e--);for(l=e+1,e=r;++e<=l;)if(!(s(i[0],i[l],i[e])>=0&&e<l)){for(;a.length>1&&!(s(a[a.length-2],a[a.length-1],i[e])>0);)a.length-=1;0!=e&&a.push(i[e])}c!=l&&a.push(i[c]);var u=a.length;for(e=l;--e>=r;)if(!(s(i[c],i[r],i[e])>=0&&e>r)){for(;a.length>u&&!(s(a[a.length-2],a[a.length-1],i[e])>0);)a.length-=1;0!=e&&a.push(i[e])}}return a},e.clockwiseRadialSweep=function(t,e,i){e.slice(0).sort((function(e,i){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(i.y-t.y,i.x-t.x)})).forEach(i)},e.tangent_PolyPolyC=u,e.LRtangent_PolyPolyC=function(t,e){var i=h(e,t);return{t1:i.t2,t2:i.t1}},e.RLtangent_PolyPolyC=h,e.LLtangent_PolyPolyC=function(t,e){return u(t,e,d,d,l,l)},e.RRtangent_PolyPolyC=function(t,e){return u(t,e,c,c,a,a)};var p=function(t,e){this.t1=t,this.t2=e};e.BiTangent=p;var g=function(){};e.BiTangents=g;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n);e.TVGPoint=f;var m=function(t,e,i,n){this.id=t,this.polyid=e,this.polyvertid=i,this.p=n,n.vv=this};e.VisibilityVertex=m;var _=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=_;var v=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var i=t.length,n=0;n<i;n++){for(var o=t[n],r=0;r<o.length;++r){var s=o[r],a=new m(this.V.length,n,r,s);this.V.push(a),r>0&&this.E.push(new _(o[r-1].vv,a))}o.length>1&&this.E.push(new _(o[0].vv,o[o.length-1].vv))}for(n=0;n<i-1;n++){var l=t[n];for(r=n+1;r<i;r++){var c=t[r],d=b(l,c);for(var u in d){var h=d[u],p=l[h.t1],g=c[h.t2];this.addEdgeIfVisible(p,g,n,r)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,i,n){this.intersectsPolys(new o(t.x,t.y,e.x,e.y),i,n)||this.E.push(new _(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var i,n,o,r=this.P.length;this.V.push(new m(this.V.length,r,0,t));for(var s=0;s<r;++s)if(s!==e){var a=this.P[s],l=(i=t,o=void 0,(o=(n=a).slice(0)).push(n[0]),{rtan:c(i,o),ltan:d(i,o)});this.addEdgeIfVisible(t,a[l.ltan],e,s),this.addEdgeIfVisible(t,a[l.rtan],e,s)}return t.vv},t.prototype.intersectsPolys=function(t,e,i){for(var n=0,o=this.P.length;n<o;++n)if(n!=e&&n!=i&&y(t,this.P[n]).length>0)return!0;return!1},t}();function y(t,e){for(var i=[],n=1,o=e.length;n<o;++n){var r=PC.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[n-1].x,e[n-1].y,e[n].x,e[n].y);r&&i.push(r)}return i}function b(t,e){for(var i=t.length-1,n=e.length-1,o=new g,r=0;r<i;++r)for(var a=0;a<n;++a){var l=t[0==r?i-1:r-1],c=t[r],d=t[r+1],u=e[0==a?n-1:a-1],h=e[a],f=e[a+1],m=s(l,c,h),_=s(c,u,h),v=s(c,h,f),y=s(u,h,c),b=s(h,l,c),E=s(h,c,d);m>=0&&_>=0&&v<0&&y>=0&&b>=0&&E<0?o.ll=new p(r,a):m<=0&&_<=0&&v>0&&y<=0&&b<=0&&E>0?o.rr=new p(r,a):m<=0&&_>0&&v<=0&&y>=0&&b<0&&E>=0?o.rl=new p(r,a):m>=0&&_<0&&v>=0&&y<=0&&b>0&&E<=0&&(o.lr=new p(r,a))}return o}function E(t,e){return!t.every((function(t){return!function(t,e){for(var i=1,n=e.length;i<n;++i)if(l(e[i-1],e[i],t))return!1;return!0}(t,e)}))}e.TangentVisibilityGraph=v,e.tangents=b,e.polysOverlap=function(t,e){if(E(t,e))return!0;if(E(e,t))return!0;for(var i=1,n=t.length;i<n;++i){var r=t[i],s=t[i-1];if(y(new o(s.x,s.y,r.x,r.y),e).length>0)return!0}return!1}})),UC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=10,n=(1+Math.sqrt(5))/2,o=1e-4;e.applyPacking=function(t,e,r,s,a,l){void 0===a&&(a=1),void 0===l&&(l=!0);var c=e,d=r,u=(a=void 0!==a?a:1,s=void 0!==s?s:0,0),h=0,p=0,g=0,f=[];function m(t,e){f=[],u=0,h=0,g=0;for(var i=0;i<t.length;i++){_(t[i],e)}return Math.abs(u/h-a)}function _(t,e){for(var n=void 0,r=0;r<f.length;r++)if(f[r].space_left>=t.height&&f[r].x+f[r].width+t.width+i-e<=o){n=f[r];break}f.push(t),void 0!==n?(t.x=n.x+n.width+i,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+i,n.bottom+=t.height+i):(t.y=g,g+=t.height+i,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-h>-o&&(h=t.y+t.height-0),t.x+t.width-u>-o&&(u=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach((function(t){!function(t){var e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=0,o=0;t.array.forEach((function(t){var r=void 0!==t.width?t.width:s,a=void 0!==t.height?t.height:s;r/=2,a/=2,n=Math.max(t.x+r,n),e=Math.min(t.x-r,e),o=Math.max(t.y+a,o),i=Math.min(t.y-a,i)})),t.width=n-e,t.height=o-i}(t)}))}(t),function(t,e){var r=Number.POSITIVE_INFINITY,s=0;t.sort((function(t,e){return e.height-t.height})),p=t.reduce((function(t,e){return t.width<e.width?t.width:e.width}));var a=_=p,l=v=function(t){var e=0;return t.forEach((function(t){return e+=t.width+i})),e}(t),c=0,d=Number.MAX_VALUE,u=Number.MAX_VALUE,h=-1,g=Number.MAX_VALUE,f=Number.MAX_VALUE;for(;g>p||f>o;){if(1!=h){var _=l-(l-a)/n;d=m(t,_)}if(0!=h){var v=a+(l-a)/n;u=m(t,v)}if(g=Math.abs(_-v),f=Math.abs(d-u),d<r&&(r=d,s=_),u<r&&(r=u,s=v),d>u?(a=_,_=v,d=u,h=1):(l=v,v=_,u=d,h=0),c++>100)break}m(t,s)}(t),l&&function(t){t.forEach((function(t){var e={x:0,y:0};t.array.forEach((function(t){e.x+=t.x,e.y+=t.y})),e.x/=t.array.length,e.y/=t.array.length;var i={x:e.x-t.width/2,y:e.y-t.height/2},n={x:t.x-i.x+c/2-u/2,y:t.y-i.y+d/2-h/2};t.array.forEach((function(t){t.x+=n.x,t.y+=n.y}))}))}(t))},e.separateGraphs=function(t,e){for(var i={},n={},o=[],r=0,s=0;s<e.length;s++){var a=e[s],l=a.source,c=a.target;n[l.index]?n[l.index].push(c):n[l.index]=[c],n[c.index]?n[c.index].push(l):n[c.index]=[l]}for(s=0;s<t.length;s++){var d=t[s];i[d.index]||u(d,!0)}function u(t,e){if(void 0===i[t.index]){e&&(r++,o.push({array:[]})),i[t.index]=r,o[r-1].array.push(t);var s=n[t.index];if(s)for(var a=0;a<s.length;a++)u(s[a],!1)}}return o}})),VC=r_((function(t,e){var i;function n(t){return void 0!==t.leaves||void 0!==t.groups}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(i=e.EventType||(e.EventType={}));var o=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[i[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:i.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;for(this._links.length,this._descent.locks.clear(),e=0;e<n;++e)if((t=this._nodes[e]).fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var o=[t.px,t.py];this._descent.locks.add(e,o)}var r=this._descent.rungeKutta();return 0===r?this._alpha=0:void 0!==this._lastStress&&(this._alpha=r),this._lastStress=r,this.updateNodePositions(),this.trigger({type:i.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],i=this._descent.x[1],n=this._nodes.length;n--;)(t=this._nodes[n]).x=e[n],t.y=i[n]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach((function(t){e=Math.max(e,t.source,t.target)})),this._nodes=new Array(++e);for(var i=0;i<e;++i)this._nodes[i]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach((function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach((function(i,n){"number"==typeof i&&((t.leaves[n]=e._nodes[i]).parent=t)})),void 0!==t.groups&&t.groups.forEach((function(i,n){"number"==typeof i&&((t.groups[n]=e._groups[i]).parent=t)}))})),this._rootGroup.leaves=this._nodes.filter((function(t){return void 0===t.parent})),this._rootGroup.groups=this._groups.filter((function(t){return void 0===t.parent})),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=OC.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:i.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var i=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return DC.symmetricDiffLinkLengths(i._links,i.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var i=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return DC.jaccardLinkLengths(i._links,i.linkAccessor,e)},this},t.prototype.start=function(e,i,n,o,r,s){var a=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),void 0===s&&(s=!0);var l=this.nodes().length,c=l+2*this._groups.length;this._links.length;var d,u=this._canvasSize[0],h=this._canvasSize[1],p=new Array(c),g=new Array(c),f=null,m=this._avoidOverlaps;this._nodes.forEach((function(t,e){t.index=e,void 0===t.x&&(t.x=u/2,t.y=h/2),p[e]=t.x,g[e]=t.y})),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?d=this._distanceMatrix:(d=new FC.Calculator(c,this._links,t.getSourceIndex,t.getTargetIndex,(function(t){return a.getLinkLength(t)})).DistanceMatrix(),f=NC.Descent.createSquareMatrix(c,(function(){return 2})),this._links.forEach((function(t){"number"==typeof t.source&&(t.source=a._nodes[t.source]),"number"==typeof t.target&&(t.target=a._nodes[t.target])})),this._links.forEach((function(e){var i=t.getSourceIndex(e),n=t.getTargetIndex(e);f[i][n]=f[n][i]=e.weight||1})));var _=NC.Descent.createSquareMatrix(c,(function(t,e){return d[t][e]}));if(this._rootGroup&&void 0!==this._rootGroup.groups){var v=l;this._groups.forEach((function(t){!function(t,e,i,n){f[t][e]=f[e][t]=i,_[t][e]=_[e][t]=n}(v,v+1,a._groupCompactness,.1),p[v]=0,g[v++]=0,p[v]=0,g[v++]=0}))}else this._rootGroup={leaves:this._nodes,groups:[]};var y=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,y=y.concat(DC.generateDirectedEdgeConstraints(l,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new NC.Descent([p,g],_),this._descent.locks.clear();for(v=0;v<l;++v){var b=this._nodes[v];if(b.fixed){b.px=b.x,b.py=b.y;var E=[b.x,b.y];this._descent.locks.add(v,E)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,p,g),y.length>0&&(this._descent.project=new PC.Projection(this._nodes,this._groups,this._rootGroup,y).projectFunctions()),this._descent.run(i),this.separateOverlappingComponents(u,h,s),this.avoidOverlaps(m),m&&(this._nodes.forEach((function(t,e){t.x=p[e],t.y=g[e]})),this._descent.project=new PC.Projection(this._nodes,this._groups,this._rootGroup,y,!0).projectFunctions(),this._nodes.forEach((function(t,e){p[e]=t.x,g[e]=t.y}))),this._descent.G=f,this._descent.run(n),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=l,this._descent.scaleSnapByMaxH=l!=c;var T=NC.Descent.createSquareMatrix(c,(function(t,e){return t>=l||e>=l?f[t][e]:0}));this._descent.G=T,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(u,h,s),r?this.resume():this},t.prototype.initialLayout=function(e,i,n){if(this._groups.length>0&&e>0){var o=this._nodes.length,r=this._links.map((function(t){return{source:t.source.index,target:t.target.index}})),s=this._nodes.map((function(t){return{index:t.index}}));this._groups.forEach((function(t,e){s.push({index:t.index=o+e})})),this._groups.forEach((function(t,e){void 0!==t.leaves&&t.leaves.forEach((function(e){return r.push({source:t.index,target:e.index})})),void 0!==t.groups&&t.groups.forEach((function(e){return r.push({source:t.index,target:e.index})}))})),(new t).size(this.size()).nodes(s).links(r).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach((function(t){i[t.index]=s[t.index].x,n[t.index]=s[t.index].y}))}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,i){var n=this;if(void 0===i&&(i=!0),!this._distanceMatrix&&this._handleDisconnected){var o=this._descent.x[0],r=this._descent.x[1];this._nodes.forEach((function(t,e){t.x=o[e],t.y=r[e]}));var s=UC.separateGraphs(this._nodes,this._links);UC.applyPacking(s,t,e,this._defaultNodeSize,1,i),this._nodes.forEach((function(t,e){n._descent.x[0][e]=t.x,n._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))}))}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new HC.TangentVisibilityGraph(this._nodes.map((function(e){return e.bounds.inflate(-t).vertices()})))},t.prototype.routeEdge=function(t,e,i){void 0===e&&(e=5);var n=[],o=new HC.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),r={x:t.source.x,y:t.source.y},s={x:t.target.x,y:t.target.y},a=o.addPoint(r,t.source.index),l=o.addPoint(s,t.target.index);o.addEdgeIfVisible(r,s,t.source.index,t.target.index),void 0!==i&&i(o);var c=new FC.Calculator(o.V.length,o.E,(function(t){return t.source.id}),(function(t){return t.target.id}),(function(t){return t.length()})).PathFromNodeToNode(a.id,l.id);if(1===c.length||c.length===o.V.length){var d=PC.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);n=[d.sourceIntersection,d.arrowStart]}else{for(var u=c.length-2,h=o.V[c[u]].p,p=o.V[c[0]].p,g=(n=[t.source.innerBounds.rayIntersection(h.x,h.y)],u);g>=0;--g)n.push(o.V[c[g]].p);n.push(PC.makeEdgeTo(p,t.target.innerBounds,e))}return n},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){n(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,i){void 0!==e.leaves&&e.leaves.forEach((function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-i.x,e._dragGroupOffsetY=e.y-i.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.storeOffset(e,i)}))},t.dragOrigin=function(t){return n(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,i){n(e)?(void 0!==e.leaves&&e.leaves.forEach((function(t){e.bounds.setXCentre(i.x),e.bounds.setYCentre(i.y),t.px=t._dragGroupOffsetX+i.x,t.py=t._dragGroupOffsetY+i.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.drag(e,i)}))):(e.px=i.x,e.py=i.y)},t.dragEnd=function(e){n(e)?(void 0!==e.leaves&&e.leaves.forEach((function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY})),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=o})),GC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(e){var i=t.call(this)||this,n=e;return n.trigger&&(i.trigger=n.trigger),n.kick&&(i.kick=n.kick),n.drag&&(i.drag=n.drag),n.on&&(i.on=n.on),i.dragstart=i.dragStart=VC.Layout.dragStart,i.dragend=i.dragEnd=VC.Layout.dragEnd,i}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(VC.Layout);e.LayoutAdaptor=n,e.adaptor=function(t){return new n(t)}})),WC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(VC.EventType[VC.EventType.start],VC.EventType[VC.EventType.tick],VC.EventType[VC.EventType.end]);var i=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(VC.Layout.dragOrigin).on("dragstart.d3adaptor",VC.Layout.dragStart).on("drag.d3adaptor",(function(t){VC.Layout.drag(t,d3.event),i.resume()})).on("dragend.d3adaptor",VC.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:VC.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer((function(){return t.prototype.tick.call(e)}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(VC.EventType[t],e),this},e}(VC.Layout);e.D3StyleLayoutAdaptor=n,e.d3adaptor=function(){return new n}})),zC=r_((function(t,e){var i=o_&&o_.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(e){var i=t.call(this)||this;i.d3Context=e,i.event=e.dispatch(VC.EventType[VC.EventType.start],VC.EventType[VC.EventType.tick],VC.EventType[VC.EventType.end]);var n=i;return i.drag=function(){if(!t)var t=e.drag().subject(VC.Layout.dragOrigin).on("start.d3adaptor",VC.Layout.dragStart).on("drag.d3adaptor",(function(t){VC.Layout.drag(t,e.event),n.resume()})).on("end.d3adaptor",VC.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},i}return i(e,t),e.prototype.trigger=function(t){var e={type:VC.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,i=this.d3Context.timer((function(){return t.prototype.tick.call(e)&&i.stop()}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(VC.EventType[t],e),this},e}(VC.Layout);e.D3StyleLayoutAdaptor=n})),jC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.d3adaptor=function(t){return!t||function(t){var e=/^3\./;return t.version&&null!==t.version.match(e)}(t)?new WC.D3StyleLayoutAdaptor:new zC.D3StyleLayoutAdaptor(t)}})),XC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,i){this.id=t,this.rect=e,this.children=i,this.leaf=void 0===i||0===i.length};e.NodeWrapper=i;var n=function(t,e,i,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.id=t,this.x=e,this.y=i,this.node=n,this.line=o};e.Vert=n;var o=function(){function t(e,i){this.s=e,this.t=i;var n=t.findMatch(e,i),o=i.slice(0).reverse(),r=t.findMatch(e,o);n.length>=r.length?(this.length=n.length,this.si=n.si,this.ti=n.ti,this.reversed=!1):(this.length=r.length,this.si=r.si,this.ti=i.length-r.ti-r.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var i=t.length,n=e.length,o={length:0,si:-1,ti:-1},r=new Array(i),s=0;s<i;s++){r[s]=new Array(n);for(var a=0;a<n;a++)if(t[s]===e[a]){var l=r[s][a]=0===s||0===a?1:r[s-1][a-1]+1;l>o.length&&(o.length=l,o.si=s-l+1,o.ti=a-l+1)}else r[s][a]=0}return o},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=o;var r=function(){function t(t,e,o){var r=this;void 0===o&&(o=12),this.originalnodes=t,this.groupPadding=o,this.leaves=null,this.nodes=t.map((function(t,n){return new i(n,e.getBounds(t),e.getChildren(t))})),this.leaves=this.nodes.filter((function(t){return t.leaf})),this.groups=this.nodes.filter((function(t){return!t.leaf})),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach((function(t){return t.children.forEach((function(e){return r.nodes[e].parent=t}))})),this.root={children:[]},this.nodes.forEach((function(t){void 0===t.parent&&(t.parent=r.root,r.root.children.push(t.id)),t.ports=[]})),this.backToFront=this.nodes.slice(0),this.backToFront.sort((function(t,e){return r.getDepth(t)-r.getDepth(e)})),this.backToFront.slice(0).reverse().filter((function(t){return!t.leaf})).forEach((function(t){var e=PC.Rectangle.empty();t.children.forEach((function(t){return e=e.union(r.nodes[t].rect)})),t.rect=e.inflate(r.groupPadding)}));var s=this.midPoints(this.cols.map((function(t){return t.pos}))),a=this.midPoints(this.rows.map((function(t){return t.pos}))),l=s[0],c=s[s.length-1],d=a[0],u=a[a.length-1],h=this.rows.map((function(t){return{x1:l,x2:c,y1:t.pos,y2:t.pos}})).concat(a.map((function(t){return{x1:l,x2:c,y1:t,y2:t}}))),p=this.cols.map((function(t){return{x1:t.pos,x2:t.pos,y1:d,y2:u}})).concat(s.map((function(t){return{x1:t,x2:t,y1:d,y2:u}}))),g=h.concat(p);g.forEach((function(t){return t.verts=[]})),this.verts=[],this.edges=[],h.forEach((function(t){return p.forEach((function(e){var i=new n(r.verts.length,e.x1,t.y1);t.verts.push(i),e.verts.push(i),r.verts.push(i);for(var o=r.backToFront.length;o-- >0;){var s=r.backToFront[o],a=s.rect,l=Math.abs(i.x-a.cx()),c=Math.abs(i.y-a.cy());if(l<a.width()/2&&c<a.height()/2){i.node=s;break}}}))})),g.forEach((function(t,e){r.nodes.forEach((function(e,i){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach((function(i,o){var s=new n(r.verts.length,i.x,i.y,e,t);r.verts.push(s),t.verts.push(s),e.ports.push(s)}))}));var i=Math.abs(t.y1-t.y2)<.1,o=function(t,e){return i?e.x-t.x:e.y-t.y};t.verts.sort(o);for(var s=1;s<t.verts.length;s++){var a=t.verts[s-1],l=t.verts[s];a.node&&a.node===l.node&&a.node.leaf||r.edges.push({source:a.id,target:l.id,length:Math.abs(o(a,l))})}}))}return t.prototype.avg=function(t){return t.reduce((function(t,e){return t+e}))/t.length},t.prototype.getGridLines=function(t){for(var e=[],i=this.leaves.slice(0,this.leaves.length);i.length>0;){var n=i.filter((function(e){return e.rect["overlap"+t.toUpperCase()](i[0].rect)})),o={nodes:n,pos:this.avg(n.map((function(e){return e.rect["c"+t]()})))};e.push(o),o.nodes.forEach((function(t){return i.splice(i.indexOf(t),1)}))}return e.sort((function(t,e){return t.pos-e.pos})),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],i=[t[0]-e/2],n=1;n<t.length;n++)i.push((t[n]+t[n-1])/2);return i.push(t[t.length-1]+e/2),i},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var i=this.findLineage(t),n=this.findLineage(e),o=0;i[o]===n[o];)o++;return{commonAncestor:i[o-1],lineages:i.slice(o).concat(n.slice(o))}},t.prototype.siblingObstacles=function(t,e){var i=this,n=this.findAncestorPathBetween(t,e),o={};n.lineages.forEach((function(t){return o[t.id]={}}));var r=n.commonAncestor.children.filter((function(t){return!(t in o)}));return n.lineages.filter((function(t){return t.parent!==n.commonAncestor})).forEach((function(t){return r=r.concat(t.parent.children.filter((function(e){return e!==t.id})))})),r.map((function(t){return i.nodes[t]}))},t.getSegmentSets=function(t,e,i){for(var n=[],o=0;o<t.length;o++)for(var r=t[o],s=0;s<r.length;s++){(u=r[s]).edgeid=o,u.i=s;var a=u[1][e]-u[0][e];Math.abs(a)<.1&&n.push(u)}n.sort((function(t,i){return t[0][e]-i[0][e]}));for(var l=[],c=null,d=0;d<n.length;d++){var u=n[d];(!c||Math.abs(u[0][e]-c.pos)>.1)&&(c={pos:u[0][e],segments:[]},l.push(c)),c.segments.push(u)}return l},t.nudgeSegs=function(t,e,i,n,o,r){var s=n.length;if(!(s<=1)){for(var a=n.map((function(e){return new MC.Variable(e[0][t])})),l=[],c=0;c<s;c++)for(var d=0;d<s;d++)if(c!==d){var u=n[c],h=n[d],p=u.edgeid,g=h.edgeid,f=-1,m=-1;"x"==t?o(p,g)&&(u[0][e]<u[1][e]?(f=d,m=c):(f=c,m=d)):o(p,g)&&(u[0][e]<u[1][e]?(f=c,m=d):(f=d,m=c)),f>=0&&l.push(new MC.Constraint(a[f],a[m],r))}new MC.Solver(a,l).solve(),a.forEach((function(e,o){var r=n[o],s=e.position();r[0][t]=r[1][t]=s;var a=i[r.edgeid];r.i>0&&(a[r.i-1][1][t]=s),r.i<a.length-1&&(a[r.i+1][0][t]=s)}))}},t.nudgeSegments=function(e,i,n,o,r){for(var s=t.getSegmentSets(e,i,n),a=0;a<s.length;a++){for(var l=s[a],c=[],d=0;d<l.segments.length;d++){var u=l.segments[d];c.push({type:0,s:u,pos:Math.min(u[0][n],u[1][n])}),c.push({type:1,s:u,pos:Math.max(u[0][n],u[1][n])})}c.sort((function(t,e){return t.pos-e.pos+t.type-e.type}));var h=[],p=0;c.forEach((function(s){0===s.type?(h.push(s.s),p++):p--,0==p&&(t.nudgeSegs(i,n,e,h,o,r),h=[])}))}},t.prototype.routeEdges=function(e,i,n,o){var r=this,s=e.map((function(t){return r.route(n(t),o(t))})),a=t.orderEdges(s),l=s.map((function(e){return t.makeSegments(e)}));return t.nudgeSegments(l,"x","y",a,i),t.nudgeSegments(l,"y","x",a,i),t.unreverseEdges(l,s),l},t.unreverseEdges=function(t,e){t.forEach((function(t,i){e[i].reversed&&(t.reverse(),t.forEach((function(t){t.reverse()})))}))},t.angleBetween2Lines=function(t,e){var i=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),n=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),o=i-n;return(o>Math.PI||o<-Math.PI)&&(o=n-i),o},t.isLeft=function(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)<=0},t.getOrder=function(t){for(var e={},i=0;i<t.length;i++){var n=t[i];void 0===e[n.l]&&(e[n.l]={}),e[n.l][n.r]=!0}return function(t,i){return void 0!==e[t]&&e[t][i]}},t.orderEdges=function(e){for(var i=[],n=0;n<e.length-1;n++)for(var r=n+1;r<e.length;r++){var s,a,l,c=e[n],d=e[r],u=new o(c,d);0!==u.length&&(u.reversed&&(d.reverse(),d.reversed=!0,u=new o(c,d)),(u.si<=0||u.ti<=0)&&(u.si+u.length>=c.length||u.ti+u.length>=d.length)?i.push({l:n,r:r}):(u.si+u.length>=c.length||u.ti+u.length>=d.length?(s=c[u.si+1],l=c[u.si-1],a=d[u.ti-1]):(s=c[u.si+u.length-2],a=c[u.si+u.length],l=d[u.ti+u.length]),t.isLeft(s,a,l)?i.push({l:r,r:n}):i.push({l:n,r:r})))}return t.getOrder(i)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var i=function(t,e,i){return Math.abs((e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x))<.001},n=[],o=e(t[0]),r=1;r<t.length;r++){var s=e(t[r]),a=r<t.length-1?t[r+1]:null;a&&i(o,s,a)||(n.push([o,s]),o=s)}return n},t.prototype.route=function(t,e){var i=this,n=this.nodes[t],o=this.nodes[e];this.obstacles=this.siblingObstacles(n,o);var r={};this.obstacles.forEach((function(t){return r[t.id]=t})),this.passableEdges=this.edges.filter((function(t){var e=i.verts[t.source],n=i.verts[t.target];return!(e.node&&e.node.id in r||n.node&&n.node.id in r)}));for(var s=1;s<n.ports.length;s++){var a=n.ports[0].id,l=n.ports[s].id;this.passableEdges.push({source:a,target:l,length:0})}for(s=1;s<o.ports.length;s++){a=o.ports[0].id,l=o.ports[s].id;this.passableEdges.push({source:a,target:l,length:0})}var c=new FC.Calculator(this.verts.length,this.passableEdges,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).PathFromNodeToNodeWithPrevCost(n.ports[0].id,o.ports[0].id,(function(t,e,r){var s=i.verts[t],a=i.verts[e],l=i.verts[r],c=Math.abs(l.x-s.x),d=Math.abs(l.y-s.y);return s.node===n&&s.node===a.node||a.node===o&&a.node===l.node?0:c>1&&d>1?1e3:0})).reverse().map((function(t){return i.verts[t]}));return c.push(this.nodes[o.id].ports[0]),c.filter((function(t,e){return!(e<c.length-1&&c[e+1].node===n&&t.node===n||e>0&&t.node===o&&c[e-1].node===o)}))},t.getRoutePath=function(e,i,n,o){var r={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var s=0;s<e.length;s++){var a=(b=e[s])[1].x,l=b[1].y,c=a-b[0].x,d=l-b[0].y;if(s<e.length-1){Math.abs(c)>0?a-=c/Math.abs(c)*i:l-=d/Math.abs(d)*i,r.routepath+="L "+a+" "+l+" ";var u=e[s+1],h=u[0].x,p=u[0].y;c=u[1].x-h,d=u[1].y-p;var g,f,m=t.angleBetween2Lines(b,u)<0?1:0;Math.abs(c)>0?(g=h+c/Math.abs(c)*i,f=p):(g=h,f=p+d/Math.abs(d)*i);var _=Math.abs(g-a),v=Math.abs(f-l);r.routepath+="A "+_+" "+v+" 0 0 "+m+" "+g+" "+f+" "}else{var y=[a,l];Math.abs(c)>0?(E=[a-=c/Math.abs(c)*o,l+n],T=[a,l-n]):(E=[a+n,l-=d/Math.abs(d)*o],T=[a-n,l]),r.routepath+="L "+a+" "+l+" ",o>0&&(r.arrowpath="M "+y[0]+" "+y[1]+" L "+E[0]+" "+E[1]+" L "+T[0]+" "+T[1])}}else{var b,E,T;a=(b=e[0])[1].x,l=b[1].y,c=a-b[0].x,d=l-b[0].y,y=[a,l];Math.abs(c)>0?(E=[a-=c/Math.abs(c)*o,l+n],T=[a,l-n]):(E=[a+n,l-=d/Math.abs(d)*o],T=[a-n,l]),r.routepath+="L "+a+" "+l+" ",o>0&&(r.arrowpath="M "+y[0]+" "+y[1]+" L "+E[0]+" "+E[1]+" L "+T[0]+" "+T[1])}return r},t}();e.GridRouter=r})),YC=r_((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce((function(t,i){var n=i[e.target]-i[e.source];return t+n*n}),0))},t}();e.Link3D=i;var n=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i};e.Node3D=n;var o=function(){function t(e,i,n){var o=this;void 0===n&&(n=1),this.nodes=e,this.links=i,this.idealLinkLength=n,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var r=0;r<t.k;++r)this.result[r]=new Array(e.length);e.forEach((function(e,i){for(var n=0,r=t.dims;n<r.length;n++){var s=r[n];void 0===e[s]&&(e[s]=Math.random())}o.result[0][i]=e.x,o.result[1][i]=e.y,o.result[2][i]=e.z}))}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var i=this.nodes.length,n=new r;this.useJaccardLinkLengths&&DC.jaccardLinkLengths(this.links,n,1.5),this.links.forEach((function(t){return t.length*=e.idealLinkLength}));var o=new FC.Calculator(i,this.links,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).DistanceMatrix(),s=NC.Descent.createSquareMatrix(i,(function(t,e){return o[t][e]})),a=NC.Descent.createSquareMatrix(i,(function(){return 2}));this.links.forEach((function(t){var e=t.source,i=t.target;return a[e][i]=a[i][e]=1})),this.descent=new NC.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=a,this.constraints&&(this.descent.project=new PC.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var l=0;l<this.nodes.length;l++){var c=this.nodes[l];c.fixed&&this.descent.locks.add(l,[c.x,c.y,c.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=o;var r=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()})),KC=r_((function(t,e){function i(t,e,i,n){t.forEach((function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-i)}})),e.forEach((function(e){e.routerNode={bounds:e.bounds.inflate(-n),children:(void 0!==e.groups?e.groups.map((function(e){return t.length+e.id})):[]).concat(void 0!==e.leaves?e.leaves.map((function(t){return t.index})):[])}}));var o=t.concat(e).map((function(t,e){return t.routerNode.id=e,t.routerNode}));return new XC.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},i-n)}Object.defineProperty(e,"__esModule",{value:!0}),e.gridify=function(t,e,n,o){return t.cola.start(0,0,0,10,!1),i(t.cola.nodes(),t.cola.groups(),n,o).routeEdges(t.powerGraph.powerEdges,e,(function(t){return t.source.routerNode.id}),(function(t){return t.target.routerNode.id}))},e.powerGraphGridLayout=function(t,e,i){var n;t.nodes.forEach((function(t,e){return t.index=e})),(new VC.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups((function(t){(n=t).groups.forEach((function(t){return t.padding=i}))}));var o=t.nodes.length,r=[],s=t.nodes.slice(0);return s.forEach((function(t,e){return t.index=e})),n.groups.forEach((function(t){var e=t.index=t.id+o;s.push(t),void 0!==t.leaves&&t.leaves.forEach((function(t){return r.push({source:e,target:t.index})})),void 0!==t.groups&&t.groups.forEach((function(t){return r.push({source:e,target:t.id+o})}))})),n.powerEdges.forEach((function(t){r.push({source:t.source.index,target:t.target.index})})),(new VC.Layout).size(e).nodes(s).links(r).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new VC.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups((function(t){(n=t).groups.forEach((function(t){t.padding=i}))})).start(50,0,100,0,!1),powerGraph:n}}})),JC=r_((function(t,e){function i(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),i(GC),i(jC),i(NC),i(HC),i(XC),i(UC),i(VC),i(YC),i(DC),i(OC),i(BC),i(LC),i(PC),i(FC),i(MC),i(KC)})),$C=r_((function(t,e){var i;i=function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(1),r=i(2),s=i(5)||("undefined"!=typeof window?window.cola:null),a=i(4),l=function(t){return(void 0===t?"undefined":n(t))===n(0)},c=function(){},d=function(t,e){var i;return null!=(i=t)&&(void 0===i?"undefined":n(i))===n((function(){}))?t.apply(e,[e]):t};function u(t){this.options=o({},r,t)}u.prototype.run=function(){var t=this,e=this.options;t.manuallyStopped=!1;var i=e.cy,o=e.eles,r=o.nodes(),u=o.edges(),h=!1,p=r.filter((function(t){return t.isParent()})),g=r.subtract(p),f=e.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===f.x2&&(f.x2=f.x1+f.w),void 0===f.w&&(f.w=f.x2-f.x1),void 0===f.y2&&(f.y2=f.y1+f.h),void 0===f.h&&(f.h=f.y2-f.y1);var m=function(){for(var t=0;t<r.length;t++){var n=r[t],o=n.layoutDimensions(e),s=n.scratch("cola");if(!s.updatedDims){var a=d(e.nodeSpacing,n);s.width=o.w+2*a,s.height=o.h+2*a}}r.positions((function(t){var e=t.scratch().cola,i=void 0;return!t.grabbed()&&g.contains(t)&&(i={x:f.x1+e.x,y:f.y1+e.y},l(i.x)&&l(i.y)||(i=void 0)),i})),r.updateCompoundBounds(),h||(v(),h=!0),e.fit&&i.fit(e.padding)},_=function(){e.ungrabifyWhileSimulating&&E.grabify(),i.off("destroy",T),r.off("grab free position",x),r.off("lock unlock",k),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})},v=function(){t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})},y=e.refresh;y=e.refresh<0?1:Math.max(1,y);var b=t.adaptor=s.adaptor({trigger:function(t){var i=s.EventType?s.EventType.tick:null,n=s.EventType?s.EventType.end:null;switch(t.type){case"tick":case i:e.animate&&m();break;case"end":case n:m(),e.infinite||_()}},kick:function(){var i=!0,n=function(){if(t.manuallyStopped)return _(),!0;var n=b.tick();return e.infinite||i||b.convergenceThreshold(e.convergenceThreshold),i=!1,n&&e.infinite&&b.resume(),n};if(e.animate)a((function t(){(function(){for(var t=void 0,e=0;e<y&&!t;e++)t=t||n();return t})()||a(t)}));else for(;!n(););},on:c,drag:c});t.adaptor=b;var E=r.filter(":grabbable");e.ungrabifyWhileSimulating&&E.ungrabify();var T=void 0;i.one("destroy",T=function(){t.stop()});var x=void 0;r.on("grab free position",x=function(t){var e=this,i=e.scratch().cola,n=e.position();if(t.cyTarget===e||t.target===e)switch(t.type){case"grab":b.dragstart(i);break;case"free":b.dragend(i);break;case"position":i.px===n.x-f.x1&&i.py===n.y-f.y1||(i.px=n.x-f.x1,i.py=n.y-f.y1)}});var k=void 0;r.on("lock unlock",k=function(){var t=this,e=t.scratch().cola;e.fixed=t.locked(),t.locked()?b.dragstart(e):b.dragend(e)}),b.nodes(g.map((function(t,i){var n=d(e.nodeSpacing,t),o=t.position(),r=t.layoutDimensions(e);return t.scratch().cola={x:e.randomize&&!t.locked()||void 0===o.x?Math.round(Math.random()*f.w):o.x,y:e.randomize&&!t.locked()||void 0===o.y?Math.round(Math.random()*f.h):o.y,width:r.w+2*n,height:r.h+2*n,index:i,fixed:t.locked()}})));var S=[];e.alignment&&(e.alignment.vertical&&e.alignment.vertical.forEach((function(t){var e=[];t.forEach((function(t){var i=t.node.scratch().cola.index;e.push({node:i,offset:t.offset?t.offset:0})})),S.push({type:"alignment",axis:"x",offsets:e})})),e.alignment.horizontal&&e.alignment.horizontal.forEach((function(t){var e=[];t.forEach((function(t){var i=t.node.scratch().cola.index;e.push({node:i,offset:t.offset?t.offset:0})})),S.push({type:"alignment",axis:"y",offsets:e})}))),e.gapInequalities&&e.gapInequalities.forEach((function(t){var e=t.left.scratch().cola.index,i=t.right.scratch().cola.index;S.push({axis:t.axis,left:e,right:i,gap:t.gap,equality:t.equality})})),S.length>0&&b.constraints(S),b.groups(p.map((function(t,i){var n=d(e.nodeSpacing,t),o=function(e){return parseFloat(t.style("padding-"+e))},r=o("left")+n,s=o("right")+n,a=o("top")+n,l=o("bottom")+n;return t.scratch().cola={index:i,padding:Math.max(r,s,a,l),leaves:t.children().intersection(g).map((function(t){return t[0].scratch().cola.index})),fixed:t.locked()},t})).map((function(t){return t.scratch().cola.groups=t.children().intersection(p).map((function(t){return t.scratch().cola.index})),t.scratch().cola})));var C,w=void 0,I=void 0;if(null!=e.edgeLength?(w=e.edgeLength,I="linkDistance"):null!=e.edgeSymDiffLength?(w=e.edgeSymDiffLength,I="symmetricDiffLinkLengths"):null!=e.edgeJaccardLength?(w=e.edgeJaccardLength,I="jaccardLinkLengths"):(w=100,I="linkDistance"),b.links(u.stdFilter((function(t){return g.contains(t.source())&&g.contains(t.target())})).map((function(t){var e=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=w&&(e.calcLength=d(w,t)),e}))),b.size([f.w,f.h]),null!=w&&b[I]((function(t){return t.calcLength})),e.flow){var R=void 0;(void 0===(C=e.flow)?"undefined":n(C))===n("")?R={axis:e.flow,minSeparation:50}:l(e.flow)?R={axis:"y",minSeparation:e.flow}:function(t){return null!=t&&(void 0===t?"undefined":n(t))===n({})}(e.flow)?((R=e.flow).axis=R.axis||"y",R.minSeparation=null!=R.minSeparation?R.minSeparation:50):R={axis:"y",minSeparation:50},b.flowLayout(R.axis,R.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),b.avoidOverlaps(e.avoidOverlap).handleDisconnected(e.handleDisconnected).start(e.unconstrIter,e.userConstIter,e.allConstIter),e.infinite||setTimeout((function(){t.manuallyStopped||b.stop()}),e.maxSimulationTime),this},u.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t.exports=u},function(t,e,i){t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i.filter((function(t){return null!=t})).forEach((function(e){Object.keys(e).forEach((function(i){return t[i]=e[i]}))})),t}},function(t,e,i){var n={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.exports=n},function(t,e,i){var n=i(0),o=function(t){t&&t("layout","cola",n)};"undefined"!=typeof cytoscape&&o(cytoscape),t.exports=o},function(t,e,i){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=void 0;o="undefined"!==("undefined"==typeof window?"undefined":n(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)}:function(t){t()},t.exports=o},function(e,i){e.exports=t}])},t.exports=i(JC)}));EC.use($C);const qC={name:"cola",animate:!0,ready:t=>{t.cy.fit(),t.cy.center()}};class ZC extends Mm{constructor(){super(...arguments),this.hideFilter=!1,this.showEntryContents=!1,this.excludedEntryTypes=[],this.lastEntriesIds=[],this.ready=!1,this._entryTypes=[]}firstUpdated(){window.addEventListener("scroll",(()=>{this.cy.resize()})),this.cy=EC({container:this.entryGraph,boxSelectionEnabled:!1,autoungrabify:!1,userZoomingEnabled:!0,userPanningEnabled:!0,layout:qC,style:"\nnode {\n  background-color: grey;\n  font-size: 10px;\n  width: 16px;\n  label: data(label);\n  height: 16px;\n  shape: round-rectangle;\n}\n\nnode > node {\n  height: 1px;\n}\n\nedge {\n  width: 2;\n  target-arrow-shape: triangle;\n  curve-style: bezier;\n}\n\nedge[label] {\n  label: data(label);\n  font-size: 7px;\n  text-rotation: autorotate;\n  text-margin-x: 0px;\n  text-margin-y: -5px;\n  text-valign: top;\n  text-halign: center;        \n}\n\n.selected {\n  border-width: 1px;\n  border-color: black;\n  border-style: solid;\n}\n\n.AgentId {\n  background-color: lime;\n}\n.Create {\n  background-color: blue;\n}\n.Delete {\n  background-color: red;\n}\n.Update {\n  background-color: cyan;\n}\n.CreateLink {\n  background-color: purple;\n}\n.DeleteLink {\n  background-color: purple;\n}\n\n.implicit {\n  width: 1;\n  line-style: dotted;\n}\n\n.update-edge {\n  width: 1;\n  line-style: dashed;\n}\n.updated {\n  opacity: 0.5;\n}\n.deleted {\n  opacity: 0.3 !important;\n}\n"}),this.cy.on("tap","node",(t=>{const e=t.target.id();this.updatePlayground({activeHash:e})})),this.cy.ready((t=>{setTimeout((()=>{this.ready=!0,this.updatedGraph()}),500)}))}updated(t){super.updated(t),this.updatedGraph()}observedCells(){return Bm(this.activeDna,this.conductors)}updatedGraph(){if(0===this.entryGraph.getBoundingClientRect().width||!this.ready)return null;const t=Bm(this.activeDna,this.conductors),{entries:e,entryTypes:i}=IC(t,this.showEntryContents,this.excludedEntryTypes);Jo(this.lastEntriesIds,e.map((t=>t.data.id)))||(this.layout&&this.layout.stop(),this.cy.remove("node"),this.cy.add(e),this.layout=this.cy.elements().makeLayout(qC),this.layout.run(),this._entryTypes=i),this.lastEntriesIds=e.map((t=>t.data.id)),this.cy.filter("node").removeClass("selected");const n=this.cy.getElementById(this.activeHash);n&&n.addClass("selected")}static get styles(){return[Lm,st(pm||(pm=Rm`:host{display:flex}`))]}renderHelp(){return F(gm||(gm=Rm` <holochain-playground-help-button heading="Entry Graph" class="block-help"> <span> This graph contains a <strong>high-level view of all the entries</strong> that are present in the DHT. Every object you see represents an entry, and the relationships between them are links. <br> <br> Dashed relationships are embedded references, and solid relationships are normal holochain links. The tag of the holochain links appears as the label. </span> </holochain-playground-help-button>`))}renderFilter(){return F(fm||(fm=Rm` <div class="row" style="align-items:center;justify-content:start;position:relative"> <mwc-formfield label="Show Entry Contents" style="margin-right:16px"> <mwc-checkbox checked="checked" @change="${0}"></mwc-checkbox></mwc-formfield> <span class="vertical-divider"></span> <mwc-button label="Visible entries" style="--mdc-theme-primary:rgba(0,0,0,0.7);margin-left:16px" icon="arrow_drop_down" id="visible-entries-button" trailingIcon @click="${0}"></mwc-button> <mwc-menu corner="BOTTOM_END" multi activatable id="visible-entries-menu" .anchor="${0}" @selected="${0}"> ${0} </mwc-menu> </div>`),(t=>this.showEntryContents=t.target.checked),(()=>this._visibleEntriesMenu.show()),this._visibleEntriesButton,(t=>{const e=[...t.detail.index];this.excludedEntryTypes=this._entryTypes.filter(((t,i)=>!e.includes(i)))}),this._entryTypes.map((t=>F(mm||(mm=Rm` <mwc-list-item graphic="icon" .selected="${0}" .activated="${0}"> ${0} ${0} </mwc-list-item> `),!this.excludedEntryTypes.includes(t),!this.excludedEntryTypes.includes(t),this.excludedEntryTypes.includes(t)?F(vm||(vm=Rm``)):F(_m||(_m=Rm` <mwc-icon slot="graphic">check</mwc-icon> `)),t))))}render(){return F(ym||(ym=Rm` <mwc-card class="block-card"> <div class="column fill" style="margin:16px"> <span class="block-title">Entry Graph</span> <div id="entry-graph" class="fill"></div> ${0} ${0} </div> </mwc-card> `),this.renderHelp(),this.hideFilter?F(bm||(bm=Rm``)):this.renderFilter())}static get scopedElements(){return{"mwc-checkbox":dg,"mwc-formfield":vp,"mwc-icon-button":ei,"mwc-card":ld,"mwc-menu":ng,"mwc-icon":ul,"mwc-list-item":xd,"mwc-button":bl,"holochain-playground-help-button":xC}}}Am([$({type:Boolean,attribute:"hide-filter"}),Om("design:type",Boolean)],ZC.prototype,"hideFilter",void 0),Am([$({type:Boolean,attribute:"show-entry-contents"}),Om("design:type",Boolean)],ZC.prototype,"showEntryContents",void 0),Am([$({type:Array}),Om("design:type",Array)],ZC.prototype,"excludedEntryTypes",void 0),Am([Z("#entry-graph"),Om("design:type",HTMLElement)],ZC.prototype,"entryGraph",void 0),Am([$({type:Array}),Om("design:type",Object)],ZC.prototype,"_entryTypes",void 0),Am([Z("#visible-entries-button"),Om("design:type",bl)],ZC.prototype,"_visibleEntriesButton",void 0),Am([Z("#visible-entries-menu"),Om("design:type",ng)],ZC.prototype,"_visibleEntriesMenu",void 0);var QC=function(){this.__data__=[],this.size=0};var tw=function(t,e){return t===e||t!=t&&e!=e};var ew=function(t,e){for(var i=t.length;i--;)if(tw(t[i][0],e))return i;return-1},iw=Array.prototype.splice;var nw=function(t){var e=this.__data__,i=ew(e,t);return!(i<0)&&(i==e.length-1?e.pop():iw.call(e,i,1),--this.size,!0)};var ow=function(t){var e=this.__data__,i=ew(e,t);return i<0?void 0:e[i][1]};var rw=function(t){return ew(this.__data__,t)>-1};var sw=function(t,e){var i=this.__data__,n=ew(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};function aw(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}aw.prototype.clear=QC,aw.prototype.delete=nw,aw.prototype.get=ow,aw.prototype.has=rw,aw.prototype.set=sw;var lw=aw;var cw=function(){this.__data__=new lw,this.size=0};var dw=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i};var uw=function(t){return this.__data__.get(t)};var hw=function(t){return this.__data__.has(t)},pw="object"==typeof o_&&o_&&o_.Object===Object&&o_,gw="object"==typeof self&&self&&self.Object===Object&&self,fw=pw||gw||Function("return this")(),mw=fw.Symbol,_w=Object.prototype,vw=_w.hasOwnProperty,yw=_w.toString,bw=mw?mw.toStringTag:void 0;var Ew=function(t){var e=vw.call(t,bw),i=t[bw];try{t[bw]=void 0;var n=!0}catch(t){}var o=yw.call(t);return n&&(e?t[bw]=i:delete t[bw]),o},Tw=Object.prototype.toString;var xw=function(t){return Tw.call(t)},kw=mw?mw.toStringTag:void 0;var Sw=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":kw&&kw in Object(t)?Ew(t):xw(t)};var Cw=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var ww=function(t){if(!Cw(t))return!1;var e=Sw(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Iw=fw["__core-js_shared__"],Rw=function(){var t=/[^.]+$/.exec(Iw&&Iw.keys&&Iw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var Aw=function(t){return!!Rw&&Rw in t},Ow=Function.prototype.toString;var Dw=function(t){if(null!=t){try{return Ow.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Nw=/^\[object .+?Constructor\]$/,Mw=Function.prototype,Lw=Object.prototype,Pw=Mw.toString,Bw=Lw.hasOwnProperty,Fw=RegExp("^"+Pw.call(Bw).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Hw=function(t){return!(!Cw(t)||Aw(t))&&(ww(t)?Fw:Nw).test(Dw(t))};var Uw=function(t,e){return null==t?void 0:t[e]};var Vw=function(t,e){var i=Uw(t,e);return Hw(i)?i:void 0},Gw=Vw(fw,"Map"),Ww=Vw(Object,"create");var zw=function(){this.__data__=Ww?Ww(null):{},this.size=0};var jw=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xw=Object.prototype.hasOwnProperty;var Yw=function(t){var e=this.__data__;if(Ww){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return Xw.call(e,t)?e[t]:void 0},Kw=Object.prototype.hasOwnProperty;var Jw=function(t){var e=this.__data__;return Ww?void 0!==e[t]:Kw.call(e,t)};var $w=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Ww&&void 0===e?"__lodash_hash_undefined__":e,this};function qw(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}qw.prototype.clear=zw,qw.prototype.delete=jw,qw.prototype.get=Yw,qw.prototype.has=Jw,qw.prototype.set=$w;var Zw=qw;var Qw=function(){this.size=0,this.__data__={hash:new Zw,map:new(Gw||lw),string:new Zw}};var tI=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var eI=function(t,e){var i=t.__data__;return tI(e)?i["string"==typeof e?"string":"hash"]:i.map};var iI=function(t){var e=eI(this,t).delete(t);return this.size-=e?1:0,e};var nI=function(t){return eI(this,t).get(t)};var oI=function(t){return eI(this,t).has(t)};var rI=function(t,e){var i=eI(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function sI(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}sI.prototype.clear=Qw,sI.prototype.delete=iI,sI.prototype.get=nI,sI.prototype.has=oI,sI.prototype.set=rI;var aI=sI;var lI=function(t,e){var i=this.__data__;if(i instanceof lw){var n=i.__data__;if(!Gw||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new aI(n)}return i.set(t,e),this.size=i.size,this};function cI(t){var e=this.__data__=new lw(t);this.size=e.size}cI.prototype.clear=cw,cI.prototype.delete=dw,cI.prototype.get=uw,cI.prototype.has=hw,cI.prototype.set=lI;var dI=cI;var uI=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t},hI=function(){try{var t=Vw(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var pI=function(t,e,i){"__proto__"==e&&hI?hI(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i},gI=Object.prototype.hasOwnProperty;var fI=function(t,e,i){var n=t[e];gI.call(t,e)&&tw(n,i)&&(void 0!==i||e in t)||pI(t,e,i)};var mI=function(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),o?pI(i,a,l):fI(i,a,l)}return i};var _I=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n};var vI=function(t){return null!=t&&"object"==typeof t};var yI=function(t){return vI(t)&&"[object Arguments]"==Sw(t)},bI=Object.prototype,EI=bI.hasOwnProperty,TI=bI.propertyIsEnumerable,xI=yI(function(){return arguments}())?yI:function(t){return vI(t)&&EI.call(t,"callee")&&!TI.call(t,"callee")},kI=Array.isArray;var SI=function(){return!1},CI=r_((function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,o=n&&n.exports===i?fw.Buffer:void 0,r=(o?o.isBuffer:void 0)||SI;t.exports=r})),wI=/^(?:0|[1-9]\d*)$/;var II=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&wI.test(t))&&t>-1&&t%1==0&&t<e};var RI=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},AI={};AI["[object Float32Array]"]=AI["[object Float64Array]"]=AI["[object Int8Array]"]=AI["[object Int16Array]"]=AI["[object Int32Array]"]=AI["[object Uint8Array]"]=AI["[object Uint8ClampedArray]"]=AI["[object Uint16Array]"]=AI["[object Uint32Array]"]=!0,AI["[object Arguments]"]=AI["[object Array]"]=AI["[object ArrayBuffer]"]=AI["[object Boolean]"]=AI["[object DataView]"]=AI["[object Date]"]=AI["[object Error]"]=AI["[object Function]"]=AI["[object Map]"]=AI["[object Number]"]=AI["[object Object]"]=AI["[object RegExp]"]=AI["[object Set]"]=AI["[object String]"]=AI["[object WeakMap]"]=!1;var OI=function(t){return vI(t)&&RI(t.length)&&!!AI[Sw(t)]};var DI=function(t){return function(e){return t(e)}},NI=r_((function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,o=n&&n.exports===i&&pw.process,r=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=r})),MI=NI&&NI.isTypedArray,LI=MI?DI(MI):OI,PI=Object.prototype.hasOwnProperty;var BI=function(t,e){var i=kI(t),n=!i&&xI(t),o=!i&&!n&&CI(t),r=!i&&!n&&!o&&LI(t),s=i||n||o||r,a=s?_I(t.length,String):[],l=a.length;for(var c in t)!e&&!PI.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||II(c,l))||a.push(c);return a},FI=Object.prototype;var HI=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||FI)};var UI=function(t,e){return function(i){return t(e(i))}},VI=UI(Object.keys,Object),GI=Object.prototype.hasOwnProperty;var WI=function(t){if(!HI(t))return VI(t);var e=[];for(var i in Object(t))GI.call(t,i)&&"constructor"!=i&&e.push(i);return e};var zI=function(t){return null!=t&&RI(t.length)&&!ww(t)};var jI=function(t){return zI(t)?BI(t):WI(t)};var XI=function(t,e){return t&&mI(e,jI(e),t)};var YI=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e},KI=Object.prototype.hasOwnProperty;var JI=function(t){if(!Cw(t))return YI(t);var e=HI(t),i=[];for(var n in t)("constructor"!=n||!e&&KI.call(t,n))&&i.push(n);return i};var $I=function(t){return zI(t)?BI(t,!0):JI(t)};var qI=function(t,e){return t&&mI(e,$I(e),t)},ZI=r_((function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,o=n&&n.exports===i?fw.Buffer:void 0,r=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=r?r(i):new t.constructor(i);return t.copy(n),n}}));var QI=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e};var tR=function(t,e){for(var i=-1,n=null==t?0:t.length,o=0,r=[];++i<n;){var s=t[i];e(s,i,t)&&(r[o++]=s)}return r};var eR=function(){return[]},iR=Object.prototype.propertyIsEnumerable,nR=Object.getOwnPropertySymbols,oR=nR?function(t){return null==t?[]:(t=Object(t),tR(nR(t),(function(e){return iR.call(t,e)})))}:eR;var rR=function(t,e){return mI(t,oR(t),e)};var sR=function(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t},aR=UI(Object.getPrototypeOf,Object),lR=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)sR(e,oR(t)),t=aR(t);return e}:eR;var cR=function(t,e){return mI(t,lR(t),e)};var dR=function(t,e,i){var n=e(t);return kI(t)?n:sR(n,i(t))};var uR=function(t){return dR(t,jI,oR)};var hR=function(t){return dR(t,$I,lR)},pR=Vw(fw,"DataView"),gR=Vw(fw,"Promise"),fR=Vw(fw,"Set"),mR=Vw(fw,"WeakMap"),_R=Dw(pR),vR=Dw(Gw),yR=Dw(gR),bR=Dw(fR),ER=Dw(mR),TR=Sw;(pR&&"[object DataView]"!=TR(new pR(new ArrayBuffer(1)))||Gw&&"[object Map]"!=TR(new Gw)||gR&&"[object Promise]"!=TR(gR.resolve())||fR&&"[object Set]"!=TR(new fR)||mR&&"[object WeakMap]"!=TR(new mR))&&(TR=function(t){var e=Sw(t),i="[object Object]"==e?t.constructor:void 0,n=i?Dw(i):"";if(n)switch(n){case _R:return"[object DataView]";case vR:return"[object Map]";case yR:return"[object Promise]";case bR:return"[object Set]";case ER:return"[object WeakMap]"}return e});var xR=TR,kR=Object.prototype.hasOwnProperty;var SR=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&kR.call(t,"index")&&(i.index=t.index,i.input=t.input),i},CR=fw.Uint8Array;var wR=function(t){var e=new t.constructor(t.byteLength);return new CR(e).set(new CR(t)),e};var IR=function(t,e){var i=e?wR(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)},RR=/\w*$/;var AR=function(t){var e=new t.constructor(t.source,RR.exec(t));return e.lastIndex=t.lastIndex,e},OR=mw?mw.prototype:void 0,DR=OR?OR.valueOf:void 0;var NR=function(t){return DR?Object(DR.call(t)):{}};var MR=function(t,e){var i=e?wR(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)};var LR=function(t,e,i){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return wR(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return IR(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return MR(t,i);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return AR(t);case"[object Set]":return new n;case"[object Symbol]":return NR(t)}},PR=Object.create,BR=function(){function t(){}return function(e){if(!Cw(e))return{};if(PR)return PR(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();var FR=function(t){return"function"!=typeof t.constructor||HI(t)?{}:BR(aR(t))};var HR=function(t){return vI(t)&&"[object Map]"==xR(t)},UR=NI&&NI.isMap,VR=UR?DI(UR):HR;var GR=function(t){return vI(t)&&"[object Set]"==xR(t)},WR=NI&&NI.isSet,zR=WR?DI(WR):GR,jR={};jR["[object Arguments]"]=jR["[object Array]"]=jR["[object ArrayBuffer]"]=jR["[object DataView]"]=jR["[object Boolean]"]=jR["[object Date]"]=jR["[object Float32Array]"]=jR["[object Float64Array]"]=jR["[object Int8Array]"]=jR["[object Int16Array]"]=jR["[object Int32Array]"]=jR["[object Map]"]=jR["[object Number]"]=jR["[object Object]"]=jR["[object RegExp]"]=jR["[object Set]"]=jR["[object String]"]=jR["[object Symbol]"]=jR["[object Uint8Array]"]=jR["[object Uint8ClampedArray]"]=jR["[object Uint16Array]"]=jR["[object Uint32Array]"]=!0,jR["[object Error]"]=jR["[object Function]"]=jR["[object WeakMap]"]=!1;var XR=function t(e,i,n,o,r,s){var a,l=1&i,c=2&i,d=4&i;if(n&&(a=r?n(e,o,r,s):n(e)),void 0!==a)return a;if(!Cw(e))return e;var u=kI(e);if(u){if(a=SR(e),!l)return QI(e,a)}else{var h=xR(e),p="[object Function]"==h||"[object GeneratorFunction]"==h;if(CI(e))return ZI(e,l);if("[object Object]"==h||"[object Arguments]"==h||p&&!r){if(a=c||p?{}:FR(e),!l)return c?cR(e,qI(a,e)):rR(e,XI(a,e))}else{if(!jR[h])return r?e:{};a=LR(e,h,l)}}s||(s=new dI);var g=s.get(e);if(g)return g;s.set(e,a),zR(e)?e.forEach((function(o){a.add(t(o,i,n,o,e,s))})):VR(e)&&e.forEach((function(o,r){a.set(r,t(o,i,n,r,e,s))}));var f=u?void 0:(d?c?hR:uR:c?$I:jI)(e);return uI(f||e,(function(o,r){f&&(o=e[r=o]),fI(a,r,t(o,i,n,r,e,s))})),a};var YR=function(t){return XR(t,4)};var KR=function(t){return function(){return t}};var JR=function(t){return function(e,i,n){for(var o=-1,r=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++o];if(!1===i(r[l],l,r))break}return e}}();var $R=function(t,e){return t&&JR(t,e,jI)};var qR=function(t,e){return function(i,n){if(null==i)return i;if(!zI(i))return t(i,n);for(var o=i.length,r=e?o:-1,s=Object(i);(e?r--:++r<o)&&!1!==n(s[r],r,s););return i}}($R);var ZR=function(t){return t};var QR=function(t){return"function"==typeof t?t:ZR};var tA=function(t,e){return(kI(t)?uI:qR)(t,QR(e))},eA=tA;var iA=function(t,e){var i=[];return qR(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i};var nA=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var oA=function(t){return this.__data__.has(t)};function rA(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new aI;++e<i;)this.add(t[e])}rA.prototype.add=rA.prototype.push=nA,rA.prototype.has=oA;var sA=rA;var aA=function(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1};var lA=function(t,e){return t.has(e)};var cA=function(t,e,i,n,o,r){var s=1&i,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(t),d=r.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,p=2&i?new sA:void 0;for(r.set(t,e),r.set(e,t);++u<a;){var g=t[u],f=e[u];if(n)var m=s?n(f,g,u,e,t,r):n(g,f,u,t,e,r);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!aA(e,(function(t,e){if(!lA(p,e)&&(g===t||o(g,t,i,n,r)))return p.push(e)}))){h=!1;break}}else if(g!==f&&!o(g,f,i,n,r)){h=!1;break}}return r.delete(t),r.delete(e),h};var dA=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i};var uA=function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i},hA=mw?mw.prototype:void 0,pA=hA?hA.valueOf:void 0;var gA=function(t,e,i,n,o,r,s){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new CR(t),new CR(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return tw(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=dA;case"[object Set]":var l=1&n;if(a||(a=uA),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=2,s.set(t,e);var d=cA(a(t),a(e),n,o,r,s);return s.delete(t),d;case"[object Symbol]":if(pA)return pA.call(t)==pA.call(e)}return!1},fA=Object.prototype.hasOwnProperty;var mA=function(t,e,i,n,o,r){var s=1&i,a=uR(t),l=a.length;if(l!=uR(e).length&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in e:fA.call(e,d)))return!1}var u=r.get(t),h=r.get(e);if(u&&h)return u==e&&h==t;var p=!0;r.set(t,e),r.set(e,t);for(var g=s;++c<l;){var f=t[d=a[c]],m=e[d];if(n)var _=s?n(m,f,d,e,t,r):n(f,m,d,t,e,r);if(!(void 0===_?f===m||o(f,m,i,n,r):_)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var v=t.constructor,y=e.constructor;v==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(p=!1)}return r.delete(t),r.delete(e),p},_A=Object.prototype.hasOwnProperty;var vA=function(t,e,i,n,o,r){var s=kI(t),a=kI(e),l=s?"[object Array]":xR(t),c=a?"[object Array]":xR(e),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h=l==c;if(h&&CI(t)){if(!CI(e))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new dI),s||LI(t)?cA(t,e,i,n,o,r):gA(t,e,l,i,n,o,r);if(!(1&i)){var p=d&&_A.call(t,"__wrapped__"),g=u&&_A.call(e,"__wrapped__");if(p||g){var f=p?t.value():t,m=g?e.value():e;return r||(r=new dI),o(f,m,i,n,r)}}return!!h&&(r||(r=new dI),mA(t,e,i,n,o,r))};var yA=function t(e,i,n,o,r){return e===i||(null==e||null==i||!vI(e)&&!vI(i)?e!=e&&i!=i:vA(e,i,n,o,t,r))};var bA=function(t,e,i,n){var o=i.length,r=o,s=!n;if(null==t)return!r;for(t=Object(t);o--;){var a=i[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){var l=(a=i[o])[0],c=t[l],d=a[1];if(s&&a[2]){if(void 0===c&&!(l in t))return!1}else{var u=new dI;if(n)var h=n(c,d,l,t,e,u);if(!(void 0===h?yA(d,c,3,n,u):h))return!1}}return!0};var EA=function(t){return t==t&&!Cw(t)};var TA=function(t){for(var e=jI(t),i=e.length;i--;){var n=e[i],o=t[n];e[i]=[n,o,EA(o)]}return e};var xA=function(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}};var kA=function(t){var e=TA(t);return 1==e.length&&e[0][2]?xA(e[0][0],e[0][1]):function(i){return i===t||bA(i,t,e)}};var SA=function(t){return"symbol"==typeof t||vI(t)&&"[object Symbol]"==Sw(t)},CA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wA=/^\w*$/;var IA=function(t,e){if(kI(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!SA(t))||(wA.test(t)||!CA.test(t)||null!=e&&t in Object(e))};function RA(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=t.apply(this,n);return i.cache=r.set(o,s)||r,s};return i.cache=new(RA.Cache||aI),i}RA.Cache=aI;var AA=RA;var OA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DA=/\\(\\)?/g,NA=function(t){var e=AA(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(OA,(function(t,i,n,o){e.push(n?o.replace(DA,"$1"):i||t)})),e}));var MA=function(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o},LA=mw?mw.prototype:void 0,PA=LA?LA.toString:void 0;var BA=function t(e){if("string"==typeof e)return e;if(kI(e))return MA(e,t)+"";if(SA(e))return PA?PA.call(e):"";var i=e+"";return"0"==i&&1/e==-Infinity?"-0":i};var FA=function(t){return null==t?"":BA(t)};var HA=function(t,e){return kI(t)?t:IA(t,e)?[t]:NA(FA(t))};var UA=function(t){if("string"==typeof t||SA(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var VA=function(t,e){for(var i=0,n=(e=HA(e,t)).length;null!=t&&i<n;)t=t[UA(e[i++])];return i&&i==n?t:void 0};var GA=function(t,e,i){var n=null==t?void 0:VA(t,e);return void 0===n?i:n};var WA=function(t,e){return null!=t&&e in Object(t)};var zA=function(t,e,i){for(var n=-1,o=(e=HA(e,t)).length,r=!1;++n<o;){var s=UA(e[n]);if(!(r=null!=t&&i(t,s)))break;t=t[s]}return r||++n!=o?r:!!(o=null==t?0:t.length)&&RI(o)&&II(s,o)&&(kI(t)||xI(t))};var jA=function(t,e){return null!=t&&zA(t,e,WA)};var XA=function(t,e){return IA(t)&&EA(e)?xA(UA(t),e):function(i){var n=GA(i,t);return void 0===n&&n===e?jA(i,t):yA(e,n,3)}};var YA=function(t){return function(e){return null==e?void 0:e[t]}};var KA=function(t){return function(e){return VA(e,t)}};var JA=function(t){return IA(t)?YA(UA(t)):KA(t)};var $A=function(t){return"function"==typeof t?t:null==t?ZR:"object"==typeof t?kI(t)?XA(t[0],t[1]):kA(t):JA(t)};var qA=function(t,e){return(kI(t)?tR:iA)(t,$A(e))},ZA=Object.prototype.hasOwnProperty;var QA=function(t,e){return null!=t&&ZA.call(t,e)};var tO=function(t,e){return null!=t&&zA(t,e,QA)},eO=Object.prototype.hasOwnProperty;var iO=function(t){if(null==t)return!0;if(zI(t)&&(kI(t)||"string"==typeof t||"function"==typeof t.splice||CI(t)||LI(t)||xI(t)))return!t.length;var e=xR(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(HI(t))return!WI(t).length;for(var i in t)if(eO.call(t,i))return!1;return!0};var nO=function(t){return void 0===t};var oO=function(t,e){var i=-1,n=zI(t)?Array(t.length):[];return qR(t,(function(t,o,r){n[++i]=e(t,o,r)})),n};var rO=function(t,e){return(kI(t)?MA:oO)(t,$A(e))};var sO=function(t,e,i,n){var o=-1,r=null==t?0:t.length;for(n&&r&&(i=t[++o]);++o<r;)i=e(i,t[o],o,t);return i};var aO=function(t,e,i,n,o){return o(t,(function(t,o,r){i=n?(n=!1,t):e(i,t,o,r)})),i};var lO=function(t,e,i){var n=kI(t)?sO:aO,o=arguments.length<3;return n(t,$A(e),i,o,qR)};var cO=function(t){return"string"==typeof t||!kI(t)&&vI(t)&&"[object String]"==Sw(t)},dO=YA("length"),uO=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var hO=function(t){return uO.test(t)},pO="[\\ud800-\\udfff]",gO="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",fO="\\ud83c[\\udffb-\\udfff]",mO="[^\\ud800-\\udfff]",_O="(?:\\ud83c[\\udde6-\\uddff]){2}",vO="[\\ud800-\\udbff][\\udc00-\\udfff]",yO="(?:"+gO+"|"+fO+")"+"?",bO="[\\ufe0e\\ufe0f]?"+yO+("(?:\\u200d(?:"+[mO,_O,vO].join("|")+")[\\ufe0e\\ufe0f]?"+yO+")*"),EO="(?:"+[mO+gO+"?",gO,_O,vO,pO].join("|")+")",TO=RegExp(fO+"(?="+fO+")|"+EO+bO,"g");var xO=function(t){for(var e=TO.lastIndex=0;TO.test(t);)++e;return e};var kO=function(t){return hO(t)?xO(t):dO(t)};var SO=function(t){if(null==t)return 0;if(zI(t))return cO(t)?kO(t):t.length;var e=xR(t);return"[object Map]"==e||"[object Set]"==e?t.size:WI(t).length};var CO=function(t,e,i){var n=kI(t),o=n||CI(t)||LI(t);if(e=$A(e),null==i){var r=t&&t.constructor;i=o?n?new r:[]:Cw(t)&&ww(r)?BR(aR(t)):{}}return(o?uI:$R)(t,(function(t,n,o){return e(i,t,n,o)})),i},wO=mw?mw.isConcatSpreadable:void 0;var IO=function(t){return kI(t)||xI(t)||!!(wO&&t&&t[wO])};var RO=function t(e,i,n,o,r){var s=-1,a=e.length;for(n||(n=IO),r||(r=[]);++s<a;){var l=e[s];i>0&&n(l)?i>1?t(l,i-1,n,o,r):sR(r,l):o||(r[r.length]=l)}return r};var AO=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)},OO=Math.max;var DO=function(t,e,i){return e=OO(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,r=OO(n.length-e,0),s=Array(r);++o<r;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=i(s),AO(t,this,a)}},NO=hI?function(t,e){return hI(t,"toString",{configurable:!0,enumerable:!1,value:KR(e),writable:!0})}:ZR,MO=Date.now;var LO=function(t){var e=0,i=0;return function(){var n=MO(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(NO);var PO=function(t,e){return LO(DO(t,e,ZR),t+"")};var BO=function(t,e,i,n){for(var o=t.length,r=i+(n?1:-1);n?r--:++r<o;)if(e(t[r],r,t))return r;return-1};var FO=function(t){return t!=t};var HO=function(t,e,i){for(var n=i-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1};var UO=function(t,e,i){return e==e?HO(t,e,i):BO(t,FO,i)};var VO=function(t,e){return!!(null==t?0:t.length)&&UO(t,e,0)>-1};var GO=function(t,e,i){for(var n=-1,o=null==t?0:t.length;++n<o;)if(i(e,t[n]))return!0;return!1};var WO=function(){},zO=fR&&1/uA(new fR([,-0]))[1]==1/0?function(t){return new fR(t)}:WO;var jO=function(t,e,i){var n=-1,o=VO,r=t.length,s=!0,a=[],l=a;if(i)s=!1,o=GO;else if(r>=200){var c=e?null:zO(t);if(c)return uA(c);s=!1,o=lA,l=new sA}else l=e?[]:a;t:for(;++n<r;){var d=t[n],u=e?e(d):d;if(d=i||0!==d?d:0,s&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue t;e&&l.push(u),a.push(d)}else o(l,u,i)||(l!==a&&l.push(u),a.push(d))}return a};var XO=function(t){return vI(t)&&zI(t)},YO=PO((function(t){return jO(RO(t,1,XO,!0))}));var KO=function(t,e){return MA(e,(function(e){return t[e]}))};var JO,$O=function(t){return null==t?[]:KO(t,jI(t))};try{JO={clone:YR,constant:KR,each:eA,filter:qA,has:tO,isArray:kI,isEmpty:iO,isFunction:ww,isUndefined:nO,keys:jI,map:rO,reduce:lO,size:SO,transform:CO,union:YO,values:$O}}catch(t){}JO||(JO=window._);var qO=JO,ZO=QO;function QO(t){this._isDirected=!qO.has(t,"directed")||t.directed,this._isMultigraph=!!qO.has(t,"multigraph")&&t.multigraph,this._isCompound=!!qO.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=qO.constant(void 0),this._defaultEdgeLabelFn=qO.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function tD(t,e){t[e]?t[e]++:t[e]=1}function eD(t,e){--t[e]||delete t[e]}function iD(t,e,i,n){var o=""+e,r=""+i;if(!t&&o>r){var s=o;o=r,r=s}return o+""+r+""+(qO.isUndefined(n)?"\0":n)}function nD(t,e,i,n){var o=""+e,r=""+i;if(!t&&o>r){var s=o;o=r,r=s}var a={v:o,w:r};return n&&(a.name=n),a}function oD(t,e){return iD(t,e.v,e.w,e.name)}QO.prototype._nodeCount=0,QO.prototype._edgeCount=0,QO.prototype.isDirected=function(){return this._isDirected},QO.prototype.isMultigraph=function(){return this._isMultigraph},QO.prototype.isCompound=function(){return this._isCompound},QO.prototype.setGraph=function(t){return this._label=t,this},QO.prototype.graph=function(){return this._label},QO.prototype.setDefaultNodeLabel=function(t){return qO.isFunction(t)||(t=qO.constant(t)),this._defaultNodeLabelFn=t,this},QO.prototype.nodeCount=function(){return this._nodeCount},QO.prototype.nodes=function(){return qO.keys(this._nodes)},QO.prototype.sources=function(){var t=this;return qO.filter(this.nodes(),(function(e){return qO.isEmpty(t._in[e])}))},QO.prototype.sinks=function(){var t=this;return qO.filter(this.nodes(),(function(e){return qO.isEmpty(t._out[e])}))},QO.prototype.setNodes=function(t,e){var i=arguments,n=this;return qO.each(t,(function(t){i.length>1?n.setNode(t,e):n.setNode(t)})),this},QO.prototype.setNode=function(t,e){return qO.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},QO.prototype.node=function(t){return this._nodes[t]},QO.prototype.hasNode=function(t){return qO.has(this._nodes,t)},QO.prototype.removeNode=function(t){var e=this;if(qO.has(this._nodes,t)){var i=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],qO.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),qO.each(qO.keys(this._in[t]),i),delete this._in[t],delete this._preds[t],qO.each(qO.keys(this._out[t]),i),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},QO.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(qO.isUndefined(e))e="\0";else{for(var i=e+="";!qO.isUndefined(i);i=this.parent(i))if(i===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},QO.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},QO.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},QO.prototype.children=function(t){if(qO.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return qO.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},QO.prototype.predecessors=function(t){var e=this._preds[t];if(e)return qO.keys(e)},QO.prototype.successors=function(t){var e=this._sucs[t];if(e)return qO.keys(e)},QO.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return qO.union(e,this.successors(t))},QO.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},QO.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var i=this;qO.each(this._nodes,(function(i,n){t(n)&&e.setNode(n,i)})),qO.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,i.edge(t))}));var n={};function o(t){var r=i.parent(t);return void 0===r||e.hasNode(r)?(n[t]=r,r):r in n?n[r]:o(r)}return this._isCompound&&qO.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},QO.prototype.setDefaultEdgeLabel=function(t){return qO.isFunction(t)||(t=qO.constant(t)),this._defaultEdgeLabelFn=t,this},QO.prototype.edgeCount=function(){return this._edgeCount},QO.prototype.edges=function(){return qO.values(this._edgeObjs)},QO.prototype.setPath=function(t,e){var i=this,n=arguments;return qO.reduce(t,(function(t,o){return n.length>1?i.setEdge(t,o,e):i.setEdge(t,o),o})),this},QO.prototype.setEdge=function(){var t,e,i,n,o=!1,r=arguments[0];"object"==typeof r&&null!==r&&"v"in r?(t=r.v,e=r.w,i=r.name,2===arguments.length&&(n=arguments[1],o=!0)):(t=r,e=arguments[1],i=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),t=""+t,e=""+e,qO.isUndefined(i)||(i=""+i);var s=iD(this._isDirected,t,e,i);if(qO.has(this._edgeLabels,s))return o&&(this._edgeLabels[s]=n),this;if(!qO.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=o?n:this._defaultEdgeLabelFn(t,e,i);var a=nD(this._isDirected,t,e,i);return t=a.v,e=a.w,Object.freeze(a),this._edgeObjs[s]=a,tD(this._preds[e],t),tD(this._sucs[t],e),this._in[e][s]=a,this._out[t][s]=a,this._edgeCount++,this},QO.prototype.edge=function(t,e,i){var n=1===arguments.length?oD(this._isDirected,arguments[0]):iD(this._isDirected,t,e,i);return this._edgeLabels[n]},QO.prototype.hasEdge=function(t,e,i){var n=1===arguments.length?oD(this._isDirected,arguments[0]):iD(this._isDirected,t,e,i);return qO.has(this._edgeLabels,n)},QO.prototype.removeEdge=function(t,e,i){var n=1===arguments.length?oD(this._isDirected,arguments[0]):iD(this._isDirected,t,e,i),o=this._edgeObjs[n];return o&&(t=o.v,e=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],eD(this._preds[e],t),eD(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},QO.prototype.inEdges=function(t,e){var i=this._in[t];if(i){var n=qO.values(i);return e?qO.filter(n,(function(t){return t.v===e})):n}},QO.prototype.outEdges=function(t,e){var i=this._out[t];if(i){var n=qO.values(i);return e?qO.filter(n,(function(t){return t.w===e})):n}},QO.prototype.nodeEdges=function(t,e){var i=this.inEdges(t,e);if(i)return i.concat(this.outEdges(t,e))};var rD={Graph:ZO,version:"2.1.8"},sD={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:aD(t),edges:lD(t)};qO.isUndefined(t.graph())||(e.value=qO.clone(t.graph()));return e},read:function(t){var e=new ZO(t.options).setGraph(t.value);return qO.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),qO.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}};function aD(t){return qO.map(t.nodes(),(function(e){var i=t.node(e),n=t.parent(e),o={v:e};return qO.isUndefined(i)||(o.value=i),qO.isUndefined(n)||(o.parent=n),o}))}function lD(t){return qO.map(t.edges(),(function(e){var i=t.edge(e),n={v:e.v,w:e.w};return qO.isUndefined(e.name)||(n.name=e.name),qO.isUndefined(i)||(n.value=i),n}))}var cD=function(t){var e,i={},n=[];function o(n){qO.has(i,n)||(i[n]=!0,e.push(n),qO.each(t.successors(n),o),qO.each(t.predecessors(n),o))}return qO.each(t.nodes(),(function(t){e=[],o(t),e.length&&n.push(e)})),n};var dD=uD;function uD(){this._arr=[],this._keyIndices={}}uD.prototype.size=function(){return this._arr.length},uD.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},uD.prototype.has=function(t){return qO.has(this._keyIndices,t)},uD.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},uD.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},uD.prototype.add=function(t,e){var i=this._keyIndices;if(t=String(t),!qO.has(i,t)){var n=this._arr,o=n.length;return i[t]=o,n.push({key:t,priority:e}),this._decrease(o),!0}return!1},uD.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},uD.prototype.decrease=function(t,e){var i=this._keyIndices[t];if(e>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+e);this._arr[i].priority=e,this._decrease(i)},uD.prototype._heapify=function(t){var e=this._arr,i=2*t,n=i+1,o=t;i<e.length&&(o=e[i].priority<e[o].priority?i:o,n<e.length&&(o=e[n].priority<e[o].priority?n:o),o!==t&&(this._swap(t,o),this._heapify(o)))},uD.prototype._decrease=function(t){for(var e,i=this._arr,n=i[t].priority;0!==t&&!(i[e=t>>1].priority<n);)this._swap(t,e),t=e},uD.prototype._swap=function(t,e){var i=this._arr,n=this._keyIndices,o=i[t],r=i[e];i[t]=r,i[e]=o,n[r.key]=t,n[o.key]=e};var hD=function(t,e,i,n){return function(t,e,i,n){var o,r,s={},a=new dD,l=function(t){var e=t.v!==o?t.v:t.w,n=s[e],l=i(t),c=r.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+l);c<n.distance&&(n.distance=c,n.predecessor=o,a.decrease(e,c))};t.nodes().forEach((function(t){var i=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:i},a.add(t,i)}));for(;a.size()>0&&(o=a.removeMin(),(r=s[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(l);return s}(t,String(e),i||pD,n||function(e){return t.outEdges(e)})},pD=qO.constant(1);var gD=function(t,e,i){return qO.transform(t.nodes(),(function(n,o){n[o]=hD(t,o,e,i)}),{})};var fD=function(t){var e=0,i=[],n={},o=[];function r(s){var a=n[s]={onStack:!0,lowlink:e,index:e++};if(i.push(s),t.successors(s).forEach((function(t){qO.has(n,t)?n[t].onStack&&(a.lowlink=Math.min(a.lowlink,n[t].index)):(r(t),a.lowlink=Math.min(a.lowlink,n[t].lowlink))})),a.lowlink===a.index){var l,c=[];do{l=i.pop(),n[l].onStack=!1,c.push(l)}while(s!==l);o.push(c)}}return t.nodes().forEach((function(t){qO.has(n,t)||r(t)})),o};var mD=function(t){return qO.filter(fD(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))};var _D=function(t,e,i){return function(t,e,i){var n={},o=t.nodes();return o.forEach((function(t){n[t]={},n[t][t]={distance:0},o.forEach((function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})})),i(t).forEach((function(i){var o=i.v===t?i.w:i.v,r=e(i);n[t][o]={distance:r,predecessor:t}}))})),o.forEach((function(t){var e=n[t];o.forEach((function(i){var r=n[i];o.forEach((function(i){var n=r[t],o=e[i],s=r[i],a=n.distance+o.distance;a<s.distance&&(s.distance=a,s.predecessor=o.predecessor)}))}))})),n}(t,e||vD,i||function(e){return t.outEdges(e)})},vD=qO.constant(1);var yD=bD;function bD(t){var e={},i={},n=[];if(qO.each(t.sinks(),(function o(r){if(qO.has(i,r))throw new ED;qO.has(e,r)||(i[r]=!0,e[r]=!0,qO.each(t.predecessors(r),o),delete i[r],n.push(r))})),qO.size(e)!==t.nodeCount())throw new ED;return n}function ED(){}bD.CycleException=ED,ED.prototype=new Error;var TD=function(t,e,i){qO.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],r={};return qO.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);xD(t,e,"post"===i,r,n,o)})),o};function xD(t,e,i,n,o,r){qO.has(n,e)||(n[e]=!0,i||r.push(e),qO.each(o(e),(function(e){xD(t,e,i,n,o,r)})),i&&r.push(e))}var kD,SD={Graph:rD.Graph,json:sD,alg:{components:cD,dijkstra:hD,dijkstraAll:gD,findCycles:mD,floydWarshall:_D,isAcyclic:function(t){try{yD(t)}catch(t){if(t instanceof yD.CycleException)return!1;throw t}return!0},postorder:function(t,e){return TD(t,e,"post")},preorder:function(t,e){return TD(t,e,"pre")},prim:function(t,e){var i,n=new ZO,o={},r=new dD;function s(t){var n=t.v===i?t.w:t.v,s=r.priority(n);if(void 0!==s){var a=e(t);a<s&&(o[n]=i,r.decrease(n,a))}}if(0===t.nodeCount())return n;qO.each(t.nodes(),(function(t){r.add(t,Number.POSITIVE_INFINITY),n.setNode(t)})),r.decrease(t.nodes()[0],0);var a=!1;for(;r.size()>0;){if(i=r.removeMin(),qO.has(o,i))n.setEdge(i,o[i]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(i).forEach(s)}return n},tarjan:fD,topsort:yD},version:rD.version};try{kD=SD}catch(t){}kD||(kD=window.graphlib);var CD=kD;var wD=function(t){return XR(t,5)};var ID=function(t,e,i){if(!Cw(i))return!1;var n=typeof e;return!!("number"==n?zI(i)&&II(e,i.length):"string"==n&&e in i)&&tw(i[e],t)},RD=Object.prototype,AD=RD.hasOwnProperty,OD=PO((function(t,e){t=Object(t);var i=-1,n=e.length,o=n>2?e[2]:void 0;for(o&&ID(e[0],e[1],o)&&(n=1);++i<n;)for(var r=e[i],s=$I(r),a=-1,l=s.length;++a<l;){var c=s[a],d=t[c];(void 0===d||tw(d,RD[c])&&!AD.call(t,c))&&(t[c]=r[c])}return t}));var DD=function(t){return function(e,i,n){var o=Object(e);if(!zI(e)){var r=$A(i);e=jI(e),i=function(t){return r(o[t],t,o)}}var s=t(e,i,n);return s>-1?o[r?e[s]:s]:void 0}},ND=/\s/;var MD=function(t){for(var e=t.length;e--&&ND.test(t.charAt(e)););return e},LD=/^\s+/;var PD=function(t){return t?t.slice(0,MD(t)+1).replace(LD,""):t},BD=/^[-+]0x[0-9a-f]+$/i,FD=/^0b[01]+$/i,HD=/^0o[0-7]+$/i,UD=parseInt;var VD=function(t){if("number"==typeof t)return t;if(SA(t))return NaN;if(Cw(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Cw(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=PD(t);var i=FD.test(t);return i||HD.test(t)?UD(t.slice(2),i?2:8):BD.test(t)?NaN:+t};var GD=function(t){return t?Infinity===(t=VD(t))||-Infinity===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var WD=function(t){var e=GD(t),i=e%1;return e==e?i?e-i:e:0},zD=Math.max;var jD=DD((function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=null==i?0:WD(i);return o<0&&(o=zD(n+o,0)),BO(t,$A(e),o)}));var XD=function(t){return(null==t?0:t.length)?RO(t,1):[]};var YD=function(t,e){return null==t?t:JR(t,QR(e),$I)};var KD=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var JD=function(t,e){var i={};return e=$A(e),$R(t,(function(t,n,o){pI(i,n,e(t,n,o))})),i};var $D=function(t,e,i){for(var n=-1,o=t.length;++n<o;){var r=t[n],s=e(r);if(null!=s&&(void 0===a?s==s&&!SA(s):i(s,a)))var a=s,l=r}return l};var qD=function(t,e){return t>e};var ZD=function(t){return t&&t.length?$D(t,ZR,qD):void 0};var QD=function(t,e,i){(void 0!==i&&!tw(t[e],i)||void 0===i&&!(e in t))&&pI(t,e,i)},tN=Function.prototype,eN=Object.prototype,iN=tN.toString,nN=eN.hasOwnProperty,oN=iN.call(Object);var rN=function(t){if(!vI(t)||"[object Object]"!=Sw(t))return!1;var e=aR(t);if(null===e)return!0;var i=nN.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&iN.call(i)==oN};var sN=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var aN=function(t){return mI(t,$I(t))};var lN=function(t,e,i,n,o,r,s){var a=sN(t,i),l=sN(e,i),c=s.get(l);if(c)QD(t,i,c);else{var d=r?r(a,l,i+"",t,e,s):void 0,u=void 0===d;if(u){var h=kI(l),p=!h&&CI(l),g=!h&&!p&&LI(l);d=l,h||p||g?kI(a)?d=a:XO(a)?d=QI(a):p?(u=!1,d=ZI(l,!0)):g?(u=!1,d=MR(l,!0)):d=[]:rN(l)||xI(l)?(d=a,xI(a)?d=aN(a):Cw(a)&&!ww(a)||(d=FR(l))):u=!1}u&&(s.set(l,d),o(d,l,n,r,s),s.delete(l)),QD(t,i,d)}};var cN=function t(e,i,n,o,r){e!==i&&JR(i,(function(s,a){if(r||(r=new dI),Cw(s))lN(e,i,a,n,t,o,r);else{var l=o?o(sN(e,a),s,a+"",e,i,r):void 0;void 0===l&&(l=s),QD(e,a,l)}}),$I)};var dN=function(t){return PO((function(e,i){var n=-1,o=i.length,r=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(r=t.length>3&&"function"==typeof r?(o--,r):void 0,s&&ID(i[0],i[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++n<o;){var a=i[n];a&&t(e,a,n,r)}return e}))}((function(t,e,i){cN(t,e,i)}));var uN=function(t,e){return t<e};var hN=function(t){return t&&t.length?$D(t,ZR,uN):void 0};var pN=function(t,e){return t&&t.length?$D(t,$A(e),uN):void 0},gN=function(){return fw.Date.now()};var fN=function(t,e,i,n){if(!Cw(t))return t;for(var o=-1,r=(e=HA(e,t)).length,s=r-1,a=t;null!=a&&++o<r;){var l=UA(e[o]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var d=a[l];void 0===(c=n?n(d,l,a):void 0)&&(c=Cw(d)?d:II(e[o+1])?[]:{})}fI(a,l,c),a=a[l]}return t};var mN=function(t,e,i){for(var n=-1,o=e.length,r={};++n<o;){var s=e[n],a=VA(t,s);i(a,s)&&fN(r,HA(s,t),a)}return r};var _N=function(t,e){return mN(t,e,(function(e,i){return jA(t,i)}))};var vN=function(t){return LO(DO(t,void 0,XD),t+"")}((function(t,e){return null==t?{}:_N(t,e)})),yN=Math.ceil,bN=Math.max;var EN=function(t,e,i,n){for(var o=-1,r=bN(yN((e-t)/(i||1)),0),s=Array(r);r--;)s[n?r:++o]=t,t+=i;return s};var TN=function(t){return function(e,i,n){return n&&"number"!=typeof n&&ID(e,i,n)&&(i=n=void 0),e=GD(e),void 0===i?(i=e,e=0):i=GD(i),n=void 0===n?e<i?1:-1:GD(n),EN(e,i,n,t)}}();var xN=function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t};var kN=function(t,e){if(t!==e){var i=void 0!==t,n=null===t,o=t==t,r=SA(t),s=void 0!==e,a=null===e,l=e==e,c=SA(e);if(!a&&!c&&!r&&t>e||r&&s&&l&&!a&&!c||n&&s&&l||!i&&l||!o)return 1;if(!n&&!r&&!c&&t<e||c&&i&&o&&!n&&!r||a&&i&&o||!s&&o||!l)return-1}return 0};var SN=function(t,e,i){for(var n=-1,o=t.criteria,r=e.criteria,s=o.length,a=i.length;++n<s;){var l=kN(o[n],r[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return t.index-e.index};var CN=function(t,e,i){e=e.length?MA(e,(function(t){return kI(t)?function(e){return VA(e,1===t.length?t[0]:t)}:t})):[ZR];var n=-1;e=MA(e,DI($A));var o=oO(t,(function(t,i,o){return{criteria:MA(e,(function(e){return e(t)})),index:++n,value:t}}));return xN(o,(function(t,e){return SN(t,e,i)}))},wN=PO((function(t,e){if(null==t)return[];var i=e.length;return i>1&&ID(t,e[0],e[1])?e=[]:i>2&&ID(e[0],e[1],e[2])&&(e=[e[0]]),CN(t,RO(e,1),[])})),IN=0;var RN=function(t){var e=++IN;return FA(t)+e};var AN=function(t,e,i){for(var n=-1,o=t.length,r=e.length,s={};++n<o;){var a=n<r?e[n]:void 0;i(s,t[n],a)}return s};var ON,DN=function(t,e){return AN(t||[],e||[],fI)};try{ON={cloneDeep:wD,constant:KR,defaults:OD,each:eA,filter:qA,find:jD,flatten:XD,forEach:tA,forIn:YD,has:tO,isUndefined:nO,last:KD,map:rO,mapValues:JD,max:ZD,merge:dN,min:hN,minBy:pN,now:gN,pick:vN,range:TN,reduce:lO,sortBy:wN,uniqueId:RN,values:$O,zipObject:DN}}catch(t){}ON||(ON=window._);var NN=ON,MN=LN;function LN(){var t={};t._next=t._prev=t,this._sentinel=t}function PN(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function BN(t,e){if("_next"!==t&&"_prev"!==t)return e}LN.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return PN(e),e},LN.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&PN(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},LN.prototype.toString=function(){for(var t=[],e=this._sentinel,i=e._prev;i!==e;)t.push(JSON.stringify(i,BN)),i=i._prev;return"["+t.join(", ")+"]"};var FN=CD.Graph,HN=function(t,e){if(t.nodeCount()<=1)return[];var i=function(t,e){var i=new FN,n=0,o=0;NN.forEach(t.nodes(),(function(t){i.setNode(t,{v:t,in:0,out:0})})),NN.forEach(t.edges(),(function(t){var r=i.edge(t.v,t.w)||0,s=e(t),a=r+s;i.setEdge(t.v,t.w,a),o=Math.max(o,i.node(t.v).out+=s),n=Math.max(n,i.node(t.w).in+=s)}));var r=NN.range(o+n+3).map((function(){return new MN})),s=n+1;return NN.forEach(i.nodes(),(function(t){GN(r,s,i.node(t))})),{graph:i,buckets:r,zeroIdx:s}}(t,e||UN),n=function(t,e,i){var n,o=[],r=e[e.length-1],s=e[0];for(;t.nodeCount();){for(;n=s.dequeue();)VN(t,e,i,n);for(;n=r.dequeue();)VN(t,e,i,n);if(t.nodeCount())for(var a=e.length-2;a>0;--a)if(n=e[a].dequeue()){o=o.concat(VN(t,e,i,n,!0));break}}return o}(i.graph,i.buckets,i.zeroIdx);return NN.flatten(NN.map(n,(function(e){return t.outEdges(e.v,e.w)})),!0)},UN=NN.constant(1);function VN(t,e,i,n,o){var r=o?[]:void 0;return NN.forEach(t.inEdges(n.v),(function(n){var s=t.edge(n),a=t.node(n.v);o&&r.push({v:n.v,w:n.w}),a.out-=s,GN(e,i,a)})),NN.forEach(t.outEdges(n.v),(function(n){var o=t.edge(n),r=n.w,s=t.node(r);s.in-=o,GN(e,i,s)})),t.removeNode(n.v),r}function GN(t,e,i){i.out?i.in?t[i.out-i.in+e].enqueue(i):t[t.length-1].enqueue(i):t[0].enqueue(i)}var WN={run:function(t){var e="greedy"===t.graph().acyclicer?HN(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],i={},n={};function o(r){NN.has(n,r)||(n[r]=!0,i[r]=!0,NN.forEach(t.outEdges(r),(function(t){NN.has(i,t.w)?e.push(t):o(t.w)})),delete i[r])}return NN.forEach(t.nodes(),o),e}(t);NN.forEach(e,(function(e){var i=t.edge(e);t.removeEdge(e),i.forwardName=e.name,i.reversed=!0,t.setEdge(e.w,e.v,i,NN.uniqueId("rev"))}))},undo:function(t){NN.forEach(t.edges(),(function(e){var i=t.edge(e);if(i.reversed){t.removeEdge(e);var n=i.forwardName;delete i.reversed,delete i.forwardName,t.setEdge(e.w,e.v,i,n)}}))}};var zN=CD.Graph,jN={addDummyNode:XN,simplify:function(t){var e=(new zN).setGraph(t.graph());return NN.forEach(t.nodes(),(function(i){e.setNode(i,t.node(i))})),NN.forEach(t.edges(),(function(i){var n=e.edge(i.v,i.w)||{weight:0,minlen:1},o=t.edge(i);e.setEdge(i.v,i.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new zN({multigraph:t.isMultigraph()}).setGraph(t.graph());return NN.forEach(t.nodes(),(function(i){t.children(i).length||e.setNode(i,t.node(i))})),NN.forEach(t.edges(),(function(i){e.setEdge(i,t.edge(i))})),e},successorWeights:function(t){var e=NN.map(t.nodes(),(function(e){var i={};return NN.forEach(t.outEdges(e),(function(e){i[e.w]=(i[e.w]||0)+t.edge(e).weight})),i}));return NN.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=NN.map(t.nodes(),(function(e){var i={};return NN.forEach(t.inEdges(e),(function(e){i[e.v]=(i[e.v]||0)+t.edge(e).weight})),i}));return NN.zipObject(t.nodes(),e)},intersectRect:function(t,e){var i,n,o=t.x,r=t.y,s=e.x-o,a=e.y-r,l=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*l>Math.abs(s)*c?(a<0&&(c=-c),i=c*s/a,n=c):(s<0&&(l=-l),i=l,n=l*a/s);return{x:o+i,y:r+n}},buildLayerMatrix:function(t){var e=NN.map(NN.range(YN(t)+1),(function(){return[]}));return NN.forEach(t.nodes(),(function(i){var n=t.node(i),o=n.rank;NN.isUndefined(o)||(e[o][n.order]=i)})),e},normalizeRanks:function(t){var e=NN.min(NN.map(t.nodes(),(function(e){return t.node(e).rank})));NN.forEach(t.nodes(),(function(i){var n=t.node(i);NN.has(n,"rank")&&(n.rank-=e)}))},removeEmptyRanks:function(t){var e=NN.min(NN.map(t.nodes(),(function(e){return t.node(e).rank}))),i=[];NN.forEach(t.nodes(),(function(n){var o=t.node(n).rank-e;i[o]||(i[o]=[]),i[o].push(n)}));var n=0,o=t.graph().nodeRankFactor;NN.forEach(i,(function(e,i){NN.isUndefined(e)&&i%o!=0?--n:n&&NN.forEach(e,(function(e){t.node(e).rank+=n}))}))},addBorderNode:function(t,e,i,n){var o={width:0,height:0};arguments.length>=4&&(o.rank=i,o.order=n);return XN(t,"border",o,e)},maxRank:YN,partition:function(t,e){var i={lhs:[],rhs:[]};return NN.forEach(t,(function(t){e(t)?i.lhs.push(t):i.rhs.push(t)})),i},time:function(t,e){var i=NN.now();try{return e()}finally{console.log(t+" time: "+(NN.now()-i)+"ms")}},notime:function(t,e){return e()}};function XN(t,e,i,n){var o;do{o=NN.uniqueId(n)}while(t.hasNode(o));return i.dummy=e,t.setNode(o,i),o}function YN(t){return NN.max(NN.map(t.nodes(),(function(e){var i=t.node(e).rank;if(!NN.isUndefined(i))return i})))}var KN={run:function(t){t.graph().dummyChains=[],NN.forEach(t.edges(),(function(e){!function(t,e){var i,n,o,r=e.v,s=t.node(r).rank,a=e.w,l=t.node(a).rank,c=e.name,d=t.edge(e),u=d.labelRank;if(l===s+1)return;for(t.removeEdge(e),o=0,++s;s<l;++o,++s)d.points=[],n={width:0,height:0,edgeLabel:d,edgeObj:e,rank:s},i=jN.addDummyNode(t,"edge",n,"_d"),s===u&&(n.width=d.width,n.height=d.height,n.dummy="edge-label",n.labelpos=d.labelpos),t.setEdge(r,i,{weight:d.weight},c),0===o&&t.graph().dummyChains.push(i),r=i;t.setEdge(r,a,{weight:d.weight},c)}(t,e)}))},undo:function(t){NN.forEach(t.graph().dummyChains,(function(e){var i,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)i=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=i,n=t.node(e)}))}};var JN=function(t){var e={};NN.forEach(t.sources(),(function i(n){var o=t.node(n);if(NN.has(e,n))return o.rank;e[n]=!0;var r=NN.min(NN.map(t.outEdges(n),(function(e){return i(e.w)-t.edge(e).minlen})));return r!==Number.POSITIVE_INFINITY&&null!=r||(r=0),o.rank=r}))},$N=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};var qN=CD.Graph,ZN=$N,QN=function(t){var e,i,n=new qN({directed:!1}),o=t.nodes()[0],r=t.nodeCount();n.setNode(o,{});for(;tM(n,t)<r;)e=eM(n,t),i=n.hasNode(e.v)?ZN(t,e):-ZN(t,e),iM(n,t,i);return n};function tM(t,e){return NN.forEach(t.nodes(),(function i(n){NN.forEach(e.nodeEdges(n),(function(o){var r=o.v,s=n===r?o.w:r;t.hasNode(s)||ZN(e,o)||(t.setNode(s,{}),t.setEdge(n,s,{}),i(s))}))})),t.nodeCount()}function eM(t,e){return NN.minBy(e.edges(),(function(i){if(t.hasNode(i.v)!==t.hasNode(i.w))return ZN(e,i)}))}function iM(t,e,i){NN.forEach(t.nodes(),(function(t){e.node(t).rank+=i}))}var nM=$N,oM=JN,rM=CD.alg.preorder,sM=CD.alg.postorder,aM=jN.simplify,lM=cM;function cM(t){t=aM(t),oM(t);var e,i=QN(t);for(hM(i),dM(i,t);e=gM(i);)mM(i,t,e,fM(i,t,e))}function dM(t,e){var i=sM(t,t.nodes());i=i.slice(0,i.length-1),NN.forEach(i,(function(i){!function(t,e,i){var n=t.node(i).parent;t.edge(i,n).cutvalue=uM(t,e,i)}(t,e,i)}))}function uM(t,e,i){var n=t.node(i).parent,o=!0,r=e.edge(i,n),s=0;return r||(o=!1,r=e.edge(n,i)),s=r.weight,NN.forEach(e.nodeEdges(i),(function(r){var a=r.v===i,l=a?r.w:r.v;if(l!==n){var c=a===o,d=e.edge(r).weight;if(s+=c?d:-d,function(t,e,i){return t.hasEdge(e,i)}(t,i,l)){var u=t.edge(i,l).cutvalue;s+=c?-u:u}}})),s}function hM(t,e){arguments.length<2&&(e=t.nodes()[0]),pM(t,{},1,e)}function pM(t,e,i,n,o){var r=i,s=t.node(n);return e[n]=!0,NN.forEach(t.neighbors(n),(function(o){NN.has(e,o)||(i=pM(t,e,i,o,n))})),s.low=r,s.lim=i++,o?s.parent=o:delete s.parent,i}function gM(t){return NN.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function fM(t,e,i){var n=i.v,o=i.w;e.hasEdge(n,o)||(n=i.w,o=i.v);var r=t.node(n),s=t.node(o),a=r,l=!1;r.lim>s.lim&&(a=s,l=!0);var c=NN.filter(e.edges(),(function(e){return l===_M(t,t.node(e.v),a)&&l!==_M(t,t.node(e.w),a)}));return NN.minBy(c,(function(t){return nM(e,t)}))}function mM(t,e,i,n){var o=i.v,r=i.w;t.removeEdge(o,r),t.setEdge(n.v,n.w,{}),hM(t),dM(t,e),function(t,e){var i=NN.find(t.nodes(),(function(t){return!e.node(t).parent})),n=rM(t,i);n=n.slice(1),NN.forEach(n,(function(i){var n=t.node(i).parent,o=e.edge(i,n),r=!1;o||(o=e.edge(n,i),r=!0),e.node(i).rank=e.node(n).rank+(r?o.minlen:-o.minlen)}))}(t,e)}function _M(t,e,i){return i.low<=e.lim&&e.lim<=i.lim}cM.initLowLimValues=hM,cM.initCutValues=dM,cM.calcCutValue=uM,cM.leaveEdge=gM,cM.enterEdge=fM,cM.exchangeEdges=mM;var vM=JN,yM=function(t){switch(t.graph().ranker){case"network-simplex":EM(t);break;case"tight-tree":!function(t){vM(t),QN(t)}(t);break;case"longest-path":bM(t);break;default:EM(t)}};var bM=vM;function EM(t){lM(t)}var TM=function(t){var e=function(t){var e={},i=0;function n(o){var r=i;NN.forEach(t.children(o),n),e[o]={low:r,lim:i++}}return NN.forEach(t.children(),n),e}(t);NN.forEach(t.graph().dummyChains,(function(i){for(var n=t.node(i),o=n.edgeObj,r=function(t,e,i,n){var o,r,s=[],a=[],l=Math.min(e[i].low,e[n].low),c=Math.max(e[i].lim,e[n].lim);o=i;do{o=t.parent(o),s.push(o)}while(o&&(e[o].low>l||c>e[o].lim));r=o,o=n;for(;(o=t.parent(o))!==r;)a.push(o);return{path:s.concat(a.reverse()),lca:r}}(t,e,o.v,o.w),s=r.path,a=r.lca,l=0,c=s[l],d=!0;i!==o.w;){if(n=t.node(i),d){for(;(c=s[l])!==a&&t.node(c).maxRank<n.rank;)l++;c===a&&(d=!1)}if(!d){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=n.rank;)l++;c=s[l]}t.setParent(i,c),i=t.successors(i)[0]}}))};var xM={run:function(t){var e=jN.addDummyNode(t,"root",{},"_root"),i=function(t){var e={};function i(n,o){var r=t.children(n);r&&r.length&&NN.forEach(r,(function(t){i(t,o+1)})),e[n]=o}return NN.forEach(t.children(),(function(t){i(t,1)})),e}(t),n=NN.max(NN.values(i))-1,o=2*n+1;t.graph().nestingRoot=e,NN.forEach(t.edges(),(function(e){t.edge(e).minlen*=o}));var r=function(t){return NN.reduce(t.edges(),(function(e,i){return e+t.edge(i).weight}),0)}(t)+1;NN.forEach(t.children(),(function(s){kM(t,e,o,r,n,i,s)})),t.graph().nodeRankFactor=o},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,NN.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}};function kM(t,e,i,n,o,r,s){var a=t.children(s);if(a.length){var l=jN.addBorderNode(t,"_bt"),c=jN.addBorderNode(t,"_bb"),d=t.node(s);t.setParent(l,s),d.borderTop=l,t.setParent(c,s),d.borderBottom=c,NN.forEach(a,(function(a){kM(t,e,i,n,o,r,a);var d=t.node(a),u=d.borderTop?d.borderTop:a,h=d.borderBottom?d.borderBottom:a,p=d.borderTop?n:2*n,g=u!==h?1:o-r[s]+1;t.setEdge(l,u,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(h,c,{weight:p,minlen:g,nestingEdge:!0})})),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:o+r[s]})}else s!==e&&t.setEdge(e,s,{weight:0,minlen:i})}var SM=function(t){NN.forEach(t.children(),(function e(i){var n=t.children(i),o=t.node(i);if(n.length&&NN.forEach(n,e),NN.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var r=o.minRank,s=o.maxRank+1;r<s;++r)CM(t,"borderLeft","_bl",i,o,r),CM(t,"borderRight","_br",i,o,r)}}))};function CM(t,e,i,n,o,r){var s={width:0,height:0,rank:r,borderType:e},a=o[e][r-1],l=jN.addDummyNode(t,"border",s,i);o[e][r]=l,t.setParent(l,n),a&&t.setEdge(a,l,{weight:1})}var wM={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||IM(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){NN.forEach(t.nodes(),(function(e){AM(t.node(e))})),NN.forEach(t.edges(),(function(e){var i=t.edge(e);NN.forEach(i.points,AM),NN.has(i,"y")&&AM(i)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){NN.forEach(t.nodes(),(function(e){OM(t.node(e))})),NN.forEach(t.edges(),(function(e){var i=t.edge(e);NN.forEach(i.points,OM),NN.has(i,"x")&&OM(i)}))}(t),IM(t))}};function IM(t){NN.forEach(t.nodes(),(function(e){RM(t.node(e))})),NN.forEach(t.edges(),(function(e){RM(t.edge(e))}))}function RM(t){var e=t.width;t.width=t.height,t.height=e}function AM(t){t.y=-t.y}function OM(t){var e=t.x;t.x=t.y,t.y=e}var DM=function(t){var e={},i=NN.filter(t.nodes(),(function(e){return!t.children(e).length})),n=NN.max(NN.map(i,(function(e){return t.node(e).rank}))),o=NN.map(NN.range(n+1),(function(){return[]}));function r(i){if(!NN.has(e,i)){e[i]=!0;var n=t.node(i);o[n.rank].push(i),NN.forEach(t.successors(i),r)}}var s=NN.sortBy(i,(function(e){return t.node(e).rank}));return NN.forEach(s,r),o};var NM=function(t,e){for(var i=0,n=1;n<e.length;++n)i+=MM(t,e[n-1],e[n]);return i};function MM(t,e,i){for(var n=NN.zipObject(i,NN.map(i,(function(t,e){return e}))),o=NN.flatten(NN.map(e,(function(e){return NN.sortBy(NN.map(t.outEdges(e),(function(e){return{pos:n[e.w],weight:t.edge(e).weight}})),"pos")})),!0),r=1;r<i.length;)r<<=1;var s=2*r-1;r-=1;var a=NN.map(new Array(s),(function(){return 0})),l=0;return NN.forEach(o.forEach((function(t){var e=t.pos+r;a[e]+=t.weight;for(var i=0;e>0;)e%2&&(i+=a[e+1]),a[e=e-1>>1]+=t.weight;l+=t.weight*i}))),l}var LM=function(t,e){return NN.map(e,(function(e){var i=t.inEdges(e);if(i.length){var n=NN.reduce(i,(function(e,i){var n=t.edge(i),o=t.node(i.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}}),{sum:0,weight:0});return{v:e,barycenter:n.sum/n.weight,weight:n.weight}}return{v:e}}))};var PM=function(t,e){var i={};return NN.forEach(t,(function(t,e){var n=i[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};NN.isUndefined(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)})),NN.forEach(e.edges(),(function(t){var e=i[t.v],n=i[t.w];NN.isUndefined(e)||NN.isUndefined(n)||(n.indegree++,e.out.push(i[t.w]))})),function(t){var e=[];function i(t){return function(e){e.merged||(NN.isUndefined(e.barycenter)||NN.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var i=0,n=0;t.weight&&(i+=t.barycenter*t.weight,n+=t.weight);e.weight&&(i+=e.barycenter*e.weight,n+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=i/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function n(e){return function(i){i.in.push(e),0==--i.indegree&&t.push(i)}}for(;t.length;){var o=t.pop();e.push(o),NN.forEach(o.in.reverse(),i(o)),NN.forEach(o.out,n(o))}return NN.map(NN.filter(e,(function(t){return!t.merged})),(function(t){return NN.pick(t,["vs","i","barycenter","weight"])}))}(NN.filter(i,(function(t){return!t.indegree})))};var BM=function(t,e){var i=jN.partition(t,(function(t){return NN.has(t,"barycenter")})),n=i.lhs,o=NN.sortBy(i.rhs,(function(t){return-t.i})),r=[],s=0,a=0,l=0;n.sort((c=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:c?e.i-t.i:t.i-e.i})),l=FM(r,o,l),NN.forEach(n,(function(t){l+=t.vs.length,r.push(t.vs),s+=t.barycenter*t.weight,a+=t.weight,l=FM(r,o,l)}));var c;var d={vs:NN.flatten(r,!0)};a&&(d.barycenter=s/a,d.weight=a);return d};function FM(t,e,i){for(var n;e.length&&(n=NN.last(e)).i<=i;)e.pop(),t.push(n.vs),i++;return i}var HM=function t(e,i,n,o){var r=e.children(i),s=e.node(i),a=s?s.borderLeft:void 0,l=s?s.borderRight:void 0,c={};a&&(r=NN.filter(r,(function(t){return t!==a&&t!==l})));var d=LM(e,r);NN.forEach(d,(function(i){if(e.children(i.v).length){var r=t(e,i.v,n,o);c[i.v]=r,NN.has(r,"barycenter")&&(s=i,a=r,NN.isUndefined(s.barycenter)?(s.barycenter=a.barycenter,s.weight=a.weight):(s.barycenter=(s.barycenter*s.weight+a.barycenter*a.weight)/(s.weight+a.weight),s.weight+=a.weight))}var s,a}));var u=PM(d,n);!function(t,e){NN.forEach(t,(function(t){t.vs=NN.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(u,c);var h=BM(u,o);if(a&&(h.vs=NN.flatten([a,h.vs,l],!0),e.predecessors(a).length)){var p=e.node(e.predecessors(a)[0]),g=e.node(e.predecessors(l)[0]);NN.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+p.order+g.order)/(h.weight+2),h.weight+=2}return h};var UM=CD.Graph,VM=function(t,e,i){var n=function(t){var e;for(;t.hasNode(e=NN.uniqueId("_root")););return e}(t),o=new UM({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((function(e){return t.node(e)}));return NN.forEach(t.nodes(),(function(r){var s=t.node(r),a=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(o.setNode(r),o.setParent(r,a||n),NN.forEach(t[i](r),(function(e){var i=e.v===r?e.w:e.v,n=o.edge(i,r),s=NN.isUndefined(n)?0:n.weight;o.setEdge(i,r,{weight:t.edge(e).weight+s})})),NN.has(s,"minRank")&&o.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),o};var GM=function(t,e,i){var n,o={};NN.forEach(i,(function(i){for(var r,s,a=t.parent(i);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=n,n=a),s&&s!==a)return void e.setEdge(s,a);a=r}}))};var WM=CD.Graph,zM=function(t){var e=jN.maxRank(t),i=jM(t,NN.range(1,e+1),"inEdges"),n=jM(t,NN.range(e-1,-1,-1),"outEdges"),o=DM(t);YM(t,o);for(var r,s=Number.POSITIVE_INFINITY,a=0,l=0;l<4;++a,++l){XM(a%2?i:n,a%4>=2),o=jN.buildLayerMatrix(t);var c=NM(t,o);c<s&&(l=0,r=NN.cloneDeep(o),s=c)}YM(t,r)};function jM(t,e,i){return NN.map(e,(function(e){return VM(t,e,i)}))}function XM(t,e){var i=new WM;NN.forEach(t,(function(t){var n=t.graph().root,o=HM(t,n,i,e);NN.forEach(o.vs,(function(e,i){t.node(e).order=i})),GM(t,i,o.vs)}))}function YM(t,e){NN.forEach(e,(function(e){NN.forEach(e,(function(e,i){t.node(e).order=i}))}))}var KM=CD.Graph,JM=function(t){var e,i=jN.buildLayerMatrix(t),n=NN.merge($M(t,i),qM(t,i)),o={};NN.forEach(["u","d"],(function(r){e="u"===r?i:NN.values(i).reverse(),NN.forEach(["l","r"],(function(i){"r"===i&&(e=NN.map(e,(function(t){return NN.values(t).reverse()})));var s=("u"===r?t.predecessors:t.successors).bind(t),a=tL(t,e,n,s),l=eL(t,e,a.root,a.align,"r"===i);"r"===i&&(l=NN.mapValues(l,(function(t){return-t}))),o[r+i]=l}))}));var r=iL(t,o);return nL(o,r),oL(o,t.graph().align)};function $M(t,e){var i={};return NN.reduce(e,(function(e,n){var o=0,r=0,s=e.length,a=NN.last(n);return NN.forEach(n,(function(e,l){var c=function(t,e){if(t.node(e).dummy)return NN.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),d=c?t.node(c).order:s;(c||e===a)&&(NN.forEach(n.slice(r,l+1),(function(e){NN.forEach(t.predecessors(e),(function(n){var r=t.node(n),s=r.order;!(s<o||d<s)||r.dummy&&t.node(e).dummy||ZM(i,n,e)}))})),r=l+1,o=d)})),n})),i}function qM(t,e){var i={};function n(e,n,o,r,s){var a;NN.forEach(NN.range(n,o),(function(n){a=e[n],t.node(a).dummy&&NN.forEach(t.predecessors(a),(function(e){var n=t.node(e);n.dummy&&(n.order<r||n.order>s)&&ZM(i,e,a)}))}))}return NN.reduce(e,(function(e,i){var o,r=-1,s=0;return NN.forEach(i,(function(a,l){if("border"===t.node(a).dummy){var c=t.predecessors(a);c.length&&(o=t.node(c[0]).order,n(i,s,l,r,o),s=l,r=o)}n(i,s,i.length,o,e.length)})),i})),i}function ZM(t,e,i){if(e>i){var n=e;e=i,i=n}var o=t[e];o||(t[e]=o={}),o[i]=!0}function QM(t,e,i){if(e>i){var n=e;e=i,i=n}return NN.has(t[e],i)}function tL(t,e,i,n){var o={},r={},s={};return NN.forEach(e,(function(t){NN.forEach(t,(function(t,e){o[t]=t,r[t]=t,s[t]=e}))})),NN.forEach(e,(function(t){var e=-1;NN.forEach(t,(function(t){var a=n(t);if(a.length)for(var l=((a=NN.sortBy(a,(function(t){return s[t]}))).length-1)/2,c=Math.floor(l),d=Math.ceil(l);c<=d;++c){var u=a[c];r[t]===t&&e<s[u]&&!QM(i,t,u)&&(r[u]=t,r[t]=o[t]=o[u],e=s[u])}}))})),{root:o,align:r}}function eL(t,e,i,n,o){var r={},s=function(t,e,i,n){var o=new KM,r=t.graph(),s=function(t,e,i){return function(n,o,r){var s,a=n.node(o),l=n.node(r),c=0;if(c+=a.width/2,NN.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=-a.width/2;break;case"r":s=a.width/2}if(s&&(c+=i?s:-s),s=0,c+=(a.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,NN.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=i?s:-s),s=0,c}}(r.nodesep,r.edgesep,n);return NN.forEach(e,(function(e){var n;NN.forEach(e,(function(e){var r=i[e];if(o.setNode(r),n){var a=i[n],l=o.edge(a,r);o.setEdge(a,r,Math.max(s(t,e,n),l||0))}n=e}))})),o}(t,e,i,o),a=o?"borderLeft":"borderRight";function l(t,e){for(var i=s.nodes(),n=i.pop(),o={};n;)o[n]?t(n):(o[n]=!0,i.push(n),i=i.concat(e(n))),n=i.pop()}return l((function(t){r[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,r[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),l((function(e){var i=s.outEdges(e).reduce((function(t,e){return Math.min(t,r[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),n=t.node(e);i!==Number.POSITIVE_INFINITY&&n.borderType!==a&&(r[e]=Math.max(r[e],i))}),s.successors.bind(s)),NN.forEach(n,(function(t){r[t]=r[i[t]]})),r}function iL(t,e){return NN.minBy(NN.values(e),(function(e){var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return NN.forIn(e,(function(e,o){var r=function(t,e){return t.node(e).width}(t,o)/2;i=Math.max(e+r,i),n=Math.min(e-r,n)})),i-n}))}function nL(t,e){var i=NN.values(e),n=NN.min(i),o=NN.max(i);NN.forEach(["u","d"],(function(i){NN.forEach(["l","r"],(function(r){var s,a=i+r,l=t[a];if(l!==e){var c=NN.values(l);(s="l"===r?n-NN.min(c):o-NN.max(c))&&(t[a]=NN.mapValues(l,(function(t){return t+s})))}}))}))}function oL(t,e){return NN.mapValues(t.ul,(function(i,n){if(e)return t[e.toLowerCase()][n];var o=NN.sortBy(NN.map(t,n));return(o[1]+o[2])/2}))}var rL=JM,sL=function(t){(function(t){var e=jN.buildLayerMatrix(t),i=t.graph().ranksep,n=0;NN.forEach(e,(function(e){var o=NN.max(NN.map(e,(function(e){return t.node(e).height})));NN.forEach(e,(function(e){t.node(e).y=n+o/2})),n+=o+i}))})(t=jN.asNonCompoundGraph(t)),NN.forEach(rL(t),(function(e,i){t.node(i).x=e}))};var aL=jN.normalizeRanks,lL=jN.removeEmptyRanks,cL=jN,dL=CD.Graph,uL=function(t,e){var i=e&&e.debugTiming?cL.time:cL.notime;i("layout",(function(){var e=i("  buildLayoutGraph",(function(){return function(t){var e=new dL({multigraph:!0,compound:!0}),i=EL(t.graph());return e.setGraph(NN.merge({},pL,bL(i,hL),NN.pick(i,gL))),NN.forEach(t.nodes(),(function(i){var n=EL(t.node(i));e.setNode(i,NN.defaults(bL(n,fL),mL)),e.setParent(i,t.parent(i))})),NN.forEach(t.edges(),(function(i){var n=EL(t.edge(i));e.setEdge(i,NN.merge({},vL,bL(n,_L),NN.pick(n,yL)))})),e}(t)}));i("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,NN.forEach(t.edges(),(function(i){var n=t.edge(i);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){NN.forEach(t.edges(),(function(e){if(e.v===e.w){var i=t.node(e.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){WN.run(t)})),e("    nestingGraph.run",(function(){xM.run(t)})),e("    rank",(function(){yM(cL.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){NN.forEach(t.edges(),(function(e){var i=t.edge(e);if(i.width&&i.height){var n=t.node(e.v),o={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};cL.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){lL(t)})),e("    nestingGraph.cleanup",(function(){xM.cleanup(t)})),e("    normalizeRanks",(function(){aL(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;NN.forEach(t.nodes(),(function(i){var n=t.node(i);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=NN.max(e,n.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){NN.forEach(t.nodes(),(function(e){var i=t.node(e);"edge-proxy"===i.dummy&&(t.edge(i.e).labelRank=i.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){KN.run(t)})),e("    parentDummyChains",(function(){TM(t)})),e("    addBorderSegments",(function(){SM(t)})),e("    order",(function(){zM(t)})),e("    insertSelfEdges",(function(){!function(t){var e=cL.buildLayerMatrix(t);NN.forEach(e,(function(e){var i=0;NN.forEach(e,(function(e,n){var o=t.node(e);o.order=n+i,NN.forEach(o.selfEdges,(function(e){cL.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:n+ ++i,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){wM.adjust(t)})),e("    position",(function(){sL(t)})),e("    positionSelfEdges",(function(){!function(t){NN.forEach(t.nodes(),(function(e){var i=t.node(e);if("selfedge"===i.dummy){var n=t.node(i.e.v),o=n.x+n.width/2,r=n.y,s=i.x-o,a=n.height/2;t.setEdge(i.e,i.label),t.removeNode(e),i.label.points=[{x:o+2*s/3,y:r-a},{x:o+5*s/6,y:r-a},{x:o+s,y:r},{x:o+5*s/6,y:r+a},{x:o+2*s/3,y:r+a}],i.label.x=i.x,i.label.y=i.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){NN.forEach(t.nodes(),(function(e){if(t.children(e).length){var i=t.node(e),n=t.node(i.borderTop),o=t.node(i.borderBottom),r=t.node(NN.last(i.borderLeft)),s=t.node(NN.last(i.borderRight));i.width=Math.abs(s.x-r.x),i.height=Math.abs(o.y-n.y),i.x=r.x+i.width/2,i.y=n.y+i.height/2}})),NN.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){KN.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){NN.forEach(t.edges(),(function(e){var i=t.edge(e);if(NN.has(i,"x"))switch("l"!==i.labelpos&&"r"!==i.labelpos||(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){wM.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,i=0,n=Number.POSITIVE_INFINITY,o=0,r=t.graph(),s=r.marginx||0,a=r.marginy||0;function l(t){var r=t.x,s=t.y,a=t.width,l=t.height;e=Math.min(e,r-a/2),i=Math.max(i,r+a/2),n=Math.min(n,s-l/2),o=Math.max(o,s+l/2)}NN.forEach(t.nodes(),(function(e){l(t.node(e))})),NN.forEach(t.edges(),(function(e){var i=t.edge(e);NN.has(i,"x")&&l(i)})),e-=s,n-=a,NN.forEach(t.nodes(),(function(i){var o=t.node(i);o.x-=e,o.y-=n})),NN.forEach(t.edges(),(function(i){var o=t.edge(i);NN.forEach(o.points,(function(t){t.x-=e,t.y-=n})),NN.has(o,"x")&&(o.x-=e),NN.has(o,"y")&&(o.y-=n)})),r.width=i-e+s,r.height=o-n+a}(t)})),e("    assignNodeIntersects",(function(){!function(t){NN.forEach(t.edges(),(function(e){var i,n,o=t.edge(e),r=t.node(e.v),s=t.node(e.w);o.points?(i=o.points[0],n=o.points[o.points.length-1]):(o.points=[],i=s,n=r),o.points.unshift(cL.intersectRect(r,i)),o.points.push(cL.intersectRect(s,n))}))}(t)})),e("    reversePoints",(function(){!function(t){NN.forEach(t.edges(),(function(e){var i=t.edge(e);i.reversed&&i.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){WN.undo(t)}))}(e,i)})),i("  updateInputGraph",(function(){!function(t,e){NN.forEach(t.nodes(),(function(i){var n=t.node(i),o=e.node(i);n&&(n.x=o.x,n.y=o.y,e.children(i).length&&(n.width=o.width,n.height=o.height))})),NN.forEach(t.edges(),(function(i){var n=t.edge(i),o=e.edge(i);n.points=o.points,NN.has(o,"x")&&(n.x=o.x,n.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var hL=["nodesep","edgesep","ranksep","marginx","marginy"],pL={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},gL=["acyclicer","ranker","rankdir","align"],fL=["width","height"],mL={width:0,height:0},_L=["minlen","weight","width","height","labeloffset"],vL={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},yL=["labelpos"];function bL(t,e){return NN.mapValues(NN.pick(t,e),Number)}function EL(t){var e={};return NN.forEach(t,(function(t,i){e[i.toLowerCase()]=t})),e}var TL=CD.Graph;var xL={graphlib:CD,layout:uL,debug:{debugOrdering:function(t){var e=jN.buildLayerMatrix(t),i=new TL({compound:!0,multigraph:!0}).setGraph({});return NN.forEach(t.nodes(),(function(e){i.setNode(e,{label:e}),i.setParent(e,"layer"+t.node(e).rank)})),NN.forEach(t.edges(),(function(t){i.setEdge(t.v,t.w,{},t.name)})),NN.forEach(e,(function(t,e){var n="layer"+e;i.setNode(n,{rank:"same"}),NN.reduce(t,(function(t,e){return i.setEdge(t,e,{style:"invis"}),e}))})),i}},util:{time:jN.time,notime:jN.notime},version:"0.8.5"},kL=r_((function(t,e){var i;i=function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){var n=i(1),o=function(t){t&&t("layout","dagre",n)};"undefined"!=typeof cytoscape&&o(cytoscape),t.exports=o},function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=i(2),r=i(3),s=i(4);function a(t){this.options=r({},o,t)}a.prototype.run=function(){var t=this.options,e=t.cy,i=t.eles,o=function(t,e){return"function"==typeof e?e.apply(t,[t]):e},r=t.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===r.x2&&(r.x2=r.x1+r.w),void 0===r.w&&(r.w=r.x2-r.x1),void 0===r.y2&&(r.y2=r.y1+r.h),void 0===r.h&&(r.h=r.y2-r.y1);var a=new s.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",t.nodeSep),c("edgesep",t.edgeSep),c("ranksep",t.rankSep),c("rankdir",t.rankDir),c("ranker",t.ranker),a.setGraph(l),a.setDefaultEdgeLabel((function(){return{}})),a.setDefaultNodeLabel((function(){return{}}));for(var d=i.nodes(),u=0;u<d.length;u++){var h=d[u],p=h.layoutDimensions(t);a.setNode(h.id(),{width:p.w,height:p.h,name:h.id()})}for(var g=0;g<d.length;g++){var f=d[g];f.isChild()&&a.setParent(f.id(),f.parent().id())}for(var m=i.edges().stdFilter((function(t){return!t.source().isParent()&&!t.target().isParent()})),_=0;_<m.length;_++){var v=m[_];a.setEdge(v.source().id(),v.target().id(),{minlen:o(v,t.minLen),weight:o(v,t.edgeWeight),name:v.id()},v.id())}s.layout(a);for(var y,b=a.nodes(),E=0;E<b.length;E++){var T=b[E],x=a.node(T);e.getElementById(T).scratch().dagre=x}return t.boundingBox?(y={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},d.forEach((function(t){var e=t.scratch().dagre;y.x1=Math.min(y.x1,e.x),y.x2=Math.max(y.x2,e.x),y.y1=Math.min(y.y1,e.y),y.y2=Math.max(y.y2,e.y)})),y.w=y.x2-y.x1,y.h=y.y2-y.y1):y=r,d.layoutPositions(this,t,(function(e){var i=(e="object"===n(e)?e:this).scratch().dagre;return function(e){if(t.boundingBox){var i=0===y.w?0:(e.x-y.x1)/y.w,n=0===y.h?0:(e.y-y.y1)/y.h;return{x:r.x1+i*r.w,y:r.y1+n*r.h}}return e}({x:i.x,y:i.y})})),this},t.exports=a},function(t,e){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,ranker:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(t,e){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(t,e){return e},ready:function(){},stop:function(){}};t.exports=i},function(t,e){t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i.forEach((function(e){Object.keys(e).forEach((function(i){return t[i]=e[i]}))})),t}},function(e,i){e.exports=t}])},t.exports=i(xL)}));EC.use(kL);Am([Z("#source-chain-graph"),Om("design:type",HTMLElement)],class extends Mm{constructor(){super(...arguments),this.nodes=[]}static get styles(){return[Lm,st(Em||(Em=Rm`:host{display:flex}#source-chain-graph{width:100%;height:100%}`))]}get activeCell(){return Fm(this.activeDna,this.activeAgentPubKey,this.conductors)}firstUpdated(){window.addEventListener("scroll",(()=>{this.cy.resize()})),this.cy=EC({container:this.graph,layout:{name:"dagre"},autoungrabify:!0,userZoomingEnabled:!0,userPanningEnabled:!0,style:"\nnode {\n  width: 30px;\n  height: 30px;\n  font-size: 10px;\n  label: data(label);\n  background-color: grey;\n  text-halign: right;\n  text-valign: center;\n  text-margin-x: 4px;\n}\n\n.header {\n  text-margin-x: -5px;\n  text-halign: left;\n  shape: round-rectangle;\n}\n\nedge {\n  width: 4;\n  target-arrow-shape: triangle;\n  curve-style: bezier;\n  line-style: dotted;\n}\n\n.selected {\n  border-width: 4px;\n  border-color: black;\n  border-style: solid;\n}\n\n.Dna {\n  background-color: green;\n}\n.AgentValidationPkg {\n  background-color: lime;\n}\n.Create {\n  background-color: blue;\n}\n.Delete {\n  background-color: red;\n}\n.Update {\n  background-color: cyan;\n}\n.CreateLink {\n  background-color: purple;\n}\n.DeleteLink {\n  background-color: purple;\n}\n"}),this.cy.on("tap","node",(t=>{let e=t.target.id();e.includes(":")&&(e=e.split(":")[1]),this.updatePlayground({activeHash:e})}));let t=!1;this.cy.on("render",(()=>{0!==this.cy.width()&&(t||(t=!0,setTimeout((()=>{this.setupGraph()}))))})),this.requestUpdate()}observedCells(){return[this.activeCell]}setupGraph(){this.cy.remove("node"),this.cy.add(this.nodes);const t=this.nodes.slice(0,7);this.cy.fit(t),this.cy.center(t),this.cy.resize(),this.cy.layout({name:"dagre"}).run()}updated(t){super.updated(t);const e=function(t){if(!t)return[];const e=[],i=t.getState(),n=i.sourceChain;for(const t of n){const n=i.CAS[t];if(e.push({data:{id:t,data:n,label:n.header.content.type},classes:["header",n.header.content.type]}),n.header.content.prev_header){const i=n.header.content.prev_header;e.push({data:{id:`${t}->${i}`,source:t,target:i}})}}for(const o of n){const n=o,r=i.CAS[n];if(r.header.content.entry_hash){const o=r.header.content,s=o.entry_hash,a=`${n}:${s}`,l=i.CAS[s],c=ls(t,o.entry_type);e.push({data:{id:a,data:l,label:c},classes:[c]}),e.push({data:{id:`${n}->${a}`,source:n,target:a}})}}return e}(this.activeCell);if(Jo(e,this.nodes)||(this.nodes=e,this.setupGraph()),t.has("activeHash")){this.cy.filter("node").removeClass("selected");const t=this.cy.nodes();for(const e of t){const t=e.id();(t===this.activeHash||t.includes(`:${this.activeHash}`))&&e.addClass("selected")}}}renderHelp(){return F(Tm||(Tm=Rm` <holochain-playground-help-button heading="Source-Chain" class="block-help"> <span> This graph displays the source chain of the selected cell. On the top-left sequence, you can see the hash-chain of headers. On the bottom-right sequence, you can see the entries associated with each header. Links between headers <br> <br> Dashed relationships are embedded references: the headers contain the hash of the last header, and also the entry hash if they have an entry. </span> </holochain-playground-help-button>`))}render(){return F(xm||(xm=Rm` <mwc-card class="block-card"> <div class="column fill"> <span class="block-title" style="margin:16px">Source chain</span> ${0} ${0} <div style="${0}" class="fill" id="source-chain-graph"></div> </div> </mwc-card> `),this.renderHelp(),this.activeCell?F(km||(km=Rm``)):F(Sm||(Sm=Rm` <div style="flex:1" class="center-content placeholder"> <span>Select a cell to display its source chain</span> </div> `)),qt({display:this.activeCell?"":"none"}))}static get scopedElements(){return{"mwc-card":ld,"holochain-playground-help-button":xC}}}.prototype,"graph",void 0);var SL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function CL(t){var e={exports:{}};return t(e,e.exports),e.exports}var wL=CL((function(t,e){var i;t.exports=((i={constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28}).CONNECTING_SNAP_RADIUS=i.SNAP_RADIUS,i.CURRENT_CONNECTION_PREFERENCE=8,i.BUMP_DELAY=250,i.BUMP_RANDOMNESS=10,i.COLLAPSE_CHARS=30,i.LONGPRESS=750,i.SOUND_LIMIT=100,i.DRAG_STACK=!0,i.HSV_SATURATION=.45,i.HSV_VALUE=.65,i.SPRITE={width:96,height:124,url:"sprites.png"},i.INPUT_VALUE=1,i.OUTPUT_VALUE=2,i.NEXT_STATEMENT=3,i.PREVIOUS_STATEMENT=4,i.DUMMY_INPUT=5,i.ALIGN_LEFT=-1,i.ALIGN_CENTRE=0,i.ALIGN_RIGHT=1,i.DRAG_NONE=0,i.DRAG_STICKY=1,i.DRAG_BEGIN=1,i.DRAG_FREE=2,i.OPPOSITE_TYPE=[],i.OPPOSITE_TYPE[i.INPUT_VALUE]=i.OUTPUT_VALUE,i.OPPOSITE_TYPE[i.OUTPUT_VALUE]=i.INPUT_VALUE,i.OPPOSITE_TYPE[i.NEXT_STATEMENT]=i.PREVIOUS_STATEMENT,i.OPPOSITE_TYPE[i.PREVIOUS_STATEMENT]=i.NEXT_STATEMENT,i.TOOLBOX_AT_TOP=0,i.TOOLBOX_AT_BOTTOM=1,i.TOOLBOX_AT_LEFT=2,i.TOOLBOX_AT_RIGHT=3,i.DELETE_AREA_NONE=null,i.DELETE_AREA_TRASH=1,i.DELETE_AREA_TOOLBOX=2,i.VARIABLE_CATEGORY_NAME="VARIABLE",i.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",i.PROCEDURE_CATEGORY_NAME="PROCEDURE",i.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",i.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",i.registry={},i.registry.typeMap_={},i.registry.DEFAULT="default",i.registry.Type=function(t){this.name_=t},i.registry.Type.prototype.toString=function(){return this.name_},i.registry.Type.CONNECTION_CHECKER=new i.registry.Type("connectionChecker"),i.registry.Type.EVENT=new i.registry.Type("event"),i.registry.Type.FIELD=new i.registry.Type("field"),i.registry.Type.RENDERER=new i.registry.Type("renderer"),i.registry.Type.TOOLBOX=new i.registry.Type("toolbox"),i.registry.Type.THEME=new i.registry.Type("theme"),i.registry.Type.TOOLBOX_ITEM=new i.registry.Type("toolboxItem"),i.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new i.registry.Type("flyoutsVerticalToolbox"),i.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new i.registry.Type("flyoutsHorizontalToolbox"),i.registry.register=function(t,e,n,o){if(!(t instanceof i.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof e||""==e.trim())throw Error('Invalid name "'+e+'". The name must be a non-empty string.');if(e=e.toLowerCase(),!n)throw Error("Can not register a null value");var r=i.registry.typeMap_[t];if(r||(r=i.registry.typeMap_[t]={}),i.registry.validate_(t,n),!o&&r[e])throw Error('Name "'+e+'" with type "'+t+'" already registered.');r[e]=n},i.registry.validate_=function(t,e){switch(t){case String(i.registry.Type.FIELD):if("function"!=typeof e.fromJson)throw Error('Type "'+t+'" must have a fromJson function')}},i.registry.unregister=function(t,e){t=String(t).toLowerCase(),e=e.toLowerCase();var n=i.registry.typeMap_[t];n?n[e]?delete i.registry.typeMap_[t][e]:console.warn('No name "'+e+'" with type "'+t+'" found'):console.warn('No type "'+t+'" found')},i.registry.getItem_=function(t,e){t=String(t).toLowerCase(),e=e.toLowerCase();var n=i.registry.typeMap_[t];return n?n[e]?n[e]:(console.warn('No name "'+e+'" with type "'+t+'" found'),null):(console.warn('No type "'+t+'" found'),null)},i.registry.hasItem=function(t,e){return t=String(t).toLowerCase(),e=e.toLowerCase(),!!(t=i.registry.typeMap_[t])&&!!t[e]},i.registry.getClass=function(t,e){return i.registry.getItem_(t,e)},i.registry.getObject=function(t,e){return i.registry.getItem_(t,e)},i.registry.getClassFromOptions=function(t,e){return"function"==typeof(e=e.plugins[t.toString()]||i.registry.DEFAULT)?e:i.registry.getClass(t,e)},i.utils={},i.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof SL?SL:this}(),i.Msg={},i.utils.global.Blockly||(i.utils.global.Blockly={}),i.utils.global.Blockly.Msg||(i.utils.global.Blockly.Msg=i.Msg),i.utils.colour={},i.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var e=i.utils.colour.names[t];if(e)return e;if(e="#"==(e="0x"==t.substring(0,2)?"#"+t.substring(2):t)[0]?e:"#"+e,/^#[0-9a-f]{6}$/.test(e))return e;if(/^#[0-9a-f]{3}$/.test(e))return["#",e[1],e[1],e[2],e[2],e[3],e[3]].join("");var n=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(t=Number(n[1]),e=Number(n[2]),n=Number(n[3]),0<=t&&256>t&&0<=e&&256>e&&0<=n&&256>n)?i.utils.colour.rgbToHex(t,e,n):null},i.utils.colour.rgbToHex=function(t,e,i){return e=t<<16|e<<8|i,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},i.utils.colour.hexToRgb=function(t){return(t=i.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},i.utils.colour.hsvToHex=function(t,e,n){var o=0,r=0,s=0;if(0==e)s=r=o=n;else{var a=Math.floor(t/60),l=t/60-a;t=n*(1-e);var c=n*(1-e*l);switch(e=n*(1-e*(1-l)),a){case 1:o=c,r=n,s=t;break;case 2:o=t,r=n,s=e;break;case 3:o=t,r=c,s=n;break;case 4:o=e,r=t,s=n;break;case 5:o=n,r=t,s=c;break;case 6:case 0:o=n,r=e,s=t}}return i.utils.colour.rgbToHex(Math.floor(o),Math.floor(r),Math.floor(s))},i.utils.colour.blend=function(t,e,n){return(t=i.utils.colour.parse(t))&&(e=i.utils.colour.parse(e))?(t=i.utils.colour.hexToRgb(t),e=i.utils.colour.hexToRgb(e),i.utils.colour.rgbToHex(Math.round(e[0]+n*(t[0]-e[0])),Math.round(e[1]+n*(t[1]-e[1])),Math.round(e[2]+n*(t[2]-e[2])))):null},i.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},i.utils.Coordinate=function(t,e){this.x=t,this.y=e},i.utils.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&t.x==e.x&&t.y==e.y},i.utils.Coordinate.distance=function(t,e){var i=t.x-e.x;return t=t.y-e.y,Math.sqrt(i*i+t*t)},i.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.utils.Coordinate.difference=function(t,e){return new i.utils.Coordinate(t.x-e.x,t.y-e.y)},i.utils.Coordinate.sum=function(t,e){return new i.utils.Coordinate(t.x+e.x,t.y+e.y)},i.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},i.utils.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},i.utils.Rect=function(t,e,i,n){this.top=t,this.bottom=e,this.left=i,this.right=n},i.utils.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},i.utils.string={},i.utils.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},i.utils.string.shortestStringLength=function(t){return t.length?t.reduce((function(t,e){return t.length<e.length?t:e})).length:0},i.utils.string.commonWordPrefix=function(t,e){if(!t.length)return 0;if(1==t.length)return t[0].length;var n=0;e=e||i.utils.string.shortestStringLength(t);for(var o=0;o<e;o++){for(var r=t[0][o],s=1;s<t.length;s++)if(r!=t[s][o])return n;" "==r&&(n=o+1)}for(s=1;s<t.length;s++)if((r=t[s][o])&&" "!=r)return n;return e},i.utils.string.commonWordSuffix=function(t,e){if(!t.length)return 0;if(1==t.length)return t[0].length;var n=0;e=e||i.utils.string.shortestStringLength(t);for(var o=0;o<e;o++){for(var r=t[0].substr(-o-1,1),s=1;s<t.length;s++)if(r!=t[s].substr(-o-1,1))return n;" "==r&&(n=o+1)}for(s=1;s<t.length;s++)if((r=t[s].charAt(t[s].length-o-1))&&" "!=r)return n;return e},i.utils.string.wrap=function(t,e){t=t.split("\n");for(var n=0;n<t.length;n++)t[n]=i.utils.string.wrapLine_(t[n],e);return t.join("\n")},i.utils.string.wrapLine_=function(t,e){if(t.length<=e)return t;for(var n=t.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>e&&(e=n[o].length);o=-1/0;var r=1;do{var s=o,a=t;t=[];var l=n.length/r,c=1;for(o=0;o<n.length-1;o++)c<(o+1.5)/l?(c++,t[o]=!0):t[o]=!1;t=i.utils.string.wrapMutate_(n,t,e),o=i.utils.string.wrapScore_(n,t,e),t=i.utils.string.wrapToText_(n,t),r++}while(o>s);return a},i.utils.string.wrapScore_=function(t,e,i){for(var n=[0],o=[],r=0;r<t.length;r++)n[n.length-1]+=t[r].length,!0===e[r]?(n.push(0),o.push(t[r].charAt(t[r].length-1))):!1===e[r]&&n[n.length-1]++;for(t=Math.max.apply(Math,n),r=e=0;r<n.length;r++)e-=2*Math.pow(Math.abs(i-n[r]),1.5),e-=Math.pow(t-n[r],1.5),-1!=".?!".indexOf(o[r])?e+=i/3:-1!=",;)]}".indexOf(o[r])&&(e+=i/4);return 1<n.length&&n[n.length-1]<=n[n.length-2]&&(e+=.5),e},i.utils.string.wrapMutate_=function(t,e,n){for(var o,r=i.utils.string.wrapScore_(t,e,n),s=0;s<e.length-1;s++)if(e[s]!=e[s+1]){var a=[].concat(e);a[s]=!a[s],a[s+1]=!a[s+1];var l=i.utils.string.wrapScore_(t,a,n);l>r&&(r=l,o=a)}return o?i.utils.string.wrapMutate_(t,o,n):e},i.utils.string.wrapToText_=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]),void 0!==e[n]&&i.push(e[n]?"\n":" ");return i.join("")},i.utils.Size=function(t,e){this.width=t,this.height=e},i.utils.Size.equals=function(t,e){return t==e||!(!t||!e)&&t.width==e.width&&t.height==e.height},i.utils.style={},i.utils.style.getSize=function(t){if("none"!=i.utils.style.getStyle_(t,"display"))return i.utils.style.getSizeWithDisplay_(t);var e=t.style,n=e.display,o=e.visibility,r=e.position;e.visibility="hidden",e.position="absolute",e.display="inline";var s=t.offsetWidth;return t=t.offsetHeight,e.display=n,e.position=r,e.visibility=o,new i.utils.Size(s,t)},i.utils.style.getSizeWithDisplay_=function(t){return new i.utils.Size(t.offsetWidth,t.offsetHeight)},i.utils.style.getStyle_=function(t,e){return i.utils.style.getComputedStyle(t,e)||i.utils.style.getCascadedStyle(t,e)||t.style&&t.style[e]},i.utils.style.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},i.utils.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},i.utils.style.getPageOffset=function(t){var e=new i.utils.Coordinate(0,0);t=t.getBoundingClientRect();var n=document.documentElement;return n=new i.utils.Coordinate(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),e.x=t.left+n.x,e.y=t.top+n.y,e},i.utils.style.getViewportPageOffset=function(){var t=document.body,e=document.documentElement;return new i.utils.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},i.utils.style.setElementShown=function(t,e){t.style.display=e?"":"none"},i.utils.style.isRightToLeft=function(t){return"rtl"==i.utils.style.getStyle_(t,"direction")},i.utils.style.getBorderBox=function(t){var e=i.utils.style.getComputedStyle(t,"borderLeftWidth"),n=i.utils.style.getComputedStyle(t,"borderRightWidth"),o=i.utils.style.getComputedStyle(t,"borderTopWidth");return t=i.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(o),right:parseFloat(n),bottom:parseFloat(t),left:parseFloat(e)}},i.utils.style.scrollIntoContainerView=function(t,e,n){t=i.utils.style.getContainerOffsetToScrollInto(t,e,n),e.scrollLeft=t.x,e.scrollTop=t.y},i.utils.style.getContainerOffsetToScrollInto=function(t,e,n){var o=i.utils.style.getPageOffset(t),r=i.utils.style.getPageOffset(e),s=i.utils.style.getBorderBox(e),a=o.x-r.x-s.left;return o=o.y-r.y-s.top,r=i.utils.style.getSizeWithDisplay_(t),t=e.clientWidth-r.width,r=e.clientHeight-r.height,s=e.scrollLeft,e=e.scrollTop,n?(s+=a-t/2,e+=o-r/2):(s+=Math.min(a,Math.max(a-t,0)),e+=Math.min(o,Math.max(o-r,0))),new i.utils.Coordinate(s,e)},i.utils.userAgent={},function(t){function e(t){return-1!=n.indexOf(t.toUpperCase())}i.utils.userAgent.raw=t;var n=i.utils.userAgent.raw.toUpperCase();i.utils.userAgent.IE=e("Trident")||e("MSIE"),i.utils.userAgent.EDGE=e("Edge"),i.utils.userAgent.JAVA_FX=e("JavaFX"),i.utils.userAgent.CHROME=(e("Chrome")||e("CriOS"))&&!i.utils.userAgent.EDGE,i.utils.userAgent.WEBKIT=e("WebKit")&&!i.utils.userAgent.EDGE,i.utils.userAgent.GECKO=e("Gecko")&&!i.utils.userAgent.WEBKIT&&!i.utils.userAgent.IE&&!i.utils.userAgent.EDGE,i.utils.userAgent.ANDROID=e("Android"),i.utils.userAgent.IPAD=e("iPad"),i.utils.userAgent.IPOD=e("iPod"),i.utils.userAgent.IPHONE=e("iPhone")&&!i.utils.userAgent.IPAD&&!i.utils.userAgent.IPOD,i.utils.userAgent.MAC=e("Macintosh"),i.utils.userAgent.TABLET=i.utils.userAgent.IPAD||i.utils.userAgent.ANDROID&&!e("Mobile")||e("Silk"),i.utils.userAgent.MOBILE=!i.utils.userAgent.TABLET&&(i.utils.userAgent.IPOD||i.utils.userAgent.IPHONE||i.utils.userAgent.ANDROID||e("IEMobile"))}(i.utils.global.navigator&&i.utils.global.navigator.userAgent||""),i.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},i.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},i.utils.getRelativeXY=function(t){var e=new i.utils.Coordinate(0,0),n=t.getAttribute("x");return n&&(e.x=parseInt(n,10)),(n=t.getAttribute("y"))&&(e.y=parseInt(n,10)),(n=(n=t.getAttribute("transform"))&&n.match(i.utils.getRelativeXY.XY_REGEX_))&&(e.x+=Number(n[1]),n[3]&&(e.y+=Number(n[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(i.utils.getRelativeXY.XY_STYLE_REGEX_))&&(e.x+=Number(t[1]),t[3]&&(e.y+=Number(t[3]))),e},i.utils.getInjectionDivXY_=function(t){for(var e=0,n=0;t;){var o=i.utils.getRelativeXY(t);if(e+=o.x,n+=o.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new i.utils.Coordinate(e,n)},i.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,i.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,i.utils.isRightButton=function(t){return!(!t.ctrlKey||!i.utils.userAgent.MAC)||2==t.button},i.utils.mouseToSvg=function(t,e,i){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,i||(i=e.getScreenCTM().inverse()),n.matrixTransform(i)},i.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*i.LINE_MODE_MULTIPLIER,y:t.deltaY*i.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*i.PAGE_MODE_MULTIPLIER,y:t.deltaY*i.PAGE_MODE_MULTIPLIER}}},i.utils.tokenizeInterpolation=function(t){return i.utils.tokenizeInterpolation_(t,!0)},i.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=i.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},i.utils.checkMessageReferences=function(t){for(var e=!0,n=i.Msg,o=t.match(/%{BKY_[A-Z]\w*}/gi),r=0;r<o.length;r++)null==n[o[r].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+o[r]+" in "+t),e=!1);return e},i.utils.tokenizeInterpolation_=function(t,e){var n=[],o=t.split("");o.push("");var r=0;t=[];for(var s=null,a=0;a<o.length;a++){var l=o[a];0==r?"%"==l?((l=t.join(""))&&n.push(l),t.length=0,r=1):t.push(l):1==r?"%"==l?(t.push(l),r=0):e&&"0"<=l&&"9">=l?(r=2,s=l,(l=t.join(""))&&n.push(l),t.length=0):"{"==l?r=3:(t.push("%",l),r=0):2==r?"0"<=l&&"9">=l?s+=l:(n.push(parseInt(s,10)),a--,r=0):3==r&&(""==l?(t.splice(0,0,"%{"),a--,r=0):"}"!=l?t.push(l):(r=t.join(""),/[A-Z]\w*/i.test(r)?(l=r.toUpperCase(),(l=i.utils.string.startsWith(l,"BKY_")?l.substring(4):null)&&l in i.Msg?"string"==typeof(r=i.Msg[l])?Array.prototype.push.apply(n,i.utils.tokenizeInterpolation_(r,e)):e?n.push(String(r)):n.push(r):n.push("%{"+r+"}")):n.push("%{"+r+"}"),r=t.length=0))}for((l=t.join(""))&&n.push(l),e=[],a=t.length=0;a<n.length;++a)"string"==typeof n[a]?t.push(n[a]):((l=t.join(""))&&e.push(l),t.length=0,e.push(n[a]));return(l=t.join(""))&&e.push(l),t.length=0,e},i.utils.genUid=function(){for(var t=i.utils.genUid.soup_.length,e=[],n=0;20>n;n++)e[n]=i.utils.genUid.soup_.charAt(Math.random()*t);return e.join("")},i.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i.utils.is3dSupported=function(){if(void 0!==i.utils.is3dSupported.cached_)return i.utils.is3dSupported.cached_;if(!i.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),e="none",n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(t,null),n)if(void 0!==t.style[o]){if(t.style[o]="translate3d(1px,1px,1px)",!(e=i.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;e=e.getPropertyValue(n[o])}return document.body.removeChild(t),i.utils.is3dSupported.cached_="none"!==e,i.utils.is3dSupported.cached_},i.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var e=setInterval((function(){"complete"==document.readyState&&(clearInterval(e),t())}),10)},i.utils.getViewportBBox=function(){var t=i.utils.style.getViewportPageOffset();return new i.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},i.utils.arrayRemove=function(t,e){return-1!=(e=t.indexOf(e))&&(t.splice(e,1),!0)},i.utils.getDocumentScroll=function(){var t=document.documentElement,e=window;return i.utils.userAgent.IE&&e.pageYOffset!=t.scrollTop?new i.utils.Coordinate(t.scrollLeft,t.scrollTop):new i.utils.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},i.utils.getBlockTypeCounts=function(t,e){var i=Object.create(null),n=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=n.indexOf(t),n.splice(t,n.length-t)),t=0;e=n[t];t++)i[e.type]?i[e.type]++:i[e.type]=1;return i},i.utils.screenToWsCoordinates=function(t,e){var n=e.x;e=e.y;var o=t.getInjectionDiv().getBoundingClientRect();return n=new i.utils.Coordinate(n-o.left,e-o.top),e=t.getOriginOffsetInPixels(),i.utils.Coordinate.difference(n,e).scale(1/t.scale)},i.utils.parseBlockColour=function(t){var e="string"==typeof t?i.utils.replaceMessageReferences(t):t,n=Number(e);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:i.utils.colour.hsvToHex(n,i.HSV_SATURATION,255*i.HSV_VALUE)};if(n=i.utils.colour.parse(e))return{hue:null,hex:n};throw n='Invalid colour: "'+e+'"',t!=e&&(n+=' (from "'+t+'")'),Error(n)},i.Events={},i.Events.group_="",i.Events.recordUndo=!0,i.Events.disabled_=0,i.Events.CREATE="create",i.Events.BLOCK_CREATE=i.Events.CREATE,i.Events.DELETE="delete",i.Events.BLOCK_DELETE=i.Events.DELETE,i.Events.CHANGE="change",i.Events.BLOCK_CHANGE=i.Events.CHANGE,i.Events.MOVE="move",i.Events.BLOCK_MOVE=i.Events.MOVE,i.Events.VAR_CREATE="var_create",i.Events.VAR_DELETE="var_delete",i.Events.VAR_RENAME="var_rename",i.Events.UI="ui",i.Events.BLOCK_DRAG="drag",i.Events.SELECTED="selected",i.Events.CLICK="click",i.Events.MARKER_MOVE="marker_move",i.Events.BUBBLE_OPEN="bubble_open",i.Events.TRASHCAN_OPEN="trashcan_open",i.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",i.Events.THEME_CHANGE="theme_change",i.Events.VIEWPORT_CHANGE="viewport_change",i.Events.COMMENT_CREATE="comment_create",i.Events.COMMENT_DELETE="comment_delete",i.Events.COMMENT_CHANGE="comment_change",i.Events.COMMENT_MOVE="comment_move",i.Events.FINISHED_LOADING="finished_loading",i.Events.BUMP_EVENTS=[i.Events.BLOCK_CREATE,i.Events.BLOCK_MOVE,i.Events.COMMENT_CREATE,i.Events.COMMENT_MOVE],i.Events.FIRE_QUEUE_=[],i.Events.fire=function(t){i.Events.isEnabled()&&(i.Events.FIRE_QUEUE_.length||setTimeout(i.Events.fireNow_,0),i.Events.FIRE_QUEUE_.push(t))},i.Events.fireNow_=function(){for(var t,e=i.Events.filter(i.Events.FIRE_QUEUE_,!0),n=i.Events.FIRE_QUEUE_.length=0;t=e[n];n++)if(t.workspaceId){var o=i.Workspace.getById(t.workspaceId);o&&o.fireChangeListener(t)}},i.Events.filter=function(t,e){t=t.slice(),e||t.reverse();for(var n,o=[],r=Object.create(null),s=0;n=t[s];s++)if(!n.isNull()){var a=[n.isUiEvent?i.Events.UI:n.type,n.blockId,n.workspaceId].join(" "),l=r[a],c=l?l.event:null;l?n.type==i.Events.MOVE&&l.index==s-1?(c.newParentId=n.newParentId,c.newInputName=n.newInputName,c.newCoordinate=n.newCoordinate,l.index=s):n.type==i.Events.CHANGE&&n.element==c.element&&n.name==c.name?c.newValue=n.newValue:n.type==i.Events.CLICK&&c.type==i.Events.BUBBLE_OPEN||(r[a]={event:n,index:s},o.push(n)):(r[a]={event:n,index:s},o.push(n))}for(t=o.filter((function(t){return!t.isNull()})),e||t.reverse(),s=1;n=t[s];s++)n.type==i.Events.CHANGE&&"mutation"==n.element&&t.unshift(t.splice(s,1)[0]);return t},i.Events.clearPendingUndo=function(){for(var t,e=0;t=i.Events.FIRE_QUEUE_[e];e++)t.recordUndo=!1},i.Events.disable=function(){i.Events.disabled_++},i.Events.enable=function(){i.Events.disabled_--},i.Events.isEnabled=function(){return 0==i.Events.disabled_},i.Events.getGroup=function(){return i.Events.group_},i.Events.setGroup=function(t){i.Events.group_="boolean"==typeof t?t?i.utils.genUid():"":t},i.Events.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var i,n=0;i=t[n];n++)e[n]=i.id;return e},i.Events.fromJson=function(t,e){var n=i.registry.getClass(i.registry.Type.EVENT,t.type);if(!n)throw Error("Unknown event type.");return(n=new n).fromJson(t),n.workspaceId=e.id,n},i.Events.disableOrphans=function(t){if((t.type==i.Events.MOVE||t.type==i.Events.CREATE)&&t.workspaceId){var e=i.Workspace.getById(t.workspaceId),n=e.getBlockById(t.blockId);if(n){t=i.Events.recordUndo;try{i.Events.recordUndo=!1;var o=n.getParent();if(o&&o.isEnabled()){var r,s=n.getDescendants(!1);for(e=0;r=s[e];e++)r.setEnabled(!0)}else if((n.outputConnection||n.previousConnection)&&!e.isDragging())do{n.setEnabled(!1),n=n.getNextBlock()}while(n)}finally{i.Events.recordUndo=t}}}},i.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=i.Events.getGroup(),this.recordUndo=i.Events.recordUndo},i.Events.Abstract.prototype.isUiEvent=!1,i.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},i.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},i.Events.Abstract.prototype.isNull=function(){return!1},i.Events.Abstract.prototype.run=function(t){},i.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=i.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},i.utils.object={},i.utils.object.inherits=function(t,e){t.superClass_=e.prototype,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},i.utils.object.mixin=function(t,e){for(var i in e)t[i]=e[i]},i.utils.object.deepMerge=function(t,e){for(var n in e)t[n]=null!=e[n]&&"object"==typeof e[n]?i.utils.object.deepMerge(t[n]||Object.create(null),e[n]):e[n];return t},i.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map((function(e){return t[e]}))},i.Events.UiBase=function(t){i.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},i.utils.object.inherits(i.Events.UiBase,i.Events.Abstract),i.Events.UiBase.prototype.isUiEvent=!0,i.Events.Ui=function(t,e,n,o){i.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===e?"":e,this.oldValue=void 0===n?"":n,this.newValue=void 0===o?"":o},i.utils.object.inherits(i.Events.Ui,i.Events.UiBase),i.Events.Ui.prototype.type=i.Events.UI,i.Events.Ui.prototype.toJson=function(){var t=i.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},i.Events.Ui.prototype.fromJson=function(t){i.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},i.registry.register(i.registry.Type.EVENT,i.Events.UI,i.Events.Ui),i.utils.Svg=function(t){this.tagName_=t},i.utils.Svg.prototype.toString=function(){return this.tagName_},i.utils.Svg.ANIMATE=new i.utils.Svg("animate"),i.utils.Svg.CIRCLE=new i.utils.Svg("circle"),i.utils.Svg.CLIPPATH=new i.utils.Svg("clipPath"),i.utils.Svg.DEFS=new i.utils.Svg("defs"),i.utils.Svg.FECOMPOSITE=new i.utils.Svg("feComposite"),i.utils.Svg.FECOMPONENTTRANSFER=new i.utils.Svg("feComponentTransfer"),i.utils.Svg.FEFLOOD=new i.utils.Svg("feFlood"),i.utils.Svg.FEFUNCA=new i.utils.Svg("feFuncA"),i.utils.Svg.FEGAUSSIANBLUR=new i.utils.Svg("feGaussianBlur"),i.utils.Svg.FEPOINTLIGHT=new i.utils.Svg("fePointLight"),i.utils.Svg.FESPECULARLIGHTING=new i.utils.Svg("feSpecularLighting"),i.utils.Svg.FILTER=new i.utils.Svg("filter"),i.utils.Svg.FOREIGNOBJECT=new i.utils.Svg("foreignObject"),i.utils.Svg.G=new i.utils.Svg("g"),i.utils.Svg.IMAGE=new i.utils.Svg("image"),i.utils.Svg.LINE=new i.utils.Svg("line"),i.utils.Svg.PATH=new i.utils.Svg("path"),i.utils.Svg.PATTERN=new i.utils.Svg("pattern"),i.utils.Svg.POLYGON=new i.utils.Svg("polygon"),i.utils.Svg.RECT=new i.utils.Svg("rect"),i.utils.Svg.SVG=new i.utils.Svg("svg"),i.utils.Svg.TEXT=new i.utils.Svg("text"),i.utils.Svg.TSPAN=new i.utils.Svg("tspan"),i.utils.dom={},i.utils.dom.SVG_NS="http://www.w3.org/2000/svg",i.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",i.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",i.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},i.utils.dom.cacheWidths_=null,i.utils.dom.cacheReference_=0,i.utils.dom.canvasContext_=null,i.utils.dom.createSvgElement=function(t,e,n){for(var o in t=document.createElementNS(i.utils.dom.SVG_NS,String(t)),e)t.setAttribute(o,e[o]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),n&&n.appendChild(t),t},i.utils.dom.addClass=function(t,e){var i=t.getAttribute("class")||"";return-1==(" "+i+" ").indexOf(" "+e+" ")&&(i&&(i+=" "),t.setAttribute("class",i+e),!0)},i.utils.dom.removeClasses=function(t,e){e=e.split(" ");for(var n=0;n<e.length;n++)i.utils.dom.removeClass(t,e[n])},i.utils.dom.removeClass=function(t,e){var i=t.getAttribute("class");if(-1==(" "+i+" ").indexOf(" "+e+" "))return!1;i=i.split(/\s+/);for(var n=0;n<i.length;n++)i[n]&&i[n]!=e||(i.splice(n,1),n--);return i.length?t.setAttribute("class",i.join(" ")):t.removeAttribute("class"),!0},i.utils.dom.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},i.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},i.utils.dom.insertAfter=function(t,e){var i=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");i?e.insertBefore(t,i):e.appendChild(t)},i.utils.dom.containsNode=function(t,e){return!!(t.compareDocumentPosition(e)&i.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},i.utils.dom.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},i.utils.dom.startTextWidthCache=function(){i.utils.dom.cacheReference_++,i.utils.dom.cacheWidths_||(i.utils.dom.cacheWidths_={})},i.utils.dom.stopTextWidthCache=function(){i.utils.dom.cacheReference_--,i.utils.dom.cacheReference_||(i.utils.dom.cacheWidths_=null)},i.utils.dom.getTextWidth=function(t){var e,n=t.textContent+"\n"+t.className.baseVal;if(i.utils.dom.cacheWidths_&&(e=i.utils.dom.cacheWidths_[n]))return e;try{e=i.utils.userAgent.IE||i.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(e){return 8*t.textContent.length}return i.utils.dom.cacheWidths_&&(i.utils.dom.cacheWidths_[n]=e),e},i.utils.dom.getFastTextWidth=function(t,e,n,o){return i.utils.dom.getFastTextWidthWithSizeString(t,e+"pt",n,o)},i.utils.dom.getFastTextWidthWithSizeString=function(t,e,n,o){var r,s=t.textContent;return t=s+"\n"+t.className.baseVal,i.utils.dom.cacheWidths_&&(r=i.utils.dom.cacheWidths_[t])||(i.utils.dom.canvasContext_||((r=document.createElement("canvas")).className="blocklyComputeCanvas",i.shadowRoot?i.shadowRoot.appendChild(r):document.body.appendChild(r),i.utils.dom.canvasContext_=r.getContext("2d")),i.utils.dom.canvasContext_.font=n+" "+e+" "+o,r=i.utils.dom.canvasContext_.measureText(s).width,i.utils.dom.cacheWidths_&&(i.utils.dom.cacheWidths_[t]=r)),r},i.utils.dom.measureFontMetrics=function(t,e,i,n){var o=document.createElement("span");o.style.font=i+" "+e+" "+n,o.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(e=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(o),e.appendChild(t),document.body.appendChild(e);try{i={},e.style.alignItems="baseline",i.baseline=t.offsetTop-o.offsetTop,e.style.alignItems="flex-end",i.height=t.offsetTop-o.offsetTop}finally{document.body.removeChild(e)}return i},i.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},i.BlockDragSurfaceSvg.prototype.SVG_=null,i.BlockDragSurfaceSvg.prototype.dragGroup_=null,i.BlockDragSurfaceSvg.prototype.container_=null,i.BlockDragSurfaceSvg.prototype.scale_=1,i.BlockDragSurfaceSvg.prototype.surfaceXY_=null,i.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{xmlns:i.utils.dom.SVG_NS,"xmlns:html":i.utils.dom.HTML_NS,"xmlns:xlink":i.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},this.SVG_))},i.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new i.utils.Coordinate(0,0)},i.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,i){this.scale_=i,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+i+")")},i.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,e=this.surfaceXY_.y;t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",i.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+e+"px, 0px)")},i.BlockDragSurfaceSvg.prototype.translateSurface=function(t,e){this.surfaceXY_=new i.utils.Coordinate(t*this.scale_,e*this.scale_),this.translateSurfaceInternal_()},i.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=i.utils.getRelativeXY(this.SVG_);return new i.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},i.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},i.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},i.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},i.Css={},i.Css.injected_=!1,i.Css.register=function(t){if(i.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(i.Css.CONTENT,t),t.length=0},i.Css.inject=function(t,e){if(!i.Css.injected_){i.Css.injected_=!0;var n=i.Css.CONTENT.join("\n");i.Css.CONTENT.length=0,t&&(t=e.replace(/[\\/]$/,""),n=n.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",n=document.createTextNode(n),t.appendChild(n),i.shadowRoot?i.shadowRoot.appendChild(t):document.head.insertBefore(t,document.head.firstChild))}},i.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],i.utils.math={},i.utils.math.toRadians=function(t){return t*Math.PI/180},i.utils.math.toDegrees=function(t){return 180*t/Math.PI},i.utils.math.clamp=function(t,e,i){if(i<t){var n=i;i=t,t=n}return Math.max(t,Math.min(e,i))},i.DropDownDiv=function(){},i.DropDownDiv.boundsElement_=null,i.DropDownDiv.owner_=null,i.DropDownDiv.positionToField_=null,i.DropDownDiv.ARROW_SIZE=16,i.DropDownDiv.BORDER_SIZE=1,i.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,i.DropDownDiv.PADDING_Y=16,i.DropDownDiv.ANIMATION_TIME=.25,i.DropDownDiv.animateOutTimer_=null,i.DropDownDiv.onHide_=null,i.DropDownDiv.rendererClassName_="",i.DropDownDiv.themeClassName_="",i.DropDownDiv.createDom=function(){if(!i.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(i.parentContainer||i.shadowRoot||document.body).appendChild(t),i.DropDownDiv.DIV_=t;var e=document.createElement("div");e.className="blocklyDropDownContent",t.appendChild(e),i.DropDownDiv.content_=e,(e=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(e),i.DropDownDiv.arrow_=e,i.DropDownDiv.DIV_.style.opacity=0,i.DropDownDiv.DIV_.style.transition="transform "+i.DropDownDiv.ANIMATION_TIME+"s, opacity "+i.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",(function(){i.utils.dom.addClass(t,"blocklyFocused")})),t.addEventListener("focusout",(function(){i.utils.dom.removeClass(t,"blocklyFocused")}))}},i.DropDownDiv.setBoundsElement=function(t){i.DropDownDiv.boundsElement_=t},i.DropDownDiv.getContentDiv=function(){return i.DropDownDiv.content_},i.DropDownDiv.clearContent=function(){i.DropDownDiv.content_.textContent="",i.DropDownDiv.content_.style.width=""},i.DropDownDiv.setColour=function(t,e){i.DropDownDiv.DIV_.style.backgroundColor=t,i.DropDownDiv.DIV_.style.borderColor=e},i.DropDownDiv.showPositionedByBlock=function(t,e,n,o){return i.DropDownDiv.showPositionedByRect_(i.DropDownDiv.getScaledBboxOfBlock_(e),t,n,o)},i.DropDownDiv.showPositionedByField=function(t,e,n){return i.DropDownDiv.positionToField_=!0,i.DropDownDiv.showPositionedByRect_(i.DropDownDiv.getScaledBboxOfField_(t),t,e,n)},i.DropDownDiv.getScaledBboxOfBlock_=function(t){var e=t.getSvgRoot(),n=e.getBBox(),o=t.workspace.scale;return t=n.height*o,n=n.width*o,e=i.utils.style.getPageOffset(e),new i.utils.Rect(e.y,e.y+t,e.x,e.x+n)},i.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new i.utils.Rect(t.top,t.bottom,t.left,t.right)},i.DropDownDiv.showPositionedByRect_=function(t,e,n,o){var r=t.left+(t.right-t.left)/2,s=t.bottom;t=t.top,o&&(t+=o);for(var a=(o=e.getSourceBlock()).workspace;a.options.parentWorkspace;)a=a.options.parentWorkspace;return i.DropDownDiv.setBoundsElement(a.getParentSvg().parentNode),i.DropDownDiv.show(e,o.RTL,r,s,r,t,n)},i.DropDownDiv.show=function(t,e,n,o,r,s,a){return i.DropDownDiv.owner_=t,i.DropDownDiv.onHide_=a||null,(t=i.DropDownDiv.DIV_).style.direction=e?"rtl":"ltr",e=i.getMainWorkspace(),i.DropDownDiv.rendererClassName_=e.getRenderer().getClassName(),i.DropDownDiv.themeClassName_=e.getTheme().getClassName(),i.utils.dom.addClass(t,i.DropDownDiv.rendererClassName_),i.utils.dom.addClass(t,i.DropDownDiv.themeClassName_),i.DropDownDiv.positionInternal_(n,o,r,s)},i.DropDownDiv.getBoundsInfo_=function(){var t=i.utils.style.getPageOffset(i.DropDownDiv.boundsElement_),e=i.utils.style.getSize(i.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+e.width,top:t.y,bottom:t.y+e.height,width:e.width,height:e.height}},i.DropDownDiv.getPositionMetrics_=function(t,e,n,o){var r=i.DropDownDiv.getBoundsInfo_(),s=i.utils.style.getSize(i.DropDownDiv.DIV_);return e+s.height<r.bottom?i.DropDownDiv.getPositionBelowMetrics_(t,e,r,s):o-s.height>r.top?i.DropDownDiv.getPositionAboveMetrics_(n,o,r,s):e+s.height<document.documentElement.clientHeight?i.DropDownDiv.getPositionBelowMetrics_(t,e,r,s):o-s.height>document.documentElement.clientTop?i.DropDownDiv.getPositionAboveMetrics_(n,o,r,s):i.DropDownDiv.getPositionTopOfPageMetrics_(t,r,s)},i.DropDownDiv.getPositionBelowMetrics_=function(t,e,n,o){return{initialX:(t=i.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:e,finalX:t.divX,finalY:e+i.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(i.DropDownDiv.ARROW_SIZE/2+i.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},i.DropDownDiv.getPositionAboveMetrics_=function(t,e,n,o){return{initialX:(t=i.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:e-o.height,finalX:t.divX,finalY:e-o.height-i.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:o.height-2*i.DropDownDiv.BORDER_SIZE-i.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},i.DropDownDiv.getPositionTopOfPageMetrics_=function(t,e,n){return{initialX:(t=i.DropDownDiv.getPositionX(t,e.left,e.right,n.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},i.DropDownDiv.getPositionX=function(t,e,n,o){var r=t;return t=i.utils.math.clamp(e,t-o/2,n-o),r-=i.DropDownDiv.ARROW_SIZE/2,e=i.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:o=i.utils.math.clamp(e,r-t,o-e-i.DropDownDiv.ARROW_SIZE),divX:t}},i.DropDownDiv.isVisible=function(){return!!i.DropDownDiv.owner_},i.DropDownDiv.hideIfOwner=function(t,e){return i.DropDownDiv.owner_===t&&(e?i.DropDownDiv.hideWithoutAnimation():i.DropDownDiv.hide(),!0)},i.DropDownDiv.hide=function(){var t=i.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,i.DropDownDiv.animateOutTimer_=setTimeout((function(){i.DropDownDiv.hideWithoutAnimation()}),1e3*i.DropDownDiv.ANIMATION_TIME),i.DropDownDiv.onHide_&&(i.DropDownDiv.onHide_(),i.DropDownDiv.onHide_=null)},i.DropDownDiv.hideWithoutAnimation=function(){if(i.DropDownDiv.isVisible()){i.DropDownDiv.animateOutTimer_&&clearTimeout(i.DropDownDiv.animateOutTimer_);var t=i.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",i.DropDownDiv.onHide_&&(i.DropDownDiv.onHide_(),i.DropDownDiv.onHide_=null),i.DropDownDiv.clearContent(),i.DropDownDiv.owner_=null,i.DropDownDiv.rendererClassName_&&(i.utils.dom.removeClass(t,i.DropDownDiv.rendererClassName_),i.DropDownDiv.rendererClassName_=""),i.DropDownDiv.themeClassName_&&(i.utils.dom.removeClass(t,i.DropDownDiv.themeClassName_),i.DropDownDiv.themeClassName_=""),i.getMainWorkspace().markFocused()}},i.DropDownDiv.positionInternal_=function(t,e,n,o){(t=i.DropDownDiv.getPositionMetrics_(t,e,n,o)).arrowVisible?(i.DropDownDiv.arrow_.style.display="",i.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",i.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):i.DropDownDiv.arrow_.style.display="none",e=Math.floor(t.initialX),n=Math.floor(t.initialY),o=Math.floor(t.finalX);var r=Math.floor(t.finalY),s=i.DropDownDiv.DIV_;return s.style.left=e+"px",s.style.top=n+"px",s.style.display="block",s.style.opacity=1,s.style.transform="translate("+(o-e)+"px,"+(r-n)+"px)",!!t.arrowAtTop},i.DropDownDiv.repositionForWindowResize=function(){if(i.DropDownDiv.owner_){var t=i.DropDownDiv.owner_,e=t.getSourceBlock();e=(t=i.DropDownDiv.positionToField_?i.DropDownDiv.getScaledBboxOfField_(t):i.DropDownDiv.getScaledBboxOfBlock_(e)).left+(t.right-t.left)/2,i.DropDownDiv.positionInternal_(e,t.bottom,e,t.top)}else i.DropDownDiv.hide()},i.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},i.Grid.prototype.scale_=1,i.Grid.prototype.dispose=function(){this.gridPattern_=null},i.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},i.Grid.prototype.getSpacing=function(){return this.spacing_},i.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},i.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e);var i=(e=Math.floor(this.spacing_/2)+.5)-this.length_/2,n=e+this.length_/2;e*=t,i*=t,n*=t,this.setLineAttributes_(this.line1_,t,i,n,e,e),this.setLineAttributes_(this.line2_,t,e,e,i,n)},i.Grid.prototype.setLineAttributes_=function(t,e,i,n,o,r){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",i),t.setAttribute("y1",o),t.setAttribute("x2",n),t.setAttribute("y2",r))},i.Grid.prototype.moveTo=function(t,e){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",e),(i.utils.userAgent.IE||i.utils.userAgent.EDGE)&&this.update(this.scale_)},i.Grid.createDom=function(t,e,n){return t=i.utils.dom.createSvgElement(i.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},n),0<e.length&&0<e.spacing?(i.utils.dom.createSvgElement(i.utils.Svg.LINE,{stroke:e.colour},t),1<e.length&&i.utils.dom.createSvgElement(i.utils.Svg.LINE,{stroke:e.colour},t)):i.utils.dom.createSvgElement(i.utils.Svg.LINE,{},t),t},i.Theme=function(t,e,n,o){this.name=t,this.blockStyles=e||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,i.registry.register(i.registry.Type.THEME,t,this)},i.Theme.prototype.getClassName=function(){return this.name+"-theme"},i.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},i.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},i.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},i.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},i.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},i.Theme.prototype.setStartHats=function(t){this.startHats=t},i.Theme.defineTheme=function(t,e){var n=new i.Theme(t),o=e.base;return o&&("string"==typeof o&&(o=i.registry.getObject(i.registry.Type.THEME,o)),o instanceof i.Theme&&(i.utils.object.deepMerge(n,o),n.name=t)),i.utils.object.deepMerge(n.blockStyles,e.blockStyles),i.utils.object.deepMerge(n.categoryStyles,e.categoryStyles),i.utils.object.deepMerge(n.componentStyles,e.componentStyles),i.utils.object.deepMerge(n.fontStyle,e.fontStyle),null!=e.startHats&&(n.startHats=e.startHats),n},i.Themes={},i.Themes.Classic={},i.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},i.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},i.Themes.Classic=new i.Theme("classic",i.Themes.Classic.defaultBlockStyles,i.Themes.Classic.categoryStyles),i.utils.IdGenerator={},i.utils.IdGenerator.nextId_=0,i.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(i.utils.IdGenerator.nextId_++).toString(36)},i.utils.Metrics=function(){},i.utils.toolbox={},i.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",i.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",i.utils.toolbox.Position={TOP:i.TOOLBOX_AT_TOP,BOTTOM:i.TOOLBOX_AT_BOTTOM,LEFT:i.TOOLBOX_AT_LEFT,RIGHT:i.TOOLBOX_AT_RIGHT},i.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=i.utils.toolbox.parseToolboxTree(t),t=i.utils.toolbox.convertToToolboxJson_(t)),i.utils.toolbox.validateToolbox_(t),t):null},i.utils.toolbox.validateToolbox_=function(t){var e=t.kind;if(t=t.contents,e&&e!=i.utils.toolbox.FLYOUT_TOOLBOX_KIND&&e!=i.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+e+". Please supply either "+i.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+i.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},i.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:i.utils.toolbox.xmlToJsonArray_(t):[]},i.utils.toolbox.hasCategories=function(t){if(!t)return!1;var e=t.kind;return e?e==i.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length},i.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter((function(t){return"CATEGORY"==t.kind.toUpperCase()})).length)},i.utils.toolbox.convertToToolboxJson_=function(t){var e={contents:i.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&i.utils.toolbox.addAttributes_(t,e),e},i.utils.toolbox.xmlToJsonArray_=function(t){var e,n=[],o=t.childNodes;for(o||(o=t),t=0;e=o[t];t++)if(e.tagName){var r={},s=e.tagName.toUpperCase();r.kind=s,"BLOCK"==s?r.blockxml=e:e.childNodes&&0<e.childNodes.length&&(r.contents=i.utils.toolbox.xmlToJsonArray_(e)),i.utils.toolbox.addAttributes_(e,r),n.push(r)}return n},i.utils.toolbox.addAttributes_=function(t,e){for(var i=0;i<t.attributes.length;i++){var n=t.attributes[i];-1<n.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[n.nodeName.replace("css-","")]=n.value):e[n.nodeName]=n.value}},i.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(i.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=i.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},i.utils.xml={},i.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",i.utils.xml.document=function(){return document},i.utils.xml.createElement=function(t){return i.utils.xml.document().createElementNS(i.utils.xml.NAME_SPACE,t)},i.utils.xml.createTextNode=function(t){return i.utils.xml.document().createTextNode(t)},i.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},i.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},i.Events.BlockBase=function(t){i.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},i.utils.object.inherits(i.Events.BlockBase,i.Events.Abstract),i.Events.BlockBase.prototype.toJson=function(){var t=i.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},i.Events.BlockBase.prototype.fromJson=function(t){i.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},i.Events.Change=function(t,e,n,o,r){i.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===e?"":e,this.name=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===r?"":r)},i.utils.object.inherits(i.Events.Change,i.Events.BlockBase),i.Events.BlockChange=i.Events.Change,i.Events.Change.prototype.type=i.Events.CHANGE,i.Events.Change.prototype.toJson=function(){var t=i.Events.Change.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},i.Events.Change.prototype.fromJson=function(t){i.Events.Change.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},i.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},i.Events.Change.prototype.run=function(t){var e=this.getEventWorkspace_().getBlockById(this.blockId);if(e)switch(e.mutator&&e.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(e=e.getField(this.name))?e.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":e.setCommentText(t||null);break;case"collapsed":e.setCollapsed(!!t);break;case"disabled":e.setEnabled(!t);break;case"inline":e.setInputsInline(!!t);break;case"mutation":var n="";if(e.mutationToDom&&(n=(n=e.mutationToDom())&&i.Xml.domToText(n)),e.domToMutation){var o=i.Xml.textToDom(t||"<mutation/>");e.domToMutation(o)}i.Events.fire(new i.Events.Change(e,"mutation",null,n,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},i.Events.Create=function(t){i.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?i.Xml.blockToDomWithXY(t):i.Xml.blockToDom(t),this.ids=i.Events.getDescendantIds(t))},i.utils.object.inherits(i.Events.Create,i.Events.BlockBase),i.Events.BlockCreate=i.Events.Create,i.Events.Create.prototype.type=i.Events.CREATE,i.Events.Create.prototype.toJson=function(){var t=i.Events.Create.superClass_.toJson.call(this);return t.xml=i.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},i.Events.Create.prototype.fromJson=function(t){i.Events.Create.superClass_.fromJson.call(this,t),this.xml=i.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},i.Events.Create.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)(t=i.utils.xml.createElement("xml")).appendChild(this.xml),i.Xml.domToWorkspace(t,e);else{t=0;for(var n;n=this.ids[t];t++){var o=e.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},i.Events.Delete=function(t){if(i.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?i.Xml.blockToDomWithXY(t):i.Xml.blockToDom(t),this.ids=i.Events.getDescendantIds(t)}},i.utils.object.inherits(i.Events.Delete,i.Events.BlockBase),i.Events.BlockDelete=i.Events.Delete,i.Events.Delete.prototype.type=i.Events.DELETE,i.Events.Delete.prototype.toJson=function(){var t=i.Events.Delete.superClass_.toJson.call(this);return t.oldXml=i.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},i.Events.Delete.prototype.fromJson=function(t){i.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=i.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},i.Events.Delete.prototype.run=function(t){var e=this.getEventWorkspace_();if(t){t=0;for(var n;n=this.ids[t];t++){var o=e.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't delete non-existent block: "+n)}}else(t=i.utils.xml.createElement("xml")).appendChild(this.oldXml),i.Xml.domToWorkspace(t,e)},i.Events.Move=function(t){i.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},i.utils.object.inherits(i.Events.Move,i.Events.BlockBase),i.Events.BlockMove=i.Events.Move,i.Events.Move.prototype.type=i.Events.MOVE,i.Events.Move.prototype.toJson=function(){var t=i.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},i.Events.Move.prototype.fromJson=function(t){if(i.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var e=t.newCoordinate.split(",");this.newCoordinate=new i.utils.Coordinate(Number(e[0]),Number(e[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},i.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},i.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},i=t.getParent();return i?(e.parentId=i.id,(t=i.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},i.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&i.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},i.Events.Move.prototype.run=function(t){var e=this.getEventWorkspace_(),n=e.getBlockById(this.blockId);if(n){var o=t?this.newParentId:this.oldParentId,r=t?this.newInputName:this.oldInputName;t=t?this.newCoordinate:this.oldCoordinate;var s=null;if(o&&!(s=e.getBlockById(o)))return void console.warn("Can't connect to non-existent block: "+o);if(n.getParent()&&n.unplug(),t)r=n.getRelativeToSurfaceXY(),n.moveBy(t.x-r.x,t.y-r.y);else{if(n=n.outputConnection||n.previousConnection,r){if(e=s.getInput(r))var a=e.connection}else n.type==i.PREVIOUS_STATEMENT&&(a=s.nextConnection);a?n.connect(a):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},i.registry.register(i.registry.Type.EVENT,i.Events.CREATE,i.Events.Create),i.registry.register(i.registry.Type.EVENT,i.Events.DELETE,i.Events.Delete),i.registry.register(i.registry.Type.EVENT,i.Events.CHANGE,i.Events.Change),i.registry.register(i.registry.Type.EVENT,i.Events.MOVE,i.Events.Move),i.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=i.Events.getGroup(),this.recordUndo=!1},i.utils.object.inherits(i.Events.FinishedLoading,i.Events.Abstract),i.Events.FinishedLoading.prototype.type=i.Events.FINISHED_LOADING,i.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},i.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},i.registry.register(i.registry.Type.EVENT,i.Events.FINISHED_LOADING,i.Events.FinishedLoading),i.Events.VarBase=function(t){i.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},i.utils.object.inherits(i.Events.VarBase,i.Events.Abstract),i.Events.VarBase.prototype.toJson=function(){var t=i.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},i.Events.VarBase.prototype.fromJson=function(t){i.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},i.Events.VarCreate=function(t){i.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},i.utils.object.inherits(i.Events.VarCreate,i.Events.VarBase),i.Events.VarCreate.prototype.type=i.Events.VAR_CREATE,i.Events.VarCreate.prototype.toJson=function(){var t=i.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},i.Events.VarCreate.prototype.fromJson=function(t){i.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},i.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},i.Events.VarDelete=function(t){i.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},i.utils.object.inherits(i.Events.VarDelete,i.Events.VarBase),i.Events.VarDelete.prototype.type=i.Events.VAR_DELETE,i.Events.VarDelete.prototype.toJson=function(){var t=i.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},i.Events.VarDelete.prototype.fromJson=function(t){i.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},i.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},i.Events.VarRename=function(t,e){i.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===e?"":e)},i.utils.object.inherits(i.Events.VarRename,i.Events.VarBase),i.Events.VarRename.prototype.type=i.Events.VAR_RENAME,i.Events.VarRename.prototype.toJson=function(){var t=i.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},i.Events.VarRename.prototype.fromJson=function(t){i.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},i.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},i.registry.register(i.registry.Type.EVENT,i.Events.VAR_CREATE,i.Events.VarCreate),i.registry.register(i.registry.Type.EVENT,i.Events.VAR_DELETE,i.Events.VarDelete),i.registry.register(i.registry.Type.EVENT,i.Events.VAR_RENAME,i.Events.VarRename),i.Xml={},i.Xml.workspaceToDom=function(t,e){var n=i.utils.xml.createElement("xml"),o=i.Xml.variablesToDom(i.Variables.allUsedVarModels(t));o.hasChildNodes()&&n.appendChild(o);var r,s=t.getTopComments(!0);for(o=0;r=s[o];o++)n.appendChild(r.toXmlWithXY(e));for(t=t.getTopBlocks(!0),o=0;s=t[o];o++)n.appendChild(i.Xml.blockToDomWithXY(s,e));return n},i.Xml.variablesToDom=function(t){for(var e,n=i.utils.xml.createElement("variables"),o=0;e=t[o];o++){var r=i.utils.xml.createElement("variable");r.appendChild(i.utils.xml.createTextNode(e.name)),e.type&&r.setAttribute("type",e.type),r.id=e.getId(),n.appendChild(r)}return n},i.Xml.blockToDomWithXY=function(t,e){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var n;t.workspace.RTL&&(n=t.workspace.getWidth()),e=i.Xml.blockToDom(t,e);var o=t.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(t.workspace.RTL?n-o.x:o.x)),e.setAttribute("y",Math.round(o.y)),e},i.Xml.fieldToDom_=function(t){if(t.isSerializable()){var e=i.utils.xml.createElement("field");return e.setAttribute("name",t.name||""),t.toXml(e)}return null},i.Xml.allFieldsToDom_=function(t,e){for(var n,o=0;n=t.inputList[o];o++)for(var r,s=0;r=n.fieldRow[s];s++)(r=i.Xml.fieldToDom_(r))&&e.appendChild(r)},i.Xml.blockToDom=function(t,e){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?i.Xml.blockToDom(t):new DocumentFragment;var n=i.utils.xml.createElement(t.isShadow()?"shadow":"block");if(n.setAttribute("type",t.type),e||n.setAttribute("id",t.id),t.mutationToDom){var o=t.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}if(i.Xml.allFieldsToDom_(t,n),o=t.getCommentText()){var r=t.commentModel.size,s=t.commentModel.pinned,a=i.utils.xml.createElement("comment");a.appendChild(i.utils.xml.createTextNode(o)),a.setAttribute("pinned",s),a.setAttribute("h",r.height),a.setAttribute("w",r.width),n.appendChild(a)}for(t.data&&((o=i.utils.xml.createElement("data")).appendChild(i.utils.xml.createTextNode(t.data)),n.appendChild(o)),o=0;r=t.inputList[o];o++){var l;if(s=!0,r.type!=i.DUMMY_INPUT){var c=r.connection.targetBlock();r.type==i.INPUT_VALUE?l=i.utils.xml.createElement("value"):r.type==i.NEXT_STATEMENT&&(l=i.utils.xml.createElement("statement")),!(a=r.connection.getShadowDom())||c&&c.isShadow()||l.appendChild(i.Xml.cloneShadow_(a,e)),c&&(a=i.Xml.blockToDom(c,e)).nodeType==i.utils.dom.NodeType.ELEMENT_NODE&&(l.appendChild(a),s=!1),l.setAttribute("name",r.name),s||n.appendChild(l)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&n.setAttribute("inline",t.inputsInline),t.isCollapsed()&&n.setAttribute("collapsed",!0),t.isEnabled()||n.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||n.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||n.setAttribute("movable",!1),t.isEditable()||n.setAttribute("editable",!1),(o=t.getNextBlock())&&(a=i.Xml.blockToDom(o,e)).nodeType==i.utils.dom.NodeType.ELEMENT_NODE&&((l=i.utils.xml.createElement("next")).appendChild(a),n.appendChild(l)),!(a=t.nextConnection&&t.nextConnection.getShadowDom())||o&&o.isShadow()||l.appendChild(i.Xml.cloneShadow_(a,e)),n},i.Xml.cloneShadow_=function(t,e){for(var n,o=t=t.cloneNode(!0);o;)if(e&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)n=o,o=o.parentNode,n.nodeType==i.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&o.firstChild!=n&&i.utils.dom.removeNode(n);o&&(n=o,o=o.nextSibling,n.nodeType==i.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&i.utils.dom.removeNode(n))}return t},i.Xml.domToText=function(t){return i.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},i.Xml.domToPrettyText=function(t){t=i.Xml.domToText(t).split("<");for(var e="",n=1;n<t.length;n++){var o=t[n];"/"==o[0]&&(e=e.substring(2)),t[n]=e+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(e+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},i.Xml.textToDom=function(t){var e=i.utils.xml.textToDomDocument(t);if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return e.documentElement},i.Xml.clearWorkspaceAndLoadFromXml=function(t,e){return e.setResizesEnabled(!1),e.clear(),t=i.Xml.domToWorkspace(t,e),e.setResizesEnabled(!0),t},i.Xml.domToWorkspace=function(t,e){if(t instanceof i.Workspace){var n=t;t=e,e=n,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;e.RTL&&(o=e.getWidth()),n=[],i.utils.dom.startTextWidthCache();var r=i.Events.getGroup();r||i.Events.setGroup(!0),e.setResizesEnabled&&e.setResizesEnabled(!1);var s=!0;try{for(var a,l=0;a=t.childNodes[l];l++){var c=a.nodeName.toLowerCase(),d=a;if("block"==c||"shadow"==c&&!i.Events.recordUndo){var u=i.Xml.domToBlock(d,e);n.push(u.id);var h=d.hasAttribute("x")?parseInt(d.getAttribute("x"),10):10,p=d.hasAttribute("y")?parseInt(d.getAttribute("y"),10):10;isNaN(h)||isNaN(p)||u.moveBy(e.RTL?o-h:h,p),s=!1}else{if("shadow"==c)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==c)e.rendered?i.WorkspaceCommentSvg?i.WorkspaceCommentSvg.fromXml(d,e,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):i.WorkspaceComment?i.WorkspaceComment.fromXml(d,e):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==c){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");i.Xml.domToVariables(d,e),s=!1}}}}finally{r||i.Events.setGroup(!1),i.utils.dom.stopTextWidthCache()}return e.setResizesEnabled&&e.setResizesEnabled(!0),i.Events.fire(new i.Events.FinishedLoading(e)),n},i.Xml.appendDomToWorkspace=function(t,e){var n;if(Object.prototype.hasOwnProperty.call(e,"scale")&&(n=e.getBlocksBoundingBox()),t=i.Xml.domToWorkspace(t,e),n&&n.top!=n.bottom){var o=n.bottom,r=e.RTL?n.right:n.left,s=1/0,a=-1/0,l=1/0;for(n=0;n<t.length;n++){var c=e.getBlockById(t[n]).getRelativeToSurfaceXY();c.y<l&&(l=c.y),c.x<s&&(s=c.x),c.x>a&&(a=c.x)}for(o=o-l+10,r=e.RTL?r-a:r-s,n=0;n<t.length;n++)e.getBlockById(t[n]).moveBy(r,o)}return t},i.Xml.domToBlock=function(t,e){if(t instanceof i.Workspace){var n=t;t=e,e=n,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}i.Events.disable(),n=e.getAllVariables();try{var o=i.Xml.domToBlockHeadless_(t,e),r=o.getDescendants(!1);if(e.rendered){o.setConnectionTracking(!1);for(var s=r.length-1;0<=s;s--)r[s].initSvg();for(s=r.length-1;0<=s;s--)r[s].render(!1);setTimeout((function(){o.disposed||o.setConnectionTracking(!0)}),1),o.updateDisabled(),e.resizeContents()}else for(s=r.length-1;0<=s;s--)r[s].initModel()}finally{i.Events.enable()}if(i.Events.isEnabled()){for(t=i.Variables.getAddedVariables(e,n),s=0;s<t.length;s++)i.Events.fire(new i.Events.VarCreate(t[s]));i.Events.fire(new i.Events.BlockCreate(o))}return o},i.Xml.domToVariables=function(t,e){for(var n,o=0;n=t.childNodes[o];o++)if(n.nodeType==i.utils.dom.NodeType.ELEMENT_NODE){var r=n.getAttribute("type"),s=n.getAttribute("id");e.createVariable(n.textContent,r,s)}},i.Xml.domToBlockHeadless_=function(t,e){var n=null,o=t.getAttribute("type");if(!o)throw TypeError("Block type unspecified: "+t.outerHTML);var r=t.getAttribute("id");n=e.newBlock(o,r);var s,a=null;for(r=0;s=t.childNodes[r];r++)if(s.nodeType!=i.utils.dom.NodeType.TEXT_NODE){for(var l,c=a=null,d=0;l=s.childNodes[d];d++)l.nodeType==i.utils.dom.NodeType.ELEMENT_NODE&&("block"==l.nodeName.toLowerCase()?a=l:"shadow"==l.nodeName.toLowerCase()&&(c=l));d=!1;var u=s.getAttribute("name");switch(l=s,s.nodeName.toLowerCase()){case"mutation":n.domToMutation&&(n.domToMutation(l),n.initSvg&&(d=!0));break;case"comment":if(!i.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}c=l.textContent,a="true"==l.getAttribute("pinned"),s=parseInt(l.getAttribute("w"),10),l=parseInt(l.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=a,isNaN(s)||isNaN(l)||(n.commentModel.size=new i.utils.Size(s,l)),a&&n.getCommentIcon&&!n.isInFlyout&&setTimeout((function(){n.getCommentIcon().setVisible(!0)}),1);break;case"data":n.data=s.textContent;break;case"title":case"field":i.Xml.domToField_(n,u,l);break;case"value":case"statement":if(!(l=n.getInput(u))){console.warn("Ignoring non-existent input "+u+" in block "+o);break}if(a)if((a=i.Xml.domToBlockHeadless_(a,e)).outputConnection)l.connection.connect(a.outputConnection);else{if(!a.previousConnection)throw TypeError("Child block does not have output or previous statement.");l.connection.connect(a.previousConnection)}c&&l.connection.setShadowDom(c);break;case"next":if(a){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(a=i.Xml.domToBlockHeadless_(a,e)).previousConnection)throw TypeError("Next block does not have previous statement.");n.nextConnection.connect(a.previousConnection)}c&&n.nextConnection&&n.nextConnection.setShadowDom(c);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}}if(d&&n.initSvg(),(r=t.getAttribute("inline"))&&n.setInputsInline("true"==r),(r=t.getAttribute("disabled"))&&n.setEnabled("true"!=r&&"disabled"!=r),(r=t.getAttribute("deletable"))&&n.setDeletable("true"==r),(r=t.getAttribute("movable"))&&n.setMovable("true"==r),(r=t.getAttribute("editable"))&&n.setEditable("true"==r),(r=t.getAttribute("collapsed"))&&n.setCollapsed("true"==r),"shadow"==t.nodeName.toLowerCase()){for(t=n.getChildren(!1),r=0;e=t[r];r++)if(!e.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(n.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");n.setShadow(!0)}return n},i.Xml.domToField_=function(t,e,i){var n=t.getField(e);n?n.fromXml(i):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},i.Xml.deleteNext=function(t){for(var e,i=0;e=t.childNodes[i];i++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},i.Options=function(t){var e=!!t.readOnly;if(e)var n=null,o=!1,r=!1,s=!1,a=!1,l=!1,c=!1;else{n=i.utils.toolbox.convertToolboxDefToJson(t.toolbox),o=i.utils.toolbox.hasCategories(n),void 0===(r=t.trashcan)&&(r=o);var d=t.maxTrashcanContents;r?void 0===d&&(d=32):d=0,void 0===(s=t.collapse)&&(s=o),void 0===(a=t.comments)&&(a=o),void 0===(l=t.disable)&&(l=o),void 0===(c=t.sounds)&&(c=!0)}var u=!!t.rtl,h=t.horizontalLayout;void 0===h&&(h=!1);var p=t.toolboxPosition;p="end"!==p,p=h?p?i.utils.toolbox.Position.TOP:i.utils.toolbox.Position.BOTTOM:p==u?i.utils.toolbox.Position.RIGHT:i.utils.toolbox.Position.LEFT;var g=t.css;void 0===g&&(g=!0);var f="https://blockly-demo.appspot.com/static/media/";t.media?f=t.media:t.path&&(f=t.path+"media/");var m=void 0===t.oneBasedIndex||!!t.oneBasedIndex,_=t.renderer||"geras",v=t.plugins||{};this.RTL=u,this.oneBasedIndex=m,this.collapse=s,this.comments=a,this.disable=l,this.readOnly=e,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=f,this.hasCategories=o,this.moveOptions=i.Options.parseMoveOptions_(t,o),this.hasScrollbars=this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=d,this.hasSounds=c,this.hasCss=g,this.horizontalLayout=h,this.languageTree=n,this.gridOptions=i.Options.parseGridOptions_(t),this.zoomOptions=i.Options.parseZoomOptions_(t),this.toolboxPosition=p,this.theme=i.Options.parseThemeOptions_(t),this.renderer=_,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=v},i.BlocklyOptions=function(){},i.Options.parseMoveOptions_=function(t,e){var i=t.move||{},n={};return n.scrollbars=void 0===i.scrollbars&&void 0===t.scrollbars?e:!!i.scrollbars||!!t.scrollbars,n.wheel=!(!n.scrollbars||void 0===i.wheel||!i.wheel),n.drag=!(!n.scrollbars||void 0!==i.drag&&!i.drag),n},i.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e},i.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},i.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||i.Themes.Classic)?i.registry.getObject(i.registry.Type.THEME,t):t instanceof i.Theme?t:i.Theme.defineTheme(t.name||"builtin"+i.utils.IdGenerator.getNextUniqueId(),t)},i.Options.parseToolboxTree=function(t){return i.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),i.utils.toolbox.parseToolboxTree(t)},i.Touch={},i.Touch.TOUCH_ENABLED="ontouchstart"in i.utils.global||!!(i.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!i.utils.global.navigator||!i.utils.global.navigator.maxTouchPoints&&!i.utils.global.navigator.msMaxTouchPoints),i.Touch.touchIdentifier_=null,i.Touch.TOUCH_MAP={},i.utils.global.PointerEvent?i.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:i.Touch.TOUCH_ENABLED&&(i.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),i.longPid_=0,i.longStart=function(t,e){i.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(i.longPid_=setTimeout((function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),e&&e.handleRightClick(t)}),i.LONGPRESS))},i.longStop_=function(){i.longPid_&&(clearTimeout(i.longPid_),i.longPid_=0)},i.Touch.clearTouchIdentifier=function(){i.Touch.touchIdentifier_=null},i.Touch.shouldHandleEvent=function(t){return!i.Touch.isMouseOrTouchEvent(t)||i.Touch.checkTouchIdentifier(t)},i.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&void 0!==t.changedTouches[0].identifier&&null!==t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},i.Touch.checkTouchIdentifier=function(t){var e=i.Touch.getTouchIdentifierFromEvent(t);return void 0!==i.Touch.touchIdentifier_&&null!==i.Touch.touchIdentifier_?i.Touch.touchIdentifier_==e:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(i.Touch.touchIdentifier_=e,!0)},i.Touch.setClientFromTouch=function(t){if(i.utils.string.startsWith(t.type,"touch")){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}},i.Touch.isMouseOrTouchEvent=function(t){return i.utils.string.startsWith(t.type,"touch")||i.utils.string.startsWith(t.type,"mouse")||i.utils.string.startsWith(t.type,"pointer")},i.Touch.isTouchEvent=function(t){return i.utils.string.startsWith(t.type,"touch")||i.utils.string.startsWith(t.type,"pointer")},i.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var i=0;i<t.changedTouches.length;i++)e[i]={type:t.type,changedTouches:[t.changedTouches[i]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},i.ScrollbarPair=function(t){this.workspace_=t,this.hScroll=new i.Scrollbar(t,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new i.Scrollbar(t,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{height:i.Scrollbar.scrollbarThickness,width:i.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),i.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas()),this.oldHostMetrics_=null},i.ScrollbarPair.prototype.dispose=function(){i.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},i.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var e=!1,n=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==t.contentWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.contentLeft==t.contentLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==t.contentHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.contentTop==t.contentTop||(n=!0)):n=e=!0,e||n){try{i.Events.disable(),e&&this.hScroll.resize(t),n&&this.vScroll.resize(t)}finally{i.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y),this.oldHostMetrics_=t}},i.ScrollbarPair.prototype.set=function(t,e){var i={};t*=this.hScroll.ratio,e*=this.vScroll.ratio;var n=this.vScroll.scrollViewSize_;i.x=this.getRatio_(t,this.hScroll.scrollViewSize_),i.y=this.getRatio_(e,n),this.workspace_.setMetrics(i),this.hScroll.setHandlePosition(t),this.vScroll.setHandlePosition(e)},i.ScrollbarPair.prototype.getRatio_=function(t,e){return t/=e,isNaN(t)?0:t},i.Scrollbar=function(t,e,n,o){this.workspace_=t,this.pair_=n||!1,this.horizontal_=e,this.ratio=this.oldHostMetrics_=null,this.createDom_(o),this.position=new i.utils.Coordinate(0,0),t=i.Scrollbar.scrollbarThickness,e?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=i.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=i.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},i.Scrollbar.prototype.origin_=new i.utils.Coordinate(0,0),i.Scrollbar.prototype.startDragMouse_=0,i.Scrollbar.prototype.scrollViewSize_=0,i.Scrollbar.prototype.handleLength_=0,i.Scrollbar.prototype.handlePosition_=0,i.Scrollbar.prototype.isVisible_=!0,i.Scrollbar.prototype.containerVisible_=!0,i.Scrollbar.scrollbarThickness=15,i.Touch.TOUCH_ENABLED&&(i.Scrollbar.scrollbarThickness=25),i.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.contentWidth!=e.contentWidth||t.contentHeight!=e.contentHeight||t.contentLeft!=e.contentLeft||t.contentTop!=e.contentTop)},i.Scrollbar.prototype.dispose=function(){this.cleanUp_(),i.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,i.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,i.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},i.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},i.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},i.Scrollbar.prototype.setScrollViewSize_=function(t){this.scrollViewSize_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},i.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll.setContainerVisible(t),this.vScroll.setContainerVisible(t)},i.Scrollbar.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,i.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},i.Scrollbar.prototype.resize=function(t){(t||(t=this.workspace_.getMetrics()))&&(i.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.oldHostMetrics_=t,this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.onScroll_()))},i.Scrollbar.prototype.resizeHorizontal_=function(t){this.resizeViewHorizontal(t)},i.Scrollbar.prototype.resizeViewHorizontal=function(t){var e=t.viewWidth-1;this.pair_&&(e-=i.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,e)),e=t.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(e+=i.Scrollbar.scrollbarThickness),this.setPosition(e,t.absoluteTop+t.viewHeight-i.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(t)},i.Scrollbar.prototype.resizeContentHorizontal=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentWidth),this.ratio=this.scrollViewSize_/t.contentWidth,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewWidth*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewLeft-t.contentLeft)*this.ratio))},i.Scrollbar.prototype.resizeVertical_=function(t){this.resizeViewVertical(t)},i.Scrollbar.prototype.resizeViewVertical=function(t){var e=t.viewHeight-1;this.pair_&&(e-=i.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,e)),e=t.absoluteLeft+.5,this.workspace_.RTL||(e+=t.viewWidth-i.Scrollbar.scrollbarThickness-1),this.setPosition(e,t.absoluteTop+.5),this.resizeContentVertical(t)},i.Scrollbar.prototype.resizeContentVertical=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentHeight),this.ratio=this.scrollViewSize_/t.contentHeight,(-1/0==this.ratio||1/0==this.ratio||isNaN(this.ratio))&&(this.ratio=0),this.setHandleLength_(Math.max(0,t.viewHeight*this.ratio)),this.setHandlePosition(this.constrainHandle_((t.viewTop-t.contentTop)*this.ratio))},i.Scrollbar.prototype.createDom_=function(t){var e="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(e+=" "+t),this.outerSvg_=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{class:e},null),this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((i.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),i.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},i.Scrollbar.prototype.isVisible=function(){return this.isVisible_},i.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},i.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},i.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},i.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),i.Touch.clearTouchIdentifier(),this.cleanUp_(),i.utils.isRightButton(t))t.stopPropagation();else{var e=i.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());e=this.horizontal_?e.x:e.y;var n=i.utils.getInjectionDivXY_(this.svgHandle_);n=this.horizontal_?n.x:n.y;var o=this.handlePosition_,r=.95*this.handleLength_;e<=n?o-=r:e>=n+this.handleLength_&&(o+=r),this.setHandlePosition(this.constrainHandle_(o)),this.onScroll_(),t.stopPropagation(),t.preventDefault()}},i.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),i.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,i.Scrollbar.onMouseUpWrapper_=i.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),i.Scrollbar.onMouseMoveWrapper_=i.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},i.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.onScroll_()},i.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),i.Touch.clearTouchIdentifier(),this.cleanUp_()},i.Scrollbar.prototype.cleanUp_=function(){i.hideChaff(!0),i.Scrollbar.onMouseUpWrapper_&&(i.unbindEvent_(i.Scrollbar.onMouseUpWrapper_),i.Scrollbar.onMouseUpWrapper_=null),i.Scrollbar.onMouseMoveWrapper_&&(i.unbindEvent_(i.Scrollbar.onMouseMoveWrapper_),i.Scrollbar.onMouseMoveWrapper_=null)},i.Scrollbar.prototype.constrainHandle_=function(t){return 0>=t||isNaN(t)||this.scrollViewSize_<this.handleLength_?0:Math.min(t,this.scrollViewSize_-this.handleLength_)},i.Scrollbar.prototype.onScroll_=function(){var t=this.handlePosition_/this.scrollViewSize_;isNaN(t)&&(t=0);var e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},i.Scrollbar.prototype.set=function(t){this.setHandlePosition(this.constrainHandle_(t*this.ratio)),this.onScroll_()},i.Scrollbar.prototype.setOrigin=function(t,e){this.origin_=new i.utils.Coordinate(t,e)},i.Tooltip={},i.Tooltip.visible=!1,i.Tooltip.blocked_=!1,i.Tooltip.LIMIT=50,i.Tooltip.mouseOutPid_=0,i.Tooltip.showPid_=0,i.Tooltip.lastX_=0,i.Tooltip.lastY_=0,i.Tooltip.element_=null,i.Tooltip.poisonedElement_=null,i.Tooltip.OFFSET_X=0,i.Tooltip.OFFSET_Y=10,i.Tooltip.RADIUS_OK=10,i.Tooltip.HOVER_MS=750,i.Tooltip.MARGINS=5,i.Tooltip.DIV=null,i.Tooltip.getTooltipOfObject=function(t){if(t=i.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},i.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},i.Tooltip.createDom=function(){i.Tooltip.DIV||(i.Tooltip.DIV=document.createElement("div"),i.Tooltip.DIV.className="blocklyTooltipDiv",(i.parentContainer||document.body).appendChild(i.Tooltip.DIV))},i.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=i.bindEvent_(t,"mouseover",null,i.Tooltip.onMouseOver_),t.mouseOutWrapper_=i.bindEvent_(t,"mouseout",null,i.Tooltip.onMouseOut_),t.addEventListener("mousemove",i.Tooltip.onMouseMove_,!1)},i.Tooltip.unbindMouseEvents=function(t){t&&(i.unbindEvent_(t.mouseOverWrapper_),i.unbindEvent_(t.mouseOutWrapper_),t.removeEventListener("mousemove",i.Tooltip.onMouseMove_))},i.Tooltip.onMouseOver_=function(t){i.Tooltip.blocked_||(t=i.Tooltip.getTargetObject_(t.currentTarget),i.Tooltip.element_!=t&&(i.Tooltip.hide(),i.Tooltip.poisonedElement_=null,i.Tooltip.element_=t),clearTimeout(i.Tooltip.mouseOutPid_))},i.Tooltip.onMouseOut_=function(t){i.Tooltip.blocked_||(i.Tooltip.mouseOutPid_=setTimeout((function(){i.Tooltip.element_=null,i.Tooltip.poisonedElement_=null,i.Tooltip.hide()}),1),clearTimeout(i.Tooltip.showPid_))},i.Tooltip.onMouseMove_=function(t){if(i.Tooltip.element_&&i.Tooltip.element_.tooltip&&!i.Tooltip.blocked_)if(i.Tooltip.visible){var e=i.Tooltip.lastX_-t.pageX;t=i.Tooltip.lastY_-t.pageY,Math.sqrt(e*e+t*t)>i.Tooltip.RADIUS_OK&&i.Tooltip.hide()}else i.Tooltip.poisonedElement_!=i.Tooltip.element_&&(clearTimeout(i.Tooltip.showPid_),i.Tooltip.lastX_=t.pageX,i.Tooltip.lastY_=t.pageY,i.Tooltip.showPid_=setTimeout(i.Tooltip.show_,i.Tooltip.HOVER_MS))},i.Tooltip.dispose=function(){i.Tooltip.element_=null,i.Tooltip.poisonedElement_=null,i.Tooltip.hide()},i.Tooltip.hide=function(){i.Tooltip.visible&&(i.Tooltip.visible=!1,i.Tooltip.DIV&&(i.Tooltip.DIV.style.display="none")),i.Tooltip.showPid_&&clearTimeout(i.Tooltip.showPid_)},i.Tooltip.block=function(){i.Tooltip.hide(),i.Tooltip.blocked_=!0},i.Tooltip.unblock=function(){i.Tooltip.blocked_=!1},i.Tooltip.show_=function(){if(!i.Tooltip.blocked_&&(i.Tooltip.poisonedElement_=i.Tooltip.element_,i.Tooltip.DIV)){i.Tooltip.DIV.textContent="";var t=i.Tooltip.getTooltipOfObject(i.Tooltip.element_);t=(t=i.utils.string.wrap(t,i.Tooltip.LIMIT)).split("\n");for(var e=0;e<t.length;e++){var n=document.createElement("div");n.appendChild(document.createTextNode(t[e])),i.Tooltip.DIV.appendChild(n)}t=i.Tooltip.element_.RTL,e=document.documentElement.clientWidth,n=document.documentElement.clientHeight,i.Tooltip.DIV.style.direction=t?"rtl":"ltr",i.Tooltip.DIV.style.display="block",i.Tooltip.visible=!0;var o=i.Tooltip.lastX_;o=t?o-(i.Tooltip.OFFSET_X+i.Tooltip.DIV.offsetWidth):o+i.Tooltip.OFFSET_X;var r=i.Tooltip.lastY_+i.Tooltip.OFFSET_Y;r+i.Tooltip.DIV.offsetHeight>n+window.scrollY&&(r-=i.Tooltip.DIV.offsetHeight+2*i.Tooltip.OFFSET_Y),t?o=Math.max(i.Tooltip.MARGINS-window.scrollX,o):o+i.Tooltip.DIV.offsetWidth>e+window.scrollX-2*i.Tooltip.MARGINS&&(o=e-i.Tooltip.DIV.offsetWidth-2*i.Tooltip.MARGINS),i.Tooltip.DIV.style.top=r+"px",i.Tooltip.DIV.style.left=o+"px"}},i.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},i.WorkspaceDragSurfaceSvg.prototype.SVG_=null,i.WorkspaceDragSurfaceSvg.prototype.container_=null,i.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{xmlns:i.utils.dom.SVG_NS,"xmlns:html":i.utils.dom.HTML_NS,"xmlns:xlink":i.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},i.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,e){t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",i.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+e+"px, 0px)")},i.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return i.utils.getRelativeXY(this.SVG_)},i.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var e=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(e&&n&&i.utils.dom.hasClass(e,"blocklyBlockCanvas")&&i.utils.dom.hasClass(n,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?i.utils.dom.insertAfter(e,this.previousSibling_):t.insertBefore(e,t.firstChild),i.utils.dom.insertAfter(n,e),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");i.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},i.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,i,n,o,r){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=i,t.setAttribute("transform","translate(0, 0) scale("+r+")"),e.setAttribute("transform","translate(0, 0) scale("+r+")"),this.SVG_.setAttribute("width",n),this.SVG_.setAttribute("height",o),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},i.ASTNode=function(t,e,n){if(!e)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=i.ASTNode.isConnectionType_(t),this.location_=e,this.wsCoordinate_=null,this.processParams_(n||null)},i.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},i.ASTNode.NAVIGATE_ALL_FIELDS=!1,i.ASTNode.DEFAULT_OFFSET_Y=-20,i.ASTNode.isConnectionType_=function(t){switch(t){case i.ASTNode.types.PREVIOUS:case i.ASTNode.types.NEXT:case i.ASTNode.types.INPUT:case i.ASTNode.types.OUTPUT:return!0}return!1},i.ASTNode.createFieldNode=function(t){return t?new i.ASTNode(i.ASTNode.types.FIELD,t):null},i.ASTNode.createConnectionNode=function(t){return t?t.type==i.INPUT_VALUE||t.type==i.NEXT_STATEMENT&&t.getParentInput()?i.ASTNode.createInputNode(t.getParentInput()):t.type==i.NEXT_STATEMENT?new i.ASTNode(i.ASTNode.types.NEXT,t):t.type==i.OUTPUT_VALUE?new i.ASTNode(i.ASTNode.types.OUTPUT,t):t.type==i.PREVIOUS_STATEMENT?new i.ASTNode(i.ASTNode.types.PREVIOUS,t):null:null},i.ASTNode.createInputNode=function(t){return t&&t.connection?new i.ASTNode(i.ASTNode.types.INPUT,t.connection):null},i.ASTNode.createBlockNode=function(t){return t?new i.ASTNode(i.ASTNode.types.BLOCK,t):null},i.ASTNode.createStackNode=function(t){return t?new i.ASTNode(i.ASTNode.types.STACK,t):null},i.ASTNode.createWorkspaceNode=function(t,e){return e&&t?new i.ASTNode(i.ASTNode.types.WORKSPACE,t,{wsCoordinate:e}):null},i.ASTNode.createTopNode=function(t){var e=t.previousConnection||t.outputConnection;return e?i.ASTNode.createConnectionNode(e):i.ASTNode.createBlockNode(t)},i.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},i.ASTNode.prototype.getLocation=function(){return this.location_},i.ASTNode.prototype.getType=function(){return this.type_},i.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},i.ASTNode.prototype.isConnection=function(){return this.isConnection_},i.ASTNode.prototype.findNextForInput_=function(){var t,e=this.location_.getParentInput(),n=e.getSourceBlock();for(e=n.inputList.indexOf(e)+1;t=n.inputList[e];e++){for(var o,r=t.fieldRow,s=0;o=r[s];s++)if(o.isClickable()||i.ASTNode.NAVIGATE_ALL_FIELDS)return i.ASTNode.createFieldNode(o);if(t.connection)return i.ASTNode.createInputNode(t)}return null},i.ASTNode.prototype.findNextForField_=function(){var t=this.location_,e=t.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)+1;e=n.inputList[o];o++){for(var r=e.fieldRow;t<r.length;){if(r[t].isClickable()||i.ASTNode.NAVIGATE_ALL_FIELDS)return i.ASTNode.createFieldNode(r[t]);t++}if(t=0,e.connection)return i.ASTNode.createInputNode(e)}return null},i.ASTNode.prototype.findPrevForInput_=function(){for(var t,e=this.location_.getParentInput(),n=e.getSourceBlock(),o=n.inputList.indexOf(e);t=n.inputList[o];o--){if(t.connection&&t!==e)return i.ASTNode.createInputNode(t);for(var r,s=(t=t.fieldRow).length-1;r=t[s];s--)if(r.isClickable()||i.ASTNode.NAVIGATE_ALL_FIELDS)return i.ASTNode.createFieldNode(r)}return null},i.ASTNode.prototype.findPrevForField_=function(){var t,e=this.location_,n=e.getParentInput(),o=e.getSourceBlock(),r=o.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;t=o.inputList[r];r--){if(t.connection&&t!==n)return i.ASTNode.createInputNode(t);for(t=t.fieldRow;-1<e;){if(t[e].isClickable()||i.ASTNode.NAVIGATE_ALL_FIELDS)return i.ASTNode.createFieldNode(t[e]);e--}0<=r-1&&(e=o.inputList[r-1].fieldRow.length-1)}return null},i.ASTNode.prototype.navigateBetweenStacks_=function(t){var e=this.getLocation();if(e instanceof i.Block||(e=e.getSourceBlock()),!e||!e.workspace)return null;var n=e.getRootBlock();e=n.workspace.getTopBlocks(!0);for(var o,r=0;o=e[r];r++)if(n.id==o.id)return-1==(t=r+(t?1:-1))||t==e.length?null:i.ASTNode.createStackNode(e[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},i.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var e=t.previousConnection||t.outputConnection;return e?i.ASTNode.createConnectionNode(e):i.ASTNode.createBlockNode(t)},i.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var e=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return e&&e.targetConnection&&e.targetConnection.getParentInput()?i.ASTNode.createInputNode(e.targetConnection.getParentInput()):i.ASTNode.createStackNode(t)},i.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var e,n=0;e=t[n];n++){for(var o,r=e.fieldRow,s=0;o=r[s];s++)if(o.isClickable()||i.ASTNode.NAVIGATE_ALL_FIELDS)return i.ASTNode.createFieldNode(o);if(e.connection)return i.ASTNode.createInputNode(e)}return null},i.ASTNode.prototype.getSourceBlock=function(){return this.getType()===i.ASTNode.types.BLOCK||this.getType()===i.ASTNode.types.STACK?this.getLocation():this.getType()===i.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},i.ASTNode.prototype.next=function(){switch(this.type_){case i.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case i.ASTNode.types.OUTPUT:var t=this.location_;return i.ASTNode.createBlockNode(t.getSourceBlock());case i.ASTNode.types.FIELD:return this.findNextForField_();case i.ASTNode.types.INPUT:return this.findNextForInput_();case i.ASTNode.types.BLOCK:return i.ASTNode.createConnectionNode(this.location_.nextConnection);case i.ASTNode.types.PREVIOUS:return t=this.location_,i.ASTNode.createBlockNode(t.getSourceBlock());case i.ASTNode.types.NEXT:return t=this.location_,i.ASTNode.createConnectionNode(t.targetConnection)}return null},i.ASTNode.prototype.in=function(){switch(this.type_){case i.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return i.ASTNode.createStackNode(t[0]);break;case i.ASTNode.types.STACK:return t=this.location_,this.findTopASTNodeForBlock_(t);case i.ASTNode.types.BLOCK:return t=this.location_,this.findFirstFieldOrInput_(t);case i.ASTNode.types.INPUT:return i.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},i.ASTNode.prototype.prev=function(){switch(this.type_){case i.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case i.ASTNode.types.FIELD:return this.findPrevForField_();case i.ASTNode.types.INPUT:return this.findPrevForInput_();case i.ASTNode.types.BLOCK:var t=this.location_;return i.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case i.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return i.ASTNode.createConnectionNode(t);break;case i.ASTNode.types.NEXT:return t=this.location_,i.ASTNode.createBlockNode(t.getSourceBlock())}return null},i.ASTNode.prototype.out=function(){switch(this.type_){case i.ASTNode.types.STACK:var t=this.location_,e=t.getRelativeToSurfaceXY();return e=new i.utils.Coordinate(e.x,e.y+i.ASTNode.DEFAULT_OFFSET_Y),i.ASTNode.createWorkspaceNode(t.workspace,e);case i.ASTNode.types.OUTPUT:return(e=(t=this.location_).targetConnection)?i.ASTNode.createConnectionNode(e):i.ASTNode.createStackNode(t.getSourceBlock());case i.ASTNode.types.FIELD:return i.ASTNode.createBlockNode(this.location_.getSourceBlock());case i.ASTNode.types.INPUT:return t=this.location_,i.ASTNode.createBlockNode(t.getSourceBlock());case i.ASTNode.types.BLOCK:return t=this.location_,this.getOutAstNodeForBlock_(t);case i.ASTNode.types.PREVIOUS:case i.ASTNode.types.NEXT:return t=this.location_,this.getOutAstNodeForBlock_(t.getSourceBlock())}return null},i.Blocks=Object.create(null),i.utils.deprecation={},i.utils.deprecation.warn=function(t,e,i,n){t=t+" was deprecated on "+e+" and will be deleted on "+i+".",n&&(t+="\nUse "+n+" instead."),console.warn(t)},i.Connection=function(t,e){this.sourceBlock_=t,this.type=e},i.Connection.CAN_CONNECT=0,i.Connection.REASON_SELF_CONNECTION=1,i.Connection.REASON_WRONG_TYPE=2,i.Connection.REASON_TARGET_NULL=3,i.Connection.REASON_CHECKS_FAILED=4,i.Connection.REASON_DIFFERENT_WORKSPACES=5,i.Connection.REASON_SHADOW_PARENT=6,i.Connection.REASON_DRAG_CHECKS_FAILED=7,i.Connection.prototype.targetConnection=null,i.Connection.prototype.disposed=!1,i.Connection.prototype.check_=null,i.Connection.prototype.shadowDom_=null,i.Connection.prototype.x=0,i.Connection.prototype.y=0,i.Connection.prototype.connect_=function(t){var e,n=this,o=n.getSourceBlock(),r=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),n.isConnected()){var s=n.targetBlock(),a=n.getShadowDom();if(n.shadowDom_=null,s.isShadow())a=i.Xml.blockToDom(s),s.dispose(!1),s=null;else if(n.type==i.INPUT_VALUE){if(!s.outputConnection)throw Error("Orphan block does not have an output connection.");var l=i.Connection.lastConnectionInRow(r,s);l&&(s.outputConnection.connect(l),s=null)}else if(n.type==i.NEXT_STATEMENT){if(!s.previousConnection)throw Error("Orphan block does not have a previous connection.");for(l=r;l.nextConnection;){var c=l.getNextBlock();if(!c||c.isShadow()){s.workspace.connectionChecker.canConnect(s.previousConnection,l.nextConnection,!1)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=c}}if(s&&(n.disconnect(),i.Events.recordUndo)){var d=i.Events.getGroup();setTimeout((function(){s.workspace&&!s.getParent()&&(i.Events.setGroup(d),s.outputConnection?s.outputConnection.onFailedConnect(n):s.previousConnection&&s.previousConnection.onFailedConnect(n),i.Events.setGroup(!1))}),i.BUMP_DELAY)}n.shadowDom_=a}i.Events.isEnabled()&&(e=new i.Events.BlockMove(r)),i.Connection.connectReciprocally_(n,t),r.setParent(o),e&&(e.recordNew(),i.Events.fire(e))},i.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},i.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},i.Connection.prototype.isSuperior=function(){return this.type==i.INPUT_VALUE||this.type==i.NEXT_STATEMENT},i.Connection.prototype.isConnected=function(){return!!this.targetConnection},i.Connection.prototype.canConnectWithReason=function(t){return i.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},i.Connection.prototype.checkConnection=function(t){i.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var e=this.getConnectionChecker(),n=e.canConnectWithReason(this,t,!1);if(n!=i.Connection.CAN_CONNECT)throw Error(e.getErrorMessage(n,this,t))},i.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},i.Connection.prototype.isConnectionAllowed=function(t){return i.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},i.Connection.prototype.onFailedConnect=function(t){},i.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var e=i.Events.getGroup();e||i.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),e||i.Events.setGroup(!1)}},i.Connection.connectReciprocally_=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},i.Connection.singleConnection_=function(t,e){var n=null;e=e.outputConnection;for(var o=0;o<t.inputList.length;o++){var r=t.inputList[o].connection,s=e.getConnectionChecker();if(r&&r.type==i.INPUT_VALUE&&s.canConnect(e,r,!1)){if(n)return null;n=r}}return n},i.Connection.lastConnectionInRow=function(t,e){for(var n;n=i.Connection.singleConnection_(t,e);)if(!(t=n.targetBlock())||t.isShadow())return n;return null},i.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var e=this.sourceBlock_,n=t.getSourceBlock();t=this}else e=t.getSourceBlock(),n=this.sourceBlock_;var o=i.Events.getGroup();o||i.Events.setGroup(!0),this.disconnectInternal_(e,n),n.isShadow()||t.respawnShadow_(),o||i.Events.setGroup(!1)},i.Connection.prototype.disconnectInternal_=function(t,e){var n;i.Events.isEnabled()&&(n=new i.Events.BlockMove(e)),this.targetConnection=this.targetConnection.targetConnection=null,e.setParent(null),n&&(n.recordNew(),i.Events.fire(n))},i.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),e=this.getShadowDom();if(t.workspace&&e)if((t=i.Xml.domToBlock(e,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},i.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},i.Connection.prototype.checkType=function(t){return i.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},i.Connection.prototype.checkType_=function(t){return i.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},i.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},i.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},i.Connection.prototype.getCheck=function(){return this.check_},i.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},i.Connection.prototype.getShadowDom=function(){return this.shadowDom_},i.Connection.prototype.neighbours=function(t){return[]},i.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,i=e.inputList,n=0;n<e.inputList.length;n++)if(i[n].connection===this){t=i[n];break}return t},i.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{e=null;for(var i,n=0;i=t.inputList[n];n++)if(i.connection==this){e=i;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},i.Extensions={},i.Extensions.ALL_={},i.Extensions.register=function(t,e){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(i.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof e)throw Error('Error: Extension "'+t+'" must be a function');i.Extensions.ALL_[t]=e},i.Extensions.registerMixin=function(t,e){if(!e||"object"!=typeof e)throw Error('Error: Mixin "'+t+'" must be a object');i.Extensions.register(t,(function(){this.mixin(e)}))},i.Extensions.registerMutator=function(t,e,n,o){var r='Error when registering mutator "'+t+'": ';i.Extensions.checkHasFunction_(r,e.domToMutation,"domToMutation"),i.Extensions.checkHasFunction_(r,e.mutationToDom,"mutationToDom");var s=i.Extensions.checkMutatorDialog_(e,r);if(n&&"function"!=typeof n)throw Error('Extension "'+t+'" is not a function');i.Extensions.register(t,(function(){if(s){if(!i.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new i.Mutator(o||[]))}this.mixin(e),n&&n.apply(this)}))},i.Extensions.unregister=function(t){i.Extensions.ALL_[t]?delete i.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},i.Extensions.apply=function(t,e,n){var o=i.Extensions.ALL_[t];if("function"!=typeof o)throw Error('Error: Extension "'+t+'" not found.');if(n)i.Extensions.checkNoMutatorProperties_(t,e);else var r=i.Extensions.getMutatorProperties_(e);if(o.apply(e),n)i.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',e);else if(!i.Extensions.mutatorPropertiesMatch_(r,e))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},i.Extensions.checkHasFunction_=function(t,e,i){if(!e)throw Error(t+'missing required property "'+i+'"');if("function"!=typeof e)throw Error(t+'" required property "'+i+'" must be a function')},i.Extensions.checkNoMutatorProperties_=function(t,e){if(i.Extensions.getMutatorProperties_(e).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+e.id)},i.Extensions.checkMutatorDialog_=function(t,e){var i=void 0!==t.compose,n=void 0!==t.decompose;if(i&&n){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(i||n)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},i.Extensions.checkBlockHasMutatorProperties_=function(t,e){if("function"!=typeof e.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof e.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');i.Extensions.checkMutatorDialog_(e,t)},i.Extensions.getMutatorProperties_=function(t){var e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},i.Extensions.mutatorPropertiesMatch_=function(t,e){if((e=i.Extensions.getMutatorProperties_(e)).length!=t.length)return!1;for(var n=0;n<e.length;n++)if(t[n]!=e[n])return!1;return!0},i.Extensions.buildTooltipForDropdown=function(t,e){var n=[];return"object"==typeof document&&i.utils.runAfterPageLoad((function(){for(var t in e)i.utils.checkMessageReferences(e[t])})),function(){this.type&&-1==n.indexOf(this.type)&&(i.Extensions.checkDropdownOptionsInTable_(this,t,e),n.push(this.type)),this.setTooltip(function(){var o=String(this.getFieldValue(t)),r=e[o];return null==r?-1==n.indexOf(this.type)&&(o="No tooltip mapping for value "+o+" of field "+t,null!=this.type&&(o+=" of block type "+this.type),console.warn(o+".")):r=i.utils.replaceMessageReferences(r),r}.bind(this))}},i.Extensions.checkDropdownOptionsInTable_=function(t,e,i){var n=t.getField(e);if(!n.isOptionListDynamic()){n=n.getOptions();for(var o=0;o<n.length;++o){var r=n[o][1];null==i[r]&&console.warn("No tooltip mapping for value "+r+" of field "+e+" of block type "+t.type)}}},i.Extensions.buildTooltipWithFieldText=function(t,e){return"object"==typeof document&&i.utils.runAfterPageLoad((function(){i.utils.checkMessageReferences(t)})),function(){this.setTooltip(function(){var n=this.getField(e);return i.utils.replaceMessageReferences(t).replace("%1",n?n.getText():"")}.bind(this))}},i.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},i.Extensions.register("parent_tooltip_when_inline",i.Extensions.extensionParentTooltip_),i.fieldRegistry={},i.fieldRegistry.register=function(t,e){i.registry.register(i.registry.Type.FIELD,t,e)},i.fieldRegistry.unregister=function(t){i.registry.unregister(i.registry.Type.FIELD,t)},i.fieldRegistry.fromJson=function(t){var e=i.registry.getObject(i.registry.Type.FIELD,t.type);return e?e.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},i.blockAnimations={},i.blockAnimations.disconnectPid_=0,i.blockAnimations.disconnectGroup_=null,i.blockAnimations.disposeUiEffect=function(t){var e=t.workspace,n=t.getSvgRoot();e.getAudioManager().play("delete"),t=e.getSvgXY(n),(n=n.cloneNode(!0)).translateX_=t.x,n.translateY_=t.y,n.setAttribute("transform","translate("+t.x+","+t.y+")"),e.getParentSvg().appendChild(n),n.bBox_=n.getBBox(),i.blockAnimations.disposeUiStep_(n,e.RTL,new Date,e.scale)},i.blockAnimations.disposeUiStep_=function(t,e,n,o){var r=(new Date-n)/150;1<r?i.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(e?-1:1)*t.bBox_.width*o/2*r)+","+(t.translateY_+t.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(i.blockAnimations.disposeUiStep_,10,t,e,n,o))},i.blockAnimations.connectionUiEffect=function(t){var e=t.workspace,n=e.scale;if(e.getAudioManager().play("click"),!(1>n)){var o=e.getSvgXY(t.getSvgRoot());t.outputConnection?(o.x+=(t.RTL?3:-3)*n,o.y+=13*n):t.previousConnection&&(o.x+=(t.RTL?-23:23)*n,o.y+=3*n),t=i.utils.dom.createSvgElement(i.utils.Svg.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},e.getParentSvg()),i.blockAnimations.connectionUiStep_(t,new Date,n)}},i.blockAnimations.connectionUiStep_=function(t,e,n){var o=(new Date-e)/150;1<o?i.utils.dom.removeNode(t):(t.setAttribute("r",25*o*n),t.style.opacity=1-o,i.blockAnimations.disconnectPid_=setTimeout(i.blockAnimations.connectionUiStep_,10,t,e,n))},i.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var e=t.getHeightWidth().height;e=Math.atan(10/e)/Math.PI*180,t.RTL||(e*=-1),i.blockAnimations.disconnectUiStep_(t.getSvgRoot(),e,new Date)}},i.blockAnimations.disconnectUiStep_=function(t,e,n){var o=(new Date-n)/200;1<o?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*e)+")",i.blockAnimations.disconnectGroup_=t,i.blockAnimations.disconnectPid_=setTimeout(i.blockAnimations.disconnectUiStep_,10,t,e,n)),t.setAttribute("transform",t.translate_+t.skew_)},i.blockAnimations.disconnectUiStop=function(){if(i.blockAnimations.disconnectGroup_){clearTimeout(i.blockAnimations.disconnectPid_);var t=i.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),i.blockAnimations.disconnectGroup_=null}},i.Events.BlockDrag=function(t,e,n){i.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=e,this.blocks=n},i.utils.object.inherits(i.Events.BlockDrag,i.Events.UiBase),i.Events.BlockDrag.prototype.type=i.Events.BLOCK_DRAG,i.Events.BlockDrag.prototype.toJson=function(){var t=i.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},i.Events.BlockDrag.prototype.fromJson=function(t){i.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},i.registry.register(i.registry.Type.EVENT,i.Events.BLOCK_DRAG,i.Events.BlockDrag),i.InsertionMarkerManager=function(t){this.topBlock_=i.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},i.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},i.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,i.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{i.Events.enable()}},i.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},i.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},i.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},i.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(i.Events.disable(),this.hidePreview_(),i.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;i.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},i.InsertionMarkerManager.prototype.update=function(t,e){var n=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(n,e))||this.shouldUpdatePreviews_(n,t))&&(i.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),i.Events.enable())},i.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var e=t.type;i.Events.disable();try{var n=this.workspace_.newBlock(e);if(n.setInsertionMarker(!0),t.mutationToDom){var o=t.mutationToDom();o&&n.domToMutation(o)}for(e=0;e<t.inputList.length;e++){var r=t.inputList[e];if(r.name!=i.Block.COLLAPSED_INPUT_NAME){var s=n.inputList[e];for(o=0;o<r.fieldRow.length;o++)s.fieldRow[o].setValue(r.fieldRow[o].getValue())}}n.setCollapsed(t.isCollapsed()),n.setInputsInline(t.getInputsInline()),n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{i.Events.enable()}return n},i.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),e=this.topBlock_.lastConnectionInStack();if(e&&e!=this.topBlock_.nextConnection){if(t.push(e),this.lastOnStack_=e,this.lastMarker_){i.Events.disable();try{this.lastMarker_.dispose()}finally{i.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(e.getSourceBlock())}return t},i.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,e){var n=t.local,o=t.closest;return t=t.radius,n&&o?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==o&&this.localConnection_==n||(n=this.localConnection_.x+e.x-this.closestConnection_.x,e=this.localConnection_.y+e.y-this.closestConnection_.y,e=Math.sqrt(n*n+e*e),o&&t>e-i.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},i.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),i=null,n=null,o=0;o<this.availableConnections_.length;o++){var r=this.availableConnections_[o],s=r.closest(e,t);s.connection&&(i=s.connection,n=r,e=s.radius)}return{closest:i,local:n,radius:e}},i.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?i.CONNECTING_SNAP_RADIUS:i.SNAP_RADIUS},i.InsertionMarkerManager.prototype.shouldDelete_=function(t,e){return t=t&&!!t.closest&&e!=i.DELETE_AREA_TOOLBOX,!!e&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!t},i.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e==this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},i.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,e=this.workspace_.getRenderer();switch(e.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case i.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case i.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case i.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&e.shouldHighlightConnection(t)&&t.highlight()},i.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},i.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},i.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,i=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=i.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");i.render(),i.rendered=!0,i.getSvgRoot().setAttribute("visibility","visible"),t&&e&&i.positionNearConnection(t,e),e&&t.connect(e),this.markerConnection_=t},i.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,e=t.getSourceBlock(),n=e.nextConnection,o=e.previousConnection,r=e.outputConnection;if(r=t.type==i.INPUT_VALUE&&!(r&&r.targetConnection),!(t!=n||o&&o.targetConnection)||r?t.targetBlock().unplug(!1):t.type==i.NEXT_STATEMENT&&t!=n?((n=t.targetConnection).getSourceBlock().unplug(!1),o=o?o.targetConnection:null,e.unplug(!0),o&&o.connect(n)):e.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,e.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},i.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},i.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},i.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},i.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},i.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},i.BlockDragger=function(t,e){this.draggingBlock_=t,this.workspace_=e,this.draggedConnectionManager_=new i.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=i.BlockDragger.initIconData_(t)},i.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},i.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants(!1);for(var i,n=0;i=t[n];n++){i=i.getIcons();for(var o=0;o<i.length;o++){var r={location:i[o].getIconLocation(),icon:i[o]};e.push(r)}}return e},i.BlockDragger.prototype.startBlockDrag=function(t,e){i.Events.getGroup()||i.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),i.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),i.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(e),t=this.pixelsToWorkspaceUnits_(t),t=i.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),i.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(t=this.workspace_.getToolbox())&&"function"==typeof t.addStyle&&(e=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",t.addStyle(e))},i.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new i.Events.BlockDrag(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));i.Events.fire(t)},i.BlockDragger.prototype.dragBlock=function(t,e){e=this.pixelsToWorkspaceUnits_(e);var n=i.utils.Coordinate.sum(this.startXY_,e);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(e),this.deleteArea_=this.workspace_.isDeleteArea(t),this.draggedConnectionManager_.update(e,this.deleteArea_),this.updateCursorDuringBlockDrag_()},i.BlockDragger.prototype.endBlockDrag=function(t,e){this.dragBlock(t,e),this.dragIconData_=[],this.fireDragEndEvent_(),i.utils.dom.stopTextWidthCache(),i.blockAnimations.disconnectUiStop(),t=this.pixelsToWorkspaceUnits_(e),e=i.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.moveOffDragSurface(e),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(t.x,t.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(t=this.workspace_.getToolbox())&&"function"==typeof t.removeStyle&&(e=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",t.removeStyle(e)),i.Events.setGroup(!1)},i.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new i.Events.BlockDrag(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));i.Events.fire(t)},i.BlockDragger.prototype.fireMoveEvent_=function(){var t=new i.Events.BlockMove(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),i.Events.fire(t)},i.BlockDragger.prototype.maybeDeleteBlock_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBlock_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),i.draggingConnections=[]):t&&t.closeLid(),this.wouldDeleteBlock_},i.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var t=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==i.DELETE_AREA_TRASH&&t&&t.setLidOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),t&&t.setLidOpen(!1))},i.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new i.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},i.BlockDragger.prototype.dragIcons_=function(t){for(var e=0;e<this.dragIconData_.length;e++){var n=this.dragIconData_[e];n.icon.setIconLocation(i.utils.Coordinate.sum(n.location,t))}},i.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},i.ConnectionChecker=function(){},i.ConnectionChecker.prototype.canConnect=function(t,e,n,o){return this.canConnectWithReason(t,e,n,o)==i.Connection.CAN_CONNECT},i.ConnectionChecker.prototype.canConnectWithReason=function(t,e,n,o){var r=this.doSafetyChecks(t,e);return r!=i.Connection.CAN_CONNECT?r:this.doTypeChecks(t,e)?n&&!this.doDragChecks(t,e,o||0)?i.Connection.REASON_DRAG_CHECKS_FAILED:i.Connection.CAN_CONNECT:i.Connection.REASON_CHECKS_FAILED},i.ConnectionChecker.prototype.getErrorMessage=function(t,e,n){switch(t){case i.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case i.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case i.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case i.Connection.REASON_TARGET_NULL:return"Target connection is null.";case i.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+e+" expected "+e.getCheck()+", found "+n.getCheck();case i.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case i.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},i.ConnectionChecker.prototype.doSafetyChecks=function(t,e){if(!t||!e)return i.Connection.REASON_TARGET_NULL;if(t.isSuperior())var n=t.getSourceBlock(),o=e.getSourceBlock();else o=t.getSourceBlock(),n=e.getSourceBlock();return n==o?i.Connection.REASON_SELF_CONNECTION:e.type!=i.OPPOSITE_TYPE[t.type]?i.Connection.REASON_WRONG_TYPE:n.workspace!==o.workspace?i.Connection.REASON_DIFFERENT_WORKSPACES:n.isShadow()&&!o.isShadow()?i.Connection.REASON_SHADOW_PARENT:i.Connection.CAN_CONNECT},i.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var i=0;i<t.length;i++)if(-1!=e.indexOf(t[i]))return!0;return!1},i.ConnectionChecker.prototype.doDragChecks=function(t,e,n){if(t.distanceFrom(e)>n||e.getSourceBlock().isInsertionMarker())return!1;switch(e.type){case i.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,e);case i.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case i.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case i.NEXT_STATEMENT:if(e.isConnected()&&!t.getSourceBlock().nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:return!1}return-1==i.draggingConnections.indexOf(e)},i.ConnectionChecker.prototype.canConnectToPrevious_=function(t,e){return!(t.targetConnection||-1!=i.draggingConnections.indexOf(e)||e.targetConnection&&(!(t=e.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},i.registry.register(i.registry.Type.CONNECTION_CHECKER,i.registry.DEFAULT,i.ConnectionChecker),i.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},i.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},i.VariableMap.prototype.renameVariable=function(t,e){var n=this.getVariable(e,t.type),o=this.workspace.getAllBlocks(!1);i.Events.setGroup(!0);try{n&&n.getId()!=t.getId()?this.renameVariableWithConflict_(t,e,n,o):this.renameVariableAndUses_(t,e,o)}finally{i.Events.setGroup(!1)}},i.VariableMap.prototype.renameVariableById=function(t,e){var i=this.getVariableById(t);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(i,e)},i.VariableMap.prototype.renameVariableAndUses_=function(t,e,n){for(i.Events.fire(new i.Events.VarRename(t,e)),t.name=e,e=0;e<n.length;e++)n[e].updateVarName(t)},i.VariableMap.prototype.renameVariableWithConflict_=function(t,e,n,o){var r=t.type;for(e!=n.name&&this.renameVariableAndUses_(n,e,o),e=0;e<o.length;e++)o[e].renameVarById(t.getId(),n.getId());i.Events.fire(new i.Events.VarDelete(t)),t=this.getVariablesOfType(r).indexOf(t),this.variableMap_[r].splice(t,1)},i.VariableMap.prototype.createVariable=function(t,e,n){var o=this.getVariable(t,e);if(o){if(n&&o.getId()!=n)throw Error('Variable "'+t+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return o=n||i.utils.genUid(),e=e||"",o=new i.VariableModel(this.workspace,t,e,o),(t=this.variableMap_[e]||[]).push(o),delete this.variableMap_[e],this.variableMap_[e]=t,o},i.VariableMap.prototype.deleteVariable=function(t){for(var e,n=this.variableMap_[t.type],o=0;e=n[o];o++)if(e.getId()==t.getId()){n.splice(o,1),i.Events.fire(new i.Events.VarDelete(t));break}},i.VariableMap.prototype.deleteVariableById=function(t){var e=this.getVariableById(t);if(e){var n,o=e.name,r=this.getVariableUsesById(t);for(t=0;n=r[t];t++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type)return t=n.getFieldValue("NAME"),o=i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void i.alert(o);var s=this;1<r.length?(o=i.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),i.confirm(o,(function(t){t&&e&&s.deleteVariableInternal(e,r)}))):s.deleteVariableInternal(e,r)}else console.warn("Can't delete non-existent variable: "+t)},i.VariableMap.prototype.deleteVariableInternal=function(t,e){var n=i.Events.getGroup();n||i.Events.setGroup(!0);try{for(var o=0;o<e.length;o++)e[o].dispose(!0);this.deleteVariable(t)}finally{n||i.Events.setGroup(!1)}},i.VariableMap.prototype.getVariable=function(t,e){if(e=this.variableMap_[e||""])for(var n,o=0;n=e[o];o++)if(i.Names.equals(n.name,t))return n;return null},i.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),i=0;i<e.length;i++)for(var n,o=e[i],r=0;n=this.variableMap_[o][r];r++)if(n.getId()==t)return n;return null},i.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},i.VariableMap.prototype.getVariableTypes=function(t){var e={};i.utils.object.mixin(e,this.variableMap_),t&&t.getPotentialVariableMap()&&i.utils.object.mixin(e,t.getPotentialVariableMap().variableMap_),t=Object.keys(e),e=!1;for(var n=0;n<t.length;n++)""==t[n]&&(e=!0);return e||t.push(""),t},i.VariableMap.prototype.getAllVariables=function(){var t,e=[];for(t in this.variableMap_)e=e.concat(this.variableMap_[t]);return e},i.VariableMap.prototype.getAllVariableNames=function(){var t,e=[];for(t in this.variableMap_)for(var i,n=this.variableMap_[t],o=0;i=n[o];o++)e.push(i.name);return e},i.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],i=this.workspace.getAllBlocks(!1),n=0;n<i.length;n++){var o=i[n].getVarModels();if(o)for(var r=0;r<o.length;r++)o[r].getId()==t&&e.push(i[n])}return e},i.Workspace=function(t){this.id=i.utils.genUid(),i.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new i.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(i.registry.getClassFromOptions(i.registry.Type.CONNECTION_CHECKER,this.options))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new i.VariableMap(this),this.potentialVariableMap_=null},i.Workspace.prototype.rendered=!1,i.Workspace.prototype.isClearing=!1,i.Workspace.prototype.MAX_UNDO=1024,i.Workspace.prototype.connectionDBList=null,i.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete i.Workspace.WorkspaceDB_[this.id]},i.Workspace.SCAN_ANGLE=3,i.Workspace.prototype.sortObjects_=function(t,e){return t=t.getRelativeToSurfaceXY(),e=e.getRelativeToSurfaceXY(),t.y+i.Workspace.prototype.sortObjects_.offset*t.x-(e.y+i.Workspace.prototype.sortObjects_.offset*e.x)},i.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},i.Workspace.prototype.removeTopBlock=function(t){if(!i.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},i.Workspace.prototype.getTopBlocks=function(t){var e=[].concat(this.topBlocks_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin(i.utils.math.toRadians(i.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},i.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},i.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},i.Workspace.prototype.getBlocksByType=function(t,e){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),e&&1<t.length&&(this.sortObjects_.offset=Math.sin(i.utils.math.toRadians(i.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},i.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},i.Workspace.prototype.removeTopComment=function(t){if(!i.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},i.Workspace.prototype.getTopComments=function(t){var e=[].concat(this.topComments_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin(i.utils.math.toRadians(i.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},i.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var e=[],i=0;i<t.length;i++)e.push.apply(e,t[i].getDescendants(!0))}else for(e=this.getTopBlocks(!1),i=0;i<e.length;i++)e.push.apply(e,e[i].getChildren(!1));return e.filter((function(t){return!t.isInsertionMarker()}))},i.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=i.Events.getGroup();for(t||i.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||i.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},i.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},i.Workspace.prototype.createVariable=function(t,e,i){return this.variableMap_.createVariable(t,e,i)},i.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},i.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},i.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},i.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},i.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},i.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},i.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},i.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},i.Workspace.prototype.getWidth=function(){return 0},i.Workspace.prototype.newBlock=function(t,e){return new i.Block(this,t,e)},i.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},i.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},i.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e,i=0;for(e in t){if(t[e]>this.remainingCapacityOfType(e))return!1;i+=t[e]}return!(i>this.remainingCapacity())},i.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},i.Workspace.prototype.getUndoStack=function(){return this.undoStack_},i.Workspace.prototype.getRedoStack=function(){return this.redoStack_},i.Workspace.prototype.undo=function(t){var e=t?this.redoStack_:this.undoStack_,n=t?this.undoStack_:this.redoStack_,o=e.pop();if(o){for(var r=[o];e.length&&o.group&&o.group==e[e.length-1].group;)r.push(e.pop());for(e=0;o=r[e];e++)n.push(o);r=i.Events.filter(r,t),i.Events.recordUndo=!1;try{for(e=0;o=r[e];e++)o.run(t)}finally{i.Events.recordUndo=!0}}},i.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,i.Events.clearPendingUndo()},i.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},i.Workspace.prototype.removeChangeListener=function(t){i.utils.arrayRemove(this.listeners_,t)},i.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e,i=0;e=this.listeners_[i];i++)e(t)},i.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},i.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},i.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},i.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},i.Workspace.prototype.allInputsFilled=function(t){for(var e,i=this.getTopBlocks(!1),n=0;e=i[n];n++)if(!e.allInputsFilled(t))return!1;return!0},i.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},i.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new i.VariableMap(this)},i.Workspace.prototype.getVariableMap=function(){return this.variableMap_},i.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},i.Workspace.WorkspaceDB_=Object.create(null),i.Workspace.getById=function(t){return i.Workspace.WorkspaceDB_[t]||null},i.Workspace.getAll=function(){var t,e=[];for(t in i.Workspace.WorkspaceDB_)e.push(i.Workspace.WorkspaceDB_[t]);return e},i.Bubble=function(t,e,n,o,r,s){this.workspace_=t,this.content_=e,this.shape_=n,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,n=i.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrow_radians_=i.utils.math.toRadians(n),t.getBubbleCanvas().appendChild(this.createDom_(e,!(!r||!s))),this.setAnchorLocation(o),r&&s||(r=(t=this.content_.getBBox()).width+2*i.Bubble.BORDER_WIDTH,s=t.height+2*i.Bubble.BORDER_WIDTH),this.setBubbleSize(r,s),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},i.Bubble.BORDER_WIDTH=6,i.Bubble.ARROW_THICKNESS=5,i.Bubble.ARROW_ANGLE=20,i.Bubble.ARROW_BEND=4,i.Bubble.ANCHOR_RADIUS=8,i.Bubble.onMouseUpWrapper_=null,i.Bubble.onMouseMoveWrapper_=null,i.Bubble.unbindDragEvents_=function(){i.Bubble.onMouseUpWrapper_&&(i.unbindEvent_(i.Bubble.onMouseUpWrapper_),i.Bubble.onMouseUpWrapper_=null),i.Bubble.onMouseMoveWrapper_&&(i.unbindEvent_(i.Bubble.onMouseMoveWrapper_),i.Bubble.onMouseMoveWrapper_=null)},i.Bubble.bubbleMouseUp_=function(t){i.Touch.clearTouchIdentifier(),i.Bubble.unbindDragEvents_()},i.Bubble.prototype.rendered_=!1,i.Bubble.prototype.anchorXY_=null,i.Bubble.prototype.relativeLeft_=0,i.Bubble.prototype.relativeTop_=0,i.Bubble.prototype.width_=0,i.Bubble.prototype.height_=0,i.Bubble.prototype.autoLayout_=!0,i.Bubble.prototype.createDom_=function(t,e){this.bubbleGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},null);var n={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return i.utils.userAgent.JAVA_FX&&(n={}),n=i.utils.dom.createSvgElement(i.utils.Svg.G,n,this.bubbleGroup_),this.bubbleArrow_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{},n),this.bubbleBack_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:i.Bubble.BORDER_WIDTH,ry:i.Bubble.BORDER_WIDTH},n),e?(this.resizeGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e=2*i.Bubble.BORDER_WIDTH,i.utils.dom.createSvgElement(i.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),i.utils.dom.createSvgElement(i.utils.Svg.LINE,{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),i.utils.dom.createSvgElement(i.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=i.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=i.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},i.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},i.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},i.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},i.Bubble.prototype.showContextMenu=function(t){},i.Bubble.prototype.isDeletable=function(){return!1},i.Bubble.prototype.setDeleteStyle=function(t){},i.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),i.Bubble.unbindDragEvents_(),i.utils.isRightButton(t)||(this.workspace_.startDrag(t,new i.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),i.Bubble.onMouseUpWrapper_=i.bindEventWithChecks_(document,"mouseup",this,i.Bubble.bubbleMouseUp_),i.Bubble.onMouseMoveWrapper_=i.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),i.hideChaff()),t.stopPropagation()},i.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},i.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},i.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},i.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},i.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},i.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetrics();t.viewLeft/=this.workspace_.scale,t.viewWidth/=this.workspace_.scale,t.viewTop/=this.workspace_.scale,t.viewHeight/=this.workspace_.scale;var e=this.getOptimalRelativeLeft_(t),i=this.getOptimalRelativeTop_(t),n=this.shape_.getBBox(),o={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.width_-30,y:i};i={x:n.width,y:i};var s={x:e,y:n.height};e=n.width<n.height?i:s,n=n.width<n.height?s:i,i=this.getOverlap_(o,t),s=this.getOverlap_(r,t);var a=this.getOverlap_(e,t);t=this.getOverlap_(n,t),i==(t=Math.max(i,s,a,t))?(this.relativeLeft_=o.x,this.relativeTop_=o.y):s==t?(this.relativeLeft_=r.x,this.relativeTop_=r.y):a==t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=n.x,this.relativeTop_=n.y)},i.Bubble.prototype.getOverlap_=function(t,e){var i=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(i+this.width_,e.viewLeft+e.viewWidth)-Math.max(i,e.viewLeft))*(Math.min(t+this.height_,e.viewTop+e.viewHeight)-Math.max(t,e.viewTop))/(this.width_*this.height_)))},i.Bubble.prototype.getOptimalRelativeLeft_=function(t){var e=-this.width_/4;if(this.width_>t.viewWidth)return e;if(this.workspace_.RTL)var n=this.anchorXY_.x-e,o=n-this.width_,r=t.viewLeft+t.viewWidth,s=t.viewLeft+i.Scrollbar.scrollbarThickness/this.workspace_.scale;else n=(o=e+this.anchorXY_.x)+this.width_,s=t.viewLeft,r=t.viewLeft+t.viewWidth-i.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?o<s?e=-(s-this.anchorXY_.x+this.width_):n>r&&(e=-(r-this.anchorXY_.x)):o<s?e=s-this.anchorXY_.x:n>r&&(e=r-this.anchorXY_.x-this.width_),e},i.Bubble.prototype.getOptimalRelativeTop_=function(t){var e=-this.height_/4;if(this.height_>t.viewHeight)return e;var n=this.anchorXY_.y+e,o=n+this.height_,r=t.viewTop;t=t.viewTop+t.viewHeight-i.Scrollbar.scrollbarThickness/this.workspace_.scale;var s=this.anchorXY_.y;return n<r?e=r-s:o>t&&(e=t-s-this.height_),e},i.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},i.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},i.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},i.Bubble.prototype.getBubbleSize=function(){return new i.utils.Size(this.width_,this.height_)},i.Bubble.prototype.setBubbleSize=function(t,e){var n=2*i.Bubble.BORDER_WIDTH;t=Math.max(t,n+45),e=Math.max(e,n+20),this.width_=t,this.height_=e,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",e),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*i.Bubble.BORDER_WIDTH+","+(e-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(t-n)+","+(e-n)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},i.Bubble.prototype.renderArrow_=function(){var t=[],e=this.width_/2,n=this.height_/2,o=-this.relativeLeft_,r=-this.relativeTop_;if(e==o&&n==r)t.push("M "+e+","+n);else{r-=n,o-=e,this.workspace_.RTL&&(o*=-1);var s=Math.sqrt(r*r+o*o),a=Math.acos(o/s);0>r&&(a=2*Math.PI-a);var l=a+Math.PI/2;l>2*Math.PI&&(l-=2*Math.PI);var c=Math.sin(l),d=Math.cos(l),u=this.getBubbleSize();l=(u.width+u.height)/i.Bubble.ARROW_THICKNESS,l=Math.min(l,u.width,u.height)/4,o=e+(u=1-i.Bubble.ANCHOR_RADIUS/s)*o,r=n+u*r,u=e+l*d;var h=n+l*c;e-=l*d,n-=l*c,(c=a+this.arrow_radians_)>2*Math.PI&&(c-=2*Math.PI),a=Math.sin(c)*s/i.Bubble.ARROW_BEND,s=Math.cos(c)*s/i.Bubble.ARROW_BEND,t.push("M"+u+","+h),t.push("C"+(u+s)+","+(h+a)+" "+o+","+r+" "+o+","+r),t.push("C"+o+","+r+" "+(e+s)+","+(n+a)+" "+e+","+n)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},i.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},i.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&i.unbindEvent_(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&i.unbindEvent_(this.onMouseDownResizeWrapper_),i.Bubble.unbindDragEvents_(),i.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},i.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},i.Bubble.prototype.getRelativeToSurfaceXY=function(){return new i.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},i.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},i.Bubble.textToDom=function(t){var e=i.utils.dom.createSvgElement(i.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:i.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var n=0;n<t.length;n++){var o=i.utils.dom.createSvgElement(i.utils.Svg.TSPAN,{dy:"1em",x:i.Bubble.BORDER_WIDTH},e),r=document.createTextNode(t[n]);o.appendChild(r)}return e},i.Bubble.createNonEditableBubble=function(t,e,n){if((n=new i.Bubble(e.workspace,t,e.pathObject.svgPath,n,null,null)).setSvgId(e.id),e.RTL){e=t.getBBox().width;for(var o,r=0;o=t.childNodes[r];r++)o.setAttribute("text-anchor","end"),o.setAttribute("x",e+i.Bubble.BORDER_WIDTH)}return n},i.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=i.Events.getGroup(),this.recordUndo=i.Events.recordUndo},i.utils.object.inherits(i.Events.CommentBase,i.Events.Abstract),i.Events.CommentBase.prototype.toJson=function(){var t=i.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},i.Events.CommentBase.prototype.fromJson=function(t){i.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},i.Events.CommentChange=function(t,e,n){i.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===e?"":e,this.newContents_=void 0===n?"":n)},i.utils.object.inherits(i.Events.CommentChange,i.Events.CommentBase),i.Events.CommentChange.prototype.type=i.Events.COMMENT_CHANGE,i.Events.CommentChange.prototype.toJson=function(){var t=i.Events.CommentChange.superClass_.toJson.call(this);return t.newContents=this.newContents_,t},i.Events.CommentChange.prototype.fromJson=function(t){i.Events.CommentChange.superClass_.fromJson.call(this,t),this.newContents_=t.newValue},i.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},i.Events.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},i.Events.CommentCreate=function(t){i.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},i.utils.object.inherits(i.Events.CommentCreate,i.Events.CommentBase),i.Events.CommentCreate.prototype.type=i.Events.COMMENT_CREATE,i.Events.CommentCreate.prototype.toJson=function(){var t=i.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=i.Xml.domToText(this.xml),t},i.Events.CommentCreate.prototype.fromJson=function(t){i.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=i.Xml.textToDom(t.xml)},i.Events.CommentCreate.prototype.run=function(t){i.Events.CommentCreateDeleteHelper(this,t)},i.Events.CommentCreateDeleteHelper=function(t,e){var n=t.getEventWorkspace_();e?((e=i.utils.xml.createElement("xml")).appendChild(t.xml),i.Xml.domToWorkspace(e,n)):(n=n.getCommentById(t.commentId))?n.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},i.Events.CommentDelete=function(t){i.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},i.utils.object.inherits(i.Events.CommentDelete,i.Events.CommentBase),i.Events.CommentDelete.prototype.type=i.Events.COMMENT_DELETE,i.Events.CommentDelete.prototype.toJson=function(){return i.Events.CommentDelete.superClass_.toJson.call(this)},i.Events.CommentDelete.prototype.fromJson=function(t){i.Events.CommentDelete.superClass_.fromJson.call(this,t)},i.Events.CommentDelete.prototype.run=function(t){i.Events.CommentCreateDeleteHelper(this,!t)},i.Events.CommentMove=function(t){i.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},i.utils.object.inherits(i.Events.CommentMove,i.Events.CommentBase),i.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},i.Events.CommentMove.prototype.type=i.Events.COMMENT_MOVE,i.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},i.Events.CommentMove.prototype.toJson=function(){var t=i.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},i.Events.CommentMove.prototype.fromJson=function(t){i.Events.CommentMove.superClass_.fromJson.call(this,t),t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate_=new i.utils.Coordinate(Number(t[0]),Number(t[1])))},i.Events.CommentMove.prototype.isNull=function(){return i.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},i.Events.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var i=e.getXY();e.moveBy(t.x-i.x,t.y-i.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},i.registry.register(i.registry.Type.EVENT,i.Events.COMMENT_CREATE,i.Events.CommentCreate),i.registry.register(i.registry.Type.EVENT,i.Events.COMMENT_CHANGE,i.Events.CommentChange),i.registry.register(i.registry.Type.EVENT,i.Events.COMMENT_MOVE,i.Events.CommentMove),i.registry.register(i.registry.Type.EVENT,i.Events.COMMENT_DELETE,i.Events.CommentDelete),i.BubbleDragger=function(t,e){this.draggingBubble_=t,this.workspace_=e,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=i.utils.is3dSupported()&&e.getBlockDragSurface()?e.getBlockDragSurface():null},i.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},i.BubbleDragger.prototype.startBubbleDrag=function(){i.Events.getGroup()||i.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var t=this.workspace_.getToolbox();if(t&&"function"==typeof t.addStyle){var e=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t.addStyle(e)}},i.BubbleDragger.prototype.dragBubble=function(t,e){e=this.pixelsToWorkspaceUnits_(e),e=i.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveDuringDrag(this.dragSurface_,e),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(t),this.updateCursorDuringBubbleDrag_())},i.BubbleDragger.prototype.maybeDeleteBubble_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBubble_?(t&&setTimeout(t.closeLid.bind(t),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):t&&t.closeLid(),this.wouldDeleteBubble_},i.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=i.DELETE_AREA_NONE;var t=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==i.DELETE_AREA_TRASH&&t&&t.setLidOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),t&&t.setLidOpen(!1))},i.BubbleDragger.prototype.endBubbleDrag=function(t,e){this.dragBubble(t,e),t=this.pixelsToWorkspaceUnits_(e),t=i.utils.Coordinate.sum(this.startXY_,t),this.draggingBubble_.moveTo(t.x,t.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(t=this.workspace_.getToolbox())&&"function"==typeof t.removeStyle&&(e=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",t.removeStyle(e)),i.Events.setGroup(!1)},i.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new i.Events.CommentMove(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),i.Events.fire(t)}},i.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new i.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},i.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},i.Events.Click=function(t,e,n){i.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:e),this.blockId=t?t.id:null,this.targetType=n},i.utils.object.inherits(i.Events.Click,i.Events.UiBase),i.Events.Click.prototype.type=i.Events.CLICK,i.Events.Click.prototype.toJson=function(){var t=i.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},i.Events.Click.prototype.fromJson=function(t){i.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},i.registry.register(i.registry.Type.EVENT,i.Events.CLICK,i.Events.Click),i.WorkspaceDragger=function(t){this.workspace_=t,this.startScrollXY_=new i.utils.Coordinate(t.scrollX,t.scrollY)},i.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},i.WorkspaceDragger.prototype.startDrag=function(){i.selected&&i.selected.unselect(),this.workspace_.setupDragSurface()},i.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},i.WorkspaceDragger.prototype.drag=function(t){t=i.utils.Coordinate.sum(this.startScrollXY_,t),this.workspace_.scroll(t.x,t.y)},i.FlyoutDragger=function(t){i.FlyoutDragger.superClass_.constructor.call(this,t.getWorkspace()),this.scrollbar_=t.scrollbar,this.horizontalLayout_=t.horizontalLayout},i.utils.object.inherits(i.FlyoutDragger,i.WorkspaceDragger),i.FlyoutDragger.prototype.drag=function(t){t=i.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalLayout_?this.scrollbar_.set(-t.x):this.scrollbar_.set(-t.y)},i.navigation={},i.navigation.loggingCallback=null,i.navigation.STATE_FLYOUT=1,i.navigation.STATE_WS=2,i.navigation.STATE_TOOLBOX=3,i.navigation.WS_MOVE_DISTANCE=40,i.navigation.currentState_=i.navigation.STATE_WS,i.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav",MOVE_WS_CURSOR_UP:"move workspace cursor up",MOVE_WS_CURSOR_DOWN:"move workspace cursor down",MOVE_WS_CURSOR_LEFT:"move workspace cursor left",MOVE_WS_CURSOR_RIGHT:"move workspace cursor right"},i.navigation.MARKER_NAME="local_marker_1",i.navigation.getMarker=function(){return i.navigation.getNavigationWorkspace().getMarker(i.navigation.MARKER_NAME)},i.navigation.getNavigationWorkspace=function(){return i.getMainWorkspace()},i.navigation.focusToolbox_=function(t){(t=t.getToolbox())&&(i.navigation.currentState_=i.navigation.STATE_TOOLBOX,i.navigation.resetFlyout_(!1),i.navigation.getMarker().getCurNode()||i.navigation.markAtCursor_(),t.getSelectedItem()||t.selectItemByPosition(0))},i.navigation.focusFlyout_=function(t){i.navigation.currentState_=i.navigation.STATE_FLYOUT;var e=t.getToolbox();t=e?e.getFlyout():t.getFlyout(),i.navigation.getMarker().getCurNode()||i.navigation.markAtCursor_(),t&&t.getWorkspace()&&0<(t=t.getWorkspace().getTopBlocks(!0)).length&&(t=t[0],t=i.ASTNode.createStackNode(t),i.navigation.getFlyoutCursor_().setCurNode(t))},i.navigation.focusWorkspace_=function(t){i.hideChaff();var e=t.getCursor(),n=!!t.getToolbox(),o=t.getTopBlocks(!0);i.navigation.resetFlyout_(n),i.navigation.currentState_=i.navigation.STATE_WS,0<o.length?e.setCurNode(i.ASTNode.createTopNode(o[0])):(n=new i.utils.Coordinate(100,100),t=i.ASTNode.createWorkspaceNode(t,n),e.setCurNode(t))},i.navigation.getFlyoutCursor_=function(){var t=i.navigation.getNavigationWorkspace(),e=null;return t.rendered&&(e=(t=(e=t.getToolbox())?e.getFlyout():t.getFlyout())?t.getWorkspace().getCursor():null),e},i.navigation.insertFromFlyout=function(t){var e=t.getFlyout();if(e&&e.isVisible()){var n=i.navigation.getFlyoutCursor_().getCurNode().getLocation();n.isEnabled()?((e=e.createBlock(n)).render(),e.setConnectionTracking(!0),t.getCursor().setCurNode(i.ASTNode.createBlockNode(e)),i.navigation.modify_()||i.navigation.warn_("Something went wrong while inserting a block from the flyout."),i.navigation.focusWorkspace_(t),t.getCursor().setCurNode(i.ASTNode.createTopNode(e)),i.navigation.removeMark_()):i.navigation.warn_("Can't insert a disabled block.")}else i.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")},i.navigation.resetFlyout_=function(t){i.navigation.getFlyoutCursor_()&&(i.navigation.getFlyoutCursor_().hide(),t&&i.navigation.getNavigationWorkspace().getFlyout().hide())},i.navigation.modifyWarn_=function(){var t=i.navigation.getMarker().getCurNode(),e=i.navigation.getNavigationWorkspace().getCursor().getCurNode();return t?e?(t=t.getType(),e=e.getType(),t==i.ASTNode.types.FIELD?(i.navigation.warn_("Should not have been able to mark a field."),!1):t==i.ASTNode.types.BLOCK?(i.navigation.warn_("Should not have been able to mark a block."),!1):t==i.ASTNode.types.STACK?(i.navigation.warn_("Should not have been able to mark a stack."),!1):e==i.ASTNode.types.FIELD?(i.navigation.warn_("Cannot attach a field to anything else."),!1):e!=i.ASTNode.types.WORKSPACE||(i.navigation.warn_("Cannot attach a workspace to anything else."),!1)):(i.navigation.warn_("Cannot insert with no cursor node."),!1):(i.navigation.warn_("Cannot insert with no marked node."),!1)},i.navigation.moveBlockToWorkspace_=function(t,e){return!!t&&(t.isShadow()?(i.navigation.warn_("Cannot move a shadow block to the workspace."),!1):(t.getParent()&&t.unplug(!1),t.moveTo(e.getWsCoordinate()),!0))},i.navigation.modify_=function(){var t=i.navigation.getMarker().getCurNode(),e=i.navigation.getNavigationWorkspace().getCursor().getCurNode();if(!i.navigation.modifyWarn_())return!1;var n=t.getType(),o=e.getType(),r=e.getLocation(),s=t.getLocation();return t.isConnection()&&e.isConnection()?i.navigation.connect_(r,s):!t.isConnection()||o!=i.ASTNode.types.BLOCK&&o!=i.ASTNode.types.STACK?n==i.ASTNode.types.WORKSPACE?(e=e?e.getSourceBlock():null,i.navigation.moveBlockToWorkspace_(e,t)):(i.navigation.warn_("Unexpected state in Blockly.navigation.modify_."),!1):i.navigation.insertBlock(r,s)},i.navigation.disconnectChild_=function(t,e){var n=t.getSourceBlock(),o=e.getSourceBlock();n.getRootBlock()==o.getRootBlock()&&(-1<n.getDescendants(!1).indexOf(o)?i.navigation.getInferiorConnection_(e).disconnect():i.navigation.getInferiorConnection_(t).disconnect())},i.navigation.moveAndConnect_=function(t,e){if(!t||!e)return!1;var n=t.getSourceBlock();return!!t.getConnectionChecker().canConnect(t,e,!1)&&(i.navigation.disconnectChild_(t,e),e.isSuperior()||n.getRootBlock().positionNearConnection(t,e),e.connect(t),!0)},i.navigation.getInferiorConnection_=function(t){var e=t.getSourceBlock();return t.isSuperior()?e.previousConnection?e.previousConnection:e.outputConnection?e.outputConnection:null:t},i.navigation.getSuperiorConnection_=function(t){return t.isSuperior()?t:t.targetConnection?t.targetConnection:null},i.navigation.connect_=function(t,e){if(!t||!e)return!1;var n=i.navigation.getInferiorConnection_(t),o=i.navigation.getSuperiorConnection_(e),r=i.navigation.getSuperiorConnection_(t),s=i.navigation.getInferiorConnection_(e);return!!(n&&o&&i.navigation.moveAndConnect_(n,o)||r&&s&&i.navigation.moveAndConnect_(r,s)||i.navigation.moveAndConnect_(t,e))||(o=(n=t.getConnectionChecker()).canConnectWithReason(t,e,!1),i.navigation.warn_("Connection failed with error: "+n.getErrorMessage(o,t,e)),!1)},i.navigation.insertBlock=function(t,e){switch(e.type){case i.PREVIOUS_STATEMENT:if(i.navigation.connect_(t.nextConnection,e))return!0;break;case i.NEXT_STATEMENT:if(i.navigation.connect_(t.previousConnection,e))return!0;break;case i.INPUT_VALUE:if(i.navigation.connect_(t.outputConnection,e))return!0;break;case i.OUTPUT_VALUE:for(var n=0;n<t.inputList.length;n++){var o=t.inputList[n].connection;if(o&&o.type===i.INPUT_VALUE&&i.navigation.connect_(o,e))return!0}if(t.outputConnection&&i.navigation.connect_(t.outputConnection,e))return!0}return i.navigation.warn_("This block can not be inserted at the marked location."),!1},i.navigation.disconnectBlocks_=function(t){var e=t.getCursor().getCurNode();if(e.isConnection()){var n=e.getLocation();n.isConnected()?(e=n.isSuperior()?n:n.targetConnection,(n=n.isSuperior()?n.targetConnection:n).getSourceBlock().isShadow()?i.navigation.log_("Cannot disconnect a shadow block"):(e.disconnect(),n.bumpAwayFrom(e),e.getSourceBlock().getRootBlock().bringToFront(),e=i.ASTNode.createConnectionNode(e),t.getCursor().setCurNode(e))):i.navigation.log_("Cannot disconnect unconnected connection")}else i.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")},i.navigation.markAtCursor_=function(){i.navigation.getMarker().setCurNode(i.navigation.getNavigationWorkspace().getCursor().getCurNode())},i.navigation.removeMark_=function(){var t=i.navigation.getMarker();t.setCurNode(null),t.hide()},i.navigation.setState=function(t){i.navigation.currentState_=t},i.navigation.moveCursorOnBlockDelete=function(t){var e=i.navigation.getNavigationWorkspace();if(e&&(e=e.getCursor())){var n=e.getCurNode();(n=n?n.getSourceBlock():null)===t?n.getParent()?(t=n.previousConnection||n.outputConnection)&&e.setCurNode(i.ASTNode.createConnectionNode(t.targetConnection)):e.setCurNode(i.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY())):n&&-1<t.getChildren(!1).indexOf(n)&&e.setCurNode(i.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY()))}},i.navigation.moveCursorOnBlockMutation=function(t){var e=i.navigation.getNavigationWorkspace().getCursor();if(e){var n=e.getCurNode();(n=n?n.getSourceBlock():null)===t&&e.setCurNode(i.ASTNode.createBlockNode(n))}},i.navigation.enableKeyboardAccessibility=function(){var t=i.navigation.getNavigationWorkspace();t.keyboardAccessibilityMode||(t.keyboardAccessibilityMode=!0,i.navigation.focusWorkspace_(t))},i.navigation.disableKeyboardAccessibility=function(){var t=i.navigation.getNavigationWorkspace();t.keyboardAccessibilityMode&&(t.keyboardAccessibilityMode=!1,t.getCursor().hide(),i.navigation.getMarker().hide(),i.navigation.getFlyoutCursor_()&&i.navigation.getFlyoutCursor_().hide())},i.navigation.log_=function(t){i.navigation.loggingCallback?i.navigation.loggingCallback("log",t):console.log(t)},i.navigation.warn_=function(t){i.navigation.loggingCallback?i.navigation.loggingCallback("warn",t):console.warn(t)},i.navigation.error_=function(t){i.navigation.loggingCallback?i.navigation.loggingCallback("error",t):console.error(t)},i.navigation.moveWSCursor_=function(t,e,n){var o=t.getCursor(),r=t.getCursor().getCurNode();return r.getType()===i.ASTNode.types.WORKSPACE&&(r=r.getWsCoordinate(),o.setCurNode(i.ASTNode.createWorkspaceNode(t,new i.utils.Coordinate(e*i.navigation.WS_MOVE_DISTANCE+r.x,n*i.navigation.WS_MOVE_DISTANCE+r.y))),!0)},i.navigation.handleEnterForWS_=function(t){var e=(t=t.getCursor().getCurNode()).getType();e==i.ASTNode.types.FIELD?t.getLocation().showEditor():t.isConnection()||e==i.ASTNode.types.WORKSPACE?i.navigation.markAtCursor_():e==i.ASTNode.types.BLOCK?i.navigation.warn_("Cannot mark a block."):e==i.ASTNode.types.STACK&&i.navigation.warn_("Cannot mark a stack.")},i.navigation.registerPrevious=function(){var t={name:i.navigation.actionNames.PREVIOUS,preconditionFn:function(t){return t.keyboardAccessibilityMode},callback:function(t,e,n){switch(e=t.getToolbox(),i.navigation.currentState_){case i.navigation.STATE_WS:return t.getCursor().onBlocklyAction(n);case i.navigation.STATE_FLYOUT:return!(!(t=e?e.getFlyout():t.getFlyout())||!t.onBlocklyAction(n));case i.navigation.STATE_TOOLBOX:return!(!e||"function"!=typeof e.onBlocklyAction)&&e.onBlocklyAction(n);default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.W,t.name)},i.navigation.registerOut=function(){var t={name:i.navigation.actionNames.OUT,preconditionFn:function(t){return t.keyboardAccessibilityMode},callback:function(t,e,n){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return t.getCursor().onBlocklyAction(n);case i.navigation.STATE_FLYOUT:return i.navigation.focusToolbox_(t),!0;case i.navigation.STATE_TOOLBOX:return!(!(t=t.getToolbox())||"function"!=typeof t.onBlocklyAction)&&t.onBlocklyAction(n);default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.A,t.name)},i.navigation.registerNext=function(){var t={name:i.navigation.actionNames.NEXT,preconditionFn:function(t){return t.keyboardAccessibilityMode},callback:function(t,e,n){switch(e=t.getToolbox(),i.navigation.currentState_){case i.navigation.STATE_WS:return t.getCursor().onBlocklyAction(n);case i.navigation.STATE_FLYOUT:return!(!(t=e?e.getFlyout():t.getFlyout())||!t.onBlocklyAction(n));case i.navigation.STATE_TOOLBOX:return!(!e||"function"!=typeof e.onBlocklyAction)&&e.onBlocklyAction(n);default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.S,t.name)},i.navigation.registerIn=function(){var t={name:i.navigation.actionNames.IN,preconditionFn:function(t){return t.keyboardAccessibilityMode},callback:function(t,e,n){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return t.getCursor().onBlocklyAction(n);case i.navigation.STATE_TOOLBOX:return(e=t.getToolbox())&&"function"==typeof e.onBlocklyAction&&e.onBlocklyAction(n)||i.navigation.focusFlyout_(t),!0;default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.D,t.name)},i.navigation.registerInsert=function(){var t={name:i.navigation.actionNames.INSERT,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return i.navigation.modify_();default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.I,t.name)},i.navigation.registerMark=function(){var t={name:i.navigation.actionNames.MARK,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return i.navigation.handleEnterForWS_(t),!0;case i.navigation.STATE_FLYOUT:return i.navigation.insertFromFlyout(t),!0;default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.ENTER,t.name)},i.navigation.registerDisconnect=function(){var t={name:i.navigation.actionNames.DISCONNECT,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return i.navigation.disconnectBlocks_(t),!0;default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.X,t.name)},i.navigation.registerToolboxFocus=function(){var t={name:i.navigation.actionNames.TOOLBOX,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){switch(i.navigation.currentState_){case i.navigation.STATE_WS:return t.getToolbox()?i.navigation.focusToolbox_(t):i.navigation.focusFlyout_(t),!0;default:return!1}}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.T,t.name)},i.navigation.registerExit=function(){var t={name:i.navigation.actionNames.EXIT,preconditionFn:function(t){return t.keyboardAccessibilityMode},callback:function(t){switch(i.navigation.currentState_){case i.navigation.STATE_FLYOUT:case i.navigation.STATE_TOOLBOX:return i.navigation.focusWorkspace_(t),!0;default:return!1}}};i.ShortcutRegistry.registry.register(t,!0),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.ESC,t.name,!0),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.E,t.name,!0)},i.navigation.registerToggleKeyboardNav=function(){var t={name:i.navigation.actionNames.TOGGLE_KEYBOARD_NAV,callback:function(t){return t.keyboardAccessibilityMode?i.navigation.disableKeyboardAccessibility():i.navigation.enableKeyboardAccessibility(),!0}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.K,[i.utils.KeyCodes.CTRL,i.utils.KeyCodes.SHIFT]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.navigation.registerWorkspaceMoveLeft=function(){var t={name:i.navigation.actionNames.MOVE_WS_CURSOR_LEFT,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){return i.navigation.moveWSCursor_(t,-1,0)}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.A,[i.utils.KeyCodes.SHIFT]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.navigation.registerWorkspaceMoveRight=function(){var t={name:i.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){return i.navigation.moveWSCursor_(t,1,0)}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.D,[i.utils.KeyCodes.SHIFT]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.navigation.registerWorkspaceMoveUp=function(){var t={name:i.navigation.actionNames.MOVE_WS_CURSOR_UP,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){return i.navigation.moveWSCursor_(t,0,-1)}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.W,[i.utils.KeyCodes.SHIFT]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.navigation.registerWorkspaceMoveDown=function(){var t={name:i.navigation.actionNames.MOVE_WS_CURSOR_DOWN,preconditionFn:function(t){return t.keyboardAccessibilityMode&&!t.options.readOnly},callback:function(t){return i.navigation.moveWSCursor_(t,0,1)}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.S,[i.utils.KeyCodes.SHIFT]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.navigation.registerNavigationShortcuts=function(){i.navigation.registerIn(),i.navigation.registerNext(),i.navigation.registerOut(),i.navigation.registerPrevious(),i.navigation.registerWorkspaceMoveDown(),i.navigation.registerWorkspaceMoveLeft(),i.navigation.registerWorkspaceMoveRight(),i.navigation.registerWorkspaceMoveUp(),i.navigation.registerDisconnect(),i.navigation.registerExit(),i.navigation.registerInsert(),i.navigation.registerMark(),i.navigation.registerToggleKeyboardNav(),i.navigation.registerToolboxFocus()},i.Gesture=function(t,e){this.mouseDownXY_=null,this.currentDragDeltaXY_=new i.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=e,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!i.DRAG_STACK},i.Gesture.prototype.dispose=function(){i.Touch.clearTouchIdentifier(),i.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&i.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&i.unbindEvent_(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},i.Gesture.prototype.updateFromEvent_=function(t){var e=new i.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(e)&&(this.updateIsDragging_(),i.longStop_()),this.mostRecentEvent_=t},i.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=i.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=i.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?i.FLYOUT_DRAG_RADIUS:i.DRAG_RADIUS))},i.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),i.Events.getGroup()||i.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},i.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},i.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},i.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new i.FlyoutDragger(this.flyout_):new i.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},i.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},i.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new i.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},i.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new i.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},i.Gesture.prototype.doStart=function(t){i.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,i.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),i.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,i.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&t.shiftKey&&this.targetBlock_.workspace.keyboardAccessibilityMode?this.creatorWorkspace_.getCursor().setCurNode(i.ASTNode.createTopNode(this.targetBlock_)):this.targetBlock_.select()),i.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||i.longStart(t,this),this.mouseDownXY_=new i.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},i.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=i.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=i.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},i.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},i.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),i.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},i.Gesture.prototype.cancel=function(){this.isEnding_||(i.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},i.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),i.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(i.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},i.Gesture.prototype.handleWsStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t),this.startWorkspace_.keyboardAccessibilityMode&&i.navigation.setState(i.navigation.STATE_WS)},i.Gesture.prototype.fireWorkspaceClick_=function(t){t=new i.Events.Click(null,t.id,"workspace"),i.Events.fire(t)},i.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},i.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},i.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},i.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},i.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},i.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(i.Events.getGroup()||i.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new i.Events.Click(this.startBlock_,this.startWorkspace_.id,"block");i.Events.fire(t)}this.bringBlockToFront_(),i.Events.setGroup(!1)},i.Gesture.prototype.doWorkspaceClick_=function(t){var e=this.creatorWorkspace_;t.shiftKey&&e.keyboardAccessibilityMode?(t=new i.utils.Coordinate(t.clientX,t.clientY),t=i.utils.screenToWsCoordinates(e,t),t=i.ASTNode.createWorkspaceNode(e,t),e.getCursor().setCurNode(t)):i.selected&&i.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},i.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},i.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},i.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},i.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},i.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},i.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},i.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},i.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},i.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},i.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},i.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},i.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},i.Gesture.prototype.hasStarted=function(){return this.hasStarted_},i.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},i.Gesture.inProgress=function(){for(var t,e=i.Workspace.getAll(),n=0;t=e[n];n++)if(t.currentGesture_)return!0;return!1},i.Field=function(t,e,n){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new i.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,n&&this.configure_(n),this.setValue(t),e&&this.setValidator(e)},i.Field.prototype.DEFAULT_VALUE=null,i.Field.prototype.name=void 0,i.Field.prototype.disposed=!1,i.Field.prototype.maxDisplayLength=50,i.Field.prototype.sourceBlock_=null,i.Field.prototype.isDirty_=!0,i.Field.prototype.visible_=!0,i.Field.prototype.clickTarget_=null,i.Field.NBSP="Â ",i.Field.prototype.EDITABLE=!0,i.Field.prototype.SERIALIZABLE=!1,i.Field.prototype.configure_=function(t){var e=t.tooltip;"string"==typeof e&&(e=i.utils.replaceMessageReferences(t.tooltip)),e&&this.setTooltip(e)},i.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},i.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},i.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},i.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},i.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},i.Field.prototype.initModel=function(){},i.Field.prototype.createBorderRect_=function(){this.borderRect_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect",fill:"white"},this.fieldGroup_)},i.Field.prototype.createTextElement_=function(){this.textElement_=i.utils.dom.createSvgElement(i.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},i.Field.prototype.bindEvents_=function(){i.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=i.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},i.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},i.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},i.Field.prototype.dispose=function(){i.DropDownDiv.hideIfOwner(this),i.WidgetDiv.hideIfOwner(this),i.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&i.unbindEvent_(this.mouseDownWrapper_),i.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},i.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(i.utils.dom.addClass(t,"blocklyEditableText"),i.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(i.utils.dom.addClass(t,"blocklyNonEditableText"),i.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},i.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},i.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},i.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},i.Field.prototype.isVisible=function(){return this.visible_},i.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},i.Field.prototype.setValidator=function(t){this.validator_=t},i.Field.prototype.getValidator=function(){return this.validator_},i.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},i.Field.prototype.applyColour=function(){},i.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},i.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},i.Field.prototype.updateSize_=function(t){var e=this.getConstants(),n=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),o=e.FIELD_TEXT_HEIGHT,r=0;this.textElement_&&(n+=r=i.utils.dom.getFastTextWidth(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(o=Math.max(o,e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=n,this.positionTextElement_(t,r),this.positionBorderRect_()},i.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var i=this.getConstants(),n=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",i.FIELD_TEXT_BASELINE_CENTER?n:n-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE)}},i.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},i.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new i.utils.Size(0,0)},i.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),n=i.utils.style.getPageOffset(this.borderRect_),o=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),e=this.sourceBlock_.workspace.scale,n=this.getAbsoluteXY_(),o=t.width*e;t=t.height*e,i.utils.userAgent.GECKO?(n.x+=1.5*e,n.y+=1.5*e):i.utils.userAgent.EDGE||i.utils.userAgent.IE||(n.x-=.5*e,n.y-=.5*e),o+=1*e,t+=1*e}return new i.utils.Rect(n.y,n.y+t,n.x,n.x+o)},i.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"â€¦"),t=t.replace(/\s/g,i.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="â€"),t):i.Field.NBSP},i.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},i.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},i.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},i.Field.prototype.setValue=function(t){if(null!==t){var e=this.doClassValidation_(t);if(!((t=this.processValidation_(t,e))instanceof Error)){if((e=this.getValidator())&&(e=e.call(this,t),(t=this.processValidation_(t,e))instanceof Error))return;if(!(e=this.sourceBlock_)||!e.disposed){var n=this.getValue();n===t?this.doValueUpdate_(t):(e&&i.Events.isEnabled()&&i.Events.fire(new i.Events.BlockChange(e,"field",this.name||null,n,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},i.Field.prototype.processValidation_=function(t,e){return null===e?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==e&&(t=e),t)},i.Field.prototype.getValue=function(){return this.value_},i.Field.prototype.doClassValidation_=function(t){return null==t?null:t},i.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},i.Field.prototype.doValueInvalid_=function(t){},i.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},i.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},i.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return t?i.Tooltip.getTooltipOfObject(t):i.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},i.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},i.Field.prototype.getAbsoluteXY_=function(){return i.utils.style.getPageOffset(this.getClickTarget_())},i.Field.prototype.referencesVariables=function(){return!1},i.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,i=e.inputList,n=0;n<e.inputList.length;n++)for(var o=i[n],r=o.fieldRow,s=0;s<r.length;s++)if(r[s]===this){t=o;break}return t},i.Field.prototype.getFlipRtl=function(){return!1},i.Field.prototype.isTabNavigable=function(){return!1},i.Field.prototype.onBlocklyAction=function(t){return!1},i.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},i.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},i.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(i.navigation.MARKER_NAME).draw()},i.FieldLabel=function(t,e,n){this.class_=null,i.FieldLabel.superClass_.constructor.call(this,t,null,n),n||(this.class_=e||null)},i.utils.object.inherits(i.FieldLabel,i.Field),i.FieldLabel.prototype.DEFAULT_VALUE="",i.FieldLabel.fromJson=function(t){var e=i.utils.replaceMessageReferences(t.text);return new i.FieldLabel(e,void 0,t)},i.FieldLabel.prototype.EDITABLE=!1,i.FieldLabel.prototype.configure_=function(t){i.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},i.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&i.utils.dom.addClass(this.textElement_,this.class_)},i.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},i.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&i.utils.dom.removeClass(this.textElement_,this.class_),t&&i.utils.dom.addClass(this.textElement_,t)),this.class_=t},i.fieldRegistry.register("field_label",i.FieldLabel),i.Input=function(t,e,n,o){if(t!=i.DUMMY_INPUT&&!e)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=e,this.sourceBlock_=n,this.connection=o,this.fieldRow=[]},i.Input.prototype.align=i.ALIGN_LEFT,i.Input.prototype.visible_=!0,i.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},i.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},i.Input.prototype.insertFieldAt=function(t,e,n){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return e||""==e&&n?("string"==typeof e&&(e=new i.FieldLabel(e)),e.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(e.init(),e.applyColour()),e.name=n,e.setVisible(this.isVisible()),(n=e).prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,e),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),t):t},i.Input.prototype.removeField=function(t,e){for(var i,n=0;i=this.fieldRow[n];n++)if(i.name===t)return i.dispose(),this.fieldRow.splice(n,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},i.Input.prototype.isVisible=function(){return this.visible_},i.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;this.visible_=t;for(var i,n=0;i=this.fieldRow[n];n++)i.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),n=this.connection.targetBlock())&&(n.getSvgRoot().style.display=t?"block":"none"),e},i.Input.prototype.markDirty=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.markDirty()},i.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},i.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},i.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},i.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},i.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},i.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},i.Block=function(t,e,n){if(i.Generator&&void 0!==i.Generator.prototype[e])throw Error('Block prototypeName "'+e+'" conflicts with Blockly.Generator members.');if(this.id=n&&!t.getBlockById(n)?n:i.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new i.utils.Size(160,80)},this.xy_=new i.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,e){if(this.type=e,!(n=i.Blocks[e])||"object"!=typeof n)throw TypeError("Unknown block type: "+e);i.utils.object.mixin(this,n)}t.addTopBlock(this),t.addTypedBlock(this),(t=i.Events.getGroup())||i.Events.setGroup(!0),e=i.Events.recordUndo;try{"function"==typeof this.init&&(i.Events.recordUndo=!1,this.init(),i.Events.recordUndo=e),i.Events.isEnabled()&&i.Events.fire(new i.Events.BlockCreate(this))}finally{t||i.Events.setGroup(!1),i.Events.recordUndo=e}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},i.Block.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",i.Block.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",i.Block.prototype.data=null,i.Block.prototype.disposed=!1,i.Block.prototype.hue_=null,i.Block.prototype.colour_="#000000",i.Block.prototype.styleName_=null,i.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),i.Events.isEnabled()&&i.Events.fire(new i.Events.BlockDelete(this)),i.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),i.selected==this&&(i.selected=null);for(var e=this.childBlocks_.length-1;0<=e;e--)this.childBlocks_[e].dispose(!1);e=0;for(var n;n=this.inputList[e];e++)n.dispose();this.inputList.length=0;var o,r=this.getConnections_(!0);for(e=0;o=r[e];e++)o.dispose()}finally{i.Events.enable(),this.disposed=!0}}},i.Block.prototype.initModel=function(){for(var t,e=0;t=this.inputList[e];e++)for(var i,n=0;i=t.fieldRow[n];n++)i.initModel&&i.initModel()},i.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},i.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},i.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,e=0;e<this.inputList.length;e++){var n=this.inputList[e].connection;if(n&&n.type==i.INPUT_VALUE&&n.targetConnection){if(t)return null;t=n}}return t},i.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var i=this.getNextBlock();t&&i&&!i.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},i.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,i=0;e=this.inputList[i];i++)e.connection&&t.push(e.connection);return t},i.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},i.Block.prototype.bumpNeighbours=function(){},i.Block.prototype.getParent=function(){return this.parentBlock_},i.Block.prototype.getInputWithBlock=function(t){for(var e,i=0;e=this.inputList[i];i++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},i.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},i.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},i.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},i.Block.prototype.getFirstStatementConnection=function(){for(var t,e=0;t=this.inputList[e];e++)if(t.connection&&t.connection.type==i.NEXT_STATEMENT)return t.connection;return null},i.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},i.Block.prototype.getTopStackBlock=function(){var t=this;do{var e=t.getPreviousBlock()}while(e&&e.getNextBlock()==t&&(t=e));return t},i.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e,i=0;e=this.inputList[i];i++)e.connection&&(e=e.connection.targetBlock())&&t.push(e);return(i=this.getNextBlock())&&t.push(i),t},i.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(i.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},i.Block.prototype.getDescendants=function(t){for(var e,i=[this],n=this.getChildren(t),o=0;e=n[o];o++)i.push.apply(i,e.getDescendants(t));return i},i.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},i.Block.prototype.setDeletable=function(t){this.deletable_=t},i.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},i.Block.prototype.setMovable=function(t){this.movable_=t},i.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(i.utils.getBlockTypeCounts(this,!0))},i.Block.prototype.isShadow=function(){return this.isShadow_},i.Block.prototype.setShadow=function(t){this.isShadow_=t},i.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},i.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},i.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},i.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var i,n=0;i=e.fieldRow[n];n++)i.updateEditable()},i.Block.prototype.isDisposed=function(){return this.disposed},i.Block.prototype.getMatchingConnection=function(t,e){var i=this.getConnections_(!0);if(t=t.getConnections_(!0),i.length!=t.length)throw Error("Connection lists did not match in length.");for(var n=0;n<t.length;n++)if(t[n]==e)return i[n];return null},i.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},i.Block.prototype.setTooltip=function(t){this.tooltip=t},i.Block.prototype.getTooltip=function(){return i.Tooltip.getTooltipOfObject(this)},i.Block.prototype.getColour=function(){return this.colour_},i.Block.prototype.getStyleName=function(){return this.styleName_},i.Block.prototype.getHue=function(){return this.hue_},i.Block.prototype.setColour=function(t){t=i.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},i.Block.prototype.setStyle=function(t){this.styleName_=t},i.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},i.Block.prototype.getField=function(t){for(var e,i=0;e=this.inputList[i];i++)for(var n,o=0;n=e.fieldRow[o];o++)if(n.name==t)return n;return null},i.Block.prototype.getVars=function(){for(var t,e=[],i=0;t=this.inputList[i];i++)for(var n,o=0;n=t.fieldRow[o];o++)n.referencesVariables()&&e.push(n.getValue());return e},i.Block.prototype.getVarModels=function(){for(var t,e=[],i=0;t=this.inputList[i];i++)for(var n,o=0;n=t.fieldRow[o];o++)n.referencesVariables()&&(n=this.workspace.getVariableById(n.getValue()))&&e.push(n);return e},i.Block.prototype.updateVarName=function(t){for(var e,i=0;e=this.inputList[i];i++)for(var n,o=0;n=e.fieldRow[o];o++)n.referencesVariables()&&t.getId()==n.getValue()&&n.refreshVariableName()},i.Block.prototype.renameVarById=function(t,e){for(var i,n=0;i=this.inputList[n];n++)for(var o,r=0;o=i.fieldRow[r];r++)o.referencesVariables()&&t==o.getValue()&&o.setValue(e)},i.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},i.Block.prototype.setFieldValue=function(t,e){var i=this.getField(e);if(!i)throw Error('Field "'+e+'" not found.');i.setValue(t)},i.Block.prototype.setPreviousStatement=function(t,e){if(t){if(void 0===e&&(e=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(i.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(e)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},i.Block.prototype.setNextStatement=function(t,e){if(t)void 0===e&&(e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(i.NEXT_STATEMENT)),this.nextConnection.setCheck(e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},i.Block.prototype.setOutput=function(t,e){if(t){if(void 0===e&&(e=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(i.OUTPUT_VALUE)}this.outputConnection.setCheck(e)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},i.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(i.Events.fire(new i.Events.BlockChange(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},i.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==i.DUMMY_INPUT&&this.inputList[t].type==i.DUMMY_INPUT)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==i.INPUT_VALUE&&this.inputList[t].type==i.DUMMY_INPUT)return!0;return!1},i.Block.prototype.setOutputShape=function(t){this.outputShape_=t},i.Block.prototype.getOutputShape=function(){return this.outputShape_},i.Block.prototype.isEnabled=function(){return!this.disabled},i.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(i.Events.fire(new i.Events.BlockChange(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},i.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},i.Block.prototype.isCollapsed=function(){return this.collapsed_},i.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(i.Events.fire(new i.Events.BlockChange(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},i.Block.prototype.toString=function(t,e){function n(t){var e=t.getCheck();return!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),!!e&&(-1!=e.indexOf("Boolean")||-1!=e.indexOf("Number"))}function o(){a&&a.getType()==l.getType()&&a.getLocation()==l.getLocation()&&(a=null)}var r=[];e=e||"?";var s=i.ASTNode.NAVIGATE_ALL_FIELDS;i.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var a=i.ASTNode.createBlockNode(this),l=a;a;){switch(a.getType()){case i.ASTNode.types.INPUT:var c=a.getLocation();a.in()?n(c)&&r.push("("):r.push(e);break;case i.ASTNode.types.FIELD:(c=a.getLocation()).name!=i.Block.COLLAPSED_FIELD_NAME&&r.push(c.getText())}if(!(a=(c=a).in()||c.next())){for(a=c.out(),o();a&&!a.next();)a=a.out(),o(),a&&a.getType()==i.ASTNode.types.INPUT&&n(a.getLocation())&&r.push(")");a&&(a=a.next())}}for(i.ASTNode.NAVIGATE_ALL_FIELDS=s,e=2,s=r.length;e<s;e++)"("==r[e-2]&&")"==r[e]&&(r[e-2]=r[e-1],r.splice(e-1,2),s-=2);return r=r.join(" ").replace(/(\() | (\))/gim,"$1$2").trim()||"???",t&&r.length>t&&(r=r.substring(0,t-3)+"..."),r},i.Block.prototype.appendValueInput=function(t){return this.appendInput_(i.INPUT_VALUE,t)},i.Block.prototype.appendStatementInput=function(t){return this.appendInput_(i.NEXT_STATEMENT,t)},i.Block.prototype.appendDummyInput=function(t){return this.appendInput_(i.DUMMY_INPUT,t||"")},i.Block.prototype.jsonInit=function(t){var e=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(e+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(e+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,e):this.jsonInitColour_(t,e);for(var n=0;void 0!==t["message"+n];)this.interpolate_(t["message"+n],t["args"+n]||[],t["lastDummyAlign"+n],e),n++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(n=t.tooltip,n=i.utils.replaceMessageReferences(n),this.setTooltip(n)),void 0!==t.enableContextMenu&&(n=t.enableContextMenu,this.contextMenu=!!n),void 0!==t.helpUrl&&(n=t.helpUrl,n=i.utils.replaceMessageReferences(n),this.setHelpUrl(n)),"string"==typeof t.extensions&&(console.warn(e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&i.Extensions.apply(t.mutator,this,!0),Array.isArray(t.extensions))for(t=t.extensions,e=0;e<t.length;++e)i.Extensions.apply(t[e],this,!1)},i.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(i){console.warn(e+"Illegal colour value: ",t)}}},i.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch(i){console.warn(e+"Style does not exist: ",t)}},i.Block.prototype.mixin=function(t,e){if(void 0!==e&&"boolean"!=typeof e)throw Error("opt_disableCheck must be a boolean if provided");if(!e){for(var n in e=[],t)void 0!==this[n]&&e.push(n);if(e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(e))}i.utils.object.mixin(this,t)},i.Block.prototype.interpolate_=function(t,e,n,o){var r=i.utils.tokenizeInterpolation(t),s=[],a=0;t=[];for(var l=0;l<r.length;l++){var c=r[l];if("number"==typeof c){if(0>=c||c>e.length)throw Error('Block "'+this.type+'": Message index %'+c+" out of range.");if(s[c])throw Error('Block "'+this.type+'": Message index %'+c+" duplicated.");s[c]=!0,a++,t.push(e[c-1])}else(c=c.trim())&&t.push(c)}if(a!=e.length)throw Error('Block "'+this.type+'": Message does not reference all '+e.length+" arg(s).");for(t.length&&("string"==typeof t[t.length-1]||i.utils.string.startsWith(t[t.length-1].type,"field_"))&&(l={type:"input_dummy"},n&&(l.align=n),t.push(l)),n={LEFT:i.ALIGN_LEFT,RIGHT:i.ALIGN_RIGHT,CENTRE:i.ALIGN_CENTRE,CENTER:i.ALIGN_CENTRE},e=[],l=0;l<t.length;l++)if("string"==typeof(s=t[l]))e.push([s,void 0]);else{r=a=null;do{if(c=!1,"string"==typeof s)a=new i.FieldLabel(s);else switch(s.type){case"input_value":r=this.appendValueInput(s.name);break;case"input_statement":r=this.appendStatementInput(s.name);break;case"input_dummy":r=this.appendDummyInput(s.name);break;default:!(a=i.fieldRegistry.fromJson(s))&&s.alt&&(s=s.alt,c=!0)}}while(c);if(a)e.push([a,s.name]);else if(r){for(s.check&&r.setCheck(s.check),s.align&&(void 0===(a=n[s.align.toUpperCase()])?console.warn(o+"Illegal align value: ",s.align):r.setAlign(a)),s=0;s<e.length;s++)r.appendField(e[s][0],e[s][1]);e.length=0}}},i.Block.prototype.appendInput_=function(t,e){var n=null;return t!=i.INPUT_VALUE&&t!=i.NEXT_STATEMENT||(n=this.makeConnection_(t)),t==i.NEXT_STATEMENT&&this.statementInputCount++,t=new i.Input(t,e,this,n),this.inputList.push(t),t},i.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var i,n=-1,o=e?-1:this.inputList.length,r=0;i=this.inputList[r];r++)if(i.name==t){if(n=r,-1!=o)break}else if(e&&i.name==e&&(o=r,-1!=n))break;if(-1==n)throw Error('Named input "'+t+'" not found.');if(-1==o)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(n,o)}},i.Block.prototype.moveNumberedInputBefore=function(t,e){if(t==e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var i=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,i)},i.Block.prototype.removeInput=function(t,e){for(var n,o=0;n=this.inputList[o];o++)if(n.name==t)return n.type==i.NEXT_STATEMENT&&this.statementInputCount--,n.dispose(),this.inputList.splice(o,1),!0;if(e)return!1;throw Error("Input not found: "+t)},i.Block.prototype.getInput=function(t){for(var e,i=0;e=this.inputList[i];i++)if(e.name==t)return e;return null},i.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},i.Block.prototype.getCommentText=function(){return this.commentModel.text},i.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(i.Events.fire(new i.Events.BlockChange(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},i.Block.prototype.setWarningText=function(t,e){},i.Block.prototype.setMutator=function(t){},i.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},i.Block.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var n=new i.Events.BlockMove(this);this.xy_.translate(t,e),n.recordNew(),i.Events.fire(n)},i.Block.prototype.makeConnection_=function(t){return new i.Connection(this,t)},i.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,i=0;e=this.inputList[i];i++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(i=this.getNextBlock())||i.allInputsFilled(t)},i.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},i.blockRendering={},i.blockRendering.IPathObject=function(t,e){},i.utils.aria={},i.utils.aria.ARIA_PREFIX_="aria-",i.utils.aria.ROLE_ATTRIBUTE_="role",i.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},i.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},i.utils.aria.setRole=function(t,e){t.setAttribute(i.utils.aria.ROLE_ATTRIBUTE_,e)},i.utils.aria.setState=function(t,e,n){Array.isArray(n)&&(n=n.join(" ")),t.setAttribute(i.utils.aria.ARIA_PREFIX_+e,n)},i.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},i.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},i.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},i.Menu.prototype.render=function(t){var e=document.createElement("div");e.className="blocklyMenu goog-menu blocklyNonSelectable",e.tabIndex=0,this.roleName_&&i.utils.aria.setRole(e,this.roleName_),this.element_=e;for(var n,o=0;n=this.menuItems_[o];o++)e.appendChild(n.createDom());this.mouseOverHandler_=i.bindEventWithChecks_(e,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=i.bindEventWithChecks_(e,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=i.bindEventWithChecks_(e,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=i.bindEventWithChecks_(e,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=i.bindEventWithChecks_(e,"keydown",this,this.handleKeyEvent_),t.appendChild(e)},i.Menu.prototype.getElement=function(){return this.element_},i.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),i.utils.dom.addClass(t,"blocklyFocused"))},i.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),i.utils.dom.removeClass(t,"blocklyFocused"))},i.Menu.prototype.setRole=function(t){this.roleName_=t},i.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(i.unbindEvent_(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(i.unbindEvent_(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(i.unbindEvent_(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(i.unbindEvent_(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(i.unbindEvent_(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var t,e=0;t=this.menuItems_[e];e++)t.dispose();this.element_=null},i.Menu.prototype.getMenuItem_=function(t){for(var e=this.getElement();t&&t!=e;){if(i.utils.dom.hasClass(t,"blocklyMenuItem"))for(var n,o=0;n=this.menuItems_[o];o++)if(n.getElement()==t)return n;t=t.parentElement}return null},i.Menu.prototype.setHighlighted=function(t){var e=this.highlightedItem_;e&&(e.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,e=this.getElement(),i.utils.style.scrollIntoContainerView(t.getElement(),e),i.utils.aria.setState(e,i.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},i.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},i.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},i.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},i.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},i.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var i;i=this.menuItems_[t];){if(i.isEnabled()){this.setHighlighted(i);break}t+=e}},i.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},i.Menu.prototype.handleClick_=function(t){var e=this.openingCoords;if(this.openingCoords=null,e&&"number"==typeof t.clientX){var n=new i.utils.Coordinate(t.clientX,t.clientY);if(1>i.utils.Coordinate.distance(e,n))return}(t=this.getMenuItem_(t.target))&&t.performAction()},i.Menu.prototype.handleMouseEnter_=function(t){this.focus()},i.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},i.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var e=this.highlightedItem_;switch(t.keyCode){case i.utils.KeyCodes.ENTER:case i.utils.KeyCodes.SPACE:e&&e.performAction();break;case i.utils.KeyCodes.UP:this.highlightPrevious();break;case i.utils.KeyCodes.DOWN:this.highlightNext();break;case i.utils.KeyCodes.PAGE_UP:case i.utils.KeyCodes.HOME:this.highlightFirst_();break;case i.utils.KeyCodes.PAGE_DOWN:case i.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},i.Menu.prototype.getSize=function(){var t=this.getElement(),e=i.utils.style.getSize(t);return e.height=t.scrollHeight,e},i.MenuItem=function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},i.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=i.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var e=document.createElement("div");if(e.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",e.appendChild(n)}return n=this.content_,"string"==typeof this.content_&&(n=document.createTextNode(this.content_)),e.appendChild(n),t.appendChild(e),this.roleName_&&i.utils.aria.setRole(t,this.roleName_),i.utils.aria.setState(t,i.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),i.utils.aria.setState(t,i.utils.aria.State.DISABLED,!this.enabled_),t},i.MenuItem.prototype.dispose=function(){this.element_=null},i.MenuItem.prototype.getElement=function(){return this.element_},i.MenuItem.prototype.getId=function(){return this.element_.id},i.MenuItem.prototype.getValue=function(){return this.value_},i.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},i.MenuItem.prototype.setRole=function(t){this.roleName_=t},i.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},i.MenuItem.prototype.setChecked=function(t){this.checked_=t},i.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var e=this.getElement();e&&this.isEnabled()&&(t?(i.utils.dom.addClass(e,"blocklyMenuItemHighlight"),i.utils.dom.addClass(e,"goog-menuitem-highlight")):(i.utils.dom.removeClass(e,"blocklyMenuItemHighlight"),i.utils.dom.removeClass(e,"goog-menuitem-highlight")))},i.MenuItem.prototype.isEnabled=function(){return this.enabled_},i.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},i.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},i.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)},i.ContextMenu={},i.ContextMenu.currentBlock=null,i.ContextMenu.menu_=null,i.ContextMenu.show=function(t,e,n){if(i.WidgetDiv.show(i.ContextMenu,n,i.ContextMenu.dispose),e.length){var o=i.ContextMenu.populate_(e,n);i.ContextMenu.menu_=o,i.ContextMenu.position_(o,t,n),setTimeout((function(){o.focus()}),1),i.ContextMenu.currentBlock=null}else i.ContextMenu.hide()},i.ContextMenu.populate_=function(t,e){var n=new i.Menu;n.setRole(i.utils.aria.Role.MENU);for(var o,r=0;o=t[r];r++){var s=new i.MenuItem(o.text);s.setRightToLeft(e),s.setRole(i.utils.aria.Role.MENUITEM),n.addChild(s),s.setEnabled(o.enabled),o.enabled&&s.onAction((function(t){i.ContextMenu.hide(),this.callback(this.scope)}),o)}return n},i.ContextMenu.position_=function(t,e,n){var o=i.utils.getViewportBBox();e=new i.utils.Rect(e.clientY+o.top,e.clientY+o.top,e.clientX+o.left,e.clientX+o.left),i.ContextMenu.createWidget_(t);var r=t.getSize();n&&(e.left+=r.width,e.right+=r.width,o.left+=r.width,o.right+=r.width),i.WidgetDiv.positionWithAnchor(o,e,r,n),t.focus()},i.ContextMenu.createWidget_=function(t){t.render(i.WidgetDiv.DIV);var e=t.getElement();i.utils.dom.addClass(e,"blocklyContextMenu"),i.bindEventWithChecks_(e,"contextmenu",null,i.utils.noEvent),t.focus()},i.ContextMenu.hide=function(){i.WidgetDiv.hideIfOwner(i.ContextMenu),i.ContextMenu.currentBlock=null},i.ContextMenu.dispose=function(){i.ContextMenu.menu_&&(i.ContextMenu.menu_.dispose(),i.ContextMenu.menu_=null)},i.ContextMenu.callbackFactory=function(t,e){return function(){i.Events.disable();try{var n=i.Xml.domToBlock(e,t.workspace),o=t.getRelativeToSurfaceXY();o.x=t.RTL?o.x-i.SNAP_RADIUS:o.x+i.SNAP_RADIUS,o.y+=2*i.SNAP_RADIUS,n.moveBy(o.x,o.y)}finally{i.Events.enable()}i.Events.isEnabled()&&!n.isShadow()&&i.Events.fire(new i.Events.BlockCreate(n)),n.select()}},i.ContextMenu.commentDeleteOption=function(t){return{text:i.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){i.Events.setGroup(!0),t.dispose(!0,!0),i.Events.setGroup(!1)}}},i.ContextMenu.commentDuplicateOption=function(t){return{text:i.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){i.duplicate(t)}}},i.ContextMenu.workspaceCommentOption=function(t,e){if(!i.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var n={enabled:!i.utils.userAgent.IE};return n.text=i.Msg.ADD_COMMENT,n.callback=function(){var n=new i.WorkspaceCommentSvg(t,i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,i.WorkspaceCommentSvg.DEFAULT_SIZE,i.WorkspaceCommentSvg.DEFAULT_SIZE),o=t.getInjectionDiv().getBoundingClientRect();o=new i.utils.Coordinate(e.clientX-o.left,e.clientY-o.top);var r=t.getOriginOffsetInPixels();(o=i.utils.Coordinate.difference(o,r)).scale(1/t.scale),n.moveBy(o.x,o.y),t.rendered&&(n.initSvg(),n.render(),n.select())},n},i.ContextMenuItems={},i.ContextMenuItems.registerUndo=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},i.ContextMenuItems.registerRedo=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},i.ContextMenuItems.registerCleanup=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},i.ContextMenuItems.toggleOption_=function(t,e){for(var i=0,n=0;n<e.length;n++)for(var o=e[n];o;)setTimeout(o.setCollapsed.bind(o,t),i),o=o.getNextBlock(),i+=10},i.ContextMenuItems.registerCollapse=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var i=t[e];i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){i.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},i.ContextMenuItems.registerExpand=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var i=t[e];i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){i.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},i.ContextMenuItems.addDeletableBlocks_=function(t,e){if(t.isDeletable())Array.prototype.push.apply(e,t.getDescendants(!1));else{t=t.getChildren(!1);for(var n=0;n<t.length;n++)i.ContextMenuItems.addDeletableBlocks_(t[n],e)}},i.ContextMenuItems.getDeletableBlocks_=function(t){var e=[];t=t.getTopBlocks(!0);for(var n=0;n<t.length;n++)i.ContextMenuItems.addDeletableBlocks_(t[n],e);return e},i.ContextMenuItems.deleteNext_=function(t,e){i.Events.setGroup(e);var n=t.shift();n&&(n.workspace?(n.dispose(!1,!0),setTimeout(i.ContextMenuItems.deleteNext_,10,t,e)):i.ContextMenuItems.deleteNext_(t,e)),i.Events.setGroup(!1)},i.ContextMenuItems.registerDeleteAll=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=i.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?i.Msg.DELETE_BLOCK:i.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<i.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var e=i.ContextMenuItems.getDeletableBlocks_(t.workspace),n=i.utils.genUid();2>e.length?i.ContextMenuItems.deleteNext_(e,n):i.confirm(i.Msg.DELETE_ALL_BLOCKS.replace("%1",e.length),(function(t){t&&i.ContextMenuItems.deleteNext_(e,n)}))}},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},i.ContextMenuItems.registerWorkspaceOptions_=function(){i.ContextMenuItems.registerUndo(),i.ContextMenuItems.registerRedo(),i.ContextMenuItems.registerCleanup(),i.ContextMenuItems.registerCollapse(),i.ContextMenuItems.registerExpand(),i.ContextMenuItems.registerDeleteAll()},i.ContextMenuItems.registerDuplicate=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&i.duplicate(t.block)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},i.ContextMenuItems.registerComment=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?i.Msg.REMOVE_COMMENT:i.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,i.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},i.ContextMenuItems.registerInline=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?i.Msg.EXTERNAL_INPUTS:i.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var e=1;e<t.inputList.length;e++)if(t.inputList[e-1].type!=i.NEXT_STATEMENT&&t.inputList[e].type!=i.NEXT_STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},i.ContextMenuItems.registerCollapseExpandBlock=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?i.Msg.EXPAND_BLOCK:i.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},i.ContextMenuItems.registerDisable=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?i.Msg.DISABLE_BLOCK:i.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var e=i.Events.getGroup();e||i.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),e||i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},i.ContextMenuItems.registerDelete=function(){i.ContextMenuRegistry.registry.register({displayText:function(t){var e=t.block;return t=e.getDescendants(!1).length,(e=e.getNextBlock())&&(t-=e.getDescendants(!1).length),1==t?i.Msg.DELETE_BLOCK:i.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){i.Events.setGroup(!0),t.block.dispose(!0,!0),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},i.ContextMenuItems.registerHelp=function(){i.ContextMenuRegistry.registry.register({displayText:function(){return i.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},i.ContextMenuItems.registerBlockOptions_=function(){i.ContextMenuItems.registerDuplicate(),i.ContextMenuItems.registerComment(),i.ContextMenuItems.registerInline(),i.ContextMenuItems.registerCollapseExpandBlock(),i.ContextMenuItems.registerDisable(),i.ContextMenuItems.registerDelete(),i.ContextMenuItems.registerHelp()},i.ContextMenuItems.registerDefaultOptions=function(){i.ContextMenuItems.registerWorkspaceOptions_(),i.ContextMenuItems.registerBlockOptions_()},i.ContextMenuRegistry=function(){i.ContextMenuRegistry.registry=this,this.registry_={},i.ContextMenuItems.registerDefaultOptions()},i.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},i.ContextMenuRegistry.registry=null,i.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with id "'+t.id+'" is already registered.');this.registry_[t.id]=t},i.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with id "'+t+'" not found.');delete this.registry_[t]},i.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]?this.registry_[t]:null},i.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var i=[],n=this.registry_;return Object.keys(n).forEach((function(o){if(o=n[o],t==o.scopeType){var r=o.preconditionFn(e);"hidden"!=r&&(o={text:"function"==typeof o.displayText?o.displayText(e):o.displayText,enabled:"enabled"==r,callback:o.callback,scope:e,weight:o.weight},i.push(o))}})),i.sort((function(t,e){return t.weight-e.weight})),i},new i.ContextMenuRegistry,i.Events.Selected=function(t,e,n){i.Events.Selected.superClass_.constructor.call(this,n),this.oldElementId=t,this.newElementId=e},i.utils.object.inherits(i.Events.Selected,i.Events.UiBase),i.Events.Selected.prototype.type=i.Events.SELECTED,i.Events.Selected.prototype.toJson=function(){var t=i.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},i.Events.Selected.prototype.fromJson=function(t){i.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},i.registry.register(i.registry.Type.EVENT,i.Events.SELECTED,i.Events.Selected),i.RenderedConnection=function(t,e){i.RenderedConnection.superClass_.constructor.call(this,t,e),this.db_=t.workspace.connectionDBList[e],this.dbOpposite_=t.workspace.connectionDBList[i.OPPOSITE_TYPE[e]],this.offsetInBlock_=new i.utils.Coordinate(0,0),this.trackedState_=i.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},i.utils.object.inherits(i.RenderedConnection,i.Connection),i.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},i.RenderedConnection.prototype.dispose=function(){i.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==i.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},i.RenderedConnection.prototype.getSourceBlock=function(){return i.RenderedConnection.superClass_.getSourceBlock.call(this)},i.RenderedConnection.prototype.targetBlock=function(){return i.RenderedConnection.superClass_.targetBlock.call(this)},i.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},i.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var n=!1;if(!e.isMovable()){if(!(e=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,n=!0}var o=i.selected==e;o||e.addSelect();var r=t.x+i.SNAP_RADIUS+Math.floor(Math.random()*i.BUMP_RANDOMNESS)-this.x,s=t.y+i.SNAP_RADIUS+Math.floor(Math.random()*i.BUMP_RANDOMNESS)-this.y;n&&(s=-s),e.RTL&&(r=t.x-i.SNAP_RADIUS-Math.floor(Math.random()*i.BUMP_RANDOMNESS)-this.x),e.moveBy(r,s),o||e.removeSelect()}}},i.RenderedConnection.prototype.moveTo=function(t,e){this.trackedState_==i.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,e),this.trackedState_=i.RenderedConnection.TrackedState.TRACKED):this.trackedState_==i.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,e)),this.x=t,this.y=e},i.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},i.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},i.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},i.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},i.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,e=this.targetConnection.y-this.y;if(0!=t||0!=e){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");o=i.utils.getRelativeXY(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-t)+","+(o.y-e)+")"),n.moveConnections(-t,-e)}},i.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},i.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),e=t.shapeFor(this);this.type==i.INPUT_VALUE||this.type==i.OUTPUT_VALUE?(t=t.TAB_OFFSET_FROM_TOP,e=i.utils.svgPaths.moveBy(0,-t)+i.utils.svgPaths.lineOnAxis("v",t)+e.pathDown+i.utils.svgPaths.lineOnAxis("v",t)):(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS,e=i.utils.svgPaths.moveBy(-t,0)+i.utils.svgPaths.lineOnAxis("h",t)+e.pathLeft+i.utils.svgPaths.lineOnAxis("h",t)),t=this.sourceBlock_.getRelativeToSurfaceXY(),i.Connection.highlightedPath_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},i.RenderedConnection.prototype.unhighlight=function(){i.utils.dom.removeNode(i.Connection.highlightedPath_),delete i.Connection.highlightedPath_},i.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==i.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==i.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=i.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==i.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=i.RenderedConnection.TrackedState.UNTRACKED))},i.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var i=t[e],n=i.getConnections_(!0),o=0;o<n.length;o++)n[o].setTracking(!1);for(i=i.getIcons(),o=0;o<i.length;o++)i[o].setVisible(!1)}},i.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=i.INPUT_VALUE&&this.type!=i.NEXT_STATEMENT)return t;var e=this.targetBlock();if(e){if(e.isCollapsed()){var n=[];e.outputConnection&&n.push(e.outputConnection),e.nextConnection&&n.push(e.nextConnection),e.previousConnection&&n.push(e.previousConnection)}else n=e.getConnections_(!0);for(var o=0;o<n.length;o++)t.push.apply(t,n[o].startTrackingAll());t.length||(t[0]=e)}return t},i.RenderedConnection.prototype.isConnectionAllowed=function(t,e){return i.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>e)&&i.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},i.RenderedConnection.prototype.onFailedConnect=function(t){this.bumpAwayFrom(t)},i.RenderedConnection.prototype.disconnectInternal_=function(t,e){i.RenderedConnection.superClass_.disconnectInternal_.call(this,t,e),t.rendered&&t.render(),e.rendered&&(e.updateDisabled(),e.render(),e.getSvgRoot().style.display="block")},i.RenderedConnection.prototype.respawnShadow_=function(){i.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},i.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},i.RenderedConnection.prototype.connect_=function(t){i.RenderedConnection.superClass_.connect_.call(this,t);var e=this.getSourceBlock();t=t.getSourceBlock();var n=e.rendered,o=t.rendered;n&&e.updateDisabled(),o&&t.updateDisabled(),n&&o&&(this.type==i.NEXT_STATEMENT||this.type==i.PREVIOUS_STATEMENT?t.render():e.render()),(e=e.getInputWithBlock(t))&&(e=e.isVisible(),t.getSvgRoot().style.display=e?"block":"none")},i.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},i.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},i.Marker.prototype.setDrawer=function(t){this.drawer_=t},i.Marker.prototype.getDrawer=function(){return this.drawer_},i.Marker.prototype.getCurNode=function(){return this.curNode_},i.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},i.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},i.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},i.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},i.Cursor=function(){i.Cursor.superClass_.constructor.call(this),this.type="cursor"},i.utils.object.inherits(i.Cursor,i.Marker),i.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==i.ASTNode.types.NEXT||t.getType()==i.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},i.Cursor.prototype.in=function(){var t=this.getCurNode();return t?(t.getType()!=i.ASTNode.types.PREVIOUS&&t.getType()!=i.ASTNode.types.OUTPUT||(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},i.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==i.ASTNode.types.NEXT||t.getType()==i.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},i.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==i.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},i.Cursor.prototype.onBlocklyAction=function(t){if(this.getCurNode()&&this.getCurNode().getType()===i.ASTNode.types.FIELD&&this.getCurNode().getLocation().onBlocklyAction(t))return!0;switch(t.name){case i.navigation.actionNames.PREVIOUS:return this.prev(),!0;case i.navigation.actionNames.OUT:return this.out(),!0;case i.navigation.actionNames.NEXT:return this.next(),!0;case i.navigation.actionNames.IN:return this.in(),!0;default:return!1}},i.BasicCursor=function(){i.BasicCursor.superClass_.constructor.call(this)},i.utils.object.inherits(i.BasicCursor,i.Cursor),i.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},i.BasicCursor.prototype.in=function(){return this.next()},i.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},i.BasicCursor.prototype.out=function(){return this.prev()},i.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var i=t.in()||t.next();return e(i)?i:i?this.getNextNode_(i,e):e(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,e):null},i.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var i=t.prev();return e(i=i?this.getRightMostChild_(i):t.out())?i:i?this.getPreviousNode_(i,e):null},i.BasicCursor.prototype.validNode_=function(t){var e=!1;return(t=t&&t.getType())!=i.ASTNode.types.OUTPUT&&t!=i.ASTNode.types.INPUT&&t!=i.ASTNode.types.FIELD&&t!=i.ASTNode.types.NEXT&&t!=i.ASTNode.types.PREVIOUS&&t!=i.ASTNode.types.WORKSPACE||(e=!0),e},i.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},i.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},i.TabNavigateCursor=function(){i.TabNavigateCursor.superClass_.constructor.call(this)},i.utils.object.inherits(i.TabNavigateCursor,i.BasicCursor),i.TabNavigateCursor.prototype.validNode_=function(t){var e=!1,n=t&&t.getType();return t&&(t=t.getLocation(),n==i.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(e=!0)),e},i.BlockSvg=function(t,e,n){this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=i.utils.is3dSupported()&&!!t.getBlockDragSurface();var o=this.pathObject.svgPath;o.tooltip=this,i.Tooltip.bindMouseEvents(o),i.BlockSvg.superClass_.constructor.call(this,t,e,n),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:i.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},i.utils.object.inherits(i.BlockSvg,i.Block),i.BlockSvg.prototype.height=0,i.BlockSvg.prototype.width=0,i.BlockSvg.prototype.warningTextDb_=null,i.BlockSvg.INLINE=-1,i.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",i.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var t,e=0;t=this.inputList[e];e++)t.init();for(t=this.getIcons(),e=0;e<t.length;e++)t[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),e=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!e||i.bindEventWithChecks_(e,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,e.parentNode||this.workspace.getCanvas().appendChild(e)},i.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},i.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},i.BlockSvg.prototype.getColourShadow=function(){return i.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},i.BlockSvg.prototype.getColourBorder=function(){return i.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},i.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(i.selected!=this){var t=null;if(i.selected){t=i.selected.id,i.Events.disable();try{i.selected.unselect()}finally{i.Events.enable()}}t=new i.Events.Selected(t,this.id,this.workspace.id),i.Events.fire(t),i.selected=this,this.addSelect()}},i.BlockSvg.prototype.unselect=function(){if(i.selected==this){var t=new i.Events.Selected(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,i.Events.fire(t),i.selected=null,this.removeSelect()}},i.BlockSvg.prototype.mutator=null,i.BlockSvg.prototype.comment=null,i.BlockSvg.prototype.commentIcon_=null,i.BlockSvg.prototype.warning=null,i.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},i.BlockSvg.prototype.setParent=function(t){var e=this.parentBlock_;if(t!=e){i.utils.dom.startTextWidthCache(),i.BlockSvg.superClass_.setParent.call(this,t),i.utils.dom.stopTextWidthCache();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(n),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-o.x,t.y-o.y)):e&&(this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y)),this.applyColour()}}},i.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,o=this.getSvgRoot();if(o)do{var r=i.utils.getRelativeXY(o);t+=r.x,e+=r.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==o&&(t+=(r=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,e+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getCanvas()&&o!=n);return new i.utils.Coordinate(t,e)},i.BlockSvg.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var n=i.Events.isEnabled();if(n)var o=new i.Events.BlockMove(this);var r=this.getRelativeToSurfaceXY();this.translate(r.x+t,r.y+e),this.moveConnections(t,e),n&&(o.recordNew(),i.Events.fire(o)),this.workspace.resizeContents()},i.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},i.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},i.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},i.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},i.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},i.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},i.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),i=e/2,n=this.getRelativeToSurfaceXY();t=Math.round((n.x-i)/e)*e+i-n.x,e=Math.round((n.y-i)/e)*e+i-n.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},i.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth();if(this.RTL)var n=t.x-e.width,o=t.x;else n=t.x,o=t.x+e.width;return new i.utils.Rect(t.y,t.y+e.height,n,o)},i.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t,e=0;t=this.inputList[e];e++)t.markDirty()},i.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(i.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},i.BlockSvg.prototype.updateCollapsed_=function(){for(var t,e=this.isCollapsed(),n=i.Block.COLLAPSED_INPUT_NAME,o=i.Block.COLLAPSED_FIELD_NAME,r=0;t=this.inputList[r];r++)t.name!=n&&t.setVisible(!e);if(e){for(t=this.getIcons(),r=0;e=t[r];r++)e.setVisible(!1);r=this.toString(i.COLLAPSE_CHARS),(t=this.getField(o))?t.setValue(r):(t=this.getInput(n)||this.appendDummyInput(n)).appendField(new i.FieldLabel(r),o)}else this.removeInput(n)},i.BlockSvg.prototype.tab=function(t,e){var n=new i.TabNavigateCursor;n.setCurNode(i.ASTNode.createFieldNode(t)),t=n.getCurNode(),n.onBlocklyAction({name:e?i.navigation.actionNames.NEXT:i.navigation.actionNames.PREVIOUS}),(e=n.getCurNode())&&e!==t&&(e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(e))},i.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},i.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},i.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=i.ContextMenuRegistry.registry.getContextMenuOptions(i.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},i.BlockSvg.prototype.showContextMenu=function(t){var e=this.generateContextMenu();e&&e.length&&(i.ContextMenu.show(t,e,this.RTL),i.ContextMenu.currentBlock=this)},i.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var i=this.getConnections_(!1),n=0;n<i.length;n++)i[n].moveBy(t,e);for(i=this.getIcons(),n=0;n<i.length;n++)i[n].computeIconLocation();for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].moveConnections(t,e)}},i.BlockSvg.prototype.setDragging=function(t){if(t){var e=this.getSvgRoot();e.translate_="",e.skew_="",i.draggingConnections=i.draggingConnections.concat(this.getConnections_(!0)),i.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else i.draggingConnections=[],i.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(t)},i.BlockSvg.prototype.setMovable=function(t){i.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},i.BlockSvg.prototype.setEditable=function(t){i.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var e=0;e<t.length;e++)t[e].updateEditable()},i.BlockSvg.prototype.setShadow=function(t){i.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},i.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},i.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},i.BlockSvg.prototype.dispose=function(t,e){if(this.workspace){i.Tooltip.dispose(),i.Tooltip.unbindMouseEvents(this.pathObject.svgPath),i.utils.dom.startTextWidthCache();var n=this.workspace;if(i.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),i.ContextMenu.currentBlock==this&&i.ContextMenu.hide(),this.workspace.keyboardAccessibilityMode&&i.navigation.moveCursorOnBlockDelete(this),e&&this.rendered&&(this.unplug(t),i.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}for(e=this.getIcons(),o=0;o<e.length;o++)e[o].dispose();i.BlockSvg.superClass_.dispose.call(this,!!t),i.utils.dom.removeNode(this.svgGroup_),n.resizeContents(),this.svgGroup_=null,i.utils.dom.stopTextWidthCache()}},i.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=i.Xml.blockToDom(this,!0);i.Xml.deleteNext(t);var e=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-e.x:e.x),t.setAttribute("y",e.y),{xml:t,source:this.workspace,typeCounts:i.utils.getBlockTypeCounts(this,!0)}},i.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var i,n=0;i=e.fieldRow[n];n++)i.applyColour()},i.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e,i=0;e=t[i];i++)e.rendered&&e.updateDisabled()},i.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},i.BlockSvg.prototype.setCommentText=function(t){if(!i.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(i.BlockSvg.superClass_.setCommentText.call(this,t),t=null!=t,!!this.commentIcon_==t?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new i.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},i.BlockSvg.prototype.setWarningText=function(t,e){if(!i.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=e||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[n]=setTimeout((function(){r.workspace&&(delete r.warningTextDb_[n],r.setWarningText(t,n))}),100)}else{if(this.isInFlyout&&(t=null),e=!1,"string"==typeof t){o=this.getSurroundParent();for(var s=null;o;)o.isCollapsed()&&(s=o),o=o.getSurroundParent();s&&s.setWarningText(i.Msg.COLLAPSED_WARNINGS_WARNING,i.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new i.Warning(this),e=!0),this.warning.setText(t,n)}else this.warning&&!n?(this.warning.dispose(),e=!0):this.warning&&(e=this.warning.getText(),this.warning.setText("",n),(o=this.warning.getText())||this.warning.dispose(),e=e!=o);e&&this.rendered&&(this.render(),this.bumpNeighbours())}},i.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(i.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},i.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},i.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},i.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},i.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},i.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},i.BlockSvg.prototype.setColour=function(t){i.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},i.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()},i.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),i=e.parentNode,n=i.childNodes;n[n.length-1]!==e&&i.appendChild(e),t=t.getParent()}while(t)},i.BlockSvg.prototype.setPreviousStatement=function(t,e){i.BlockSvg.superClass_.setPreviousStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.setNextStatement=function(t,e){i.BlockSvg.superClass_.setNextStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.setOutput=function(t,e){i.BlockSvg.superClass_.setOutput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.setInputsInline=function(t){i.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.removeInput=function(t,e){return t=i.BlockSvg.superClass_.removeInput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},i.BlockSvg.prototype.moveNumberedInputBefore=function(t,e){i.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},i.BlockSvg.prototype.appendInput_=function(t,e){return t=i.BlockSvg.superClass_.appendInput_.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},i.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var i=this.inputList[e].connection;i&&(i.setTracking(t),(i=i.targetBlock())&&i.setConnectionTracking(t))}},i.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var i;i=this.inputList[t];t++)i.connection&&e.push(i.connection)}return e},i.BlockSvg.prototype.lastConnectionInStack=function(){return i.BlockSvg.superClass_.lastConnectionInStack.call(this)},i.BlockSvg.prototype.getMatchingConnection=function(t,e){return i.BlockSvg.superClass_.getMatchingConnection.call(this,t,e)},i.BlockSvg.prototype.makeConnection_=function(t){return new i.RenderedConnection(this,t)},i.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var e,n=this.getConnections_(!1),o=0;e=n[o];o++){e.isConnected()&&e.isSuperior()&&e.targetBlock().bumpNeighbours();for(var r,s=e.neighbours(i.SNAP_RADIUS),a=0;r=s[a];a++)e.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=t&&(e.isSuperior()?r.bumpAwayFrom(e):e.bumpAwayFrom(r))}}},i.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,e=i.Events.getGroup();setTimeout((function(){i.Events.setGroup(e),t.snapToGrid(),i.Events.setGroup(!1)}),i.BUMP_DELAY/2),setTimeout((function(){i.Events.setGroup(e),t.bumpNeighbours(),i.Events.setGroup(!1)}),i.BUMP_DELAY)},i.BlockSvg.prototype.positionNearConnection=function(t,e){t.type!=i.NEXT_STATEMENT&&t.type!=i.INPUT_VALUE||this.moveBy(e.x-t.x,e.y-t.y)},i.BlockSvg.prototype.getParent=function(){return i.BlockSvg.superClass_.getParent.call(this)},i.BlockSvg.prototype.getRootBlock=function(){return i.BlockSvg.superClass_.getRootBlock.call(this)},i.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,i.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var e=this.getParent();e?e.render(!0):this.workspace.resizeContents()}i.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},i.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(i.navigation.MARKER_NAME).draw()},i.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var i=this.inputList[e].connection;i&&(i.moveToOffset(t),i.isConnected()&&i.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},i.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},i.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},i.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,i=this.getNextBlock();if(i){i=i.getHeightWidth();var n=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=i.height-n,e=Math.max(e,i.width)}return{height:t,width:e}},i.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},i.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},i.blockRendering.useDebugger=!1,i.blockRendering.register=function(t,e){i.registry.register(i.registry.Type.RENDERER,t,e)},i.blockRendering.unregister=function(t){i.registry.unregister(i.registry.Type.RENDERER,t)},i.blockRendering.startDebugger=function(){i.blockRendering.useDebugger=!0},i.blockRendering.stopDebugger=function(){i.blockRendering.useDebugger=!1},i.blockRendering.init=function(t,e,n){return(t=new(i.registry.getClass(i.registry.Type.RENDERER,t))(t)).init(e,n),t},i.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},i.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},i.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var i=this.calculateIndexForYPos_(e);if(i>=this.connections_.length)return-1;e=t.y;for(var n=i;0<=n&&this.connections_[n].y==e;){if(this.connections_[n]==t)return n;n--}for(;i<this.connections_.length&&this.connections_[i].y==e;){if(this.connections_[i]==t)return i;i++}return-1},i.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,i=this.connections_.length;e<i;){var n=Math.floor((e+i)/2);if(this.connections_[n].y<t)e=n+1;else{if(!(this.connections_[n].y>t)){e=n;break}i=n}}return e},i.ConnectionDB.prototype.removeConnection=function(t,e){if(-1==(t=this.findIndexOfConnection_(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},i.ConnectionDB.prototype.getNeighbours=function(t,e){function i(t){var i=o-n[t].x,s=r-n[t].y;return Math.sqrt(i*i+s*s)<=e&&l.push(n[t]),s<e}var n=this.connections_,o=t.x,r=t.y;t=0;for(var s=n.length-2,a=s;t<a;)n[a].y<r?t=a:s=a,a=Math.floor((t+s)/2);var l=[];if(s=t=a,n.length){for(;0<=t&&i(t);)t--;do{s++}while(s<n.length&&i(s))}return l},i.ConnectionDB.prototype.isInYRange_=function(t,e,i){return Math.abs(this.connections_[t].y-e)<=i},i.ConnectionDB.prototype.searchForClosest=function(t,e,i){if(!this.connections_.length)return{connection:null,radius:e};var n=t.y,o=t.x;t.x=o+i.x,t.y=n+i.y;var r=this.calculateIndexForYPos_(t.y);i=null;for(var s,a=e,l=r-1;0<=l&&this.isInYRange_(l,t.y,e);)s=this.connections_[l],this.connectionChecker_.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),l--;for(;r<this.connections_.length&&this.isInYRange_(r,t.y,e);)s=this.connections_[r],this.connectionChecker_.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),r++;return t.x=o,t.y=n,{connection:i,radius:a}},i.ConnectionDB.init=function(t){var e=[];return e[i.INPUT_VALUE]=new i.ConnectionDB(t),e[i.OUTPUT_VALUE]=new i.ConnectionDB(t),e[i.NEXT_STATEMENT]=new i.ConnectionDB(t),e[i.PREVIOUS_STATEMENT]=new i.ConnectionDB(t),e},i.Events.ThemeChange=function(t,e){i.Events.ThemeChange.superClass_.constructor.call(this,e),this.themeName=t},i.utils.object.inherits(i.Events.ThemeChange,i.Events.UiBase),i.Events.ThemeChange.prototype.type=i.Events.THEME_CHANGE,i.Events.ThemeChange.prototype.toJson=function(){var t=i.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},i.Events.ThemeChange.prototype.fromJson=function(t){i.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},i.registry.register(i.registry.Type.EVENT,i.Events.THEME_CHANGE,i.Events.ThemeChange),i.Events.ViewportChange=function(t,e,n,o){i.Events.ViewportChange.superClass_.constructor.call(this,o),this.viewTop=t,this.viewLeft=e,this.scale=n},i.utils.object.inherits(i.Events.ViewportChange,i.Events.UiBase),i.Events.ViewportChange.prototype.type=i.Events.VIEWPORT_CHANGE,i.Events.ViewportChange.prototype.toJson=function(){var t=i.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t},i.Events.ViewportChange.prototype.fromJson=function(t){i.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale},i.registry.register(i.registry.Type.EVENT,i.Events.VIEWPORT_CHANGE,i.Events.ViewportChange),i.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=t},i.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},i.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(!e)throw Error("Marker with id "+t+" does not exist. Can only unregistermarkers that exist.");e.dispose(),delete this.markers_[t]},i.MarkerManager.prototype.getCursor=function(){return this.cursor_},i.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]},i.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},i.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},i.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},i.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},i.MarkerManager.prototype.dispose=function(){for(var t,e=Object.keys(this.markers_),i=0;t=e[i];i++)this.unregisterMarker(t);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},i.ThemeManager=function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},i.ThemeManager.prototype.getTheme=function(){return this.theme_},i.ThemeManager.prototype.setTheme=function(t){var e,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&i.utils.dom.removeClass(t,n.getClassName()),i.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);e=t[n];n++)for(var o,r=0;o=this.componentDB_[e][r];r++){var s=o.element;o=o.propertyName;var a=this.theme_&&this.theme_.getComponentStyle(e);s.style[o]=a||""}i.hideChaff()},i.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},i.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},i.ThemeManager.prototype.subscribe=function(t,e,i){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:i}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[i]=e||""},i.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e,i=Object.keys(this.componentDB_),n=0;e=i[n];n++){for(var o=this.componentDB_[e],r=o.length-1;0<=r;r--)o[r].element===t&&o.splice(r,1);this.componentDB_[e].length||delete this.componentDB_[e]}},i.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},i.TouchGesture=function(t,e){i.TouchGesture.superClass_.constructor.call(this,t,e),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},i.utils.object.inherits(i.TouchGesture,i.Gesture),i.TouchGesture.ZOOM_IN_MULTIPLIER=5,i.TouchGesture.ZOOM_OUT_MULTIPLIER=6,i.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,i.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&i.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},i.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=i.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=i.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=i.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},i.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&i.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&i.longStop_())},i.TouchGesture.prototype.handleMove=function(t){this.isDragging()?i.Touch.shouldHandleEvent(t)&&i.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(i.Touch.isTouchEvent(t)&&this.handleTouchMove(t),i.longStop_()):i.TouchGesture.superClass_.handleMove.call(this,t)},i.TouchGesture.prototype.handleUp=function(t){i.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?i.Touch.shouldHandleEvent(t)&&i.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},i.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},i.TouchGesture.prototype.dispose=function(){i.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&i.unbindEvent_(this.onStartWrapper_)},i.TouchGesture.prototype.handleTouchStart=function(t){var e=i.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[e]=this.getTouchPoint(t),2==(e=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=i.utils.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]]),this.isMultiTouch_=!0,t.preventDefault())},i.TouchGesture.prototype.handleTouchMove=function(t){var e=i.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[e]=this.getTouchPoint(t),e=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===e.length?this.handlePinch_(t):i.TouchGesture.superClass_.handleMove.call(this,t)},i.TouchGesture.prototype.handlePinch_=function(t){var e=Object.keys(this.cachedPoints_);if(e=i.utils.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var n=e-this.previousScale_;n=0<n?n*i.TouchGesture.ZOOM_IN_MULTIPLIER:n*i.TouchGesture.ZOOM_OUT_MULTIPLIER;var o=this.startWorkspace_,r=i.utils.mouseToSvg(t,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(r.x,r.y,n)}this.previousScale_=e,t.preventDefault()},i.TouchGesture.prototype.handleTouchEnd=function(t){t=i.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},i.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new i.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},i.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},i.WorkspaceAudio.prototype.lastSound_=null,i.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},i.WorkspaceAudio.prototype.load=function(t,e){if(t.length){try{var n=new i.utils.global.Audio}catch(t){return}for(var o,r=0;r<t.length;r++){var s=t[r],a=s.match(/\.(\w+)$/);if(a&&n.canPlayType("audio/"+a[1])){o=new i.utils.global.Audio(s);break}}o&&o.play&&(this.SOUNDS_[e]=o)}},i.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var e=this.SOUNDS_[t];e.volume=.01;var n=e.play();if(void 0!==n?n.then(e.pause).catch((function(){})):e.pause(),i.utils.userAgent.IPAD||i.utils.userAgent.IPHONE)break}},i.WorkspaceAudio.prototype.play=function(t,e){var n=this.SOUNDS_[t];n?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<i.SOUND_LIMIT||(this.lastSound_=t,(n=i.utils.userAgent.IPAD||i.utils.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===e?1:e,n.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,e)},i.WorkspaceSvg=function(t,e,n){i.WorkspaceSvg.superClass_.constructor.call(this,t),this.getMetrics=t.getMetrics||i.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=t.setMetrics||i.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.connectionDBList=i.ConnectionDB.init(this.connectionChecker),e&&(this.blockDragSurface_=e),n&&(this.workspaceDragSurface_=n),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&i.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new i.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new i.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new i.MarkerManager(this),this.toolboxCategoryCallbacks_={},this.flyoutButtonCallbacks_={},i.Variables&&i.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(i.VARIABLE_CATEGORY_NAME,i.Variables.flyoutCategory),i.VariablesDynamic&&i.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(i.VARIABLE_DYNAMIC_CATEGORY_NAME,i.VariablesDynamic.flyoutCategory),i.Procedures&&i.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(i.PROCEDURE_CATEGORY_NAME,i.Procedures.flyoutCategory),this.addChangeListener(i.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new i.ThemeManager(this,this.options.theme||i.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=i.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[]},i.utils.object.inherits(i.WorkspaceSvg,i.Workspace),i.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,i.WorkspaceSvg.prototype.rendered=!0,i.WorkspaceSvg.prototype.isVisible_=!0,i.WorkspaceSvg.prototype.isFlyout=!1,i.WorkspaceSvg.prototype.isMutator=!1,i.WorkspaceSvg.prototype.resizesEnabled_=!0,i.WorkspaceSvg.prototype.scrollX=0,i.WorkspaceSvg.prototype.scrollY=0,i.WorkspaceSvg.prototype.startScrollX=0,i.WorkspaceSvg.prototype.startScrollY=0,i.WorkspaceSvg.prototype.dragDeltaXY_=null,i.WorkspaceSvg.prototype.scale=1,i.WorkspaceSvg.prototype.oldScale_=1,i.WorkspaceSvg.prototype.oldTop_=0,i.WorkspaceSvg.prototype.oldLeft_=0,i.WorkspaceSvg.prototype.trashcan=null,i.WorkspaceSvg.prototype.scrollbar=null,i.WorkspaceSvg.prototype.flyout_=null,i.WorkspaceSvg.prototype.toolbox_=null,i.WorkspaceSvg.prototype.currentGesture_=null,i.WorkspaceSvg.prototype.blockDragSurface_=null,i.WorkspaceSvg.prototype.workspaceDragSurface_=null,i.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,i.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,i.WorkspaceSvg.prototype.injectionDiv_=null,i.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,i.WorkspaceSvg.prototype.targetWorkspace=null,i.WorkspaceSvg.prototype.inverseScreenCTM_=null,i.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,i.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},i.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},i.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},i.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},i.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},i.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},i.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},i.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},i.WorkspaceSvg.prototype.setTheme=function(t){t||(t=i.Themes.Classic),this.themeManager_.setTheme(t)},i.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(t){return void 0!==t.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new i.Events.ThemeChange(this.getTheme().name,this.id);i.Events.fire(t)},i.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e,i=0;e=t[i];i++){var n=e.getStyleName();n&&(e.setStyle(n),e.mutator&&e.mutator.updateBlockStyle())}},i.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},i.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},i.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},i.WorkspaceSvg.prototype.getSvgXY=function(t){var e=0,n=0,o=1;(i.utils.dom.containsNode(this.getCanvas(),t)||i.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(o=this.scale);do{var r=i.utils.getRelativeXY(t);t!=this.getCanvas()&&t!=this.getBubbleCanvas()||(o=1),e+=r.x*o,n+=r.y*o,t=t.parentNode}while(t&&t!=this.getParentSvg());return new i.utils.Coordinate(e,n)},i.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return i.utils.getInjectionDivXY_(this.getCanvas())},i.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},i.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},i.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},i.WorkspaceSvg.prototype.createDom=function(t){if(this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(i.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),i.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories){if(!i.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new(i.registry.getClassFromOptions(i.registry.Type.TOOLBOX,this.options))(this)}return this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.markerManager_.setCursor(new i.Cursor),this.markerManager_.registerMarker(i.navigation.MARKER_NAME,new i.Marker),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},i.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(i.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),i.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&i.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(i.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},i.WorkspaceSvg.prototype.newBlock=function(t,e){return new i.BlockSvg(this,t,e)},i.WorkspaceSvg.prototype.addTrashcan=function(){if(!i.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new i.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},i.WorkspaceSvg.prototype.addZoomControls=function(){if(!i.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new i.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},i.WorkspaceSvg.prototype.addFlyout=function(t){var e=new i.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides});if(e.toolboxPosition=this.options.toolboxPosition,this.horizontalLayout){if(!i.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new i.HorizontalFlyout(e)}else{if(!i.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new i.VerticalFlyout(e)}return this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},i.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},i.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},i.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},i.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},i.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},i.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=i.utils.getDocumentScroll();i.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},i.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},i.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},i.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},i.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(i.Events.isEnabled()){var t=this.scale,e=-this.scrollY,n=-this.scrollX;t==this.oldScale_&&1>Math.abs(e-this.oldTop_)&&1>Math.abs(n-this.oldLeft_)||(this.oldScale_=t,this.oldTop_=e,this.oldLeft_=n,t=new i.Events.ViewportChange(e,n,t,this.id),i.Events.fire(t))}},i.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var i="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",i),this.svgBubbleCanvas_.setAttribute("transform",i)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},i.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},i.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,e=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=i.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,e,n,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y)}},i.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},i.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},i.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var e=(t=this.getAllBlocks(!1)).length-1;0<=e;e--)t[e].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else i.hideChaff(!0)},i.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},i.WorkspaceSvg.prototype.highlightBlock=function(t,e){if(void 0===e){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=t?this.getBlockById(t):null)&&((t=void 0===e||e)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):i.utils.arrayRemove(this.highlightedBlocks_,n),n.setHighlighted(t))},i.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},i.WorkspaceSvg.prototype.pasteBlock_=function(t){i.Events.disable();try{var e=i.Xml.domToBlock(t,this),n=this.getMarker(i.navigation.MARKER_NAME).getCurNode();if(this.keyboardAccessibilityMode&&n&&n.isConnection()){var o=n.getLocation();return void i.navigation.insertBlock(e,o)}var r=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(s)){this.RTL&&(r=-r);do{t=!1;var a,l=this.getAllBlocks(!1);for(n=0;a=l[n];n++){var c=a.getRelativeToSurfaceXY();if(1>=Math.abs(r-c.x)&&1>=Math.abs(s-c.y)){t=!0;break}}if(!t){var d,u=e.getConnections_(!1);for(n=0;d=u[n];n++)if(d.closest(i.SNAP_RADIUS,new i.utils.Coordinate(r,s)).connection){t=!0;break}}t&&(r=this.RTL?r-i.SNAP_RADIUS:r+i.SNAP_RADIUS,s+=2*i.SNAP_RADIUS)}while(t);e.moveBy(r,s)}}finally{i.Events.enable()}i.Events.isEnabled()&&!e.isShadow()&&i.Events.fire(new i.Events.BlockCreate(e)),e.select()},i.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){i.Events.disable();try{var e=i.WorkspaceCommentSvg.fromXml(t,this),n=parseInt(t.getAttribute("x"),10),o=parseInt(t.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),e.moveBy(n+50,o+50))}finally{i.Events.enable()}i.Events.isEnabled()&&i.WorkspaceComment.fireCreateEvent(e),e.select()},i.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},i.WorkspaceSvg.prototype.renameVariableById=function(t,e){i.WorkspaceSvg.superClass_.renameVariableById.call(this,t,e),this.refreshToolboxSelection()},i.WorkspaceSvg.prototype.deleteVariableById=function(t){i.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},i.WorkspaceSvg.prototype.createVariable=function(t,e,n){return t=i.WorkspaceSvg.superClass_.createVariable.call(this,t,e,n),this.refreshToolboxSelection(),t},i.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_&&"function"==typeof this.toolbox_.getClientRect?this.toolbox_.getClientRect():null},i.WorkspaceSvg.prototype.isDeleteArea=function(t){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(t.clientX,t.clientY)?i.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(t.clientX,t.clientY)?i.DELETE_AREA_TOOLBOX:i.DELETE_AREA_NONE},i.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},i.WorkspaceSvg.prototype.startDrag=function(t,e){(t=i.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=i.utils.Coordinate.difference(e,t)},i.WorkspaceSvg.prototype.moveDrag=function(t){return(t=i.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,i.utils.Coordinate.sum(this.dragDeltaXY_,t)},i.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},i.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},i.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},i.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},i.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(i.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var e=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(e||n){var o=i.utils.getScrollDeltaPixels(t);!e||!t.ctrlKey&&n?(e=this.scrollX-o.x,n=this.scrollY-o.y,t.shiftKey&&!o.x&&(e=this.scrollX-o.y,n=this.scrollY),this.scroll(e,n)):(o=-o.y/50,e=i.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(e.x,e.y,o)),t.preventDefault()}}},i.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new i.utils.Rect(0,0,0,0);for(var e=t[0].getBoundingRectangle(),n=1;n<t.length;n++){var o=t[n].getBoundingRectangle();o.top<e.top&&(e.top=o.top),o.bottom>e.bottom&&(e.bottom=o.bottom),o.left<e.left&&(e.left=o.left),o.right>e.right&&(e.right=o.right)}return e},i.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),i.Events.setGroup(!0);for(var t,e=this.getTopBlocks(!0),n=0,o=0;t=e[o];o++)if(t.isMovable()){var r=t.getRelativeToSurfaceXY();t.moveBy(-r.x,n-r.y),t.snapToGrid(),n=t.getRelativeToSurfaceXY().y+t.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}i.Events.setGroup(!1),this.setResizesEnabled(!0)},i.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var e=i.ContextMenuRegistry.registry.getContextMenuOptions(i.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(e,t),i.ContextMenu.show(t,e,this.RTL)}},i.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=i.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(i.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},i.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(i.mainWorkspace=this,this.setBrowserFocus())},i.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(t){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},i.WorkspaceSvg.prototype.zoom=function(t,e,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);var n=this.scale*i;if(this.scale!=n){n>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:n<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var o=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=t,r.y=e,t=(r=r.matrixTransform(o.inverse())).x,e=r.y,o=o.translate(t*(1-i),e*(1-i)).scale(i),this.scrollX=o.e,this.scrollY=o.f,this.setScale(n)}},i.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var i=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else i=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(i,e,t)},i.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),e=t.viewWidth;t=t.viewHeight;var n=this.getBlocksBoundingBox(),o=n.right-n.left;if(n=n.bottom-n.top,o){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),n+=this.flyout_.getHeight()/this.scale):(e+=this.flyout_.getWidth(),o+=this.flyout_.getWidth()/this.scale)),e/=o,t/=n,i.Events.disable();try{this.setScale(Math.min(e,t)),this.scrollCenter()}finally{i.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},i.WorkspaceSvg.prototype.beginCanvasTransition=function(){i.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),i.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},i.WorkspaceSvg.prototype.endCanvasTransition=function(){i.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),i.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},i.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.contentWidth-t.viewWidth)/2,i=(t.contentHeight-t.viewHeight)/2;e=-e-t.contentLeft,i=-i-t.contentTop,this.scroll(e,i)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},i.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),i=t.getHeightWidth(),n=this.scale;t=(e.x+(this.RTL?-1:1)*i.width/2)*n,e=(e.y+i.height/2)*n,i=this.getMetrics(),this.scroll(-(t-i.viewWidth/2),-(e-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},i.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,i.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(t),this.scrollbar.vScroll.resizeViewVertical(t)):(this.scrollbar.hScroll.resizeContentHorizontal(t),this.scrollbar.vScroll.resizeContentVertical(t)))},i.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},i.WorkspaceSvg.prototype.scroll=function(t,e){i.hideChaff(!0);var n=this.getMetrics(),o=n.contentWidth+n.contentLeft-n.viewWidth,r=n.contentHeight+n.contentTop-n.viewHeight;t=Math.min(t,-n.contentLeft),e=Math.min(e,-n.contentTop),t=Math.max(t,-o),e=Math.max(e,-r),this.scrollX=t,this.scrollY=e,this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(t+n.contentLeft)*this.scrollbar.hScroll.ratio),this.scrollbar.vScroll.setHandlePosition(-(e+n.contentTop)*this.scrollbar.vScroll.ratio)),t+=n.absoluteLeft,e+=n.absoluteTop,this.translate(t,e)},i.WorkspaceSvg.getDimensionsPx_=function(t){var e=0,n=0;return t&&(e=t.getWidth(),n=t.getHeight()),new i.utils.Size(e,n)},i.WorkspaceSvg.getContentDimensions_=function(t,e){return t.isContentBounded()?i.WorkspaceSvg.getContentDimensionsBounded_(t,e):i.WorkspaceSvg.getContentDimensionsExact_(t)},i.WorkspaceSvg.getContentDimensionsExact_=function(t){var e=t.getBlocksBoundingBox(),i=t.scale;t=e.top*i;var n=e.bottom*i,o=e.left*i;return{top:t,bottom:n,left:o,right:e=e.right*i,width:e-o,height:n-t}},i.WorkspaceSvg.getContentDimensionsBounded_=function(t,e){t=i.WorkspaceSvg.getContentDimensionsExact_(t);var n=e.width,o=n/2,r=(e=e.height)/2,s=Math.min(t.left-o,t.right-n),a=Math.min(t.top-r,t.bottom-e);return{left:s,top:a,height:Math.max(t.bottom+r,t.top+e)-a,width:Math.max(t.right+o,t.left+n)-s}},i.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var t=i.WorkspaceSvg.getDimensionsPx_(this.toolbox_),e=i.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=i.svgSize(this.getParentSvg()),o={height:n.height,width:n.width};this.toolbox_?this.toolboxPosition==i.TOOLBOX_AT_TOP||this.toolboxPosition==i.TOOLBOX_AT_BOTTOM?o.height-=t.height:this.toolboxPosition!=i.TOOLBOX_AT_LEFT&&this.toolboxPosition!=i.TOOLBOX_AT_RIGHT||(o.width-=t.width):this.flyout_&&(this.toolboxPosition==i.TOOLBOX_AT_TOP||this.toolboxPosition==i.TOOLBOX_AT_BOTTOM?o.height-=e.height:this.toolboxPosition!=i.TOOLBOX_AT_LEFT&&this.toolboxPosition!=i.TOOLBOX_AT_RIGHT||(o.width-=e.width));var r=i.WorkspaceSvg.getContentDimensions_(this,o),s=0;this.toolbox_&&this.toolboxPosition==i.TOOLBOX_AT_LEFT?s=t.width:this.flyout_&&this.toolboxPosition==i.TOOLBOX_AT_LEFT&&(s=e.width);var a=0;return this.toolbox_&&this.toolboxPosition==i.TOOLBOX_AT_TOP?a=t.height:this.flyout_&&this.toolboxPosition==i.TOOLBOX_AT_TOP&&(a=e.height),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:o.height,viewWidth:o.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:a,absoluteLeft:s,svgHeight:n.height,svgWidth:n.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:this.toolboxPosition,flyoutWidth:e.width,flyoutHeight:e.height}},i.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-e.contentWidth*t.x-e.contentLeft),"number"==typeof t.y&&(this.scrollY=-e.contentHeight*t.y-e.contentTop),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},i.WorkspaceSvg.prototype.getBlockById=function(t){return i.WorkspaceSvg.superClass_.getBlockById.call(this,t)},i.WorkspaceSvg.prototype.getTopBlocks=function(t){return i.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},i.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),i.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},i.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),i.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},i.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),i.WorkspaceSvg.superClass_.addTopComment.call(this,t)},i.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),i.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},i.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},i.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){i.utils.arrayRemove(this.topBoundedElements_,t)},i.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},i.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},i.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),i.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},i.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},i.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},i.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},i.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},i.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},i.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},i.WorkspaceSvg.prototype.getGesture=function(t){var e="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,n=this.currentGesture_;return n?e&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:e?this.currentGesture_=new i.TouchGesture(t,this):null},i.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},i.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},i.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},i.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},i.inject=function(t,e){if(i.checkBlockColourConstants(),i.shadowRoot=e.shadowRoot,i.parentContainer=e.shadowRoot,"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!i.utils.dom.containsNode(i.shadowRoot||document,t))throw Error("Error: container is not in current document.");e=new i.Options(e||{});var n=document.createElement("div");n.className="injectionDiv",n.tabIndex=0,i.utils.aria.setState(n,i.utils.aria.State.LABEL,i.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(n),t=i.createDom_(n,e);var o=new i.BlockDragSurfaceSvg(n),r=new i.WorkspaceDragSurfaceSvg(n),s=i.createMainWorkspace_(t,e,o,r);return i.init_(s),i.mainWorkspace=s,i.svgResize(s),n.addEventListener("focusin",(function(){i.mainWorkspace=s})),s},i.createDom_=function(t,e){t.setAttribute("dir","LTR"),i.Css.inject(e.hasCss,e.pathToMedia),t=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{xmlns:i.utils.dom.SVG_NS,"xmlns:html":i.utils.dom.HTML_NS,"xmlns:xlink":i.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var n=i.utils.dom.createSvgElement(i.utils.Svg.DEFS,{},t),o=String(Math.random()).substring(2);return e.gridPattern=i.Grid.createDom(o,e.gridOptions,n),t},i.createMainWorkspace_=function(t,e,n,o){e.parentWorkspace=null;var r=new i.WorkspaceSvg(e,n,o);return e=r.options,r.scale=e.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground")),i.utils.dom.addClass(r.getInjectionDiv(),r.getRenderer().getClassName()),i.utils.dom.addClass(r.getInjectionDiv(),r.getTheme().getClassName()),!e.hasCategories&&e.languageTree&&(n=r.addFlyout(i.utils.Svg.SVG),i.utils.dom.insertAfter(n,t)),e.hasTrashcan&&r.addTrashcan(),e.zoomOptions&&e.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),r.translate(0,0),e.readOnly||r.isMovable()||r.addChangeListener((function(t){if(!r.isDragging()&&!r.isMovable()&&-1!=i.Events.BUMP_EVENTS.indexOf(t.type)){var e=Object.create(null),n=r.getMetrics(),o=r.scale;if(e.RTL=r.RTL,e.viewLeft=n.viewLeft/o,e.viewTop=n.viewTop/o,e.viewRight=(n.viewLeft+n.viewWidth)/o,e.viewBottom=(n.viewTop+n.viewHeight)/o,r.isContentBounded()?(n=r.getBlocksBoundingBox(),e.contentLeft=n.left,e.contentTop=n.top,e.contentRight=n.right,e.contentBottom=n.bottom):(e.contentLeft=n.contentLeft/o,e.contentTop=n.contentTop/o,e.contentRight=(n.contentLeft+n.contentWidth)/o,e.contentBottom=(n.contentTop+n.contentHeight)/o),e.contentTop<e.viewTop||e.contentBottom>e.viewBottom||e.contentLeft<e.viewLeft||e.contentRight>e.viewRight){switch(n=null,t&&(n=i.Events.getGroup(),i.Events.setGroup(t.group)),t.type){case i.Events.BLOCK_CREATE:case i.Events.BLOCK_MOVE:var s=r.getBlockById(t.blockId);s&&(s=s.getRootBlock());break;case i.Events.COMMENT_CREATE:case i.Events.COMMENT_MOVE:s=r.getCommentById(t.commentId)}if(s){(o=s.getBoundingRectangle()).height=o.bottom-o.top,o.width=o.right-o.left;var a=e.viewTop,l=e.viewBottom-o.height;l=Math.max(a,l),a=i.utils.math.clamp(a,o.top,l)-o.top,l=e.viewLeft;var c=e.viewRight-o.width;e.RTL?l=Math.min(c,l):c=Math.max(l,c),e=i.utils.math.clamp(l,o.left,c)-o.left,s.moveBy(e,a)}t&&(!t.group&&s&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==n&&i.Events.setGroup(n))}}})),i.svgResize(r),i.WidgetDiv.createDom(),i.DropDownDiv.createDom(),i.Tooltip.createDom(),r},i.init_=function(t){var e=t.options,n=t.getParentSvg();if(i.bindEventWithChecks_(n.parentNode,"contextmenu",null,(function(t){i.utils.isTargetInput(t)||t.preventDefault()})),n=i.bindEventWithChecks_(window,"resize",null,(function(){i.hideChaff(!0),i.svgResize(t)})),t.setResizeHandlerWrapper(n),i.inject.bindDocumentEvents_(),e.languageTree){n=t.getToolbox();var o=t.getFlyout(!0);n?n.init():o&&(o.init(t),o.show(e.languageTree),"function"==typeof o.scrollToStart&&o.scrollToStart())}n=i.Scrollbar.scrollbarThickness,e.hasTrashcan&&(n=t.trashcan.init(n)),e.zoomOptions&&e.zoomOptions.controls&&t.zoomControls_.init(n),e.moveOptions&&e.moveOptions.scrollbars?(t.scrollbar=new i.ScrollbarPair(t),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),e.hasSounds&&i.inject.loadSounds_(e.pathToMedia,t)},i.inject.bindDocumentEvents_=function(){i.documentEventsBound_||(i.bindEventWithChecks_(document,"scroll",null,(function(){for(var t,e=i.Workspace.getAll(),n=0;t=e[n];n++)t.updateInverseScreenCTM&&t.updateInverseScreenCTM()})),i.bindEventWithChecks_(document,"keydown",null,i.onKeyDown),i.bindEvent_(document,"touchend",null,i.longStop_),i.bindEvent_(document,"touchcancel",null,i.longStop_),i.utils.userAgent.IPAD&&i.bindEventWithChecks_(window,"orientationchange",document,(function(){i.svgResize(i.getMainWorkspace())}))),i.documentEventsBound_=!0},i.inject.loadSounds_=function(t,e){var n=e.getAudioManager();n.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),n.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),n.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var o=[];t=function(){for(;o.length;)i.unbindEvent_(o.pop());n.preload()},o.push(i.bindEventWithChecks_(document,"mousemove",null,t,!0)),o.push(i.bindEventWithChecks_(document,"touchstart",null,t,!0))},i.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()},i.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",i.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},i.Names.prototype.setVariableMap=function(t){this.variableMap_=t},i.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},i.Names.prototype.getName=function(t,e){if(e==i.VARIABLE_CATEGORY_NAME){var n=this.getNameForUserVariable_(t);n&&(t=n)}n=t.toLowerCase()+"_"+e;var o=e==i.VARIABLE_CATEGORY_NAME||e==i.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return n in this.db_?o+this.db_[n]:(t=this.getDistinctName(t,e),this.db_[n]=t.substr(o.length),t)},i.Names.prototype.getDistinctName=function(t,e){t=this.safeName_(t);for(var n="";this.dbReverse_[t+n]||t+n in this.reservedDict_;)n=n?n+1:2;return t+=n,this.dbReverse_[t]=!0,(e==i.VARIABLE_CATEGORY_NAME||e==i.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},i.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=i.Msg.UNNAMED_KEY||"unnamed",t},i.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},i.Procedures={},i.Procedures.NAME_TYPE=i.PROCEDURE_CATEGORY_NAME,i.Procedures.DEFAULT_ARG="x",i.Procedures.allProcedures=function(t){var e=t.getBlocksByType("procedures_defnoreturn",!1).map((function(t){return t.getProcedureDef()}));return t=t.getBlocksByType("procedures_defreturn",!1).map((function(t){return t.getProcedureDef()})),e.sort(i.Procedures.procTupleComparator_),t.sort(i.Procedures.procTupleComparator_),[e,t]},i.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},i.Procedures.findLegalName=function(t,e){if(e.isInFlyout)return t;for(t=t||i.Msg.UNNAMED_KEY||"unnamed";!i.Procedures.isLegalName_(t,e.workspace,e);){var n=t.match(/^(.*?)(\d+)$/);t=n?n[1]+(parseInt(n[2],10)+1):t+"2"}return t},i.Procedures.isLegalName_=function(t,e,n){return!i.Procedures.isNameUsed(t,e,n)},i.Procedures.isNameUsed=function(t,e,n){e=e.getAllBlocks(!1);for(var o=0;o<e.length;o++)if(e[o]!=n&&e[o].getProcedureDef){var r=e[o].getProcedureDef();if(i.Names.equals(r[0],t))return!0}return!1},i.Procedures.rename=function(t){t=t.trim();var e=i.Procedures.findLegalName(t,this.getSourceBlock()),n=this.getValue();if(n!=t&&n!=e){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<t.length;o++)t[o].renameProcedure&&t[o].renameProcedure(n,e)}return e},i.Procedures.flyoutCategory=function(t){function e(t,e){for(var o=0;o<t.length;o++){var r=t[o][0],s=t[o][1],a=i.utils.xml.createElement("block");a.setAttribute("type",e),a.setAttribute("gap",16);var l=i.utils.xml.createElement("mutation");for(l.setAttribute("name",r),a.appendChild(l),r=0;r<s.length;r++){var c=i.utils.xml.createElement("arg");c.setAttribute("name",s[r]),l.appendChild(c)}n.push(a)}}var n=[];if(i.Blocks.procedures_defnoreturn){var o=i.utils.xml.createElement("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap",16);var r=i.utils.xml.createElement("field");r.setAttribute("name","NAME"),r.appendChild(i.utils.xml.createTextNode(i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(r),n.push(o)}return i.Blocks.procedures_defreturn&&((o=i.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),o.setAttribute("gap",16),(r=i.utils.xml.createElement("field")).setAttribute("name","NAME"),r.appendChild(i.utils.xml.createTextNode(i.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(r),n.push(o)),i.Blocks.procedures_ifreturn&&((o=i.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),o.setAttribute("gap",16),n.push(o)),n.length&&n[n.length-1].setAttribute("gap",24),e((t=i.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),e(t[1],"procedures_callreturn"),n},i.Procedures.updateMutatorFlyout_=function(t){for(var e,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),r=0;e=o[r];r++)n.push(e.getFieldValue("NAME"));o=i.utils.xml.createElement("xml"),(r=i.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(e=i.utils.xml.createElement("field")).setAttribute("name","NAME"),n=i.Variables.generateUniqueNameFromOptions(i.Procedures.DEFAULT_ARG,n),n=i.utils.xml.createTextNode(n),e.appendChild(n),r.appendChild(e),o.appendChild(r),t.updateToolbox(o)},i.Procedures.mutatorOpenListener=function(t){if(t.type==i.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var e=(t=i.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;"procedures_defnoreturn"!=e&&"procedures_defreturn"!=e||(t=t.mutator.getWorkspace(),i.Procedures.updateMutatorFlyout_(t),t.addChangeListener(i.Procedures.mutatorChangeListener_))}},i.Procedures.mutatorChangeListener_=function(t){t.type!=i.Events.BLOCK_CREATE&&t.type!=i.Events.BLOCK_DELETE&&t.type!=i.Events.BLOCK_CHANGE||(t=i.Workspace.getById(t.workspaceId),i.Procedures.updateMutatorFlyout_(t))},i.Procedures.getCallers=function(t,e){var n=[];e=e.getAllBlocks(!1);for(var o=0;o<e.length;o++)if(e[o].getProcedureCall){var r=e[o].getProcedureCall();r&&i.Names.equals(r,t)&&n.push(e[o])}return n},i.Procedures.mutateCallers=function(t){var e,n=i.Events.recordUndo,o=t.getProcedureDef()[0],r=t.mutationToDom(!0);for(t=i.Procedures.getCallers(o,t.workspace),o=0;e=t[o];o++){var s=e.mutationToDom();s=s&&i.Xml.domToText(s),e.domToMutation(r);var a=e.mutationToDom();s!=(a=a&&i.Xml.domToText(a))&&(i.Events.recordUndo=!1,i.Events.fire(new i.Events.BlockChange(e,"mutation",null,s,a)),i.Events.recordUndo=n)}},i.Procedures.getDefinition=function(t,e){e=e.getTopBlocks(!1);for(var n=0;n<e.length;n++)if(e[n].getProcedureDef){var o=e[n].getProcedureDef();if(o&&i.Names.equals(o[0],t))return e[n]}return null},i.ShortcutItems={},i.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},i.ShortcutItems.registerEscape=function(){var t={name:i.ShortcutItems.names.ESCAPE,preconditionFn:function(t){return!t.options.readOnly},callback:function(){return i.hideChaff(),!0}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.ESC,t.name)},i.ShortcutItems.registerDelete=function(){var t={name:i.ShortcutItems.names.DELETE,preconditionFn:function(t){return!t.options.readOnly&&i.selected&&i.selected.isDeletable()},callback:function(t,e){return e.preventDefault(),!i.Gesture.inProgress()&&(i.deleteBlock(i.selected),!0)}};i.ShortcutRegistry.registry.register(t),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.DELETE,t.name),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.BACKSPACE,t.name)},i.ShortcutItems.registerCopy=function(){var t={name:i.ShortcutItems.names.COPY,preconditionFn:function(t){return!t.options.readOnly&&!i.Gesture.inProgress()&&i.selected&&i.selected.isDeletable()&&i.selected.isMovable()},callback:function(){return i.hideChaff(),i.copy(i.selected),!0}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.ALT]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.META]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.ShortcutItems.registerCut=function(){var t={name:i.ShortcutItems.names.CUT,preconditionFn:function(t){return!t.options.readOnly&&!i.Gesture.inProgress()&&i.selected&&i.selected.isDeletable()&&i.selected.isMovable()&&!i.selected.workspace.isFlyout},callback:function(){return i.copy(i.selected),i.deleteBlock(i.selected),!0}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.ALT]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.META]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.ShortcutItems.registerPaste=function(){var t={name:i.ShortcutItems.names.PASTE,preconditionFn:function(t){return!t.options.readOnly&&!i.Gesture.inProgress()},callback:function(){return i.paste()}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.ALT]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.META]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.ShortcutItems.registerUndo=function(){var t={name:i.ShortcutItems.names.UNDO,preconditionFn:function(t){return!t.options.readOnly&&!i.Gesture.inProgress()},callback:function(t){return i.hideChaff(),t.undo(!1),!0}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.ALT]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.META]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.ShortcutItems.registerRedo=function(){var t={name:i.ShortcutItems.names.REDO,preconditionFn:function(t){return!i.Gesture.inProgress()&&!t.options.readOnly},callback:function(t){return i.hideChaff(),t.undo(!0),!0}};i.ShortcutRegistry.registry.register(t);var e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.SHIFT,i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.SHIFT,i.utils.KeyCodes.ALT]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Z,[i.utils.KeyCodes.SHIFT,i.utils.KeyCodes.META]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.Y,[i.utils.KeyCodes.CTRL]),i.ShortcutRegistry.registry.addKeyMapping(e,t.name)},i.ShortcutItems.registerDefaultShortcuts=function(){i.ShortcutItems.registerEscape(),i.ShortcutItems.registerDelete(),i.ShortcutItems.registerCopy(),i.ShortcutItems.registerCut(),i.ShortcutItems.registerPaste(),i.ShortcutItems.registerUndo(),i.ShortcutItems.registerRedo()},i.ShortcutRegistry=function(){i.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null),i.ShortcutItems.registerDefaultShortcuts(),i.navigation.registerNavigationShortcuts()},i.ShortcutRegistry.modifierKeys={Shift:i.utils.KeyCodes.SHIFT,Control:i.utils.KeyCodes.CTRL,Alt:i.utils.KeyCodes.ALT,Meta:i.utils.KeyCodes.META},i.ShortcutRegistry.prototype.register=function(t,e){if(this.registry_[t.name]&&!e)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},i.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},i.ShortcutRegistry.prototype.addKeyMapping=function(t,e,i){var n=this.keyMap_[t];if(n&&!i)throw Error('Shortcut with name "'+e+'" collides with shortcuts '+n.toString());n&&i?n.unshift(e):this.keyMap_[t]=[e]},i.ShortcutRegistry.prototype.removeKeyMapping=function(t,e,i){var n=this.keyMap_[t];if(!n&&!i)return console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1;var o=n.indexOf(e);return-1<o?(n.splice(o,1),0==n.length&&delete this.keyMap_[t],!0):(i||console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1)},i.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var e in this.keyMap_)this.removeKeyMapping(e,t,!0)},i.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},i.ShortcutRegistry.prototype.getKeyMap=function(){return i.utils.object.deepMerge(Object.create(null),this.keyMap_)},i.ShortcutRegistry.prototype.getRegistry=function(){return i.utils.object.deepMerge(Object.create(null),this.registry_)},i.ShortcutRegistry.prototype.onKeyDown=function(t,e){var i=this.serializeKeyEvent_(e);if(!(i=this.getShortcutNamesByKeyCode(i)))return!1;for(var n,o=0;n=i[o];o++)if((!(n=this.registry_[n]).preconditionFn||n.preconditionFn(t))&&n.callback&&n.callback(t,e,n))return!0;return!1},i.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},i.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var e,i=[];for(e in this.keyMap_)-1<this.keyMap_[e].indexOf(t)&&i.push(e);return i},i.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var e,n="";for(e in i.ShortcutRegistry.modifierKeys)t.getModifierState(e)&&(""!=n&&(n+="+"),n+=e);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},i.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var e,n=i.utils.object.values(i.ShortcutRegistry.modifierKeys),o=0;e=t[o];o++)if(0>n.indexOf(e))throw Error(e+" is not a valid modifier key.")},i.ShortcutRegistry.prototype.createSerializedKey=function(t,e){var n="";if(e)for(var o in this.checkModifiers_(e),i.ShortcutRegistry.modifierKeys)-1<e.indexOf(i.ShortcutRegistry.modifierKeys[o])&&(""!=n&&(n+="+"),n+=o);return""!=n&&t?n=n+"+"+t:t&&(n=t.toString()),n},new i.ShortcutRegistry,i.VariableModel=function(t,e,n,o){this.workspace=t,this.name=e,this.type=n||"",this.id_=o||i.utils.genUid(),i.Events.fire(new i.Events.VarCreate(this))},i.VariableModel.prototype.getId=function(){return this.id_},i.VariableModel.compareByName=function(t,e){return(t=t.name.toLowerCase())<(e=e.name.toLowerCase())?-1:t==e?0:1},i.Variables={},i.Variables.NAME_TYPE=i.VARIABLE_CATEGORY_NAME,i.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var i=0;i<e.length;i++){var n=e[i].getVarModels();if(n)for(var o=0;o<n.length;o++){var r=n[o],s=r.getId();s&&(t[s]=r)}}for(s in e=[],t)e.push(t[s]);return e},i.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},i.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var e,n=Object.create(null),o=0;e=t[o];o++){var r=e.getDeveloperVariables;if(!r&&e.getDeveloperVars&&(r=e.getDeveloperVars,i.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[e.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+e.type+"')"),i.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[e.type]=!0)),r)for(e=r(),r=0;r<e.length;r++)n[e[r]]=!0}return Object.keys(n)},i.Variables.flyoutCategory=function(t){var e=[],n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",(function(t){i.Variables.createVariableButtonHandler(t.getTargetWorkspace())})),e.push(n),t=i.Variables.flyoutCategoryBlocks(t),e.concat(t)},i.Variables.flyoutCategoryBlocks=function(t){var e=[];if(0<(t=t.getVariablesOfType("")).length){var n=t[t.length-1];if(i.Blocks.variables_set){var o=i.utils.xml.createElement("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",i.Blocks.math_change?8:24),o.appendChild(i.Variables.generateVariableFieldDom(n)),e.push(o)}if(i.Blocks.math_change&&((o=i.utils.xml.createElement("block")).setAttribute("type","math_change"),o.setAttribute("gap",i.Blocks.variables_get?20:8),o.appendChild(i.Variables.generateVariableFieldDom(n)),n=i.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(n),e.push(o)),i.Blocks.variables_get){t.sort(i.VariableModel.compareByName),n=0;for(var r;r=t[n];n++)(o=i.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.setAttribute("gap",8),o.appendChild(i.Variables.generateVariableFieldDom(r)),e.push(o)}}return e},i.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",i.Variables.generateUniqueName=function(t){return i.Variables.generateUniqueNameFromOptions(i.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},i.Variables.generateUniqueNameFromOptions=function(t,e){if(!e.length)return t;for(var n=i.Variables.VAR_LETTER_OPTIONS,o="",r=n.indexOf(t);;){for(var s=!1,a=0;a<e.length;a++)if(e[a].toLowerCase()==t){s=!0;break}if(!s)return t;++r==n.length&&(r=0,o=Number(o)+1),t=n.charAt(r)+o}},i.Variables.createVariableButtonHandler=function(t,e,n){var o=n||"",r=function(n){i.Variables.promptName(i.Msg.NEW_VARIABLE_TITLE,n,(function(n){if(n){var s=i.Variables.nameUsedWithAnyType(n,t);if(s){if(s.type==o)var a=i.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",s.name);else a=(a=i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",s.name).replace("%2",s.type);i.alert(a,(function(){r(n)}))}else t.createVariable(n,o),e&&e(n)}else e&&e(null)}))};r("")},i.Variables.createVariable=i.Variables.createVariableButtonHandler,i.Variables.renameVariable=function(t,e,n){var o=function(r){var s=i.Msg.RENAME_VARIABLE_TITLE.replace("%1",e.name);i.Variables.promptName(s,r,(function(r){if(r){var s=i.Variables.nameUsedWithOtherType_(r,e.type,t);s?(s=i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",s.name).replace("%2",s.type),i.alert(s,(function(){o(r)}))):(t.renameVariableById(e.getId(),r),n&&n(r))}else n&&n(null)}))};o("")},i.Variables.promptName=function(t,e,n){i.prompt(t,e,(function(t){t&&((t=t.replace(/[\s\xa0]+/g," ").trim())==i.Msg.RENAME_VARIABLE||t==i.Msg.NEW_VARIABLE)&&(t=null),n(t)}))},i.Variables.nameUsedWithOtherType_=function(t,e,i){i=i.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var n,o=0;n=i[o];o++)if(n.name.toLowerCase()==t&&n.type!=e)return n;return null},i.Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var i,n=0;i=e[n];n++)if(i.name.toLowerCase()==t)return i;return null},i.Variables.generateVariableFieldDom=function(t){var e=i.utils.xml.createElement("field");return e.setAttribute("name","VAR"),e.setAttribute("id",t.getId()),e.setAttribute("variabletype",t.type),t=i.utils.xml.createTextNode(t.name),e.appendChild(t),e},i.Variables.getOrCreateVariablePackage=function(t,e,n,o){var r=i.Variables.getVariable(t,e,n,o);return r||(r=i.Variables.createVariable_(t,e,n,o)),r},i.Variables.getVariable=function(t,e,i,n){var o=t.getPotentialVariableMap(),r=null;if(e&&(!(r=t.getVariableById(e))&&o&&(r=o.getVariableById(e)),r))return r;if(i){if(null==n)throw Error("Tried to look up a variable by name without a type");!(r=t.getVariable(i,n))&&o&&(r=o.getVariable(i,n))}return r},i.Variables.createVariable_=function(t,e,n,o){var r=t.getPotentialVariableMap();return n||(n=i.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),r?r.createVariable(n,o,e):t.createVariable(n,o,e)},i.Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var i=[];if(e.length!=t.length)for(var n=0;n<t.length;n++){var o=t[n];-1==e.indexOf(o)&&i.push(o)}return i},i.WidgetDiv={},i.WidgetDiv.owner_=null,i.WidgetDiv.dispose_=null,i.WidgetDiv.rendererClassName_="",i.WidgetDiv.themeClassName_="",i.WidgetDiv.createDom=function(){i.WidgetDiv.DIV||(i.WidgetDiv.DIV=document.createElement("div"),i.WidgetDiv.DIV.className="blocklyWidgetDiv",(i.parentContainer||document.body).appendChild(i.WidgetDiv.DIV))},i.WidgetDiv.show=function(t,e,n){i.WidgetDiv.hide(),i.WidgetDiv.owner_=t,i.WidgetDiv.dispose_=n,(t=i.WidgetDiv.DIV).style.direction=e?"rtl":"ltr",t.style.display="block",e=i.getMainWorkspace(),i.WidgetDiv.rendererClassName_=e.getRenderer().getClassName(),i.WidgetDiv.themeClassName_=e.getTheme().getClassName(),i.utils.dom.addClass(t,i.WidgetDiv.rendererClassName_),i.utils.dom.addClass(t,i.WidgetDiv.themeClassName_)},i.WidgetDiv.hide=function(){if(i.WidgetDiv.isVisible()){i.WidgetDiv.owner_=null;var t=i.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",i.WidgetDiv.dispose_&&i.WidgetDiv.dispose_(),i.WidgetDiv.dispose_=null,t.textContent="",i.WidgetDiv.rendererClassName_&&(i.utils.dom.removeClass(t,i.WidgetDiv.rendererClassName_),i.WidgetDiv.rendererClassName_=""),i.WidgetDiv.themeClassName_&&(i.utils.dom.removeClass(t,i.WidgetDiv.themeClassName_),i.WidgetDiv.themeClassName_=""),i.getMainWorkspace().markFocused()}},i.WidgetDiv.isVisible=function(){return!!i.WidgetDiv.owner_},i.WidgetDiv.hideIfOwner=function(t){i.WidgetDiv.owner_==t&&i.WidgetDiv.hide()},i.WidgetDiv.positionInternal_=function(t,e,n){i.WidgetDiv.DIV.style.left=t+"px",i.WidgetDiv.DIV.style.top=e+"px",i.WidgetDiv.DIV.style.height=n+"px"},i.WidgetDiv.positionWithAnchor=function(t,e,n,o){var r=i.WidgetDiv.calculateY_(t,e,n);t=i.WidgetDiv.calculateX_(t,e,n,o),0>r?i.WidgetDiv.positionInternal_(t,0,n.height+r):i.WidgetDiv.positionInternal_(t,r,n.height)},i.WidgetDiv.calculateX_=function(t,e,i,n){return n?(e=Math.max(e.right-i.width,t.left),Math.min(e,t.right-i.width)):(e=Math.min(e.left,t.right-i.width),Math.max(e,t.left))},i.WidgetDiv.calculateY_=function(t,e,i){return e.bottom+i.height>=t.bottom?e.top-i.height:e.bottom},i.VERSION="4.20201217.0",i.mainWorkspace=null,i.selected=null,i.draggingConnections=[],i.clipboardXml_=null,i.clipboardSource_=null,i.clipboardTypeCounts_=null,i.cache3dSupported_=null,i.parentContainer=null,i.svgSize=function(t){return new i.utils.Size(t.cachedWidth_,t.cachedHeight_)},i.resizeSvgContents=function(t){t.resizeContents()},i.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),i=e.parentNode;if(i){var n=i.offsetWidth;i=i.offsetHeight,e.cachedWidth_!=n&&(e.setAttribute("width",n+"px"),e.cachedWidth_=n),e.cachedHeight_!=i&&(e.setAttribute("height",i+"px"),e.cachedHeight_=i),t.resize()}},i.onKeyDown=function(t){var e=i.mainWorkspace;e&&!(i.utils.isTargetInput(t)||e.rendered&&!e.isVisible())&&i.ShortcutRegistry.registry.onKeyDown(e,t)},i.deleteBlock=function(t){t.workspace.isFlyout||(i.Events.setGroup(!0),i.hideChaff(),t.dispose(!0,!0),i.Events.setGroup(!1))},i.copy=function(t){(t=t.toCopyData())&&(i.clipboardXml_=t.xml,i.clipboardSource_=t.source,i.clipboardTypeCounts_=t.typeCounts)},i.paste=function(){if(!i.clipboardXml_)return!1;var t=i.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!i.clipboardTypeCounts_||!t.isCapacityAvailable(i.clipboardTypeCounts_)||(i.Events.setGroup(!0),t.paste(i.clipboardXml_),i.Events.setGroup(!1),0))},i.duplicate=function(t){var e=i.clipboardXml_,n=i.clipboardSource_;i.copy(t),t.workspace.paste(i.clipboardXml_),i.clipboardXml_=e,i.clipboardSource_=n},i.onContextMenu_=function(t){i.utils.isTargetInput(t)||t.preventDefault()},i.hideChaff=function(t){i.Tooltip.hide(),i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation(),t||((t=i.getMainWorkspace()).trashcan&&t.trashcan.flyout&&t.trashcan.closeFlyout(),(t=t.getToolbox())&&t.getFlyout()&&t.getFlyout().autoClose&&t.clearSelection())},i.getMainWorkspace=function(){return i.mainWorkspace},i.alert=function(t,e){alert(t),e&&e()},i.confirm=function(t,e){e(confirm(t))},i.prompt=function(t,e,i){i(prompt(t,e))},i.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},i.defineBlocksWithJsonArray=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n){var o=n.type;null==o||""===o?console.warn("Block definition #"+e+" in JSON array is missing a type attribute. Skipping."):(i.Blocks[o]&&console.warn("Block definition #"+e+' in JSON array overwrites prior definition of "'+o+'".'),i.Blocks[o]={init:i.jsonInitFactory_(n)})}else console.warn("Block definition #"+e+" in JSON array is "+n+". Skipping.")}},i.bindEventWithChecks_=function(t,e,n,o,r,s){var a=!1,l=function(t){var e=!r;t=i.Touch.splitEventByTouches(t);for(var s,l=0;s=t[l];l++)e&&!i.Touch.shouldHandleEvent(s)||(i.Touch.setClientFromTouch(s),n?o.call(n,s):o(s),a=!0)},c=[];if(i.utils.global.PointerEvent&&e in i.Touch.TOUCH_MAP)for(var d,u=0;d=i.Touch.TOUCH_MAP[e][u];u++)t.addEventListener(d,l,!1),c.push([t,d,l]);else if(t.addEventListener(e,l,!1),c.push([t,e,l]),e in i.Touch.TOUCH_MAP){var h=function(t){l(t),a&&!s&&t.preventDefault()};for(u=0;d=i.Touch.TOUCH_MAP[e][u];u++)t.addEventListener(d,h,!1),c.push([t,d,h])}return c},i.bindEvent_=function(t,e,n,o){var r=function(t){n?o.call(n,t):o(t)},s=[];if(i.utils.global.PointerEvent&&e in i.Touch.TOUCH_MAP)for(var a,l=0;a=i.Touch.TOUCH_MAP[e][l];l++)t.addEventListener(a,r,!1),s.push([t,a,r]);else if(t.addEventListener(e,r,!1),s.push([t,e,r]),e in i.Touch.TOUCH_MAP){var c=function(t){if(t.changedTouches&&1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}r(t),t.preventDefault()};for(l=0;a=i.Touch.TOUCH_MAP[e][l];l++)t.addEventListener(a,c,!1),s.push([t,a,c])}return s},i.unbindEvent_=function(t){for(;t.length;){var e=t.pop(),i=e[2];e[0].removeEventListener(e[1],i,!1)}return i},i.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},i.hueToHex=function(t){return i.utils.colour.hsvToHex(t,i.HSV_SATURATION,255*i.HSV_VALUE)},i.checkBlockColourConstants=function(){i.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),i.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),i.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),i.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),i.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),i.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),i.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),i.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),i.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),i.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),i.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),i.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),i.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),i.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),i.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),i.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},i.checkBlockColourConstant_=function(t,e,n){for(var o="Blockly",r=i,s=0;s<e.length;++s)o+="."+e[s],r&&(r=r[e[s]]);r&&r!==n&&(t=(void 0===n?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",t),console.warn(t))},i.setParentContainer=function(t){i.parentContainer=t},i.Events.BubbleOpen=function(t,e,n){i.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=e,this.bubbleType=n},i.utils.object.inherits(i.Events.BubbleOpen,i.Events.UiBase),i.Events.BubbleOpen.prototype.type=i.Events.BUBBLE_OPEN,i.Events.BubbleOpen.prototype.toJson=function(){var t=i.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},i.Events.BubbleOpen.prototype.fromJson=function(t){i.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},i.registry.register(i.registry.Type.EVENT,i.Events.BUBBLE_OPEN,i.Events.BubbleOpen),i.Icon=function(t){this.block_=t,this.iconGroup_=null},i.Icon.prototype.collapseHidden=!0,i.Icon.prototype.SIZE=17,i.Icon.prototype.bubble_=null,i.Icon.prototype.iconXY_=null,i.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&i.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),i.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},i.Icon.prototype.dispose=function(){i.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},i.Icon.prototype.updateEditable=function(){},i.Icon.prototype.isVisible=function(){return!!this.bubble_},i.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||i.utils.isRightButton(t)||this.setVisible(!this.isVisible())},i.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},i.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},i.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),e=i.utils.getRelativeXY(this.iconGroup_);t=new i.utils.Coordinate(t.x+e.x+this.SIZE/2,t.y+e.y+this.SIZE/2),i.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},i.Icon.prototype.getIconLocation=function(){return this.iconXY_},i.Icon.prototype.getCorrectedSize=function(){return new i.utils.Size(i.Icon.prototype.SIZE,i.Icon.prototype.SIZE-2)},i.Warning=function(t){i.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_={}},i.utils.object.inherits(i.Warning,i.Icon),i.Warning.prototype.collapseHidden=!1,i.Warning.prototype.drawIcon_=function(t){i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},i.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(i.Events.fire(new i.Events.BubbleOpen(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},i.Warning.prototype.createBubble_=function(){this.paragraphElement_=i.Bubble.textToDom(this.getText()),this.bubble_=i.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},i.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},i.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},i.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},i.Warning.prototype.dispose=function(){this.block_.warning=null,i.Icon.prototype.dispose.call(this)},i.Comment=function(t){i.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},i.utils.object.inherits(i.Comment,i.Icon),i.Comment.prototype.drawIcon_=function(t){i.utils.dom.createSvgElement(i.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},i.Comment.prototype.createEditor_=function(){this.foreignObject_=i.utils.dom.createSvgElement(i.utils.Svg.FOREIGNOBJECT,{x:i.Bubble.BORDER_WIDTH,y:i.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(i.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",i.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var e=this.textarea_=document.createElementNS(i.utils.dom.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),e.value=this.model_.text,this.resizeTextarea_(),t.appendChild(e),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=i.bindEventWithChecks_(e,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=i.bindEventWithChecks_(e,"wheel",this,(function(t){t.stopPropagation()})),this.onChangeWrapper_=i.bindEventWithChecks_(e,"change",this,(function(t){this.cachedText_!=this.model_.text&&i.Events.fire(new i.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))})),this.onInputWrapper_=i.bindEventWithChecks_(e,"input",this,(function(t){this.model_.text=e.value})),setTimeout(e.focus.bind(e),0),this.foreignObject_},i.Comment.prototype.updateEditable=function(){i.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},i.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},i.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,e=2*i.Bubble.BORDER_WIDTH,n=t.width-e;t=t.height-e,this.foreignObject_.setAttribute("width",n),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=n-4+"px",this.textarea_.style.height=t-4+"px"},i.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(i.Events.fire(new i.Events.BubbleOpen(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},i.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||i.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},i.Comment.prototype.createEditableBubble_=function(){this.bubble_=new i.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},i.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=i.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=i.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},i.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(i.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(i.unbindEvent_(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(i.unbindEvent_(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(i.unbindEvent_(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},i.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},i.Comment.prototype.getBubbleSize=function(){return this.model_.size},i.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},i.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},i.Comment.prototype.dispose=function(){this.block_.comment=null,i.Icon.prototype.dispose.call(this)},i.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),i.FlyoutCursor=function(){i.FlyoutCursor.superClass_.constructor.call(this)},i.utils.object.inherits(i.FlyoutCursor,i.Cursor),i.FlyoutCursor.prototype.onBlocklyAction=function(t){switch(t.name){case i.navigation.actionNames.PREVIOUS:return this.prev(),!0;case i.navigation.actionNames.NEXT:return this.next(),!0;default:return!1}},i.FlyoutCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=t.next())&&this.setCurNode(t),t):null},i.FlyoutCursor.prototype.in=function(){return null},i.FlyoutCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=t.prev())&&this.setCurNode(t),t):null},i.FlyoutCursor.prototype.out=function(){return null},i.Flyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new i.WorkspaceSvg(t),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},i.Flyout.prototype.autoClose=!0,i.Flyout.prototype.isVisible_=!1,i.Flyout.prototype.containerVisible_=!0,i.Flyout.prototype.CORNER_RADIUS=8,i.Flyout.prototype.MARGIN=i.Flyout.prototype.CORNER_RADIUS,i.Flyout.prototype.GAP_X=3*i.Flyout.prototype.MARGIN,i.Flyout.prototype.GAP_Y=3*i.Flyout.prototype.MARGIN,i.Flyout.prototype.SCROLLBAR_PADDING=2,i.Flyout.prototype.width_=0,i.Flyout.prototype.height_=0,i.Flyout.prototype.dragAngleRange_=70,i.Flyout.prototype.createDom=function(t){return this.svgGroup_=i.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.workspace_.getMarkerManager().setCursor(new i.FlyoutCursor),this.svgGroup_},i.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.scrollbar=new i.Scrollbar(this.workspace_,this.horizontalLayout,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,i.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,i.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap()},i.Flyout.prototype.dispose=function(){this.hide(),i.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(i.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},i.Flyout.prototype.getWidth=function(){return this.width_},i.Flyout.prototype.getHeight=function(){return this.height_},i.Flyout.prototype.getWorkspace=function(){return this.workspace_},i.Flyout.prototype.isVisible=function(){return this.isVisible_},i.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},i.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},i.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.scrollbar.setContainerVisible(t)},i.Flyout.prototype.positionAt_=function(t,e,n,o){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",e),"svg"==this.svgGroup_.tagName?i.utils.dom.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+n+","+o+")"),this.scrollbar&&(this.scrollbar.setOrigin(n,o),this.scrollbar.resize(),this.scrollbar.setPosition(this.scrollbar.position.x,this.scrollbar.position.y))},i.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var t,e=0;t=this.listeners_[e];e++)i.unbindEvent_(t);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},i.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=i.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(i.bindEventWithChecks_(this.svgBackground_,"mouseover",this,(function(){for(var t,e=this.workspace_.getTopBlocks(!1),i=0;t=e[i];i++)t.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},i.Flyout.prototype.createFlyoutInfo_=function(t){var e=[],n=[];this.permanentlyDisabled_.length=0;for(var o,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,s=0;o=t[s];s++)switch(o.custom&&(o=this.getDynamicCategoryContents_(o.custom),o=i.utils.toolbox.convertFlyoutDefToJsonArray(o),t.splice.apply(t,[s,1].concat(o)),o=t[s]),o.kind.toUpperCase()){case"BLOCK":var a=o,l=this.getBlockXml_(a);o=this.createBlock_(l),a=parseInt(a.gap||l.getAttribute("gap"),10),n.push(isNaN(a)?r:a),e.push({type:"block",block:o});break;case"SEP":this.addSeparatorGap_(o,n,r);break;case"LABEL":o=this.createButton_(o,!0),e.push({type:"button",button:o}),n.push(r);break;case"BUTTON":o=this.createButton_(o,!1),e.push({type:"button",button:o}),n.push(r)}return{contents:e,gaps:n}},i.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},i.Flyout.prototype.createButton_=function(t,e){if(!i.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new i.FlyoutButton(this.workspace_,this.targetWorkspace,t,e)},i.Flyout.prototype.createBlock_=function(t){return(t=i.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},i.Flyout.prototype.getBlockXml_=function(t){var e=null,n=t.blockxml;if(n&&"string"!=typeof n?e=n:n&&"string"==typeof n?(e=i.Xml.textToDom(n),t.blockxml=e):t.type&&((e=i.utils.xml.createElement("xml")).setAttribute("type",t.type),e.setAttribute("disabled",t.disabled),t.blockxml=e),!e)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return e},i.Flyout.prototype.addSeparatorGap_=function(t,e,i){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(i)},i.Flyout.prototype.clearOldBlocks_=function(){for(var t,e=this.workspace_.getTopBlocks(!1),n=0;t=e[n];n++)t.workspace==this.workspace_&&t.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(e=this.mats_[n])&&(i.Tooltip.unbindMouseEvents(e),i.utils.dom.removeNode(e));for(n=this.mats_.length=0;e=this.buttons_[n];n++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},i.Flyout.prototype.addBlockListeners_=function(t,e,n){this.listeners_.push(i.bindEventWithChecks_(t,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push(i.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push(i.bindEvent_(t,"mouseenter",e,e.addSelect)),this.listeners_.push(i.bindEvent_(t,"mouseleave",e,e.removeSelect)),this.listeners_.push(i.bindEvent_(n,"mouseenter",e,e.addSelect)),this.listeners_.push(i.bindEvent_(n,"mouseleave",e,e.removeSelect))},i.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(i){var n=e.targetWorkspace.getGesture(i);n&&(n.setStartBlock(t),n.handleFlyoutStart(i,e))}},i.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},i.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},i.Flyout.prototype.createBlock=function(t){var e=null;i.Events.disable();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{e=this.placeNewBlock_(t)}finally{i.Events.enable()}if(i.hideChaff(),t=i.Variables.getAddedVariables(this.targetWorkspace,n),i.Events.isEnabled()){for(i.Events.setGroup(!0),n=0;n<t.length;n++)i.Events.fire(new i.Events.VarCreate(t[n]));i.Events.fire(new i.Events.Create(e))}return this.autoClose?this.hide():this.filterForCapacity_(),e},i.Flyout.prototype.initFlyoutButton_=function(t,e,n){var o=t.createDom();t.moveTo(e,n),t.show(),this.listeners_.push(i.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},i.Flyout.prototype.createRect_=function(t,e,n,o,r){return(e=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{"fill-opacity":0,x:e,y:n,height:o.height,width:o.width},null)).tooltip=t,i.Tooltip.bindMouseEvents(e),this.workspace_.getCanvas().insertBefore(e,t.getSvgRoot()),t.flyoutRect_=e,this.mats_[r]=e},i.Flyout.prototype.moveRectToBlock_=function(t,e){var i=e.getHeightWidth();t.setAttribute("width",i.width),t.setAttribute("height",i.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-i.width:e.x)},i.Flyout.prototype.filterForCapacity_=function(){for(var t,e=this.workspace_.getTopBlocks(!1),n=0;t=e[n];n++)if(-1==this.permanentlyDisabled_.indexOf(t))for(var o=this.targetWorkspace.isCapacityAvailable(i.utils.getBlockTypeCounts(t));t;)t.setEnabled(o),t=t.getNextBlock()},i.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},i.Flyout.prototype.isScrollable=function(){return!!this.scrollbar&&this.scrollbar.isVisible()},i.Flyout.prototype.placeNewBlock_=function(t){var e=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var n=i.Xml.blockToDom(t,!0);if(e.setResizesEnabled(!1),!(n=i.Xml.domToBlock(n,e)).getSvgRoot())throw Error("block is not rendered.");var o=e.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=i.utils.Coordinate.sum(r,t),(o=i.utils.Coordinate.difference(t,o)).scale(1/e.scale),n.moveBy(o.x,o.y),n},i.Flyout.prototype.onBlocklyAction=function(t){return this.workspace_.getCursor().onBlocklyAction(t)},i.HorizontalFlyout=function(t){i.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},i.utils.object.inherits(i.HorizontalFlyout,i.Flyout),i.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.SCROLLBAR_PADDING;this.toolboxPosition_==i.TOOLBOX_AT_BOTTOM&&(e=0);var o=this.height_;return this.toolboxPosition_==i.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING),{contentHeight:(t.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(t.width+2*this.MARGIN)*this.workspace_.scale,contentTop:0,contentLeft:0,viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,absoluteTop:e,absoluteLeft:n}},i.HorizontalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.x&&(this.workspace_.scrollX=-e.contentWidth*t.x),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},i.HorizontalFlyout.prototype.getX=function(){return 0},i.HorizontalFlyout.prototype.getY=function(){var t=this.targetWorkspace.getMetrics();return t?this.targetWorkspace.toolboxPosition==this.toolboxPosition_?t.toolboxHeight?this.toolboxPosition_==i.TOOLBOX_AT_TOP?t.toolboxHeight:t.viewHeight-this.height_:this.toolboxPosition_==i.TOOLBOX_AT_TOP?0:t.viewHeight:this.toolboxPosition_==i.TOOLBOX_AT_TOP?0:t.viewHeight+t.absoluteTop-this.height_:0},i.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace.getMetrics();if(t){this.width_=t.viewWidth,this.setBackgroundPath_(t.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}}},i.HorizontalFlyout.prototype.setBackgroundPath_=function(t,e){var n=this.toolboxPosition_==i.TOOLBOX_AT_TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",t+2*this.CORNER_RADIUS),o.push("v",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",e),o.push("h",-t-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},i.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(this.RTL?1/0:0)},i.HorizontalFlyout.prototype.wheel_=function(t){var e=i.utils.getScrollDeltaPixels(t),n=e.x||e.y;n&&(n=(e=this.getMetrics_()).viewLeft+n,n=Math.min(n,e.contentWidth-e.viewWidth),n=Math.max(n,0),this.scrollbar.set(n),i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation()),t.preventDefault(),t.stopPropagation()},i.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var i=this.MARGIN,n=i+this.tabWidth_;this.RTL&&(t=t.reverse());for(var o,r=0;o=t[r];r++)if("block"==o.type){for(var s,a=(o=o.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;o.render(),a=o.getSvgRoot(),l=o.getHeightWidth(),s=o.outputConnection?this.tabWidth_:0,s=this.RTL?n+l.width:n-s,o.moveBy(s,i),s=this.createRect_(o,s,i,l,r),n+=l.width+e[r],this.addBlockListeners_(a,o,s)}else"button"==o.type&&(this.initFlyoutButton_(o.button,n,i),n+=o.button.width+e[r])},i.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},i.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top;return this.toolboxPosition_==i.TOOLBOX_AT_TOP?new i.utils.Rect(-1e9,e+t.height,-1e9,1e9):new i.utils.Rect(e,1e9,-1e9,1e9)},i.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var t,e=0,n=this.workspace_.getTopBlocks(!1),o=0;t=n[o];o++)e=Math.max(e,t.getHeightWidth().height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=i.Scrollbar.scrollbarThickness,this.height_!=e){for(o=0;t=n[o];o++)t.flyoutRect_&&this.moveRectToBlock_(t.flyoutRect_,t);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=i.TOOLBOX_AT_TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position()}},i.registry.register(i.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,i.registry.DEFAULT,i.HorizontalFlyout),i.VerticalFlyout=function(t){i.VerticalFlyout.superClass_.constructor.call(this,t)},i.utils.object.inherits(i.VerticalFlyout,i.Flyout),i.VerticalFlyout.registryName="verticalFlyout",i.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,i=this.height_-2*this.SCROLLBAR_PADDING,n=this.width_;return this.RTL||(n-=this.SCROLLBAR_PADDING),{contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,contentTop:t.y,contentLeft:t.x,viewHeight:i,viewWidth:n,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,absoluteTop:e,absoluteLeft:0}},i.VerticalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&("number"==typeof t.y&&(this.workspace_.scrollY=-e.contentHeight*t.y),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},i.VerticalFlyout.prototype.getX=function(){var t=this.targetWorkspace.getMetrics();return t?this.targetWorkspace.toolboxPosition==this.toolboxPosition_?t.toolboxWidth?this.toolboxPosition_==i.TOOLBOX_AT_LEFT?t.toolboxWidth:t.viewWidth-this.width_:this.toolboxPosition_==i.TOOLBOX_AT_LEFT?0:t.viewWidth:this.toolboxPosition_==i.TOOLBOX_AT_LEFT?0:t.viewWidth+t.absoluteLeft-this.width_:0},i.VerticalFlyout.prototype.getY=function(){return 0},i.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace.getMetrics();if(t){this.height_=t.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.viewHeight-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}}},i.VerticalFlyout.prototype.setBackgroundPath_=function(t,e){var n=this.toolboxPosition_==i.TOOLBOX_AT_RIGHT,o=t+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-t:t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,e)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?t:-t),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},i.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar.set(0)},i.VerticalFlyout.prototype.wheel_=function(t){var e=i.utils.getScrollDeltaPixels(t);if(e.y){var n=this.getMetrics_();e=n.viewTop-n.contentTop+e.y,e=Math.min(e,n.contentHeight-n.viewHeight),e=Math.max(e,0),this.scrollbar.set(e),i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},i.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var i,n=this.MARGIN,o=this.RTL?n:n+this.tabWidth_,r=0;i=t[r];r++)if("block"==i.type){for(var s,a=(i=i.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;i.render(),a=i.getSvgRoot(),l=i.getHeightWidth(),s=i.outputConnection?o-this.tabWidth_:o,i.moveBy(s,n),s=this.createRect_(i,this.RTL?s-l.width:s,n,l,r),this.addBlockListeners_(a,i,s),n+=l.height+e[r]}else"button"==i.type&&(this.initFlyoutButton_(i.button,o,n),n+=i.button.height+e[r])},i.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},i.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.left;return this.toolboxPosition_==i.TOOLBOX_AT_LEFT?new i.utils.Rect(-1e9,1e9,-1e9,e+t.width):new i.utils.Rect(-1e9,1e9,e,1e9)},i.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace.scale;for(var t,e=0,n=this.workspace_.getTopBlocks(!1),o=0;t=n[o];o++){var r=t.getHeightWidth().width;t.outputConnection&&(r-=this.tabWidth_),e=Math.max(e,r)}for(o=0;t=this.buttons_[o];o++)e=Math.max(e,t.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=i.Scrollbar.scrollbarThickness,this.width_!=e){for(o=0;t=n[o];o++){if(this.RTL){r=t.getRelativeToSurfaceXY().x;var s=e/this.workspace_.scale-this.MARGIN;t.outputConnection||(s-=this.tabWidth_),t.moveBy(s-r,0)}t.flyoutRect_&&this.moveRectToBlock_(t.flyoutRect_,t)}if(this.RTL)for(o=0;t=this.buttons_[o];o++)n=t.getPosition().y,t.moveTo(e/this.workspace_.scale-t.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=i.TOOLBOX_AT_LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position()}},i.registry.register(i.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,i.registry.DEFAULT,i.VerticalFlyout),i.FlyoutButton=function(t,e,n,o){this.workspace_=t,this.targetWorkspace_=e,this.text_=n.text,this.position_=new i.utils.Coordinate(0,0),this.isLabel_=o,this.callbackKey_=n.callbackKey||n.callbackkey,this.cssClass_=n["web-class"]||null,this.onMouseUpWrapper_=null,this.info=n},i.FlyoutButton.MARGIN_X=5,i.FlyoutButton.MARGIN_Y=2,i.FlyoutButton.prototype.width=0,i.FlyoutButton.prototype.height=0,i.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var e=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var n=i.utils.dom.createSvgElement(i.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),o=i.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(o+="â€"),n.textContent=o,this.isLabel_&&(this.svgText_=n,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var r=i.utils.style.getComputedStyle(n,"fontSize"),s=i.utils.style.getComputedStyle(n,"fontWeight"),a=i.utils.style.getComputedStyle(n,"fontFamily");return this.width=i.utils.dom.getFastTextWidthWithSizeString(n,r,s,a),o=i.utils.dom.measureFontMetrics(o,r,s,a),this.height=o.height,this.isLabel_||(this.width+=2*i.FlyoutButton.MARGIN_X,this.height+=2*i.FlyoutButton.MARGIN_Y,e.setAttribute("width",this.width),e.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),n.setAttribute("x",this.width/2),n.setAttribute("y",this.height/2-o.height/2+o.baseline),this.updateTransform_(),this.onMouseUpWrapper_=i.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},i.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},i.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},i.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},i.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},i.FlyoutButton.prototype.getPosition=function(){return this.position_},i.FlyoutButton.prototype.getButtonText=function(){return this.text_},i.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},i.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&i.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&i.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},i.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},i.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),i.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},i.Generator.NAME_TYPE="generated_function",i.Generator.prototype.INFINITE_LOOP_TRAP=null,i.Generator.prototype.STATEMENT_PREFIX=null,i.Generator.prototype.STATEMENT_SUFFIX=null,i.Generator.prototype.INDENT="  ",i.Generator.prototype.COMMENT_WRAP=60,i.Generator.prototype.ORDER_OVERRIDES=[],i.Generator.prototype.isInitialized=null,i.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=i.getMainWorkspace());var e=[];this.init(t),t=t.getTopBlocks(!0);for(var n,o=0;n=t[o];o++){var r=this.blockToCode(n);Array.isArray(r)&&(r=r[0]),r&&(n.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,n)+r),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,n))),e.push(r))}return e=e.join("\n"),(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},i.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},i.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var i=0;i<t.length;i++){var n=t[i].getCommentText();n&&e.push(n)}return e.length&&e.push(""),e.join("\n")},i.Generator.prototype.blockToCode=function(t,e){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var i=this[t.type];if("function"!=typeof i)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+t.type+'".');if(i=i.call(t,t),Array.isArray(i)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,i[0],e),i[1]]}if("string"==typeof i)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,t)+i),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,i,e);if(null===i)return"";throw SyntaxError("Invalid code generated: "+i)},i.Generator.prototype.valueToCode=function(t,e,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+t.type);var n=t.getInputTargetBlock(e);if(!n)return"";if(""===(e=this.blockToCode(n)))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+n.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+n.type);if(!t)return"";n=!1;var o=Math.floor(i),r=Math.floor(e);if(o<=r&&(o!=r||0!=o&&99!=o))for(n=!0,o=0;o<this.ORDER_OVERRIDES.length;o++)if(this.ORDER_OVERRIDES[o][0]==i&&this.ORDER_OVERRIDES[o][1]==e){n=!1;break}return n&&(t="("+t+")"),t},i.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),"string"!=typeof(e=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},i.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},i.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},i.Generator.prototype.RESERVED_WORDS_="",i.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},i.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",i.Generator.prototype.provideFunction_=function(t,e){if(!this.definitions_[t]){var n,o=this.variableDB_.getDistinctName(t,i.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,e=e.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);n!=e;)n=e,e=e.replace(/^(( {2})*) {2}/gm,"$1\0");e=e.replace(/\0/g,this.INDENT),this.definitions_[t]=e}return this.functionNames_[t]},i.Generator.prototype.init=function(t){},i.Generator.prototype.scrub_=function(t,e,i){return e},i.Generator.prototype.finish=function(t){return t},i.Generator.prototype.scrubNakedValue=function(t){return t},i.ToolboxItem=function(t,e,n){this.id_=t.toolboxitemid||i.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=e,this.workspace_=this.parentToolbox_.getWorkspace()},i.ToolboxItem.prototype.init=function(){},i.ToolboxItem.prototype.getDiv=function(){return null},i.ToolboxItem.prototype.getId=function(){return this.id_},i.ToolboxItem.prototype.getParent=function(){return null},i.ToolboxItem.prototype.getLevel=function(){return this.level_},i.ToolboxItem.prototype.isSelectable=function(){return!1},i.ToolboxItem.prototype.isCollapsible=function(){return!1},i.ToolboxItem.prototype.dispose=function(){},i.ToolboxCategory=function(t,e,n){i.ToolboxCategory.superClass_.constructor.call(this,t,e,n),this.name_=i.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),i.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},i.utils.object.inherits(i.ToolboxCategory,i.ToolboxItem),i.ToolboxCategory.registrationName="category",i.ToolboxCategory.nestedPadding=19,i.ToolboxCategory.borderWidth=8,i.ToolboxCategory.defaultBackgroundColour="#57e",i.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},i.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var i;i=e[t];t++)this.flyoutItems_.push(i)}},i.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},i.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),i.utils.aria.setRole(this.htmlDiv_,i.utils.aria.Role.TREEITEM),i.utils.aria.setState(this.htmlDiv_,i.utils.aria.State.SELECTED,!1),i.utils.aria.setState(this.htmlDiv_,i.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),i.utils.aria.setRole(this.iconDom_,i.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),i.utils.aria.setState(this.htmlDiv_,i.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},i.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return i.utils.dom.addClass(t,this.cssConfig_.container),t},i.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");i.utils.dom.addClass(t,this.cssConfig_.row);var e=i.ToolboxCategory.nestedPadding*this.getLevel();return e=e.toString()+"px",this.workspace_.RTL?t.style.paddingRight=e:t.style.paddingLeft=e,t},i.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return i.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},i.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||i.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},i.ToolboxCategory.prototype.createLabelDom_=function(t){var e=document.createElement("span");return e.setAttribute("id",this.getId()+".label"),e.textContent=t,i.utils.dom.addClass(e,this.cssConfig_.label),e},i.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},i.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=i.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},i.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;return(t=t.colour)&&e?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):e?this.getColourfromStyle_(e):this.parseColour_(t)},i.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},i.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},i.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=i.utils.replaceMessageReferences(t))||""===t)return"";var e=Number(t);return isNaN(e)?(e=i.utils.colour.parse(t))?e:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):i.hueToHex(e)},i.ToolboxCategory.prototype.openIcon_=function(t){t&&(i.utils.dom.removeClasses(t,this.cssConfig_.closedicon),i.utils.dom.addClass(t,this.cssConfig_.openicon))},i.ToolboxCategory.prototype.closeIcon_=function(t){t&&(i.utils.dom.removeClasses(t,this.cssConfig_.openicon),i.utils.dom.addClass(t,this.cssConfig_.closedicon))},i.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},i.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},i.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},i.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},i.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},i.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},i.ToolboxCategory.prototype.onClick=function(t){},i.ToolboxCategory.prototype.setSelected=function(t){if(t){var e=this.parseColour_(i.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||e,i.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",i.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);i.utils.aria.setState(this.htmlDiv_,i.utils.aria.State.SELECTED,t)},i.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},i.ToolboxCategory.prototype.getName=function(){return this.name_},i.ToolboxCategory.prototype.getParent=function(){return this.parent_},i.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},i.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},i.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=i.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},i.ToolboxCategory.prototype.dispose=function(){i.utils.dom.removeNode(this.htmlDiv_)},i.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),i.registry.register(i.registry.Type.TOOLBOX_ITEM,i.ToolboxCategory.registrationName,i.ToolboxCategory),i.ToolboxSeparator=function(t,e){i.ToolboxSeparator.superClass_.constructor.call(this,t,e),this.cssConfig_={container:"blocklyTreeSeparator"},i.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},i.utils.object.inherits(i.ToolboxSeparator,i.ToolboxItem),i.ToolboxSeparator.registrationName="sep",i.ToolboxSeparator.prototype.init=function(){this.createDom_()},i.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return i.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},i.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},i.ToolboxSeparator.prototype.dispose=function(){i.utils.dom.removeNode(this.htmlDiv_)},i.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),i.registry.register(i.registry.Type.TOOLBOX_ITEM,i.ToolboxSeparator.registrationName,i.ToolboxSeparator),i.CollapsibleToolboxCategory=function(t,e,n){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],i.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,e,n)},i.utils.object.inherits(i.CollapsibleToolboxCategory,i.ToolboxCategory),i.CollapsibleToolboxCategory.registrationName="collapsibleCategory",i.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=i.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},i.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var e=t.contents,n=!0;if(t.custom)this.flyoutItems_=t.custom;else if(e){t=0;for(var o;o=e[t];t++)!i.registry.hasItem(i.registry.Type.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()==i.ToolboxSeparator.registrationName&&n?(this.flyoutItems_.push(o),n=!0):(this.createToolboxItem_(o),n=!1)}},i.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var e=t.kind;"CATEGORY"==e.toUpperCase()&&i.utils.toolbox.isCategoryCollapsible(t)&&(e=i.CollapsibleToolboxCategory.registrationName),t=new(i.registry.getClass(i.registry.Type.TOOLBOX_ITEM,e))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},i.CollapsibleToolboxCategory.prototype.init=function(){i.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},i.CollapsibleToolboxCategory.prototype.createDom_=function(){i.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),i.utils.aria.setRole(this.subcategoriesDiv_,i.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},i.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(i.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},i.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var e=document.createElement("div");i.utils.dom.addClass(e,this.cssConfig_.contents);for(var n=0;n<t.length;n++){var o=t[n];o.init();var r=o.getDiv();e.appendChild(r),o.getClickTarget&&o.getClickTarget().setAttribute("id",o.getId())}return e},i.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),i.utils.aria.setState(this.htmlDiv_,i.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},i.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e,i=0;e=this.getChildToolboxItems()[i];i++)e.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},i.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},i.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},i.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},i.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},i.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},i.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},i.registry.register(i.registry.Type.TOOLBOX_ITEM,i.CollapsibleToolboxCategory.registrationName,i.CollapsibleToolboxCategory),i.Events.ToolboxItemSelect=function(t,e,n){i.Events.ToolboxItemSelect.superClass_.constructor.call(this,n),this.oldItem=t,this.newItem=e},i.utils.object.inherits(i.Events.ToolboxItemSelect,i.Events.UiBase),i.Events.ToolboxItemSelect.prototype.type=i.Events.TOOLBOX_ITEM_SELECT,i.Events.ToolboxItemSelect.prototype.toJson=function(){var t=i.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},i.Events.ToolboxItemSelect.prototype.fromJson=function(t){i.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},i.registry.register(i.registry.Type.EVENT,i.Events.TOOLBOX_ITEM_SELECT,i.Events.ToolboxItemSelect),i.Toolbox=function(t){this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_={},this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},i.Toolbox.prototype.init=function(){var t=this.workspace_,e=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),i.utils.dom.insertAfter(this.flyout_.createDom("svg"),e),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color")},i.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var e=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,i.utils.aria.setRole(this.contentsDiv_,i.utils.aria.Role.TREE),e.appendChild(this.contentsDiv_),t.parentNode.insertBefore(e,t),this.attachEvents_(e,this.contentsDiv_),e},i.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),i.utils.dom.addClass(t,"blocklyToolboxDiv"),i.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},i.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return i.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},i.Toolbox.prototype.attachEvents_=function(t,e){t=i.bindEventWithChecks_(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),e=i.bindEventWithChecks_(e,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(e)},i.Toolbox.prototype.onClick_=function(t){if(i.utils.isRightButton(t)||t.target==this.HtmlDiv)i.hideChaff(!1);else{var e=t.target.getAttribute("id");e&&(e=this.getToolboxItemById(e)).isSelectable()&&(this.setSelectedItem(e),e.onClick(t)),i.hideChaff(!0)}i.Touch.clearTouchIdentifier()},i.Toolbox.prototype.onKeyDown_=function(t){var e=!1;switch(t.keyCode){case i.utils.KeyCodes.DOWN:e=this.selectNext_();break;case i.utils.KeyCodes.UP:e=this.selectPrevious_();break;case i.utils.KeyCodes.LEFT:e=this.selectParent_();break;case i.utils.KeyCodes.RIGHT:e=this.selectChild_();break;case i.utils.KeyCodes.ENTER:case i.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),e=!0);break;default:e=!1}!e&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(e=this.selectedItem_.onKeyDown(t)),e&&t.preventDefault()},i.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,e=new i.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides});if(e.toolboxPosition=t.options.toolboxPosition,!(t=t.horizontalLayout?i.registry.getClassFromOptions(i.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.options):i.registry.getClassFromOptions(i.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options)))throw Error("Blockly.VerticalFlyout, Blockly.HorizontalFlyout or your own custom flyout must be required.");return new t(e)},i.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var i=this.contents_[e];i&&i.dispose()}this.contents_=[],this.contentMap_={},this.renderContents_(t.contents),this.position()},i.Toolbox.prototype.renderContents_=function(t){for(var e,i=document.createDocumentFragment(),n=0;e=t[n];n++)this.createToolboxItem_(e,i);this.contentsDiv_.appendChild(i)},i.Toolbox.prototype.createToolboxItem_=function(t,e){var n=t.kind;"CATEGORY"==n.toUpperCase()&&i.utils.toolbox.isCategoryCollapsible(t)&&(n=i.CollapsibleToolboxCategory.registrationName),(n=i.registry.getClass(i.registry.Type.TOOLBOX_ITEM,n.toLowerCase()))&&(t=new n(t,this),this.addToolboxItem_(t),t.init(),(n=t.getDiv())&&e.appendChild(n),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},i.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var e,i=0;e=t.getChildToolboxItems()[i];i++)this.addToolboxItem_(e)},i.Toolbox.prototype.getToolboxItems=function(){return this.contents_},i.Toolbox.prototype.addStyle=function(t){i.utils.dom.addClass(this.HtmlDiv,t)},i.Toolbox.prototype.removeStyle=function(t){i.utils.dom.removeClass(this.HtmlDiv,t)},i.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var t=this.HtmlDiv.getBoundingClientRect(),e=t.top,n=e+t.height,o=t.left;return t=o+t.width,this.toolboxPosition==i.utils.toolbox.Position.TOP?new i.utils.Rect(-1e7,n,-1e7,1e7):this.toolboxPosition==i.utils.toolbox.Position.BOTTOM?new i.utils.Rect(e,1e7,-1e7,1e7):this.toolboxPosition==i.utils.toolbox.Position.LEFT?new i.utils.Rect(-1e7,1e7,-1e7,t):new i.utils.Rect(-1e7,1e7,o,1e7)},i.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]},i.Toolbox.prototype.getWidth=function(){return this.width_},i.Toolbox.prototype.getHeight=function(){return this.height_},i.Toolbox.prototype.getFlyout=function(){return this.flyout_},i.Toolbox.prototype.getWorkspace=function(){return this.workspace_},i.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},i.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},i.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},i.Toolbox.prototype.position=function(){var t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.toolboxPosition==i.TOOLBOX_AT_TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition==i.TOOLBOX_AT_RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth),this.flyout_.position())},i.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,e=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==i.TOOLBOX_AT_LEFT?t.scrollX+e.width:t.scrollX,this.toolboxPosition==i.TOOLBOX_AT_TOP?t.scrollY+e.height:t.scrollY),i.svgResize(t)},i.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},i.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},i.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},i.Toolbox.prototype.setVisible=function(t){this.HtmlDiv.style.display=t?"block":"none"},i.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&null!=e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!=t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},i.Toolbox.prototype.shouldDeselectItem_=function(t,e){return null!=t&&(!t.isCollapsible()||t!=e)},i.Toolbox.prototype.shouldSelectItem_=function(t,e){return null!=e&&e!=t},i.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),i.utils.aria.setState(this.contentsDiv_,i.utils.aria.State.ACTIVEDESCENDANT,"")},i.Toolbox.prototype.selectItem_=function(t,e){this.selectedItem_=e,this.previouslySelectedItem_=t,e.setSelected(!0),i.utils.aria.setState(this.contentsDiv_,i.utils.aria.State.ACTIVEDESCENDANT,e.getId())},i.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},i.Toolbox.prototype.updateFlyout_=function(t,e){(t!=e||e.isCollapsible())&&e&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},i.Toolbox.prototype.fireSelectEvent_=function(t,e){var n=t&&t.getName(),o=e&&e.getName();t==e&&(o=null),t=new i.Events.ToolboxItemSelect(n,o,this.workspace_.id),i.Events.fire(t)},i.Toolbox.prototype.onBlocklyAction=function(t){if(!this.selectedItem_)return!1;switch(t.name){case i.navigation.actionNames.PREVIOUS:return this.selectPrevious_();case i.navigation.actionNames.OUT:return this.selectParent_();case i.navigation.actionNames.NEXT:return this.selectNext_();case i.navigation.actionNames.IN:return this.selectChild_();default:return!1}},i.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},i.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},i.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},i.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},i.Toolbox.prototype.dispose=function(){this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)i.unbindEvent_(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),i.utils.dom.removeNode(this.HtmlDiv)},i.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),i.registry.register(i.registry.Type.TOOLBOX,i.registry.DEFAULT,i.Toolbox),i.Events.TrashcanOpen=function(t,e){i.Events.TrashcanOpen.superClass_.constructor.call(this,e),this.isOpen=t},i.utils.object.inherits(i.Events.TrashcanOpen,i.Events.UiBase),i.Events.TrashcanOpen.prototype.type=i.Events.TRASHCAN_OPEN,i.Events.TrashcanOpen.prototype.toJson=function(){var t=i.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},i.Events.TrashcanOpen.prototype.fromJson=function(t){i.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},i.registry.register(i.registry.Type.EVENT,i.Events.TRASHCAN_OPEN,i.Events.TrashcanOpen),i.Trashcan=function(t){if(this.workspace_=t,this.contents_=[],this.flyout=null,!(0>=this.workspace_.options.maxTrashcanContents)){if(t=new i.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides}),this.workspace_.horizontalLayout){if(t.toolboxPosition=this.workspace_.toolboxPosition==i.utils.toolbox.Position.TOP?i.utils.toolbox.Position.BOTTOM:i.utils.toolbox.Position.TOP,!i.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout=new i.HorizontalFlyout(t)}else{if(t.toolboxPosition=this.workspace_.toolboxPosition==i.utils.toolbox.Position.RIGHT?i.utils.toolbox.Position.LEFT:i.utils.toolbox.Position.RIGHT,!i.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout=new i.VerticalFlyout(t)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}},i.Trashcan.prototype.WIDTH_=47,i.Trashcan.prototype.BODY_HEIGHT_=44,i.Trashcan.prototype.LID_HEIGHT_=16,i.Trashcan.prototype.MARGIN_BOTTOM_=20,i.Trashcan.prototype.MARGIN_SIDE_=20,i.Trashcan.prototype.MARGIN_HOTSPOT_=10,i.Trashcan.prototype.SPRITE_LEFT_=0,i.Trashcan.prototype.SPRITE_TOP_=32,i.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,i.Trashcan.ANIMATION_LENGTH_=80,i.Trashcan.ANIMATION_FRAMES_=4,i.Trashcan.OPACITY_MIN_=.4,i.Trashcan.OPACITY_MAX_=.8,i.Trashcan.MAX_LID_ANGLE_=45,i.Trashcan.prototype.isLidOpen=!1,i.Trashcan.prototype.minOpenness_=0,i.Trashcan.prototype.svgGroup_=null,i.Trashcan.prototype.svgLid_=null,i.Trashcan.prototype.lidTask_=0,i.Trashcan.prototype.lidOpen_=0,i.Trashcan.prototype.left_=0,i.Trashcan.prototype.top_=0,i.Trashcan.prototype.createDom=function(){this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),e=i.utils.dom.createSvgElement(i.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},e);var n=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:i.SPRITE.width,x:-this.SPRITE_LEFT_,height:i.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return n.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+i.SPRITE.url),e=i.utils.dom.createSvgElement(i.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},e),this.svgLid_=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:i.SPRITE.width,x:-this.SPRITE_LEFT_,height:i.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+i.SPRITE.url),i.bindEvent_(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),i.bindEvent_(this.svgGroup_,"mouseup",this,this.click),i.bindEvent_(n,"mouseover",this,this.mouseOver_),i.bindEvent_(n,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},i.Trashcan.prototype.init=function(t){return 0<this.workspace_.options.maxTrashcanContents&&(i.utils.dom.insertAfter(this.flyout.createDom(i.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.setLidOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},i.Trashcan.prototype.dispose=function(){this.svgGroup_&&(i.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},i.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},i.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},i.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){for(var t,e=[],n=0;t=this.contents_[n];n++)e[n]=i.Xml.textToDom(t);this.flyout.show(e),this.fireUiEvent_(!0)}},i.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},i.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},i.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var t=this.workspace_.getMetrics();t&&(this.left_=t.toolboxPosition==i.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-i.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+i.Scrollbar.scrollbarThickness,this.top_=t.toolboxPosition==i.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:t.viewHeight+t.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},i.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new i.utils.Rect(e,e+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},i.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},i.Trashcan.prototype.animateLid_=function(){var t=i.Trashcan.ANIMATION_FRAMES_,e=1/(t+1);this.lidOpen_+=this.isLidOpen?e:-e,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*i.Trashcan.MAX_LID_ANGLE_),e=i.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=e+this.lidOpen_*(i.Trashcan.OPACITY_MAX_-e),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),i.Trashcan.ANIMATION_LENGTH_/t))},i.Trashcan.prototype.setLidAngle_=function(t){var e=this.workspace_.toolboxPosition==i.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(e?-t:t)+","+(e?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},i.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*i.Trashcan.MAX_LID_ANGLE_)},i.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},i.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},i.Trashcan.prototype.fireUiEvent_=function(t){t=new i.Events.TrashcanOpen(t,this.workspace_.id),i.Events.fire(t)},i.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},i.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},i.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},i.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==i.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},i.Trashcan.prototype.cleanBlockXML_=function(t){for(var e=t=t.cloneNode(!0);e;){e.removeAttribute&&(e.removeAttribute("x"),e.removeAttribute("y"),e.removeAttribute("id"),e.removeAttribute("disabled"),"comment"==e.nodeName&&(e.removeAttribute("h"),e.removeAttribute("w"),e.removeAttribute("pinned")));var n=e.firstChild||e.nextSibling;if(!n)for(n=e.parentNode;n;){if(n.nextSibling){n=n.nextSibling;break}n=n.parentNode}e=n}return i.Xml.domToText(t)},i.VariablesDynamic={},i.VariablesDynamic.onCreateVariableButtonClick_String=function(t){i.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},i.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){i.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},i.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){i.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},i.VariablesDynamic.flyoutCategory=function(t){var e=[],n=document.createElement("button");return n.setAttribute("text",i.Msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),e.push(n),(n=document.createElement("button")).setAttribute("text",i.Msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),e.push(n),(n=document.createElement("button")).setAttribute("text",i.Msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),e.push(n),t.registerButtonCallback("CREATE_VARIABLE_STRING",i.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",i.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",i.VariablesDynamic.onCreateVariableButtonClick_Colour),t=i.VariablesDynamic.flyoutCategoryBlocks(t),e.concat(t)},i.VariablesDynamic.flyoutCategoryBlocks=function(t){var e=[];if(0<(t=t.getAllVariables()).length){if(i.Blocks.variables_set_dynamic){var n=t[t.length-1],o=i.utils.xml.createElement("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap",24),o.appendChild(i.Variables.generateVariableFieldDom(n)),e.push(o)}if(i.Blocks.variables_get_dynamic){t.sort(i.VariableModel.compareByName),n=0;for(var r;r=t[n];n++)(o=i.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),o.setAttribute("gap",8),o.appendChild(i.Variables.generateVariableFieldDom(r)),e.push(o)}}return e},i.ZoomControls=function(t){this.workspace_=t,this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.verticalSpacing_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},i.ZoomControls.prototype.WIDTH_=32,i.ZoomControls.prototype.HEIGHT_=110,i.ZoomControls.prototype.MARGIN_BOTTOM_=20,i.ZoomControls.prototype.MARGIN_SIDE_=20,i.ZoomControls.prototype.svgGroup_=null,i.ZoomControls.prototype.left_=0,i.ZoomControls.prototype.top_=0,i.ZoomControls.prototype.createDom=function(){this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},i.ZoomControls.prototype.init=function(t){return this.verticalSpacing_=this.MARGIN_BOTTOM_+t,this.verticalSpacing_+this.HEIGHT_},i.ZoomControls.prototype.dispose=function(){this.svgGroup_&&i.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&i.unbindEvent_(this.onZoomResetWrapper_),this.onZoomInWrapper_&&i.unbindEvent_(this.onZoomInWrapper_),this.onZoomOutWrapper_&&i.unbindEvent_(this.onZoomOutWrapper_)},i.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var t=this.workspace_.getMetrics();t&&(this.left_=t.toolboxPosition==i.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-i.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+i.Scrollbar.scrollbarThickness,t.toolboxPosition==i.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=t.viewHeight+t.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}},i.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=i.utils.dom.createSvgElement(i.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:32,height:32},e),i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:i.SPRITE.width,height:i.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+i.SPRITE.url),this.onZoomOutWrapper_=i.bindEventWithChecks_(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},i.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=i.utils.dom.createSvgElement(i.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:32,height:32},e),i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:i.SPRITE.width,height:i.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+i.SPRITE.url),this.onZoomInWrapper_=i.bindEventWithChecks_(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},i.ZoomControls.prototype.zoom_=function(t,e){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),i.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},i.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=i.utils.dom.createSvgElement(i.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:32,height:32},e),i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:i.SPRITE.width,height:i.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+i.SPRITE.url),this.onZoomResetWrapper_=i.bindEventWithChecks_(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},i.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused(),this.workspace_.setScale(this.workspace_.options.zoomOptions.startScale),this.workspace_.beginCanvasTransition(),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),i.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},i.ZoomControls.prototype.fireZoomEvent_=function(){var t=new i.Events.Click(null,this.workspace_.id,"zoom_controls");i.Events.fire(t)},i.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),i.Mutator=function(t){i.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},i.utils.object.inherits(i.Mutator,i.Icon),i.Mutator.prototype.workspaceWidth_=0,i.Mutator.prototype.workspaceHeight_=0,i.Mutator.prototype.setBlock=function(t){this.block_=t},i.Mutator.prototype.getWorkspace=function(){return this.workspace_},i.Mutator.prototype.drawIcon_=function(t){i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),i.utils.dom.createSvgElement(i.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},i.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&i.Icon.prototype.iconClick_.call(this,t)},i.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{x:i.Bubble.BORDER_WIDTH,y:i.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var t,e=i.utils.xml.createElement("xml"),n=0;t=this.quarkNames_[n];n++){var o=i.utils.xml.createElement("block");o.setAttribute("type",t),e.appendChild(o)}else e=null;return(n=new i.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?i.utils.toolbox.Position.RIGHT:i.utils.toolbox.Position.LEFT,(t=!!e)&&(n.languageTree=i.utils.toolbox.convertToolboxDefToJson(e),n.getMetrics=this.getFlyoutMetrics_.bind(this)),this.workspace_=new i.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(i.Events.disableOrphans),e=t?this.workspace_.addFlyout(i.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),e&&n.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},i.Mutator.prototype.updateEditable=function(){i.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&i.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&i.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},i.Mutator.prototype.resizeBubble_=function(){var t=2*i.Bubble.BORDER_WIDTH,e=this.workspace_.getCanvas().getBBox(),n=e.width+e.x,o=e.height+3*t,r=this.workspace_.getFlyout();if(r){var s=r.getMetrics_();o=Math.max(o,s.contentHeight+20),n+=r.getWidth()}this.block_.RTL&&(n=-e.x),n+=3*t,(Math.abs(this.workspaceWidth_-n)>t||Math.abs(this.workspaceHeight_-o)>t)&&(this.workspaceWidth_=n,this.workspaceHeight_=o,this.bubble_.setBubbleSize(n+t,o+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},i.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},i.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(i.Events.fire(new i.Events.BubbleOpen(this.block_,t,"mutator")),t){this.bubble_=new i.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var e=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),e&&(t.init(this.workspace_),t.show(e)),this.rootBlock_=this.block_.decompose(this.workspace_),e=this.rootBlock_.getDescendants(!1);for(var n,o=0;n=e[o];o++)n.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(e=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+e:e):t=e=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,e),this.block_.saveConnections){var r=this,s=this.block_;s.saveConnections(this.rootBlock_),this.sourceListener_=function(){s.saveConnections(r.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},i.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==i.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var e,n=0;e=t[n];n++){var o=e.getRelativeToSurfaceXY();if(20>o.y&&e.moveBy(0,20-o.y),e.RTL){var r=-20,s=this.workspace_.getFlyout();s&&(r-=s.getWidth()),o.x>r&&e.moveBy(r-o.x,0)}else 20>o.x&&e.moveBy(20-o.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(i.Events.setGroup(!0),t=(t=(e=this.block_).mutationToDom())&&i.Xml.domToText(t),n=e.rendered,e.rendered=!1,e.compose(this.rootBlock_),e.rendered=n,e.initSvg(),i.getMainWorkspace().keyboardAccessibilityMode&&i.navigation.moveCursorOnBlockMutation(e),e.rendered&&e.render(),t!=(n=(n=e.mutationToDom())&&i.Xml.domToText(n))){i.Events.fire(new i.Events.BlockChange(e,"mutation",null,t,n));var a=i.Events.getGroup();setTimeout((function(){i.Events.setGroup(a),e.bumpNeighbours(),i.Events.setGroup(!1)}),i.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),i.Events.setGroup(!1)}}},i.Mutator.prototype.getFlyoutMetrics_=function(){var t=this.workspace_.getFlyout();return t=t?t.getWidth():0,{contentHeight:0,contentWidth:0,contentTop:0,contentLeft:0,viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-t,viewTop:0,viewLeft:0,absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:t}},i.Mutator.prototype.dispose=function(){this.block_.mutator=null,i.Icon.prototype.dispose.call(this)},i.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),i=0;i<e.length;i++){var n=e[i];n.setStyle(n.getStyleName())}if(i=t.getFlyout())for(t=i.workspace_.getAllBlocks(!1),i=0;i<t.length;i++)(n=t[i]).setStyle(n.getStyleName())}},i.Mutator.reconnect=function(t,e,i){if(!t||!t.getSourceBlock().workspace)return!1;i=e.getInput(i).connection;var n=t.targetBlock();return!(n&&n!=e||i.targetConnection==t||(i.isConnected()&&i.disconnect(),i.connect(t),0))},i.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var i=t.options.parentWorkspace;t.isFlyout?i&&i.options&&(e=i.options.parentWorkspace):i&&(e=i)}return e},i.FieldTextInput=function(t,e,n){this.spellcheck_=!0,i.FieldTextInput.superClass_.constructor.call(this,t,e,n),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},i.utils.object.inherits(i.FieldTextInput,i.Field),i.FieldTextInput.prototype.DEFAULT_VALUE="",i.FieldTextInput.fromJson=function(t){var e=i.utils.replaceMessageReferences(t.text);return new i.FieldTextInput(e,void 0,t)},i.FieldTextInput.prototype.SERIALIZABLE=!0,i.FieldTextInput.BORDERRADIUS=4,i.FieldTextInput.prototype.CURSOR="text",i.FieldTextInput.prototype.configure_=function(t){i.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},i.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t,e=0,i=0,n=0;t=this.sourceBlock_.inputList[n];n++){for(var o=0;t.fieldRow[o];o++)e++;t.connection&&i++}this.fullBlockClickTarget_=1>=e&&this.sourceBlock_.outputConnection&&!i}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},i.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},i.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&i.Events.isEnabled()&&i.Events.fire(new i.Events.BlockChange(this.sourceBlock_,"field",this.name||null,t,this.value_)))},i.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},i.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},i.FieldTextInput.prototype.render_=function(){if(i.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(i.utils.dom.removeClass(t,"blocklyInvalidInput"),i.utils.aria.setState(t,i.utils.aria.State.INVALID,!1)):(i.utils.dom.addClass(t,"blocklyInvalidInput"),i.utils.aria.setState(t,i.utils.aria.State.INVALID,!0))}},i.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},i.FieldTextInput.prototype.showEditor_=function(t,e){this.workspace_=this.sourceBlock_.workspace,!(t=e||!1)&&(i.utils.userAgent.MOBILE||i.utils.userAgent.ANDROID||i.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},i.FieldTextInput.prototype.showPromptEditor_=function(){i.prompt(i.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},i.FieldTextInput.prototype.showInlineEditor_=function(t){i.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},i.FieldTextInput.prototype.widgetCreate_=function(){var t=i.WidgetDiv.DIV;i.utils.dom.addClass(this.getClickTarget_(),"editing");var e=document.createElement("input");e.className="blocklyHtmlInput",e.setAttribute("spellcheck",this.spellcheck_);var n=this.workspace_.getScale(),o=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";if(t.style.fontSize=o,e.style.fontSize=o,o=i.FieldTextInput.BORDERRADIUS*n+"px",this.fullBlockClickTarget_){o=((o=this.getScaledBBox()).bottom-o.top)/2+"px";var r=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.style.border=1*n+"px solid "+r,t.style.borderRadius=o,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*n+"px")}return e.style.borderRadius=o,t.appendChild(e),e.value=e.defaultValue=this.getEditorText_(this.value_),e.untypedDefaultValue_=this.value_,e.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(e),e},i.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=i.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,i.utils.dom.removeClass(this.getClickTarget_(),"editing")},i.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=i.bindEventWithChecks_(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=i.bindEventWithChecks_(t,"input",this,this.onHtmlInputChange_)},i.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(i.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(i.unbindEvent_(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},i.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==i.utils.KeyCodes.ENTER?(i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation()):t.keyCode==i.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation()):t.keyCode==i.utils.KeyCodes.TAB&&(i.WidgetDiv.hide(),i.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},i.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,i.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),i.Events.setGroup(!1))},i.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},i.FieldTextInput.prototype.resizeEditor_=function(){var t=i.WidgetDiv.DIV,e=this.getScaledBBox();t.style.width=e.right-e.left+"px",t.style.height=e.bottom-e.top+"px",e=new i.utils.Coordinate(this.sourceBlock_.RTL?e.right-t.offsetWidth:e.left,e.top),t.style.left=e.x+"px",t.style.top=e.y+"px"},i.FieldTextInput.prototype.isTabNavigable=function(){return!0},i.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},i.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},i.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},i.fieldRegistry.register("field_input",i.FieldTextInput),i.FieldAngle=function(t,e,n){this.clockwise_=i.FieldAngle.CLOCKWISE,this.offset_=i.FieldAngle.OFFSET,this.wrap_=i.FieldAngle.WRAP,this.round_=i.FieldAngle.ROUND,i.FieldAngle.superClass_.constructor.call(this,t,e,n),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null},i.utils.object.inherits(i.FieldAngle,i.FieldTextInput),i.FieldAngle.prototype.DEFAULT_VALUE=0,i.FieldAngle.fromJson=function(t){return new i.FieldAngle(t.angle,void 0,t)},i.FieldAngle.prototype.SERIALIZABLE=!0,i.FieldAngle.ROUND=15,i.FieldAngle.HALF=50,i.FieldAngle.CLOCKWISE=!1,i.FieldAngle.OFFSET=0,i.FieldAngle.WRAP=360,i.FieldAngle.RADIUS=i.FieldAngle.HALF-1,i.FieldAngle.prototype.configure_=function(t){switch(i.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var e=t.clockwise;"boolean"==typeof e&&(this.clockwise_=e),null!=(e=t.offset)&&(e=Number(e),isNaN(e)||(this.offset_=e)),null!=(e=t.wrap)&&(e=Number(e),isNaN(e)||(this.wrap_=e)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},i.FieldAngle.prototype.initView=function(){i.FieldAngle.superClass_.initView.call(this),this.symbol_=i.utils.dom.createSvgElement(i.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("Â°")),this.textElement_.appendChild(this.symbol_)},i.FieldAngle.prototype.render_=function(){i.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},i.FieldAngle.prototype.showEditor_=function(t){i.FieldAngle.superClass_.showEditor_.call(this,t,i.utils.userAgent.MOBILE||i.utils.userAgent.ANDROID||i.utils.userAgent.IPAD),t=this.dropdownCreate_(),i.DropDownDiv.getContentDiv().appendChild(t),i.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),i.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},i.FieldAngle.prototype.dropdownCreate_=function(){var t=i.utils.dom.createSvgElement(i.utils.Svg.SVG,{xmlns:i.utils.dom.SVG_NS,"xmlns:html":i.utils.dom.HTML_NS,"xmlns:xlink":i.utils.dom.XLINK_NS,version:"1.1",height:2*i.FieldAngle.HALF+"px",width:2*i.FieldAngle.HALF+"px",style:"touch-action: none"},null),e=i.utils.dom.createSvgElement(i.utils.Svg.CIRCLE,{cx:i.FieldAngle.HALF,cy:i.FieldAngle.HALF,r:i.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=i.utils.dom.createSvgElement(i.utils.Svg.LINE,{x1:i.FieldAngle.HALF,y1:i.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var n=0;360>n;n+=15)i.utils.dom.createSvgElement(i.utils.Svg.LINE,{x1:i.FieldAngle.HALF+i.FieldAngle.RADIUS,y1:i.FieldAngle.HALF,x2:i.FieldAngle.HALF+i.FieldAngle.RADIUS-(0==n%45?10:5),y2:i.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+i.FieldAngle.HALF+","+i.FieldAngle.HALF+")"},t);return this.clickWrapper_=i.bindEventWithChecks_(t,"click",this,this.hide_),this.clickSurfaceWrapper_=i.bindEventWithChecks_(e,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=i.bindEventWithChecks_(e,"mousemove",this,this.onMouseMove_,!0,!0),t},i.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(i.unbindEvent_(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(i.unbindEvent_(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(i.unbindEvent_(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},i.FieldAngle.prototype.hide_=function(){i.DropDownDiv.hideIfOwner(this),i.WidgetDiv.hide()},i.FieldAngle.prototype.onMouseMove_=function(t){var e=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=t.clientX-e.left-i.FieldAngle.HALF;t=t.clientY-e.top-i.FieldAngle.HALF,e=Math.atan(-t/n),isNaN(e)||(e=i.utils.math.toDegrees(e),0>n?e+=180:0<t&&(e+=360),e=this.clockwise_?this.offset_+360-e:360-(this.offset_-e),this.displayMouseOrKeyboardValue_(e))},i.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},i.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,e=i.utils.math.toRadians(t%360);t=["M ",i.FieldAngle.HALF,",",i.FieldAngle.HALF];var n=i.FieldAngle.HALF,o=i.FieldAngle.HALF;if(!isNaN(e)){var r=Number(this.clockwise_),s=i.utils.math.toRadians(this.offset_),a=Math.cos(s)*i.FieldAngle.RADIUS,l=Math.sin(s)*-i.FieldAngle.RADIUS;r&&(e=2*s-e),n+=Math.cos(e)*i.FieldAngle.RADIUS,o-=Math.sin(e)*i.FieldAngle.RADIUS,e=Math.abs(Math.floor((e-s)/Math.PI)%2),r&&(e=1-e),t.push(" l ",a,",",l," A ",i.FieldAngle.RADIUS,",",i.FieldAngle.RADIUS," 0 ",e," ",r," ",n,",",o," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",n),this.line_.setAttribute("y2",o)}},i.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var e;if(i.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===i.utils.KeyCodes.LEFT?e=this.sourceBlock_.RTL?1:-1:t.keyCode===i.utils.KeyCodes.RIGHT?e=this.sourceBlock_.RTL?-1:1:t.keyCode===i.utils.KeyCodes.DOWN?e=-1:t.keyCode===i.utils.KeyCodes.UP&&(e=1),e){var n=this.getValue();this.displayMouseOrKeyboardValue_(n+e*this.round_),t.preventDefault(),t.stopPropagation()}},i.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},i.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},i.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),i.fieldRegistry.register("field_angle",i.FieldAngle),i.FieldCheckbox=function(t,e,n){this.checkChar_=null,i.FieldCheckbox.superClass_.constructor.call(this,t,e,n)},i.utils.object.inherits(i.FieldCheckbox,i.Field),i.FieldCheckbox.prototype.DEFAULT_VALUE=!1,i.FieldCheckbox.fromJson=function(t){return new i.FieldCheckbox(t.checked,void 0,t)},i.FieldCheckbox.CHECK_CHAR="âœ“",i.FieldCheckbox.prototype.SERIALIZABLE=!0,i.FieldCheckbox.prototype.CURSOR="default",i.FieldCheckbox.prototype.configure_=function(t){i.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},i.FieldCheckbox.prototype.initView=function(){i.FieldCheckbox.superClass_.initView.call(this),i.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},i.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},i.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||i.FieldCheckbox.CHECK_CHAR},i.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},i.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},i.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},i.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},i.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},i.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},i.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},i.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},i.fieldRegistry.register("field_checkbox",i.FieldCheckbox),i.FieldColour=function(t,e,n){i.FieldColour.superClass_.constructor.call(this,t,e,n),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},i.utils.object.inherits(i.FieldColour,i.Field),i.FieldColour.fromJson=function(t){return new i.FieldColour(t.colour,void 0,t)},i.FieldColour.prototype.SERIALIZABLE=!0,i.FieldColour.prototype.CURSOR="default",i.FieldColour.prototype.isDirty_=!1,i.FieldColour.prototype.colours_=null,i.FieldColour.prototype.titles_=null,i.FieldColour.prototype.columns_=0,i.FieldColour.prototype.configure_=function(t){i.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},i.FieldColour.prototype.initView=function(){this.size_=new i.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},i.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},i.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:i.utils.colour.parse(t)},i.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},i.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},i.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),i.FieldColour.prototype.DEFAULT_VALUE=i.FieldColour.COLOURS[0],i.FieldColour.TITLES=[],i.FieldColour.COLUMNS=7,i.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},i.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},i.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),i.DropDownDiv.getContentDiv().appendChild(this.picker_),i.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},i.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),i.DropDownDiv.hideIfOwner(this))},i.FieldColour.prototype.onKeyDown_=function(t){var e=!1;t.keyCode===i.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),e=!0):t.keyCode===i.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),e=!0):t.keyCode===i.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),e=!0):t.keyCode===i.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),e=!0):t.keyCode===i.utils.KeyCodes.ENTER&&((e=this.getHighlighted_())&&null!==(e=e&&e.label)&&this.setValue(e),i.DropDownDiv.hideWithoutAnimation(),e=!0),e&&t.stopPropagation()},i.FieldColour.prototype.onBlocklyAction=function(t){if(this.picker_)switch(t.name){case i.navigation.actionNames.PREVIOUS:return this.moveHighlightBy_(0,-1),!0;case i.navigation.actionNames.NEXT:return this.moveHighlightBy_(0,1),!0;case i.navigation.actionNames.OUT:return this.moveHighlightBy_(-1,0),!0;case i.navigation.actionNames.IN:return this.moveHighlightBy_(1,0),!0;default:return!1}return i.FieldColour.superClass_.onBlocklyAction.call(this,t)},i.FieldColour.prototype.moveHighlightBy_=function(t,e){var n=this.colours_||i.FieldColour.COLOURS,o=this.columns_||i.FieldColour.COLUMNS,r=this.highlightedIndex_%o,s=Math.floor(this.highlightedIndex_/o);r+=t,s+=e,0>t?0>r&&0<s?(r=o-1,s--):0>r&&(r=0):0<t?r>o-1&&s<Math.floor(n.length/o)-1?(r=0,s++):r>o-1&&r--:0>e?0>s&&(s=0):0<e&&s>Math.floor(n.length/o)-1&&(s=Math.floor(n.length/o)-1),this.setHighlightedCell_(this.picker_.childNodes[s].childNodes[r],s*o+r)},i.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},i.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},i.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&i.utils.dom.removeClass(t,"blocklyColourHighlighted")},i.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||i.FieldColour.COLUMNS,e=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return e?e.childNodes[this.highlightedIndex_%t]:null},i.FieldColour.prototype.setHighlightedCell_=function(t,e){var n=this.getHighlighted_();n&&i.utils.dom.removeClass(n,"blocklyColourHighlighted"),i.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=e,i.utils.aria.setState(this.picker_,i.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},i.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||i.FieldColour.COLUMNS,e=this.colours_||i.FieldColour.COLOURS,n=this.titles_||i.FieldColour.TITLES,o=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",i.utils.aria.setRole(r,i.utils.aria.Role.GRID),i.utils.aria.setState(r,i.utils.aria.State.EXPANDED,!0),i.utils.aria.setState(r,i.utils.aria.State.ROWCOUNT,Math.floor(e.length/t)),i.utils.aria.setState(r,i.utils.aria.State.COLCOUNT,t);for(var s,a=0;a<e.length;a++){0==a%t&&(s=document.createElement("tr"),i.utils.aria.setRole(s,i.utils.aria.Role.ROW),r.appendChild(s));var l=document.createElement("td");s.appendChild(l),l.label=e[a],l.title=n[a]||e[a],l.id=i.utils.IdGenerator.getNextUniqueId(),l.setAttribute("data-index",a),i.utils.aria.setRole(l,i.utils.aria.Role.GRIDCELL),i.utils.aria.setState(l,i.utils.aria.State.LABEL,e[a]),i.utils.aria.setState(l,i.utils.aria.State.SELECTED,e[a]==o),l.style.backgroundColor=e[a],e[a]==o&&(l.className="blocklyColourSelected",this.highlightedIndex_=a)}return this.onClickWrapper_=i.bindEventWithChecks_(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=i.bindEventWithChecks_(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=i.bindEventWithChecks_(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=i.bindEventWithChecks_(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=i.bindEventWithChecks_(r,"keydown",this,this.onKeyDown_),r},i.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(i.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(i.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(i.unbindEvent_(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(i.unbindEvent_(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(i.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},i.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),i.fieldRegistry.register("field_colour",i.FieldColour),i.FieldDropdown=function(t,e,n){"function"!=typeof t&&i.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],i.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],e,n),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},i.utils.object.inherits(i.FieldDropdown,i.Field),i.FieldDropdown.fromJson=function(t){return new i.FieldDropdown(t.options,void 0,t)},i.FieldDropdown.prototype.SERIALIZABLE=!0,i.FieldDropdown.CHECKMARK_OVERHANG=25,i.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,i.FieldDropdown.IMAGE_Y_OFFSET=5,i.FieldDropdown.IMAGE_Y_PADDING=2*i.FieldDropdown.IMAGE_Y_OFFSET,i.FieldDropdown.ARROW_CHAR=i.utils.userAgent.ANDROID?"â–¼":"â–¾",i.FieldDropdown.prototype.CURSOR="default",i.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&i.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},i.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},i.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=i.utils.dom.createSvgElement(i.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?i.FieldDropdown.ARROW_CHAR+" ":" "+i.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},i.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},i.FieldDropdown.prototype.showEditor_=function(t){if(this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new i.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(i.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),i.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;i.DropDownDiv.setColour(t,e)}i.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},i.FieldDropdown.prototype.dropdownCreate_=function(){var t=new i.Menu;t.setRole(i.utils.aria.Role.LISTBOX);var e=this.getOptions(!1);this.selectedMenuItem_=null;for(var n=0;n<e.length;n++){var o=e[n][0],r=e[n][1];if("object"==typeof o){var s=new Image(o.width,o.height);s.src=o.src,s.alt=o.alt||"",o=s}(o=new i.MenuItem(o,r)).setRole(i.utils.aria.Role.OPTION),o.setRightToLeft(this.sourceBlock_.RTL),o.setCheckable(!0),t.addChild(o),o.setChecked(r==this.value_),r==this.value_&&(this.selectedMenuItem_=o),o.onAction(this.handleMenuActionEvent_,this)}return t},i.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},i.FieldDropdown.prototype.handleMenuActionEvent_=function(t){i.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},i.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},i.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var e=!1,n=0;n<t.length;n++){var o=t[n][0];"string"==typeof o?t[n][0]=i.utils.replaceMessageReferences(o):(null!=o.alt&&(t[n][0].alt=i.utils.replaceMessageReferences(o.alt)),e=!0)}if(!(e||2>t.length)){for(e=[],n=0;n<t.length;n++)e.push(t[n][0]);n=i.utils.string.shortestStringLength(e),o=i.utils.string.commonWordPrefix(e,n);var r=i.utils.string.commonWordSuffix(e,n);!o&&!r||n<=o+r||(o&&(this.prefixField=e[0].substring(0,o-1)),r&&(this.suffixField=e[0].substr(1-r)),this.menuGenerator_=i.FieldDropdown.applyTrim_(t,o,r))}}},i.FieldDropdown.applyTrim_=function(t,e,i){for(var n=[],o=0;o<t.length;o++){var r=t[o][0],s=t[o][1];r=r.substring(e,r.length-i),n[o]=[r,s]}return n},i.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},i.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),i.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},i.FieldDropdown.prototype.doClassValidation_=function(t){for(var e,i=!1,n=this.getOptions(!0),o=0;e=n[o];o++)if(e[1]==t){i=!0;break}return i?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},i.FieldDropdown.prototype.doValueUpdate_=function(t){i.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var e,n=0;e=t[n];n++)e[1]==this.value_&&(this.selectedOption_=e)},i.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},i.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},i.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var e=Number(t.height);t=Number(t.width);var n=!!this.borderRect_,o=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,e+i.FieldDropdown.IMAGE_Y_PADDING);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=this.svgArrow_?this.positionSVGArrow_(t+n,o/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):i.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+r+2*n,this.size_.height=o;var s=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",n+r):(s=t+r,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",n)),this.imageElement_.setAttribute("y",o/2-e/2),this.positionTextElement_(s+n,t+r)},i.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),i.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),n=i.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var o=0;this.svgArrow_&&(o=this.positionSVGArrow_(n+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*t,this.size_.height=e,this.positionTextElement_(t,n)},i.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var i=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,n=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?i:t+n)+","+e+")"),o+n},i.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},i.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,i=0;i<t.length;++i){var n=t[i];Array.isArray(n)?"string"!=typeof n[1]?(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option id must be a string. Found "+n[1]+" in: ",n)):n[0]&&"string"!=typeof n[0]&&"string"!=typeof n[0].src&&(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must have a string label or image description. Found"+n[0]+" in: ",n)):(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must be an array. Found: ",n))}if(e)throw TypeError("Found invalid FieldDropdown options.")},i.FieldDropdown.prototype.onBlocklyAction=function(t){if(this.menu_)switch(t.name){case i.navigation.actionNames.PREVIOUS:return this.menu_.highlightPrevious(),!0;case i.navigation.actionNames.NEXT:return this.menu_.highlightNext(),!0;default:return!1}return i.FieldDropdown.superClass_.onBlocklyAction.call(this,t)},i.fieldRegistry.register("field_dropdown",i.FieldDropdown),i.FieldLabelSerializable=function(t,e,n){i.FieldLabelSerializable.superClass_.constructor.call(this,t,e,n)},i.utils.object.inherits(i.FieldLabelSerializable,i.FieldLabel),i.FieldLabelSerializable.fromJson=function(t){var e=i.utils.replaceMessageReferences(t.text);return new i.FieldLabelSerializable(e,void 0,t)},i.FieldLabelSerializable.prototype.EDITABLE=!1,i.FieldLabelSerializable.prototype.SERIALIZABLE=!0,i.fieldRegistry.register("field_label_serializable",i.FieldLabelSerializable),i.FieldImage=function(t,e,n,o,r,s,a){if(!t)throw Error("Src value of an image field is required");if(t=i.utils.replaceMessageReferences(t),n=Number(i.utils.replaceMessageReferences(n)),e=Number(i.utils.replaceMessageReferences(e)),isNaN(n)||isNaN(e))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=e)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",i.FieldImage.superClass_.constructor.call(this,t,null,a),a||(this.flipRtl_=!!s,this.altText_=i.utils.replaceMessageReferences(o)||""),this.size_=new i.utils.Size(e,n+i.FieldImage.Y_PADDING),this.imageHeight_=n,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r),this.imageElement_=null},i.utils.object.inherits(i.FieldImage,i.Field),i.FieldImage.prototype.DEFAULT_VALUE="",i.FieldImage.fromJson=function(t){return new i.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},i.FieldImage.Y_PADDING=1,i.FieldImage.prototype.EDITABLE=!1,i.FieldImage.prototype.isDirty_=!1,i.FieldImage.prototype.configure_=function(t){i.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=i.utils.replaceMessageReferences(t.alt)||""},i.FieldImage.prototype.initView=function(){this.imageElement_=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},i.FieldImage.prototype.updateSize_=function(){},i.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},i.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},i.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},i.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},i.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},i.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},i.FieldImage.prototype.getText_=function(){return this.altText_},i.fieldRegistry.register("field_image",i.FieldImage),i.FieldMultilineInput=function(t,e,n){i.FieldMultilineInput.superClass_.constructor.call(this,t,e,n),this.textGroup_=null},i.utils.object.inherits(i.FieldMultilineInput,i.FieldTextInput),i.FieldMultilineInput.fromJson=function(t){var e=i.utils.replaceMessageReferences(t.text);return new i.FieldMultilineInput(e,void 0,t)},i.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},i.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},i.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},i.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return i.Field.NBSP;var e=t.split("\n");t="";for(var n=0;n<e.length;n++){var o=e[n];o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-4)+"..."),t+=o=o.replace(/\s/g,i.Field.NBSP),n!==e.length-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="â€"),t},i.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var e=0,n=0;n<t.length;n++){var o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;i.utils.dom.createSvgElement(i.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:e+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[n])),e+=o}this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(i.utils.dom.removeClass(t,"blocklyInvalidInput"),i.utils.aria.setState(t,i.utils.aria.State.INVALID,!1)):(i.utils.dom.addClass(t,"blocklyInvalidInput"),i.utils.aria.setState(t,i.utils.aria.State.INVALID,!0)))},i.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,e=0,n=0,o=0;o<t.length;o++){var r=i.utils.dom.getTextWidth(t[o]);r>e&&(e=r),n+=this.getConstants().FIELD_TEXT_HEIGHT+(0<o?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}this.borderRect_&&(n+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,e+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",e),this.borderRect_.setAttribute("height",n)),this.size_.width=e,this.size_.height=n,this.positionBorderRect_()},i.FieldMultilineInput.prototype.widgetCreate_=function(){var t=i.WidgetDiv.DIV,e=this.workspace_.getScale(),n=document.createElement("textarea");n.className="blocklyHtmlInput blocklyHtmlTextAreaInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.getConstants().FIELD_TEXT_FONTSIZE*e+"pt";t.style.fontSize=o,n.style.fontSize=o,n.style.borderRadius=i.FieldTextInput.BORDERRADIUS*e+"px",o=this.getConstants().FIELD_BORDER_RECT_X_PADDING*e;var r=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*e/2;return n.style.padding=r+"px "+o+"px "+r+"px "+o+"px",o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n.style.lineHeight=o*e+"px",t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,i.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n},i.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==i.utils.KeyCodes.ENTER&&i.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},i.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(",")),i.fieldRegistry.register("field_multilinetext",i.FieldMultilineInput),i.FieldNumber=function(t,e,n,o,r,s){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,i.FieldNumber.superClass_.constructor.call(this,t,r,s),s||this.setConstraints(e,n,o)},i.utils.object.inherits(i.FieldNumber,i.FieldTextInput),i.FieldNumber.prototype.DEFAULT_VALUE=0,i.FieldNumber.fromJson=function(t){return new i.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},i.FieldNumber.prototype.SERIALIZABLE=!0,i.FieldNumber.prototype.configure_=function(t){i.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},i.FieldNumber.prototype.setConstraints=function(t,e,i){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(i),this.setValue(this.getValue())},i.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},i.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},i.FieldNumber.prototype.getMin=function(){return this.min_},i.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},i.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},i.FieldNumber.prototype.getMax=function(){return this.max_},i.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},i.FieldNumber.prototype.setPrecisionInternal_=function(t){null==t?this.precision_=0:(t=Number(t),isNaN(t)||(this.precision_=t));var e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}),i=e.indexOf(".");this.decimalPlaces_=-1==i?t?0:null:e.length-i-1},i.FieldNumber.prototype.getPrecision=function(){return this.precision_},i.FieldNumber.prototype.doClassValidation_=function(t){return null===t?null:(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t)?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t))},i.FieldNumber.prototype.widgetCreate_=function(){var t=i.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&i.utils.aria.setState(t,i.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&i.utils.aria.setState(t,i.utils.aria.State.VALUEMAX,this.max_),t},i.fieldRegistry.register("field_number",i.FieldNumber),i.FieldVariable=function(t,e,n,o,r){this.menuGenerator_=i.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new i.utils.Size(0,0),r&&this.configure_(r),e&&this.setValidator(e),r||this.setTypes_(n,o)},i.utils.object.inherits(i.FieldVariable,i.FieldDropdown),i.FieldVariable.fromJson=function(t){var e=i.utils.replaceMessageReferences(t.variable);return new i.FieldVariable(e,void 0,void 0,void 0,t)},i.FieldVariable.prototype.SERIALIZABLE=!0,i.FieldVariable.prototype.configure_=function(t){i.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},i.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=i.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},i.FieldVariable.prototype.shouldAddBorderRect_=function(){return i.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},i.FieldVariable.prototype.fromXml=function(t){var e=t.getAttribute("id"),n=t.textContent,o=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(e=i.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,e,n,o),null!=o&&o!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+i.Xml.domToText(t)+".");this.setValue(e.getId())},i.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},i.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");i.FieldVariable.superClass_.setSourceBlock.call(this,t)},i.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},i.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},i.FieldVariable.prototype.getVariable=function(){return this.variable_},i.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},i.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var e=i.Variables.getVariable(this.sourceBlock_.workspace,t);return e?(e=e.type,this.typeIsAllowed_(e)?t:(console.warn("Variable type doesn't match this field!  Type was "+e),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},i.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=i.Variables.getVariable(this.sourceBlock_.workspace,t),i.FieldVariable.superClass_.doValueUpdate_.call(this,t)},i.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1},i.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},i.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var i=!1,n=0;n<t.length;n++)t[n]==e&&(i=!0);if(!i)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}this.defaultType_=e,this.variableTypes=t},i.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},i.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),e=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var n=this.getVariableTypes_(),o=0;o<n.length;o++){var r=this.sourceBlock_.workspace.getVariablesOfType(n[o]);e=e.concat(r)}for(e.sort(i.VariableModel.compareByName),n=[],o=0;o<e.length;o++)n[o]=[e[o].name,e[o].getId()];return n.push([i.Msg.RENAME_VARIABLE,i.RENAME_VARIABLE_ID]),i.Msg.DELETE_VARIABLE&&n.push([i.Msg.DELETE_VARIABLE.replace("%1",t),i.DELETE_VARIABLE_ID]),n},i.FieldVariable.prototype.onItemSelected_=function(t,e){if(t=e.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==i.RENAME_VARIABLE_ID)return void i.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==i.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},i.FieldVariable.prototype.referencesVariables=function(){return!0},i.fieldRegistry.register("field_variable",i.FieldVariable),i.utils.svgPaths={},i.utils.svgPaths.point=function(t,e){return" "+t+","+e+" "},i.utils.svgPaths.curve=function(t,e){return" "+t+e.join("")},i.utils.svgPaths.moveTo=function(t,e){return" M "+t+","+e+" "},i.utils.svgPaths.moveBy=function(t,e){return" m "+t+","+e+" "},i.utils.svgPaths.lineTo=function(t,e){return" l "+t+","+e+" "},i.utils.svgPaths.line=function(t){return" l"+t.join("")},i.utils.svgPaths.lineOnAxis=function(t,e){return" "+t+" "+e+" "},i.utils.svgPaths.arc=function(t,e,i,n){return t+" "+i+" "+i+" "+e+n},i.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=i.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!i.utils.userAgent.IE&&!i.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},i.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},i.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles={};var e,i=t.blockStyles;for(e in i)this.blockStyles[e]=this.validatedBlockStyle_(i[e]);this.setDynamicProperties_(t)},i.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},i.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=i.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},i.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},i.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},i.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},i.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},i.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var e={};return t&&i.utils.object.mixin(e,t),t=i.utils.parseBlockColour(e.colourPrimary||"#000"),e.colourPrimary=t.hex,e.colourSecondary=e.colourSecondary?i.utils.parseBlockColour(e.colourSecondary).hex:this.generateSecondaryColour_(e.colourPrimary),e.colourTertiary=e.colourTertiary?i.utils.parseBlockColour(e.colourTertiary).hex:this.generateTertiaryColour_(e.colourPrimary),e.hat=e.hat||"",e},i.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return i.utils.colour.blend("#fff",t,.6)||t},i.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return i.utils.colour.blend("#fff",t,.3)||t},i.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&i.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&i.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&i.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},i.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,e=this.JAGGED_TEETH_WIDTH;return{height:t,width:e,path:i.utils.svgPaths.line([i.utils.svgPaths.point(e,t/4),i.utils.svgPaths.point(2*-e,t/2),i.utils.svgPaths.point(e,t/4)])}},i.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(30,-t),i.utils.svgPaths.point(70,-t),i.utils.svgPaths.point(e,0)])}},i.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(t){var o=-(t=t?-1:1),r=n/2,s=r+2.5,a=r+.5,l=i.utils.svgPaths.point(-e,t*r);return r=i.utils.svgPaths.point(e,t*r),i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(0,t*s),i.utils.svgPaths.point(-e,o*a),l])+i.utils.svgPaths.curve("s",[i.utils.svgPaths.point(e,2.5*o),r])}var e=this.TAB_WIDTH,n=this.TAB_HEIGHT,o=t(!0),r=t(!1);return{type:this.SHAPES.PUZZLE,width:e,height:n,pathDown:r,pathUp:o}},i.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(t){return i.utils.svgPaths.line([i.utils.svgPaths.point(t*o,n),i.utils.svgPaths.point(3*t,0),i.utils.svgPaths.point(t*o,-n)])}var e=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(e-3)/2,r=t(1),s=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:n,pathLeft:r,pathRight:s}},i.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:i.utils.svgPaths.arc("a","0 0,0",t,i.utils.svgPaths.point(-t,t)),pathBottom:i.utils.svgPaths.arc("a","0 0,0",t,i.utils.svgPaths.point(t,t))}},i.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,e=i.utils.svgPaths.moveBy(0,t)+i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(t,-t)),n=i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(t,t)),o=i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(-t,-t));return{topLeft:e,topRight:n,bottomRight:i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(-t,t)),bottomLeft:o,rightHeight:t}},i.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case i.INPUT_VALUE:case i.OUTPUT_VALUE:return this.PUZZLE_TAB;case i.PREVIOUS_STATEMENT:case i.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},i.blockRendering.ConstantProvider.prototype.createDom=function(t,e,n){this.injectCSS_(e,n),t=i.utils.dom.createSvgElement(i.utils.Svg.DEFS,{},t),e=i.utils.dom.createSvgElement(i.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),i.utils.dom.createSvgElement(i.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=i.utils.dom.createSvgElement(i.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),i.utils.dom.createSvgElement(i.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter_=e,e=i.utils.dom.createSvgElement(i.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},e),i.utils.dom.createSvgElement(i.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern_=e,i.blockRendering.Debug&&(t=i.utils.dom.createSvgElement(i.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e=i.utils.dom.createSvgElement(i.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),i.utils.dom.createSvgElement(i.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),i.utils.dom.createSvgElement(i.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},i.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var i=e.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=i:((e=document.createElement("style")).id=t,t=document.createTextNode(i),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},i.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},i.Events.MarkerMove=function(t,e,n,o){var r=t?t.workspace.id:void 0;o&&o.getType()==i.ASTNode.types.WORKSPACE&&(r=o.getLocation().id),i.Events.MarkerMove.superClass_.constructor.call(this,r),this.blockId=t?t.id:null,this.oldNode=n,this.newNode=o,this.isCursor=e},i.utils.object.inherits(i.Events.MarkerMove,i.Events.UiBase),i.Events.MarkerMove.prototype.type=i.Events.MARKER_MOVE,i.Events.MarkerMove.prototype.toJson=function(){var t=i.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},i.Events.MarkerMove.prototype.fromJson=function(t){i.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},i.registry.register(i.registry.Type.EVENT,i.Events.MARKER_MOVE,i.Events.MarkerMove),i.blockRendering.MarkerSvg=function(t,e,i){this.workspace_=t,this.marker_=i,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=i.colour||t},i.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",i.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",i.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,i.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},i.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},i.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},i.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?i.blockRendering.MarkerSvg.CURSOR_CLASS:i.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},i.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},i.blockRendering.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||i,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},i.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var e=t.getLocation();t.getType()==i.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==i.ASTNode.types.OUTPUT?this.showWithOutput_(t):e.type==i.INPUT_VALUE?this.showWithInput_(t):e.type==i.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==i.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==i.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==i.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==i.ASTNode.types.STACK&&this.showWithStack_(t)},i.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var e=(t=t.getSourceBlock()).width,n=t.height,o=n*i.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,r=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var s=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(e,r,o,s)}else t.outputConnection?(s=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(e,n,s)):this.positionBlock_(e,r,o);this.setParent_(t),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},i.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},i.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},i.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var e=(t=t.getLocation()).getSize().width,i=t.getSize().height;this.positionRect_(0,0,e,i),this.setParent_(t),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var i=0;e=e.getOffsetInBlock().y;var n=t.getHeightWidth().width;this.workspace_.RTL&&(i=-n),this.positionLine_(i,e,n),this.setParent_(t),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var e=(t=t.getLocation()).getHeightWidth(),i=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var n=-this.constants_.CURSOR_STACK_PADDING/2,o=-this.constants_.CURSOR_STACK_PADDING/2,r=n;this.workspace_.RTL&&(r=-(i+n)),this.positionRect_(r,o,i,e),this.setParent_(t),this.showCurrent_()},i.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},i.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,e,n){t=i.utils.svgPaths.moveBy(-e,n)+i.utils.svgPaths.lineOnAxis("V",-e)+i.utils.svgPaths.lineOnAxis("H",t+2*e)+i.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},i.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var e=t.getOffsetInBlock().x,n=t.getOffsetInBlock().y;t=i.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+e+","+n+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},i.blockRendering.MarkerSvg.prototype.positionLine_=function(t,e,i){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",i),this.currentMarkerSvg=this.markerSvgLine_},i.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,e,n){t=i.utils.svgPaths.moveBy(t,0)+i.utils.svgPaths.lineOnAxis("h",-(t-n.width))+i.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+i.utils.svgPaths.lineOnAxis("V",e)+i.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},i.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,e,n,o){t=i.utils.svgPaths.moveBy(-e,n)+i.utils.svgPaths.lineOnAxis("V",-e)+i.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+i.utils.svgPaths.lineOnAxis("H",t+2*e)+i.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},i.blockRendering.MarkerSvg.prototype.positionRect_=function(t,e,i,n){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",i),this.markerSvgRect_.setAttribute("height",n),this.currentMarkerSvg=this.markerSvgRect_},i.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},i.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},i.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,e){var n=e.getSourceBlock();t=new i.Events.MarkerMove(n,this.isCursor(),t,e),i.Events.fire(t)},i.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},i.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=i.utils.dom.createSvgElement(i.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=i.utils.dom.createSvgElement(i.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();i.utils.dom.createSvgElement(i.utils.Svg.ANIMATE,t,this.markerSvgLine_),i.utils.dom.createSvgElement(i.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",i.utils.dom.createSvgElement(i.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},i.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},i.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&i.utils.dom.removeNode(this.svgGroup_)},i.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},i.blockRendering.Types.LEFT_CORNER=i.blockRendering.Types.LEFT_SQUARE_CORNER|i.blockRendering.Types.LEFT_ROUND_CORNER,i.blockRendering.Types.RIGHT_CORNER=i.blockRendering.Types.RIGHT_SQUARE_CORNER|i.blockRendering.Types.RIGHT_ROUND_CORNER,i.blockRendering.Types.nextTypeValue_=16777216,i.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(i.blockRendering.Types,t)||(i.blockRendering.Types[t]=i.blockRendering.Types.nextTypeValue_,i.blockRendering.Types.nextTypeValue_<<=1),i.blockRendering.Types[t]},i.blockRendering.Types.isField=function(t){return t.type&i.blockRendering.Types.FIELD},i.blockRendering.Types.isHat=function(t){return t.type&i.blockRendering.Types.HAT},i.blockRendering.Types.isIcon=function(t){return t.type&i.blockRendering.Types.ICON},i.blockRendering.Types.isSpacer=function(t){return t.type&i.blockRendering.Types.SPACER},i.blockRendering.Types.isInRowSpacer=function(t){return t.type&i.blockRendering.Types.IN_ROW_SPACER},i.blockRendering.Types.isInput=function(t){return t.type&i.blockRendering.Types.INPUT},i.blockRendering.Types.isExternalInput=function(t){return t.type&i.blockRendering.Types.EXTERNAL_VALUE_INPUT},i.blockRendering.Types.isInlineInput=function(t){return t.type&i.blockRendering.Types.INLINE_INPUT},i.blockRendering.Types.isStatementInput=function(t){return t.type&i.blockRendering.Types.STATEMENT_INPUT},i.blockRendering.Types.isPreviousConnection=function(t){return t.type&i.blockRendering.Types.PREVIOUS_CONNECTION},i.blockRendering.Types.isNextConnection=function(t){return t.type&i.blockRendering.Types.NEXT_CONNECTION},i.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(i.blockRendering.Types.PREVIOUS_CONNECTION|i.blockRendering.Types.NEXT_CONNECTION)},i.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&i.blockRendering.Types.LEFT_ROUND_CORNER},i.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&i.blockRendering.Types.RIGHT_ROUND_CORNER},i.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&i.blockRendering.Types.LEFT_SQUARE_CORNER},i.blockRendering.Types.isRightSquareCorner=function(t){return t.type&i.blockRendering.Types.RIGHT_SQUARE_CORNER},i.blockRendering.Types.isCorner=function(t){return t.type&i.blockRendering.Types.CORNER},i.blockRendering.Types.isJaggedEdge=function(t){return t.type&i.blockRendering.Types.JAGGED_EDGE},i.blockRendering.Types.isRow=function(t){return t.type&i.blockRendering.Types.ROW},i.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&i.blockRendering.Types.BETWEEN_ROW_SPACER},i.blockRendering.Types.isTopRow=function(t){return t.type&i.blockRendering.Types.TOP_ROW},i.blockRendering.Types.isBottomRow=function(t){return t.type&i.blockRendering.Types.BOTTOM_ROW},i.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(i.blockRendering.Types.TOP_ROW|i.blockRendering.Types.BOTTOM_ROW)},i.blockRendering.Types.isInputRow=function(t){return t.type&i.blockRendering.Types.INPUT_ROW},i.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=i.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},i.blockRendering.Connection=function(t,e){i.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=e,this.shape=this.constants_.shapeFor(e),this.isDynamicShape=!!this.shape.isDynamic,this.type|=i.blockRendering.Types.CONNECTION},i.utils.object.inherits(i.blockRendering.Connection,i.blockRendering.Measurable),i.blockRendering.OutputConnection=function(t,e){i.blockRendering.OutputConnection.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},i.utils.object.inherits(i.blockRendering.OutputConnection,i.blockRendering.Connection),i.blockRendering.PreviousConnection=function(t,e){i.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},i.utils.object.inherits(i.blockRendering.PreviousConnection,i.blockRendering.Connection),i.blockRendering.NextConnection=function(t,e){i.blockRendering.NextConnection.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},i.utils.object.inherits(i.blockRendering.NextConnection,i.blockRendering.Connection),i.blockRendering.InputConnection=function(t,e){i.blockRendering.InputConnection.superClass_.constructor.call(this,t,e.connection),this.type|=i.blockRendering.Types.INPUT,this.input=e,this.align=e.align,(this.connectedBlock=e.connection&&e.connection.targetBlock()?e.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},i.utils.object.inherits(i.blockRendering.InputConnection,i.blockRendering.Connection),i.blockRendering.InlineInput=function(t,e){i.blockRendering.InlineInput.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},i.utils.object.inherits(i.blockRendering.InlineInput,i.blockRendering.InputConnection),i.blockRendering.StatementInput=function(t,e){i.blockRendering.StatementInput.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},i.utils.object.inherits(i.blockRendering.StatementInput,i.blockRendering.InputConnection),i.blockRendering.ExternalValueInput=function(t,e){i.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,e),this.type|=i.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},i.utils.object.inherits(i.blockRendering.ExternalValueInput,i.blockRendering.InputConnection),i.blockRendering.Icon=function(t,e){i.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=e,this.isVisible=e.isVisible(),this.type|=i.blockRendering.Types.ICON,t=e.getCorrectedSize(),this.height=t.height,this.width=t.width},i.utils.object.inherits(i.blockRendering.Icon,i.blockRendering.Measurable),i.blockRendering.JaggedEdge=function(t){i.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},i.utils.object.inherits(i.blockRendering.JaggedEdge,i.blockRendering.Measurable),i.blockRendering.Field=function(t,e,n){i.blockRendering.Field.superClass_.constructor.call(this,t),this.field=e,this.isEditable=e.EDITABLE,this.flipRtl=e.getFlipRtl(),this.type|=i.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=n},i.utils.object.inherits(i.blockRendering.Field,i.blockRendering.Measurable),i.blockRendering.Hat=function(t){i.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},i.utils.object.inherits(i.blockRendering.Hat,i.blockRendering.Measurable),i.blockRendering.SquareCorner=function(t,e){i.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(e&&"left"!=e?i.blockRendering.Types.RIGHT_SQUARE_CORNER:i.blockRendering.Types.LEFT_SQUARE_CORNER)|i.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},i.utils.object.inherits(i.blockRendering.SquareCorner,i.blockRendering.Measurable),i.blockRendering.RoundCorner=function(t,e){i.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(e&&"left"!=e?i.blockRendering.Types.RIGHT_ROUND_CORNER:i.blockRendering.Types.LEFT_ROUND_CORNER)|i.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},i.utils.object.inherits(i.blockRendering.RoundCorner,i.blockRendering.Measurable),i.blockRendering.InRowSpacer=function(t,e){i.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|i.blockRendering.Types.SPACER|i.blockRendering.Types.IN_ROW_SPACER,this.width=e,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},i.utils.object.inherits(i.blockRendering.InRowSpacer,i.blockRendering.Measurable),i.blockRendering.Row=function(t){this.type=i.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},i.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},i.blockRendering.Row.prototype.getLastInput=function(){for(var t,e=this.elements.length-1;t=this.elements[e];e--)if(i.blockRendering.Types.isInput(t))return t;return null},i.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},i.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},i.blockRendering.Row.prototype.getFirstSpacer=function(){for(var t,e=0;t=this.elements[e];e++)if(i.blockRendering.Types.isSpacer(t))return t;return null},i.blockRendering.Row.prototype.getLastSpacer=function(){for(var t,e=this.elements.length-1;t=this.elements[e];e--)if(i.blockRendering.Types.isSpacer(t))return t;return null},i.blockRendering.TopRow=function(t){i.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},i.utils.object.inherits(i.blockRendering.TopRow,i.blockRendering.Row),i.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,i=t.getPreviousBlock();return!!t.outputConnection||e||!!i&&i.getNextBlock()==t},i.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},i.blockRendering.TopRow.prototype.measure=function(){for(var t,e=0,n=0,o=0,r=0;t=this.elements[r];r++)n+=t.width,i.blockRendering.Types.isSpacer(t)||(i.blockRendering.Types.isHat(t)?o=Math.max(o,t.ascenderHeight):e=Math.max(e,t.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},i.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},i.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},i.blockRendering.BottomRow=function(t){i.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},i.utils.object.inherits(i.blockRendering.BottomRow,i.blockRendering.Row),i.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},i.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},i.blockRendering.BottomRow.prototype.measure=function(){for(var t,e=0,n=0,o=0,r=0;t=this.elements[r];r++)n+=t.width,i.blockRendering.Types.isSpacer(t)||(i.blockRendering.Types.isNextConnection(t)?o=Math.max(o,t.height):e=Math.max(e,t.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},i.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},i.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},i.blockRendering.SpacerRow=function(t,e,n){i.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|i.blockRendering.Types.SPACER|i.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=n,this.height=e,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new i.blockRendering.InRowSpacer(this.constants_,n)]},i.utils.object.inherits(i.blockRendering.SpacerRow,i.blockRendering.Row),i.blockRendering.SpacerRow.prototype.measure=function(){},i.blockRendering.InputRow=function(t){i.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},i.utils.object.inherits(i.blockRendering.InputRow,i.blockRendering.Row),i.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var t,e=0,n=0;t=this.elements[n];n++)this.width+=t.width,i.blockRendering.Types.isInput(t)&&(i.blockRendering.Types.isStatementInput(t)?e+=t.connectedBlockWidth:i.blockRendering.Types.isExternalInput(t)&&0!=t.connectedBlockWidth&&(e+=t.connectedBlockWidth-t.connectionWidth)),i.blockRendering.Types.isSpacer(t)||(this.height=Math.max(this.height,t.height));this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e},i.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},i.blockRendering.RenderInfo=function(t,e){this.block_=e,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=e.outputConnection?new i.blockRendering.OutputConnection(this.constants_,e.outputConnection):null,this.isInline=e.getInputsInline()&&!e.isCollapsed(),this.isCollapsed=e.isCollapsed(),this.isInsertionMarker=e.isInsertionMarker(),this.RTL=e.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new i.blockRendering.TopRow(this.constants_),this.bottomRow=new i.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},i.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},i.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},i.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new i.blockRendering.InputRow(this.constants_);this.inputRows.push(t);var e=this.block_.getIcons();if(e.length)for(var n,o=0;n=e[o];o++){var r=new i.blockRendering.Icon(this.constants_,n);this.isCollapsed&&n.collapseHidden?this.hiddenIcons.push(r):t.elements.push(r)}for(n=null,o=0;e=this.block_.inputList[o];o++)if(e.isVisible()){for(this.shouldStartNewRow_(e,n)&&(this.rows.push(t),t=new i.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),n=0;r=e.fieldRow[n];n++)t.elements.push(new i.blockRendering.Field(this.constants_,r,e));this.addInput_(e,t),n=e}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new i.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},i.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,e=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new i.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new i.blockRendering.RoundCorner(this.constants_)),e?(t=new i.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new i.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==i.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new i.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new i.blockRendering.RoundCorner(this.constants_,"right"))},i.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==i.NEXT_STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new i.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new i.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new i.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new i.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new i.blockRendering.RoundCorner(this.constants_,"right"))},i.blockRendering.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type==i.INPUT_VALUE?(e.elements.push(new i.blockRendering.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type==i.NEXT_STATEMENT?(e.elements.push(new i.blockRendering.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type==i.INPUT_VALUE?(e.elements.push(new i.blockRendering.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type==i.DUMMY_INPUT&&(e.minHeight=Math.max(e.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),null==e.align&&(e.align=t.align)},i.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return!(!e||t.type!=i.NEXT_STATEMENT&&e.type!=i.NEXT_STATEMENT&&(t.type!=i.INPUT_VALUE&&t.type!=i.DUMMY_INPUT||this.isInline))},i.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var t,e=0;t=this.rows[e];e++){var n=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(var o=0;o<n.length-1;o++){t.elements.push(n[o]);var r=this.getInRowSpacing_(n[o],n[o+1]);t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,r))}t.elements.push(n[n.length-1]),t.endsWithElemSpacer()&&t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}},i.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t&&e&&i.blockRendering.Types.isStatementInput(e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&i.blockRendering.Types.isInput(t)&&!e){if(i.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(i.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&i.blockRendering.Types.isLeftSquareCorner(t)&&e&&(i.blockRendering.Types.isPreviousConnection(e)||i.blockRendering.Types.isNextConnection(e))?e.notchOffset:t&&i.blockRendering.Types.isLeftRoundedCorner(t)&&e&&(i.blockRendering.Types.isPreviousConnection(e)||i.blockRendering.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},i.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var t,e=0,i=0,n=0,o=0;t=this.rows[o];o++){if(t.measure(),i=Math.max(i,t.width),t.hasStatement){var r=t.getLastInput();e=Math.max(e,t.width-r.width)}n=Math.max(n,t.widthWithConnectedBlocks)}for(this.statementEdge=e,this.width=i,o=0;t=this.rows[o];o++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(i,n),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},i.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var t,e=0;t=this.rows[e];e++)if(t.hasStatement)this.alignStatementRow_(t);else{var n=t.width;0<(n=this.getDesiredRowWidth_(t)-n)&&this.addAlignmentPadding_(t,n),i.blockRendering.Types.isTopOrBottomRow(t)&&(t.widthWithConnectedBlocks=t.width)}},i.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},i.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,e){var n=t.getFirstSpacer(),o=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=e),t.align==i.ALIGN_LEFT?o.width+=e:t.align==i.ALIGN_CENTRE?(n.width+=e/2,o.width+=e/2):t.align==i.ALIGN_RIGHT?n.width+=e:o.width+=e,t.width+=e},i.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),i=t.width-e.width,n=this.statementEdge;0<(i=n-i)&&this.addAlignmentPadding_(t,i),i=t.width,n=this.getDesiredRowWidth_(t),e.width+=n-i,e.height=Math.max(e.height,t.height),t.width+=n-i,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},i.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},i.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,e){var n=this.getSpacerRowHeight_(t,e),o=this.getSpacerRowWidth_(t,e);return n=new i.blockRendering.SpacerRow(this.constants_,n,o),t.hasStatement&&(n.followsStatement=!0),e.hasStatement&&(n.precedesStatement=!0),n},i.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},i.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},i.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,e){return i.blockRendering.Types.isSpacer(e)?t.yPos+e.height/2:i.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,i.blockRendering.Types.isNextConnection(e)?t+e.height/2:t-e.height/2):i.blockRendering.Types.isTopRow(t)?i.blockRendering.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2:t.yPos+t.height/2},i.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var e,n=t.xPos,o=0;e=t.elements[o];o++)i.blockRendering.Types.isSpacer(e)&&(e.height=t.height),e.xPos=n,e.centerline=this.getElemCenterline_(t,e),n+=e.width},i.blockRendering.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++)t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks),this.recordElemPositions_(t);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=e+this.startX,this.height=i,this.startY=this.topRow.capline,this.bottomRow.baseline=i-this.bottomRow.descenderHeight},i.blockRendering.Drawer=function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()},i.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),i.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},i.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},i.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var t,e=0;t=this.info_.hiddenIcons[e];e++)t.icon.iconGroup_.setAttribute("display","none")},i.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},i.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,e=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=i.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var n,o=0;n=e[o];o++)i.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:i.blockRendering.Types.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:i.blockRendering.Types.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:i.blockRendering.Types.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:i.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=i.utils.svgPaths.lineOnAxis("h",n.width));this.outlinePath_+=i.utils.svgPaths.lineOnAxis("v",t.height)},i.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+i.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},i.blockRendering.Drawer.prototype.drawValueInput_=function(t){var e=t.getLastInput();this.positionExternalValueConnection_(t);var n="function"==typeof e.shape.pathDown?e.shape.pathDown(e.height):e.shape.pathDown;this.outlinePath_+=i.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+n+i.utils.svgPaths.lineOnAxis("v",t.height-e.connectionHeight)},i.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),n=e.xPos+e.notchOffset+e.shape.width;e=e.shape.pathRight+i.utils.svgPaths.lineOnAxis("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=i.utils.svgPaths.lineOnAxis("H",n)+e+i.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+i.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},i.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=i.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},i.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,e=t.elements;this.positionNextConnection_();for(var n,o=0,r="",s=e.length-1;n=e[s];s--)i.blockRendering.Types.isNextConnection(n)?r+=n.shape.pathRight:i.blockRendering.Types.isLeftSquareCorner(n)?r+=i.utils.svgPaths.lineOnAxis("H",t.xPos):i.blockRendering.Types.isLeftRoundedCorner(n)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:i.blockRendering.Types.isRightRoundedCorner(n)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):i.blockRendering.Types.isSpacer(n)&&(r+=i.utils.svgPaths.lineOnAxis("h",-1*n.width));this.outlinePath_+=i.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=r},i.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var e=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=i.utils.svgPaths.lineOnAxis("V",e)+t}this.outlinePath_+="z"},i.blockRendering.Drawer.prototype.drawInternals_=function(){for(var t,e=0;t=this.info_.rows[e];e++)for(var n,o=0;n=t.elements[o];o++)i.blockRendering.Types.isInlineInput(n)?this.drawInlineInput_(n):(i.blockRendering.Types.isIcon(n)||i.blockRendering.Types.isField(n))&&this.layoutField_(n)},i.blockRendering.Drawer.prototype.layoutField_=function(t){if(i.blockRendering.Types.isField(t))var e=t.field.getSvgRoot();else i.blockRendering.Types.isIcon(t)&&(e=t.icon.iconGroup_);var n=t.centerline-t.height/2,o=t.xPos,r="";this.info_.RTL&&(o=-(o+t.width),t.flipRtl&&(o+=t.width,r="scale(-1 1)")),i.blockRendering.Types.isIcon(t)?(e.setAttribute("display","block"),e.setAttribute("transform","translate("+o+","+n+")"),t.icon.computeIconLocation()):e.setAttribute("transform","translate("+o+","+n+")"+r),this.info_.isInsertionMarker&&e.setAttribute("display","none")},i.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var e=t.width,n=t.height,o=t.connectionOffsetY,r=t.connectionHeight+o;this.inlinePath_+=i.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-n/2)+i.utils.svgPaths.lineOnAxis("v",o)+t.shape.pathDown+i.utils.svgPaths.lineOnAxis("v",n-r)+i.utils.svgPaths.lineOnAxis("h",e-t.connectionWidth)+i.utils.svgPaths.lineOnAxis("v",-n)+"z",this.positionInlineInputConnection_(t)},i.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var i=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY)}},i.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},i.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.width;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},i.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},i.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,t.baseline)}},i.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},i.blockRendering.PathObject=function(t,e,n){this.constants=n,this.svgRoot=t,this.svgPath=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=e,this.markerSvg=this.cursorSvg=null},i.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},i.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},i.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},i.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},i.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},i.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},i.blockRendering.PathObject.prototype.setClass_=function(t,e){e?i.utils.dom.addClass(this.svgRoot,t):i.utils.dom.removeClass(this.svgRoot,t)},i.blockRendering.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},i.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},i.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},i.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},i.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},i.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},i.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},i.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},i.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,e){},i.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},i.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},i.blockRendering.Renderer.prototype.init=function(t,e){this.constants_=this.makeConstants_(),e&&(this.overrides=e,i.utils.object.mixin(this.constants_,e)),this.constants_.setTheme(t),this.constants_.init()},i.blockRendering.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},i.blockRendering.Renderer.prototype.refreshDom=function(t,e){var n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&i.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(e),this.constants_.init(),this.createDom(t,e)},i.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},i.blockRendering.Renderer.prototype.makeConstants_=function(){return new i.blockRendering.ConstantProvider},i.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new i.blockRendering.RenderInfo(this,t)},i.blockRendering.Renderer.prototype.makeDrawer_=function(t,e){return new i.blockRendering.Drawer(t,e)},i.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!i.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new i.blockRendering.Debug(this.getConstants())},i.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,e){return new i.blockRendering.MarkerSvg(t,this.getConstants(),e)},i.blockRendering.Renderer.prototype.makePathObject=function(t,e){return new i.blockRendering.PathObject(t,e,this.constants_)},i.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},i.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},i.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,e,n){return n==i.OUTPUT_VALUE?(n=e.outputConnection,t=i.Connection.lastConnectionInRow(t,e)):(n=e.previousConnection,t=t.lastConnectionInStack()),!!t&&n.getConnectionChecker().canConnect(t,n,!1)},i.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,e,n){return e.type==i.OUTPUT_VALUE||e.type==i.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(n,t.targetBlock(),e.type)?i.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:i.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:i.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},i.blockRendering.Renderer.prototype.render=function(t){i.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var e=this.makeRenderInfo_(t);e.measure(),this.makeDrawer_(t,e).draw()},i.geras={},i.geras.ConstantProvider=function(){i.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},i.utils.object.inherits(i.geras.ConstantProvider,i.blockRendering.ConstantProvider),i.geras.ConstantProvider.prototype.getCSS_=function(t){return i.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},i.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},i.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},i.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=i.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var e,n=0;e=t.elements[n];n++)i.blockRendering.Types.isLeftSquareCorner(e)?this.steps_+=this.highlightConstants_.START_POINT:i.blockRendering.Types.isLeftRoundedCorner(e)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):i.blockRendering.Types.isPreviousConnection(e)?this.steps_+=this.notchPaths_.pathLeft:i.blockRendering.Types.isHat(e)?this.steps_+=this.startPaths_.path(this.RTL_):i.blockRendering.Types.isSpacer(e)&&0!=e.width&&(this.steps_+=i.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_));this.steps_+=i.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},i.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+i.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},i.geras.Highlighter.prototype.drawValueInput=function(t){var e=t.getLastInput();if(this.RTL_){var n=t.height-e.connectionHeight;this.steps_+=i.utils.svgPaths.moveTo(e.xPos+e.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+i.utils.svgPaths.lineOnAxis("v",n)}else this.steps_+=i.utils.svgPaths.moveTo(e.xPos+e.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},i.geras.Highlighter.prototype.drawStatementInput=function(t){var e=t.getLastInput();if(this.RTL_){var n=t.height-2*this.insideCornerPaths_.height;this.steps_+=i.utils.svgPaths.moveTo(e.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+i.utils.svgPaths.lineOnAxis("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+i.utils.svgPaths.lineTo(t.width-e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=i.utils.svgPaths.moveTo(e.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+i.utils.svgPaths.lineTo(t.width-e.xPos-this.insideCornerPaths_.width,0)},i.geras.Highlighter.prototype.drawRightSideRow=function(t){var e=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=i.utils.svgPaths.lineOnAxis("H",e)),this.RTL_&&(this.steps_+=i.utils.svgPaths.lineOnAxis("H",e),t.height>this.highlightOffset_&&(this.steps_+=i.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},i.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=i.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var e=this.info_.bottomRow.elements[0];i.blockRendering.Types.isLeftSquareCorner(e)?this.steps_+=i.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):i.blockRendering.Types.isLeftRoundedCorner(e)&&(this.steps_+=i.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},i.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=i.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=i.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=i.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,i.blockRendering.Types.isLeftRoundedCorner(t.elements[0])?this.steps_+=i.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=i.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},i.geras.Highlighter.prototype.drawInlineInput=function(t){var e=this.highlightOffset_,n=t.xPos+t.connectionWidth,o=t.centerline-t.height/2,r=t.width-t.connectionWidth,s=o+e;this.RTL_?(o=t.connectionOffsetY-e,t=t.height-(t.connectionOffsetY+t.connectionHeight)+e,this.inlineSteps_+=i.utils.svgPaths.moveTo(n-e,s)+i.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+i.utils.svgPaths.lineOnAxis("v",t)+i.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=i.utils.svgPaths.moveTo(t.xPos+t.width+e,s)+i.utils.svgPaths.lineOnAxis("v",t.height)+i.utils.svgPaths.lineOnAxis("h",-r)+i.utils.svgPaths.moveTo(n,o+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},i.geras.InlineInput=function(t,e){i.geras.InlineInput.superClass_.constructor.call(this,t,e),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},i.utils.object.inherits(i.geras.InlineInput,i.blockRendering.InlineInput),i.geras.StatementInput=function(t,e){i.geras.StatementInput.superClass_.constructor.call(this,t,e),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},i.utils.object.inherits(i.geras.StatementInput,i.blockRendering.StatementInput),i.geras.RenderInfo=function(t,e){i.geras.RenderInfo.superClass_.constructor.call(this,t,e)},i.utils.object.inherits(i.geras.RenderInfo,i.blockRendering.RenderInfo),i.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},i.geras.RenderInfo.prototype.populateBottomRow_=function(){i.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==i.NEXT_STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},i.geras.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type==i.INPUT_VALUE?(e.elements.push(new i.geras.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type==i.NEXT_STATEMENT?(e.elements.push(new i.geras.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type==i.INPUT_VALUE?(e.elements.push(new i.blockRendering.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type==i.DUMMY_INPUT&&(e.minHeight=Math.max(e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),this.isInline||null!=e.align||(e.align=t.align)},i.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var t,e=!1,n=0;t=this.rows[n];n++)t.hasExternalInput&&(e=!0);for(n=0;t=this.rows[n];n++){var o=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){t.elements.push(o[r]);var s=this.getInRowSpacing_(o[r],o[r+1]);t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,s))}t.elements.push(o[o.length-1]),t.endsWithElemSpacer()&&(s=this.getInRowSpacing_(o[o.length-1],null),e&&t.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,s)))}}},i.geras.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&i.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&i.blockRendering.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&i.blockRendering.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!i.blockRendering.Types.isInput(t)&&(!e||i.blockRendering.Types.isStatementInput(e)))return i.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:i.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:i.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:i.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:i.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:i.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isInput(t)&&!e){if(i.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(i.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!i.blockRendering.Types.isInput(t)&&e&&i.blockRendering.Types.isInput(e)){if(i.blockRendering.Types.isField(t)&&t.isEditable){if(i.blockRendering.Types.isInlineInput(e)||i.blockRendering.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(i.blockRendering.Types.isInlineInput(e)||i.blockRendering.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(i.blockRendering.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(i.blockRendering.Types.isIcon(t)&&e&&!i.blockRendering.Types.isInput(e))return this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isInlineInput(t)&&e&&i.blockRendering.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isLeftSquareCorner(t)&&e){if(i.blockRendering.Types.isHat(e))return this.constants_.NO_PADDING;if(i.blockRendering.Types.isPreviousConnection(e))return e.notchOffset;if(i.blockRendering.Types.isNextConnection(e))return t=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,e.notchOffset+t}if(i.blockRendering.Types.isLeftRoundedCorner(t)&&e){if(i.blockRendering.Types.isPreviousConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS;if(i.blockRendering.Types.isNextConnection(e))return t=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,e.notchOffset-this.constants_.CORNER_RADIUS+t}return i.blockRendering.Types.isField(t)&&e&&i.blockRendering.Types.isField(e)&&t.isEditable==e.isEditable||e&&i.blockRendering.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},i.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return i.blockRendering.Types.isTopRow(t)&&i.blockRendering.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:i.blockRendering.Types.isTopRow(t)||i.blockRendering.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||!t.hasStatement&&e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},i.geras.RenderInfo.prototype.getElemCenterline_=function(t,e){if(i.blockRendering.Types.isSpacer(e))return t.yPos+e.height/2;if(i.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,i.blockRendering.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(i.blockRendering.Types.isTopRow(t))return i.blockRendering.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var n=t.yPos;return i.blockRendering.Types.isField(e)||i.blockRendering.Types.isIcon(e)?(n+=e.height/2,(t.hasInlineInput||t.hasStatement)&&e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=i.blockRendering.Types.isInlineInput(e)?n+e.height/2:n+t.height/2,n},i.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var t,e=0,n=null,o=this.rows.length-1;t=this.rows[o];o--)t.nextRightEdge=e,i.blockRendering.Types.isInputRow(t)&&(t.hasStatement&&this.alignStatementRow_(t),n&&n.hasStatement&&t.width<n.width?t.nextRightEdge=n.width:e=t.width,n=t);for(o=e=0;t=this.rows[o];o++)t.hasStatement?e=this.getDesiredRowWidth_(t):i.blockRendering.Types.isSpacer(t)?t.width=Math.max(e,t.nextRightEdge):(0<(e=Math.max(e,t.nextRightEdge)-t.width)&&this.addAlignmentPadding_(t,e),e=t.width)}else i.geras.RenderInfo.superClass_.alignRowElements_.call(this)},i.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:i.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},i.geras.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++){t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var o=i-this.topRow.ascenderHeight;t==this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,i+=o),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=i-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=i+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},i.geras.Drawer=function(t,e){i.geras.Drawer.superClass_.constructor.call(this,t,e),this.highlighter_=new i.geras.Highlighter(e)},i.utils.object.inherits(i.geras.Drawer,i.blockRendering.Drawer),i.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),i.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},i.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),i.geras.Drawer.superClass_.drawTop_.call(this)},i.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),i.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},i.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),i.geras.Drawer.superClass_.drawValueInput_.call(this,t)},i.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),i.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},i.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=i.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+i.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},i.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),i.geras.Drawer.superClass_.drawBottom_.call(this)},i.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),i.geras.Drawer.superClass_.drawLeft_.call(this)},i.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),i.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},i.geras.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var i=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},i.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.statementEdge+e.notchOffset;i=this.info_.RTL?-1*i:i+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(i,t.yPos+this.constants_.DARK_PATH_OFFSET)}},i.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var i=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}},i.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},i.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=i.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},i.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},i.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,n=(1-Math.SQRT1_2)*(t+e)-e,o=i.utils.svgPaths.moveBy(n,n)+i.utils.svgPaths.arc("a","0 0,0",t,i.utils.svgPaths.point(-n-e,t-n)),r=i.utils.svgPaths.arc("a","0 0,0",t+e,i.utils.svgPaths.point(t+e,t+e)),s=i.utils.svgPaths.moveBy(n,-n)+i.utils.svgPaths.arc("a","0 0,0",t+e,i.utils.svgPaths.point(t-n,n+e));return{width:t+e,height:t,pathTop:function(t){return t?o:""},pathBottom:function(t){return t?r:s}}},i.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,n=(1-Math.SQRT1_2)*(t-e)+e,o=i.utils.svgPaths.moveBy(n,n)+i.utils.svgPaths.arc("a","0 0,1",t-e,i.utils.svgPaths.point(t-n,-n+e)),r=i.utils.svgPaths.moveBy(e,t)+i.utils.svgPaths.arc("a","0 0,1",t-e,i.utils.svgPaths.point(t,-t+e)),s=-n,a=i.utils.svgPaths.moveBy(n,s)+i.utils.svgPaths.arc("a","0 0,1",t-e,i.utils.svgPaths.point(-n+e,-s-t));return{height:t,topLeft:function(t){return t?o:r},bottomLeft:function(){return a}}},i.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,e=this.constantProvider.TAB_HEIGHT,n=i.utils.svgPaths.moveBy(-2,3.4-e)+i.utils.svgPaths.lineTo(-.45*t,-2.1),o=i.utils.svgPaths.lineOnAxis("v",2.5)+i.utils.svgPaths.moveBy(.97*-t,2.5)+i.utils.svgPaths.curve("q",[i.utils.svgPaths.point(.05*-t,10),i.utils.svgPaths.point(.3*t,9.5)])+i.utils.svgPaths.moveBy(.67*t,-1.9)+i.utils.svgPaths.lineOnAxis("v",2.5),r=i.utils.svgPaths.lineOnAxis("v",-1.5)+i.utils.svgPaths.moveBy(-.92*t,-.5)+i.utils.svgPaths.curve("q",[i.utils.svgPaths.point(-.19*t,-5.5),i.utils.svgPaths.point(0,-11)])+i.utils.svgPaths.moveBy(.92*t,1),s=i.utils.svgPaths.moveBy(-5,e-.7)+i.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:e,pathUp:function(t){return t?n:r},pathDown:function(t){return t?o:s}}},i.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:i.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},i.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:i.utils.svgPaths.lineTo(5.1,2.6)+i.utils.svgPaths.moveBy(-10.2,6.8)+i.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},i.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,e=i.utils.svgPaths.moveBy(25,-8.7)+i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(29.7,-6.2),i.utils.svgPaths.point(57.2,-.5),i.utils.svgPaths.point(75,8.7)]),n=i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(17.8,-9.2),i.utils.svgPaths.point(45.3,-14.9),i.utils.svgPaths.point(75,-8.7)])+i.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(t){return t?e:n}}},i.geras.PathObject=function(t,e,n){this.constants=n,this.svgRoot=t,this.svgPathDark=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=e},i.utils.object.inherits(i.geras.PathObject,i.blockRendering.PathObject),i.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},i.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},i.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},i.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),i.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},i.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=i.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},i.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},i.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},i.geras.PathObject.prototype.updateDisabled_=function(t){i.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},i.geras.Renderer=function(t){i.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},i.utils.object.inherits(i.geras.Renderer,i.blockRendering.Renderer),i.geras.Renderer.prototype.init=function(t,e){i.geras.Renderer.superClass_.init.call(this,t,e),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},i.geras.Renderer.prototype.refreshDom=function(t,e){i.geras.Renderer.superClass_.refreshDom.call(this,t,e),this.getHighlightConstants().init()},i.geras.Renderer.prototype.makeConstants_=function(){return new i.geras.ConstantProvider},i.geras.Renderer.prototype.makeRenderInfo_=function(t){return new i.geras.RenderInfo(this,t)},i.geras.Renderer.prototype.makeDrawer_=function(t,e){return new i.geras.Drawer(t,e)},i.geras.Renderer.prototype.makePathObject=function(t,e){return new i.geras.PathObject(t,e,this.getConstants())},i.geras.Renderer.prototype.makeHighlightConstants_=function(){return new i.geras.HighlightConstantProvider(this.getConstants())},i.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},i.blockRendering.register("geras",i.geras.Renderer),i.thrasos={},i.thrasos.RenderInfo=function(t,e){i.thrasos.RenderInfo.superClass_.constructor.call(this,t,e)},i.utils.object.inherits(i.thrasos.RenderInfo,i.blockRendering.RenderInfo),i.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},i.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var t,e=!1,n=0;t=this.rows[n];n++)t.hasExternalInput&&(e=!0);for(n=0;t=this.rows[n];n++){var o=t.elements;t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0])));for(var r=0;r<o.length-1;r++){t.elements.push(o[r]);var s=this.getInRowSpacing_(o[r],o[r+1]);t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,s))}t.elements.push(o[o.length-1]),t.endsWithElemSpacer()&&(s=this.getInRowSpacing_(o[o.length-1],null),e&&t.hasDummyInput&&(s+=this.constants_.TAB_WIDTH),t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,s)))}},i.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&i.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&i.blockRendering.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&i.blockRendering.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!i.blockRendering.Types.isInput(t)&&!e)return i.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:i.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:i.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:i.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:i.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:i.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isInput(t)&&!e){if(i.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(i.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!i.blockRendering.Types.isInput(t)&&e&&i.blockRendering.Types.isInput(e)){if(i.blockRendering.Types.isField(t)&&t.isEditable){if(i.blockRendering.Types.isInlineInput(e)||i.blockRendering.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(i.blockRendering.Types.isInlineInput(e)||i.blockRendering.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(i.blockRendering.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(i.blockRendering.Types.isIcon(t)&&e&&!i.blockRendering.Types.isInput(e))return this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isInlineInput(t)&&e&&i.blockRendering.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(i.blockRendering.Types.isLeftSquareCorner(t)&&e){if(i.blockRendering.Types.isHat(e))return this.constants_.NO_PADDING;if(i.blockRendering.Types.isPreviousConnection(e)||i.blockRendering.Types.isNextConnection(e))return e.notchOffset}return i.blockRendering.Types.isLeftRoundedCorner(t)&&e?e.notchOffset-this.constants_.CORNER_RADIUS:i.blockRendering.Types.isField(t)&&e&&i.blockRendering.Types.isField(e)&&t.isEditable==e.isEditable||e&&i.blockRendering.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},i.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return i.blockRendering.Types.isTopRow(t)&&i.blockRendering.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:i.blockRendering.Types.isTopRow(t)||i.blockRendering.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},i.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,e){if(i.blockRendering.Types.isSpacer(e))return t.yPos+e.height/2;if(i.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,i.blockRendering.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(i.blockRendering.Types.isTopRow(t))return i.blockRendering.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var n=t.yPos;return i.blockRendering.Types.isField(e)&&t.hasStatement?n+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+e.height/2):n+t.height/2},i.thrasos.RenderInfo.prototype.finalize_=function(){for(var t,e=0,i=0,n=0;t=this.rows[n];n++){t.yPos=i,t.xPos=this.startX,i+=t.height,e=Math.max(e,t.widthWithConnectedBlocks);var o=i-this.topRow.ascenderHeight;t==this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,i+=o),this.recordElemPositions_(t)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(e=Math.max(e,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=i-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=i,this.startY=this.topRow.capline},i.thrasos.Renderer=function(t){i.thrasos.Renderer.superClass_.constructor.call(this,t)},i.utils.object.inherits(i.thrasos.Renderer,i.blockRendering.Renderer),i.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new i.thrasos.RenderInfo(this,t)},i.blockRendering.register("thrasos",i.thrasos.Renderer),i.zelos={},i.zelos.ConstantProvider=function(){i.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},i.utils.object.inherits(i.zelos.ConstantProvider,i.blockRendering.ConstantProvider),i.zelos.ConstantProvider.prototype.setFontConstants_=function(t){i.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},i.zelos.ConstantProvider.prototype.init=function(){i.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},i.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){i.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var e=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=e&&!isNaN(e)?e:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},i.zelos.ConstantProvider.prototype.dispose=function(){i.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&i.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&i.utils.dom.removeNode(this.replacementGlowFilter_)},i.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(25,-t),i.utils.svgPaths.point(71,-t),i.utils.svgPaths.point(e,0)])}},i.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(t,n,o){var r=t/2;return r=r>e?e:r,o=o?-1:1,t=(n?-1:1)*t/2,i.utils.svgPaths.lineTo(-o*r,t)+i.utils.svgPaths.lineTo(o*r,t)}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(t){return(t/=2)>e?e:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},i.zelos.ConstantProvider.prototype.makeRounded=function(){function t(t,e,o){var r=t>n?t-n:0;return t=(t>n?n:t)/2,i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point((e?-1:1)*t,(e?-1:1)*t))+i.utils.svgPaths.lineOnAxis("v",(o?1:-1)*r)+i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point((e?1:-1)*t,(e?-1:1)*t))}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*e;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(t){return(t/=2)>e?e:t},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},i.zelos.ConstantProvider.prototype.makeSquared=function(){function t(t,n,o){return t-=2*e,i.utils.svgPaths.arc("a","0 0,1",e,i.utils.svgPaths.point((n?-1:1)*e,(n?-1:1)*e))+i.utils.svgPaths.lineOnAxis("v",(o?1:-1)*t)+i.utils.svgPaths.arc("a","0 0,1",e,i.utils.svgPaths.point((n?1:-1)*e,(n?-1:1)*e))}var e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(t){return e},height:function(t){return t},connectionOffsetY:function(t){return t/2},connectionOffsetX:function(t){return-t},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},i.zelos.ConstantProvider.prototype.shapeFor=function(t){var e=t.getCheck();switch(!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),t.type){case i.INPUT_VALUE:case i.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return e&&-1!=e.indexOf("Boolean")?this.HEXAGONAL:(e&&-1!=e.indexOf("Number")||e&&e.indexOf("String"),this.ROUNDED);case i.PREVIOUS_STATEMENT:case i.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},i.zelos.ConstantProvider.prototype.makeNotch=function(){function t(t){return i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(t*r/2,0),i.utils.svgPaths.point(t*r*3/4,a/2),i.utils.svgPaths.point(t*r,a)])+i.utils.svgPaths.line([i.utils.svgPaths.point(t*r,s)])+i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(t*r/4,a/2),i.utils.svgPaths.point(t*r/2,a),i.utils.svgPaths.point(t*r,a)])+i.utils.svgPaths.lineOnAxis("h",t*o)+i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(t*r/2,0),i.utils.svgPaths.point(t*r*3/4,-a/2),i.utils.svgPaths.point(t*r,-a)])+i.utils.svgPaths.line([i.utils.svgPaths.point(t*r,-s)])+i.utils.svgPaths.curve("c",[i.utils.svgPaths.point(t*r/4,-a/2),i.utils.svgPaths.point(t*r/2,-a),i.utils.svgPaths.point(t*r,-a)])}var e=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=e/3,r=o/3,s=n/2,a=s/2,l=t(1),c=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:n,pathLeft:l,pathRight:c}},i.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,e=i.utils.svgPaths.arc("a","0 0,0",t,i.utils.svgPaths.point(-t,t)),n=i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:e,pathBottom:i.utils.svgPaths.arc("a","0 0,0",t,i.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:n,pathBottomRight:i.utils.svgPaths.arc("a","0 0,1",t,i.utils.svgPaths.point(t,t))}},i.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return i.utils.colour.blend("#000",t,.15)||t},i.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return i.utils.colour.blend("#000",t,.25)||t},i.zelos.ConstantProvider.prototype.createDom=function(t,e,n){i.zelos.ConstantProvider.superClass_.createDom.call(this,t,e,n),t=i.utils.dom.createSvgElement(i.utils.Svg.DEFS,{},t),e=i.utils.dom.createSvgElement(i.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),i.utils.dom.createSvgElement(i.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},e),n=i.utils.dom.createSvgElement(i.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),i.utils.dom.createSvgElement(i.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),i.utils.dom.createSvgElement(i.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.selectedGlowFilterId=e.id,this.selectedGlowFilter_=e,t=i.utils.dom.createSvgElement(i.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),i.utils.dom.createSvgElement(i.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),e=i.utils.dom.createSvgElement(i.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),i.utils.dom.createSvgElement(i.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),i.utils.dom.createSvgElement(i.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),i.utils.dom.createSvgElement(i.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},i.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},i.zelos.TopRow=function(t){i.zelos.TopRow.superClass_.constructor.call(this,t)},i.utils.object.inherits(i.zelos.TopRow,i.blockRendering.TopRow),i.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},i.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},i.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},i.zelos.BottomRow=function(t){i.zelos.BottomRow.superClass_.constructor.call(this,t)},i.utils.object.inherits(i.zelos.BottomRow,i.blockRendering.BottomRow),i.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},i.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},i.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},i.zelos.RightConnectionShape=function(t){i.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=i.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},i.utils.object.inherits(i.zelos.RightConnectionShape,i.blockRendering.Measurable),i.zelos.StatementInput=function(t,e){if(i.zelos.StatementInput.superClass_.constructor.call(this,t,e),this.connectedBlock){for(t=this.connectedBlock;t.getNextBlock();)t=t.getNextBlock();t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}},i.utils.object.inherits(i.zelos.StatementInput,i.blockRendering.StatementInput),i.zelos.RenderInfo=function(t,e){i.zelos.RenderInfo.superClass_.constructor.call(this,t,e),this.topRow=new i.zelos.TopRow(this.constants_),this.bottomRow=new i.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!e.getInputsInline()||e.isCollapsed(),this.hasStatementInput=0<e.statementInputCount,this.rightSide=this.outputConnection?new i.zelos.RightConnectionShape(this.constants_):null},i.utils.object.inherits(i.zelos.RenderInfo,i.blockRendering.RenderInfo),i.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},i.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},i.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return!!e&&(t.type==i.NEXT_STATEMENT||e.type==i.NEXT_STATEMENT||(t.type==i.INPUT_VALUE||t.type==i.DUMMY_INPUT)&&(!this.isInline||this.isMultiRow))},i.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):i.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},i.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,e){return t&&e||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&e&&i.blockRendering.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&i.blockRendering.Types.isLeftRoundedCorner(t)&&e&&(i.blockRendering.Types.isPreviousConnection(e)||i.blockRendering.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:t&&i.blockRendering.Types.isLeftSquareCorner(t)&&e&&i.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},i.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){if(i.blockRendering.Types.isTopRow(t)&&i.blockRendering.Types.isBottomRow(e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var n=i.blockRendering.Types.isInputRow(t)&&t.hasStatement,o=i.blockRendering.Types.isInputRow(e)&&e.hasStatement;return o||n?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&n?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):i.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):i.blockRendering.Types.isBottomRow(e)?this.outputConnection?!e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},i.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){var n=this.width-this.startX;return i.blockRendering.Types.isInputRow(t)&&t.hasStatement||i.blockRendering.Types.isInputRow(e)&&e.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n},i.zelos.RenderInfo.prototype.getElemCenterline_=function(t,e){if(t.hasStatement&&!i.blockRendering.Types.isSpacer(e)&&!i.blockRendering.Types.isStatementInput(e))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(i.blockRendering.Types.isInlineInput(e)){var n=e.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return t.yPos+n.height/2}return i.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,e)},i.zelos.RenderInfo.prototype.addInput_=function(t,e){t.type==i.DUMMY_INPUT&&e.hasDummyInput&&e.align==i.ALIGN_LEFT&&t.align==i.ALIGN_RIGHT&&(e.rightAlignedDummyInput=t),i.zelos.RenderInfo.superClass_.addInput_.call(this,t,e)},i.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,e){if(t.rightAlignedDummyInput){for(var n,o,r=0;(o=t.elements[r])&&(i.blockRendering.Types.isSpacer(o)&&(n=o),!i.blockRendering.Types.isField(o)||o.parentInput!=t.rightAlignedDummyInput);r++);if(n)return n.width+=e,void(t.width+=e)}i.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,e)},i.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,e=t,n=2;n<this.rows.length-1;n+=2){var o=this.rows[n-1],r=this.rows[n],s=this.rows[n+1];if(o=2==n?!!this.topRow.hasPreviousConnection:!!o.followsStatement,s=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement,i.blockRendering.Types.isInputRow(r)&&r.hasStatement)r.measure(),e=r.width-r.getLastInput().width+t;else if(o&&(2==n||s)&&i.blockRendering.Types.isInputRow(r)&&!r.hasStatement){s=r.xPos,o=null;for(var a,l=0;a=r.elements[l];l++)i.blockRendering.Types.isSpacer(a)&&(o=a),!(o&&(i.blockRendering.Types.isField(a)||i.blockRendering.Types.isInput(a))&&s<e)||i.blockRendering.Types.isField(a)&&(a.field instanceof i.FieldLabel||a.field instanceof i.FieldImage)||(o.width+=e-s),s+=a.width}}},i.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t,e=0,i=0;t=this.rows[i];i++)t.yPos=e,e+=t.height;this.height=e,i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=this.outputConnection.shape.height(i),i=this.outputConnection.shape.width(i),this.outputConnection.height=e,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(e),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(i),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=i,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=i,this.width+=i+t,this.widthWithChildren+=i+t}},i.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t,e=0,n=0;t=this.rows[n];n++)if(i.blockRendering.Types.isInputRow(t)){e=t.elements[t.elements.length-2];var o=this.getNegativeSpacing_(t.elements[1]),r=this.getNegativeSpacing_(e);e=o+r;var s=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<s&&(o=(e=this.width-s)/2,r=e/2),t.elements.unshift(new i.blockRendering.InRowSpacer(this.constants_,-o)),t.elements.push(new i.blockRendering.InRowSpacer(this.constants_,-r))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;t=this.rows[n];n++)i.blockRendering.Types.isTopOrBottomRow(t)&&(t.elements[1].width-=e,t.elements[1].widthWithConnectedBlocks-=e),t.width-=e,t.widthWithConnectedBlocks-=e}},i.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var e=this.outputConnection.width,n=this.outputConnection.shape.type,o=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(n){case o.SHAPES.ROUND:return n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,e-(n=this.height/2>n?n:this.height/2)*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)));default:return 0}if(i.blockRendering.Types.isInlineInput(t)){var r=t.connectedBlock;return t=r?r.pathObject.outputShapeType:t.shape.type,r&&r.outputConnection&&(r.statementInputCount||r.nextConnection)||n==o.SHAPES.HEXAGONAL&&n!=t?0:e-this.constants_.SHAPE_IN_SHAPE_PADDING[n][t]}return i.blockRendering.Types.isField(t)?n==o.SHAPES.ROUND&&t.field instanceof i.FieldTextInput?e-2.75*o.GRID_UNIT:e-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:i.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},i.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var e=this.rows[t-1],n=this.rows[t],o=this.rows[t+1],r=2==t,s=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement;if(r?this.topRow.hasPreviousConnection:e.followsStatement){var a=3==n.elements.length&&(n.elements[1].field instanceof i.FieldLabel||n.elements[1].field instanceof i.FieldImage);if(!r&&a)e.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING,n.height-=this.constants_.MEDIUM_PADDING;else if(r||s){if(s){for(r=!1,s=0;a=n.elements[s];s++)if(i.blockRendering.Types.isInlineInput(a)&&a.connectedBlock&&!a.connectedBlock.isShadow()&&40<=a.connectedBlock.getHeightWidth().height){r=!0;break}r&&(e.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING)}}else e.height+=this.constants_.SMALL_PADDING}}},i.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),i.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},i.zelos.Drawer=function(t,e){i.zelos.Drawer.superClass_.constructor.call(this,t,e)},i.utils.object.inherits(i.zelos.Drawer,i.blockRendering.Drawer),i.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),i.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},i.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):i.zelos.Drawer.superClass_.drawOutline_.call(this)},i.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():i.zelos.Drawer.superClass_.drawLeft_.call(this)},i.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var e=this.constants_.INSIDE_CORNERS.rightHeight;e=t.height-(t.precedesStatement?e:0),this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<e?i.utils.svgPaths.lineOnAxis("V",t.yPos+e):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=i.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},i.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},i.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},i.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=i.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=i.utils.svgPaths.lineOnAxis("h",t.width)},i.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=i.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=i.utils.svgPaths.lineOnAxis("h",-t.width)},i.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var e=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var n=t.width-2*t.connectionWidth;t=i.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+i.utils.svgPaths.lineOnAxis("h",n)+t.shape.pathRightDown(t.height)+i.utils.svgPaths.lineOnAxis("h",-n)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(e,t)}},i.zelos.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),n=e.xPos+e.notchOffset+e.shape.width,o=e.shape.pathRight+i.utils.svgPaths.lineOnAxis("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,r=t.height-2*this.constants_.INSIDE_CORNERS.height;e=this.constants_.INSIDE_CORNERS.pathBottom+i.utils.svgPaths.lineOnAxis("h",e.notchOffset-this.constants_.INSIDE_CORNERS.width)+(e.connectedBottomNextConnection?"":e.shape.pathLeft),this.outlinePath_+=i.utils.svgPaths.lineOnAxis("H",n)+o+i.utils.svgPaths.lineOnAxis("v",r)+e+i.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},i.zelos.PathObject=function(t,e,n){i.zelos.PathObject.superClass_.constructor.call(this,t,e,n),this.constants=n,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},i.utils.object.inherits(i.zelos.PathObject,i.blockRendering.PathObject),i.zelos.PathObject.prototype.setPath=function(t){i.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},i.zelos.PathObject.prototype.applyColour=function(t){i.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),t=0;for(var e,n=Object.keys(this.outlines_);e=n[t];t++)this.outlines_[e].setAttribute("fill",this.style.colourTertiary)},i.zelos.PathObject.prototype.flipRTL=function(){i.zelos.PathObject.superClass_.flipRTL.call(this);for(var t,e=0,n=Object.keys(this.outlines_);t=n[e];e++)this.outlines_[t].setAttribute("transform","scale(-1 1)")},i.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},i.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},i.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},i.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var t,e=0,i=Object.keys(this.outlines_);t=i[e];e++)this.remainingOutlines_[t]=1},i.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t,e=0,i=Object.keys(this.remainingOutlines_);t=i[e];e++)this.removeOutlinePath_(t);this.remainingOutlines_=null},i.zelos.PathObject.prototype.setOutlinePath=function(t,e){(t=this.getOutlinePath_(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},i.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=i.utils.dom.createSvgElement(i.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},i.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},i.zelos.MarkerSvg=function(t,e,n){i.zelos.MarkerSvg.superClass_.constructor.call(this,t,e,n)},i.utils.object.inherits(i.zelos.MarkerSvg,i.blockRendering.MarkerSvg),i.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},i.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},i.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},i.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},i.zelos.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},i.zelos.MarkerSvg.prototype.hide=function(){i.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},i.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(i.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=i.utils.dom.createSvgElement(i.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();i.utils.dom.createSvgElement(i.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},i.zelos.MarkerSvg.prototype.applyColour_=function(t){i.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},i.zelos.Renderer=function(t){i.zelos.Renderer.superClass_.constructor.call(this,t)},i.utils.object.inherits(i.zelos.Renderer,i.blockRendering.Renderer),i.zelos.Renderer.prototype.makeConstants_=function(){return new i.zelos.ConstantProvider},i.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new i.zelos.RenderInfo(this,t)},i.zelos.Renderer.prototype.makeDrawer_=function(t,e){return new i.zelos.Drawer(t,e)},i.zelos.Renderer.prototype.makeMarkerDrawer=function(t,e){return new i.zelos.MarkerSvg(t,this.getConstants(),e)},i.zelos.Renderer.prototype.makePathObject=function(t,e){return new i.zelos.PathObject(t,e,this.getConstants())},i.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=i.INPUT_VALUE&&t.type!==i.OUTPUT_VALUE},i.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,e,n){return e.type==i.OUTPUT_VALUE?t.isConnected()?i.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:i.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:i.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,e,n)},i.blockRendering.register("zelos",i.zelos.Renderer),i.Themes.Dark=i.Theme.defineTheme("dark",{base:i.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),i.Themes.Deuteranopia={},i.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},i.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},i.Themes.Deuteranopia=new i.Theme("deuteranopia",i.Themes.Deuteranopia.defaultBlockStyles,i.Themes.Deuteranopia.categoryStyles),i.Themes.HighContrast={},i.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},i.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},i.Themes.HighContrast=new i.Theme("highcontrast",i.Themes.HighContrast.defaultBlockStyles,i.Themes.HighContrast.categoryStyles),i.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),i.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),i.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),i.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),i.Themes.Tritanopia={},i.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},i.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},i.Themes.Tritanopia=new i.Theme("tritanopia",i.Themes.Tritanopia.defaultBlockStyles,i.Themes.Tritanopia.categoryStyles),i.requires={},i)})),IL=CL((function(t,e){t.exports=wL})),RL=CL((function(t,e){var i;t.exports=((i=IL).setLocale=function(t){i.Msg=i.Msg||{},Object.keys(t).forEach((function(e){i.Msg[e]=t[e]}))},i)})),AL=CL((function(t,e){var i;t.exports=(i=RL,(i={Msg:{}}).Msg.ADD_COMMENT="Add Comment",i.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",i.Msg.CHANGE_VALUE_TITLE="Change value:",i.Msg.CLEAN_UP="Clean up Blocks",i.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",i.Msg.COLLAPSE_ALL="Collapse Blocks",i.Msg.COLLAPSE_BLOCK="Collapse Block",i.Msg.COLOUR_BLEND_COLOUR1="colour 1",i.Msg.COLOUR_BLEND_COLOUR2="colour 2",i.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",i.Msg.COLOUR_BLEND_RATIO="ratio",i.Msg.COLOUR_BLEND_TITLE="blend",i.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",i.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",i.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",i.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",i.Msg.COLOUR_RANDOM_TITLE="random colour",i.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",i.Msg.COLOUR_RGB_BLUE="blue",i.Msg.COLOUR_RGB_GREEN="green",i.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",i.Msg.COLOUR_RGB_RED="red",i.Msg.COLOUR_RGB_TITLE="colour with",i.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",i.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",i.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",i.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",i.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",i.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",i.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",i.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",i.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",i.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",i.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",i.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",i.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",i.Msg.CONTROLS_IF_MSG_ELSE="else",i.Msg.CONTROLS_IF_MSG_ELSEIF="else if",i.Msg.CONTROLS_IF_MSG_IF="if",i.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",i.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",i.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",i.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",i.Msg.CONTROLS_REPEAT_INPUT_DO="do",i.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",i.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",i.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",i.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",i.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",i.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",i.Msg.DELETE_BLOCK="Delete Block",i.Msg.DELETE_VARIABLE="Delete the '%1' variable",i.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",i.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",i.Msg.DISABLE_BLOCK="Disable Block",i.Msg.DUPLICATE_BLOCK="Duplicate",i.Msg.DUPLICATE_COMMENT="Duplicate Comment",i.Msg.ENABLE_BLOCK="Enable Block",i.Msg.EXPAND_ALL="Expand Blocks",i.Msg.EXPAND_BLOCK="Expand Block",i.Msg.EXTERNAL_INPUTS="External Inputs",i.Msg.HELP="Help",i.Msg.INLINE_INPUTS="Inline Inputs",i.Msg.IOS_CANCEL="Cancel",i.Msg.IOS_ERROR="Error",i.Msg.IOS_OK="OK",i.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",i.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",i.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",i.Msg.IOS_PROCEDURES_INPUTS="INPUTS",i.Msg.IOS_VARIABLES_ADD_BUTTON="Add",i.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",i.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",i.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",i.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",i.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",i.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",i.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",i.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",i.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",i.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",i.Msg.LISTS_GET_INDEX_FIRST="first",i.Msg.LISTS_GET_INDEX_FROM_END="# from end",i.Msg.LISTS_GET_INDEX_FROM_START="#",i.Msg.LISTS_GET_INDEX_GET="get",i.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",i.Msg.LISTS_GET_INDEX_LAST="last",i.Msg.LISTS_GET_INDEX_RANDOM="random",i.Msg.LISTS_GET_INDEX_REMOVE="remove",i.Msg.LISTS_GET_INDEX_TAIL="",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",i.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",i.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",i.Msg.LISTS_GET_SUBLIST_END_LAST="to last",i.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",i.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",i.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",i.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",i.Msg.LISTS_GET_SUBLIST_TAIL="",i.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",i.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",i.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",i.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",i.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",i.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",i.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",i.Msg.LISTS_INLIST="in list",i.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",i.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",i.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",i.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",i.Msg.LISTS_LENGTH_TITLE="length of %1",i.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",i.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",i.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",i.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",i.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",i.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",i.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",i.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",i.Msg.LISTS_SET_INDEX_INPUT_TO="as",i.Msg.LISTS_SET_INDEX_INSERT="insert at",i.Msg.LISTS_SET_INDEX_SET="set",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",i.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",i.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",i.Msg.LISTS_SORT_ORDER_DESCENDING="descending",i.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",i.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",i.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",i.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",i.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",i.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",i.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",i.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",i.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",i.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",i.Msg.LOGIC_BOOLEAN_FALSE="false",i.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",i.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",i.Msg.LOGIC_BOOLEAN_TRUE="true",i.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",i.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",i.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",i.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",i.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",i.Msg.LOGIC_NEGATE_TITLE="not %1",i.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",i.Msg.LOGIC_NULL="null",i.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",i.Msg.LOGIC_NULL_TOOLTIP="Returns null.",i.Msg.LOGIC_OPERATION_AND="and",i.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",i.Msg.LOGIC_OPERATION_OR="or",i.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",i.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",i.Msg.LOGIC_TERNARY_CONDITION="test",i.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",i.Msg.LOGIC_TERNARY_IF_FALSE="if false",i.Msg.LOGIC_TERNARY_IF_TRUE="if true",i.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",i.Msg.MATH_ADDITION_SYMBOL="+",i.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",i.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",i.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",i.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",i.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",i.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",i.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",i.Msg.MATH_CHANGE_TITLE="change %1 by %2",i.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",i.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",i.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: Ï€ (3.141â€¦), e (2.718â€¦), Ï† (1.618â€¦), sqrt(2) (1.414â€¦), sqrt(Â½) (0.707â€¦), or âˆž (infinity).",i.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",i.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",i.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",i.Msg.MATH_DIVISION_SYMBOL="Ã·",i.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",i.Msg.MATH_IS_EVEN="is even",i.Msg.MATH_IS_NEGATIVE="is negative",i.Msg.MATH_IS_ODD="is odd",i.Msg.MATH_IS_POSITIVE="is positive",i.Msg.MATH_IS_PRIME="is prime",i.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",i.Msg.MATH_IS_WHOLE="is whole",i.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",i.Msg.MATH_MODULO_TITLE="remainder of %1 Ã· %2",i.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",i.Msg.MATH_MULTIPLICATION_SYMBOL="Ã—",i.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",i.Msg.MATH_NUMBER_TOOLTIP="A number.",i.Msg.MATH_ONLIST_HELPURL="",i.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",i.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",i.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",i.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",i.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",i.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",i.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",i.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",i.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",i.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",i.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",i.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",i.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",i.Msg.MATH_POWER_SYMBOL="^",i.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",i.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",i.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",i.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",i.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",i.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",i.Msg.MATH_ROUND_OPERATOR_ROUND="round",i.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",i.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",i.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",i.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",i.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",i.Msg.MATH_SINGLE_OP_ROOT="square root",i.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",i.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",i.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",i.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",i.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",i.Msg.MATH_SUBTRACTION_SYMBOL="-",i.Msg.MATH_TRIG_ACOS="acos",i.Msg.MATH_TRIG_ASIN="asin",i.Msg.MATH_TRIG_ATAN="atan",i.Msg.MATH_TRIG_COS="cos",i.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",i.Msg.MATH_TRIG_SIN="sin",i.Msg.MATH_TRIG_TAN="tan",i.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",i.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",i.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",i.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",i.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",i.Msg.NEW_NUMBER_VARIABLE="Create number variable...",i.Msg.NEW_STRING_VARIABLE="Create string variable...",i.Msg.NEW_VARIABLE="Create variable...",i.Msg.NEW_VARIABLE_TITLE="New variable name:",i.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",i.Msg.ORDINAL_NUMBER_SUFFIX="",i.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",i.Msg.PROCEDURES_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",i.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",i.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",i.Msg.PROCEDURES_CREATE_DO="Create '%1'",i.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",i.Msg.PROCEDURES_DEFNORETURN_DO="",i.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",i.Msg.PROCEDURES_DEFNORETURN_TITLE="to",i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",i.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",i.Msg.PROCEDURES_DEFRETURN_RETURN="return",i.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",i.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",i.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",i.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",i.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",i.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",i.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",i.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",i.Msg.REDO="Redo",i.Msg.REMOVE_COMMENT="Remove Comment",i.Msg.RENAME_VARIABLE="Rename variable...",i.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",i.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_APPEND_TITLE="to %1 append text %2",i.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",i.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",i.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",i.Msg.TEXT_CHARAT_FIRST="get first letter",i.Msg.TEXT_CHARAT_FROM_END="get letter # from end",i.Msg.TEXT_CHARAT_FROM_START="get letter #",i.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",i.Msg.TEXT_CHARAT_LAST="get last letter",i.Msg.TEXT_CHARAT_RANDOM="get random letter",i.Msg.TEXT_CHARAT_TAIL="",i.Msg.TEXT_CHARAT_TITLE="in text %1 %2",i.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",i.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",i.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",i.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",i.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",i.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",i.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",i.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",i.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",i.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",i.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",i.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",i.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",i.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",i.Msg.TEXT_GET_SUBSTRING_TAIL="",i.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",i.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",i.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",i.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",i.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",i.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",i.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",i.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",i.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",i.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",i.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",i.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",i.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",i.Msg.TEXT_LENGTH_TITLE="length of %1",i.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",i.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",i.Msg.TEXT_PRINT_TITLE="print %1",i.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",i.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",i.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",i.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",i.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",i.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",i.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",i.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",i.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",i.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",i.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",i.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",i.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",i.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",i.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",i.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",i.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",i.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",i.Msg.TODAY="Today",i.Msg.UNDO="Undo",i.Msg.UNNAMED_KEY="unnamed",i.Msg.VARIABLES_DEFAULT_NAME="item",i.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",i.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",i.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",i.Msg.VARIABLES_SET="set %1 to %2",i.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",i.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",i.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",i.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",i.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",i.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",i.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",i.Msg.CONTROLS_FOREACH_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_FOR_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=i.Msg.CONTROLS_IF_MSG_ELSEIF,i.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=i.Msg.CONTROLS_IF_MSG_ELSE,i.Msg.CONTROLS_IF_IF_TITLE_IF=i.Msg.CONTROLS_IF_MSG_IF,i.Msg.CONTROLS_IF_MSG_THEN=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=i.Msg.CONTROLS_REPEAT_INPUT_DO,i.Msg.LISTS_CREATE_WITH_ITEM_TITLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.LISTS_GET_INDEX_HELPURL=i.Msg.LISTS_INDEX_OF_HELPURL,i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=i.Msg.LISTS_INLIST,i.Msg.MATH_CHANGE_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.PROCEDURES_DEFRETURN_COMMENT=i.Msg.PROCEDURES_DEFNORETURN_COMMENT,i.Msg.PROCEDURES_DEFRETURN_DO=i.Msg.PROCEDURES_DEFNORETURN_DO,i.Msg.PROCEDURES_DEFRETURN_PROCEDURE=i.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,i.Msg.PROCEDURES_DEFRETURN_TITLE=i.Msg.PROCEDURES_DEFNORETURN_TITLE,i.Msg.TEXT_APPEND_VARIABLE=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=i.Msg.VARIABLES_DEFAULT_NAME,i.Msg.MATH_HUE="230",i.Msg.LOOPS_HUE="120",i.Msg.LISTS_HUE="260",i.Msg.LOGIC_HUE="210",i.Msg.VARIABLES_HUE="330",i.Msg.TEXTS_HUE="160",i.Msg.PROCEDURES_HUE="290",i.Msg.COLOUR_HUE="20",i.Msg.VARIABLES_DYNAMIC_HUE="310",i.Msg)})),OL=CL((function(t,e){var i;t.exports=((i=wL).Blocks.colour={},i.Constants={},i.Constants.Colour={},i.Constants.Colour.HUE=20,i.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),i.Blocks.lists={},i.Constants.Lists={},i.Constants.Lists.HUE=260,i.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),i.Blocks.lists_create_with={init:function(){this.setHelpUrl(i.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.Mutator(["lists_create_with_item"])),this.setTooltip(i.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("lists_create_with_container");e.initSvg();for(var i=e.getInput("STACK").connection,n=0;n<this.itemCount_;n++){var o=t.newBlock("lists_create_with_item");o.initSvg(),i.connect(o.previousConnection),i=o.nextConnection}return e},compose:function(t){var e=t.getInputTargetBlock("STACK");for(t=[];e&&!e.isInsertionMarker();)t.push(e.valueConnection_),e=e.nextConnection&&e.nextConnection.targetBlock();for(e=0;e<this.itemCount_;e++){var n=this.getInput("ADD"+e).connection.targetConnection;n&&-1==t.indexOf(n)&&n.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),e=0;e<this.itemCount_;e++)i.Mutator.reconnect(t[e],this,"ADD"+e)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var i=this.getInput("ADD"+e);t.valueConnection_=i&&i.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg.LISTS_CREATE_EMPTY_TITLE);for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){var e=this.appendValueInput("ADD"+t).setAlign(i.ALIGN_RIGHT);0==t&&e.appendField(i.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+t);)this.removeInput("ADD"+t),t++}},i.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},i.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},i.Blocks.lists_indexOf={init:function(){var t=[[i.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(i.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new i.FieldDropdown(t),"END"),this.setInputsInline(!0);var e=this;this.setTooltip((function(){return i.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")}))}},i.Blocks.lists_getIndex={init:function(){var t=[[i.Msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),t=new i.FieldDropdown(t,(function(t){t="REMOVE"==t,this.getSourceBlock().updateStatement_(t)})),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(t,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var e=this;this.setTooltip((function(){var t=e.getFieldValue("MODE"),n=e.getFieldValue("WHERE"),o="";switch(t+" "+n){case"GET FROM_START":case"GET FROM_END":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":o=i.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=n&&"FROM_END"!=n||(o+="  "+("FROM_START"==n?i.Msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");t.setAttribute("statement",!this.outputConnection);var e=this.getInput("AT").type==i.INPUT_VALUE;return t.setAttribute("at",e),t},domToMutation:function(t){var e="true"==t.getAttribute("statement");this.updateStatement_(e),t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateStatement_:function(t){t!=!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),i.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new i.FieldDropdown(this.WHERE_OPTIONS,(function(e){var i="FROM_START"==e||"FROM_END"==e;if(i!=t){var n=this.getSourceBlock();return n.updateAt_(i),n.setFieldValue(e,"WHERE"),null}}));this.getInput("AT").appendField(e,"WHERE"),i.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},i.Blocks.lists_setIndex={init:function(){var t=[[i.Msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new i.FieldDropdown(t),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var e=this;this.setTooltip((function(){var t=e.getFieldValue("MODE"),n=e.getFieldValue("WHERE"),o="";switch(t+" "+n){case"SET FROM_START":case"SET FROM_END":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":o=i.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=n&&"FROM_END"!=n||(o+="  "+i.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){var t=i.utils.xml.createElement("mutation"),e=this.getInput("AT").type==i.INPUT_VALUE;return t.setAttribute("at",e),t},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),i.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new i.FieldDropdown(this.WHERE_OPTIONS,(function(e){var i="FROM_START"==e||"FROM_END"==e;if(i!=t){var n=this.getSourceBlock();return n.updateAt_(i),n.setFieldValue(e,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(e,"WHERE")}},i.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[i.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var t=i.utils.xml.createElement("mutation"),e=this.getInput("AT1").type==i.INPUT_VALUE;return t.setAttribute("at1",e),e=this.getInput("AT2").type==i.INPUT_VALUE,t.setAttribute("at2",e),t},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(t,e){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),e?(this.appendValueInput("AT"+t).setCheck("Number"),i.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(i.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t);var n=new i.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(i){var n="FROM_START"==i||"FROM_END"==i;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(t,n),o.setFieldValue(i,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(n,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},i.Blocks.lists_sort={init:function(){this.jsonInit({message0:i.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[i.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[i.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[i.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[i.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[i.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:i.Msg.LISTS_SORT_TOOLTIP,helpUrl:i.Msg.LISTS_SORT_HELPURL})}},i.Blocks.lists_split={init:function(){var t=this,e=new i.FieldDropdown([[i.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(e){t.updateType_(e)}));this.setHelpUrl(i.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){var e=t.getFieldValue("MODE");if("SPLIT"==e)return i.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==e)return i.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)}))},updateType_:function(t){if(this.getFieldValue("MODE")!=t){var e=this.getInput("INPUT").connection;e.setShadowDom(null);var i=e.targetBlock();i&&(e.disconnect(),i.isShadow()?i.dispose():this.bumpNeighbours())}"SPLIT"==t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))}},i.Blocks.logic={},i.Constants.Logic={},i.Constants.Logic.HUE=210,i.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["â‰ ","NEQ"],["â€<","LT"],["â€â‰¤","LTE"],["â€>","GT"],["â€â‰¥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),i.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),i.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},i.Extensions.register("logic_op_tooltip",i.Extensions.buildTooltipForDropdown("OP",i.Constants.Logic.TOOLTIPS_BY_OP)),i.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var t=i.utils.xml.createElement("mutation");return this.elseifCount_&&t.setAttribute("elseif",this.elseifCount_),this.elseCount_&&t.setAttribute("else",1),t},domToMutation:function(t){this.elseifCount_=parseInt(t.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(t.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(t){var e=t.newBlock("controls_if_if");e.initSvg();for(var i=e.nextConnection,n=1;n<=this.elseifCount_;n++){var o=t.newBlock("controls_if_elseif");o.initSvg(),i.connect(o.previousConnection),i=o.nextConnection}return this.elseCount_&&((t=t.newBlock("controls_if_else")).initSvg(),i.connect(t.previousConnection)),e},compose:function(t){t=t.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var e=[null],i=[null],n=null;t&&!t.isInsertionMarker();){switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),i.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,n=t.statementConnection_;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(e,i,n)},saveConnections:function(t){t=t.nextConnection.targetBlock();for(var e=1;t;){switch(t.type){case"controls_if_elseif":var i=this.getInput("IF"+e),n=this.getInput("DO"+e);t.valueConnection_=i&&i.connection.targetConnection,t.statementConnection_=n&&n.connection.targetConnection,e++;break;case"controls_if_else":n=this.getInput("ELSE"),t.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.nextConnection&&t.nextConnection.targetBlock()}},rebuildShape_:function(){var t=[null],e=[null],i=null;this.getInput("ELSE")&&(i=this.getInput("ELSE").connection.targetConnection);for(var n=1;this.getInput("IF"+n);){var o=this.getInput("IF"+n),r=this.getInput("DO"+n);t.push(o.connection.targetConnection),e.push(r.connection.targetConnection),n++}this.updateShape_(),this.reconnectChildBlocks_(t,e,i)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var t=1;this.getInput("IF"+t);)this.removeInput("IF"+t),this.removeInput("DO"+t),t++;for(t=1;t<=this.elseifCount_;t++)this.appendValueInput("IF"+t).setCheck("Boolean").appendField(i.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+t).appendField(i.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(t,e,n){for(var o=1;o<=this.elseifCount_;o++)i.Mutator.reconnect(t[o],this,"IF"+o),i.Mutator.reconnect(e[o],this,"DO"+o);i.Mutator.reconnect(n,this,"ELSE")}},i.Extensions.registerMutator("controls_if_mutator",i.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),i.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?i.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?i.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?i.Msg.CONTROLS_IF_TOOLTIP_4:"":i.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},i.Extensions.register("controls_if_tooltip",i.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),i.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(t){this.prevBlocks_||(this.prevBlocks_=[null,null]);var e=this.getInputTargetBlock("A"),n=this.getInputTargetBlock("B");e&&n&&!this.workspace.connectionChecker.doTypeChecks(e.outputConnection,n.outputConnection)&&(i.Events.setGroup(t.group),(t=this.prevBlocks_[0])!==e&&(e.unplug(),!t||t.isDisposed()||t.isShadow()||this.getInput("A").connection.connect(t.outputConnection)),(e=this.prevBlocks_[1])!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("B").connection.connect(e.outputConnection)),this.bumpNeighbours(),i.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},i.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(i.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},i.Extensions.register("logic_compare",i.Constants.Logic.LOGIC_COMPARE_EXTENSION),i.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(t){var e=this.getInputTargetBlock("THEN"),n=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((e||n)&&o)for(var r=0;2>r;r++){var s=1==r?e:n;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,o)&&(i.Events.setGroup(t.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),i.Events.setGroup(!1))}this.prevParentConnection_=o}},i.Extensions.registerMixin("logic_ternary",i.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),i.Blocks.loops={},i.Constants.Loops={},i.Constants.Loops.HUE=120,i.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),i.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},i.Extensions.register("controls_whileUntil_tooltip",i.Extensions.buildTooltipForDropdown("MODE",i.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),i.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},i.Extensions.register("controls_flow_tooltip",i.Extensions.buildTooltipForDropdown("FLOW",i.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),i.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(t){if(!this.isInFlyout){var e=this.getField("VAR").getVariable(),n=e.name;if(!this.isCollapsed()&&null!=n){var o={enabled:!0};o.text=i.Msg.VARIABLES_SET_CREATE_GET.replace("%1",n),e=i.Variables.generateVariableFieldDom(e),(n=i.utils.xml.createElement("block")).setAttribute("type","variables_get"),n.appendChild(e),o.callback=i.ContextMenu.callbackFactory(this,n),t.push(o)}}}},i.Extensions.registerMixin("contextMenu_newGetVariableBlock",i.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),i.Extensions.register("controls_for_tooltip",i.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.Extensions.register("controls_forEach_tooltip",i.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(t){do{if(-1!=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(t.type))return t;t=t.getSurroundParent()}while(t);return null},onchange:function(t){if(this.workspace.isDragging&&!this.workspace.isDragging()&&t.type==i.Events.BLOCK_MOVE){var e=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(e?null:i.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var n=i.Events.getGroup();i.Events.setGroup(t.group),this.setEnabled(e),i.Events.setGroup(n)}}}},i.Extensions.registerMixin("controls_flow_in_loop_check",i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),i.Blocks.math={},i.Constants.Math={},i.Constants.Math.HUE=230,i.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["Ï€","PI"],["e","E"],["Ï†","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(Â½)","SQRT1_2"],["âˆž","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),i.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},i.Extensions.register("math_op_tooltip",i.Extensions.buildTooltipForDropdown("OP",i.Constants.Math.TOOLTIPS_BY_OP)),i.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var t=i.utils.xml.createElement("mutation"),e="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",e),t},domToMutation:function(t){t="true"==t.getAttribute("divisor_input"),this.updateShape_(t)},updateShape_:function(t){var e=this.getInput("DIVISOR");t?e||this.appendValueInput("DIVISOR").setCheck("Number"):e&&this.removeInput("DIVISOR")}},i.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator((function(t){t="DIVISIBLE_BY"==t,this.getSourceBlock().updateShape_(t)}))},i.Extensions.registerMutator("math_is_divisibleby_mutator",i.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,i.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),i.Extensions.register("math_change_tooltip",i.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),i.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(t){"MODE"==t?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("op",this.getFieldValue("OP")),t},domToMutation:function(t){this.updateType_(t.getAttribute("op"))}},i.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(t){this.updateType_(t)}.bind(this))},i.Extensions.registerMutator("math_modes_of_list_mutator",i.Constants.Math.LIST_MODES_MUTATOR_MIXIN,i.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),i.Blocks.procedures={},i.Blocks.procedures_defnoreturn={init:function(){var t=i.Procedures.findLegalName("",this);(t=new i.FieldTextInput(t,i.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.setMutator(new i.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(t){this.hasStatements_!==t&&(t?(this.appendStatementInput("STACK").appendField(i.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=t)},updateParams_:function(){var t="";this.arguments_.length&&(t=i.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.Events.disable();try{this.setFieldValue(t,"PARAMS")}finally{i.Events.enable()}},mutationToDom:function(t){var e=i.utils.xml.createElement("mutation");t&&e.setAttribute("name",this.getFieldValue("NAME"));for(var n=0;n<this.argumentVarModels_.length;n++){var o=i.utils.xml.createElement("arg"),r=this.argumentVarModels_[n];o.setAttribute("name",r.name),o.setAttribute("varid",r.getId()),t&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[n]),e.appendChild(o)}return this.hasStatements_||e.setAttribute("statements","false"),e},domToMutation:function(t){this.arguments_=[],this.argumentVarModels_=[];for(var e,n=0;e=t.childNodes[n];n++)if("arg"==e.nodeName.toLowerCase()){var o=e.getAttribute("name");e=e.getAttribute("varid")||e.getAttribute("varId"),this.arguments_.push(o),null!=(e=i.Variables.getOrCreateVariablePackage(this.workspace,e,o,""))?this.argumentVarModels_.push(e):console.log("Failed to create a variable with name "+o+", ignoring.")}this.updateParams_(),i.Procedures.mutateCallers(this),this.setStatements_("false"!==t.getAttribute("statements"))},decompose:function(t){var e=i.utils.xml.createElement("block");e.setAttribute("type","procedures_mutatorcontainer");var n=i.utils.xml.createElement("statement");n.setAttribute("name","STACK"),e.appendChild(n);for(var o=0;o<this.arguments_.length;o++){var r=i.utils.xml.createElement("block");r.setAttribute("type","procedures_mutatorarg");var s=i.utils.xml.createElement("field");s.setAttribute("name","NAME");var a=i.utils.xml.createTextNode(this.arguments_[o]);s.appendChild(a),r.appendChild(s),s=i.utils.xml.createElement("next"),r.appendChild(s),n.appendChild(r),n=s}return t=i.Xml.domToBlock(e,t),"procedures_defreturn"==this.type?t.setFieldValue(this.hasStatements_,"STATEMENTS"):t.removeInput("STATEMENT_INPUT"),i.Procedures.mutateCallers(this),t},compose:function(t){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var e=t.getInputTargetBlock("STACK");e&&!e.isInsertionMarker();){var n=e.getFieldValue("NAME");this.arguments_.push(n),n=this.workspace.getVariable(n,""),this.argumentVarModels_.push(n),this.paramIds_.push(e.id),e=e.nextConnection&&e.nextConnection.targetBlock()}this.updateParams_(),i.Procedures.mutateCallers(this),null!==(t=t.getFieldValue("STATEMENTS"))&&(t="TRUE"==t,this.hasStatements_!=t)&&(t?(this.setStatements_(!0),i.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(t=this.getInput("STACK").connection,(this.statementConnection_=t.targetConnection)&&((t=t.targetBlock()).unplug(),t.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(t,e){var n=this.workspace.getVariableById(t);if(""==n.type){n=n.name,e=this.workspace.getVariableById(e);for(var o=!1,r=0;r<this.argumentVarModels_.length;r++)this.argumentVarModels_[r].getId()==t&&(this.arguments_[r]=e.name,this.argumentVarModels_[r]=e,o=!0);o&&(this.displayRenamedVar_(n,e.name),i.Procedures.mutateCallers(this))}},updateVarName:function(t){for(var e=t.name,n=!1,o=0;o<this.argumentVarModels_.length;o++)if(this.argumentVarModels_[o].getId()==t.getId()){var r=this.arguments_[o];this.arguments_[o]=e,n=!0}n&&(this.displayRenamedVar_(r,e),i.Procedures.mutateCallers(this))},displayRenamedVar_:function(t,e){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var n,o=this.mutator.workspace_.getAllBlocks(!1),r=0;n=o[r];r++)"procedures_mutatorarg"==n.type&&i.Names.equals(t,n.getFieldValue("NAME"))&&n.setFieldValue(e,"NAME")},customContextMenu:function(t){if(!this.isInFlyout){var e={enabled:!0},n=this.getFieldValue("NAME");e.text=i.Msg.PROCEDURES_CREATE_DO.replace("%1",n);var o=i.utils.xml.createElement("mutation");for(o.setAttribute("name",n),n=0;n<this.arguments_.length;n++){var r=i.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[n]),o.appendChild(r)}if((n=i.utils.xml.createElement("block")).setAttribute("type",this.callType_),n.appendChild(o),e.callback=i.ContextMenu.callbackFactory(this,n),t.push(e),!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++)e={enabled:!0},o=this.argumentVarModels_[n],e.text=i.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o.name),o=i.Variables.generateVariableFieldDom(o),(r=i.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(o),e.callback=i.ContextMenu.callbackFactory(this,r),t.push(e)}},callType_:"procedures_callnoreturn"},i.Blocks.procedures_defreturn={init:function(){var t=i.Procedures.findLegalName("",this);(t=new i.FieldTextInput(t,i.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.ALIGN_RIGHT).appendField(i.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:i.Blocks.procedures_defnoreturn.setStatements_,updateParams_:i.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:i.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:i.Blocks.procedures_defnoreturn.domToMutation,decompose:i.Blocks.procedures_defnoreturn.decompose,compose:i.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:i.Blocks.procedures_defnoreturn.getVars,getVarModels:i.Blocks.procedures_defnoreturn.getVarModels,renameVarById:i.Blocks.procedures_defnoreturn.renameVarById,updateVarName:i.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:i.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:i.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},i.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(i.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new i.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},i.Blocks.procedures_mutatorarg={init:function(){var t=new i.FieldTextInput(i.Procedures.DEFAULT_ARG,this.validator_);t.oldShowEditorFn_=t.showEditor_,t.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(t,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,t.onFinishEditing_=this.deleteIntermediateVars_,t.createdVariables_=[],t.onFinishEditing_("x")},validator_:function(t){var e=this.getSourceBlock(),n=i.Mutator.findParentWs(e.workspace);if(!(t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var o=(e.workspace.targetWorkspace||e.workspace).getAllBlocks(!1),r=t.toLowerCase(),s=0;s<o.length;s++)if(o[s].id!=this.getSourceBlock().id){var a=o[s].getFieldValue("NAME");if(a&&a.toLowerCase()==r)return null}return e.isInFlyout||((e=n.getVariable(t,""))&&e.name!=t&&n.renameVariableById(e.getId(),t),e||(e=n.createVariable(t,""))&&this.createdVariables_&&this.createdVariables_.push(e)),t},deleteIntermediateVars_:function(t){var e=i.Mutator.findParentWs(this.getSourceBlock().workspace);if(e)for(var n=0;n<this.createdVariables_.length;n++){var o=this.createdVariables_[n];o.name!=t&&e.deleteVariableById(o.getId())}}},i.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,e){i.Names.equals(t,this.getProcedureCall())&&(this.setFieldValue(e,"NAME"),this.setTooltip((this.outputConnection?i.Msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",e)))},setProcedureParameters_:function(t,e){var n=i.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=n&&n.mutator&&n.mutator.isVisible();if(o||(this.quarkConnections_={},this.quarkIds_=null),e)if(t.join("\n")==this.arguments_.join("\n"))this.quarkIds_=e;else{if(e.length!=t.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),n=this.rendered,this.rendered=!1;for(var r=0;r<this.arguments_.length;r++){var s=this.getInput("ARG"+r);s&&(s=s.connection.targetConnection,this.quarkConnections_[this.quarkIds_[r]]=s,o&&s&&-1==e.indexOf(this.quarkIds_[r])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(t),this.argumentVarModels_=[],r=0;r<this.arguments_.length;r++)t=i.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[r],""),this.argumentVarModels_.push(t);if(this.updateShape_(),this.quarkIds_=e)for(r=0;r<this.arguments_.length;r++)(e=this.quarkIds_[r])in this.quarkConnections_&&(s=this.quarkConnections_[e],i.Mutator.reconnect(s,this,"ARG"+r)||delete this.quarkConnections_[e]);(this.rendered=n)&&this.render()}},updateShape_:function(){for(var t=0;t<this.arguments_.length;t++){var e=this.getField("ARGNAME"+t);if(e){i.Events.disable();try{e.setValue(this.arguments_[t])}finally{i.Events.enable()}}else e=new i.FieldLabel(this.arguments_[t]),this.appendValueInput("ARG"+t).setAlign(i.ALIGN_RIGHT).appendField(e,"ARGNAME"+t).init()}for(;this.getInput("ARG"+t);)this.removeInput("ARG"+t),t++;(t=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(t.appendField(i.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),t.init()):this.getField("WITH")&&t.removeField("WITH"))},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");t.setAttribute("name",this.getProcedureCall());for(var e=0;e<this.arguments_.length;e++){var n=i.utils.xml.createElement("arg");n.setAttribute("name",this.arguments_[e]),t.appendChild(n)}return t},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e),e=[];for(var i,n=[],o=0;i=t.childNodes[o];o++)"arg"==i.nodeName.toLowerCase()&&(e.push(i.getAttribute("name")),n.push(i.getAttribute("paramId")));this.setProcedureParameters_(e,n)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&t.recordUndo)if(t.type==i.Events.BLOCK_CREATE&&-1!=t.ids.indexOf(this.id)){var e=this.getProcedureCall();if(!(e=i.Procedures.getDefinition(e,this.workspace))||e.type==this.defType_&&JSON.stringify(e.getVars())==JSON.stringify(this.arguments_)||(e=null),!e){i.Events.setGroup(t.group),t=i.utils.xml.createElement("xml"),(e=i.utils.xml.createElement("block")).setAttribute("type",this.defType_);var n=this.getRelativeToSurfaceXY(),o=n.y+2*i.SNAP_RADIUS;e.setAttribute("x",n.x+i.SNAP_RADIUS*(this.RTL?-1:1)),e.setAttribute("y",o),n=this.mutationToDom(),e.appendChild(n),(n=i.utils.xml.createElement("field")).setAttribute("name","NAME"),(o=this.getProcedureCall())||(o=i.Procedures.findLegalName("",this),this.renameProcedure("",o)),n.appendChild(i.utils.xml.createTextNode(o)),e.appendChild(n),t.appendChild(e),i.Xml.domToWorkspace(t,this.workspace),i.Events.setGroup(!1)}}else t.type==i.Events.BLOCK_DELETE?(e=this.getProcedureCall(),(e=i.Procedures.getDefinition(e,this.workspace))||(i.Events.setGroup(t.group),this.dispose(!0),i.Events.setGroup(!1))):t.type==i.Events.CHANGE&&"disabled"==t.element&&(e=this.getProcedureCall(),(e=i.Procedures.getDefinition(e,this.workspace))&&e.id==t.blockId&&((e=i.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),i.Events.setGroup(t.group),t.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.Events.setGroup(e)))},customContextMenu:function(t){if(this.workspace.isMovable()){var e={enabled:!0};e.text=i.Msg.PROCEDURES_HIGHLIGHT_DEF;var n=this.getProcedureCall(),o=this.workspace;e.callback=function(){var t=i.Procedures.getDefinition(n,o);t&&(o.centerOnBlock(t.id),t.select())},t.push(e)}},defType_:"procedures_defnoreturn"},i.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:i.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:i.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:i.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:i.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:i.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:i.Blocks.procedures_callnoreturn.domToMutation,getVars:i.Blocks.procedures_callnoreturn.getVars,getVarModels:i.Blocks.procedures_callnoreturn.getVarModels,onchange:i.Blocks.procedures_callnoreturn.onchange,customContextMenu:i.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},i.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue_)),t},domToMutation:function(t){this.hasReturnValue_=1==t.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(t){if(this.workspace.isDragging&&!this.workspace.isDragging()){t=!1;var e=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(e.type)){t=!0;break}e=e.getSurroundParent()}while(e);t?("procedures_defnoreturn"==e.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=e.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(i.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},i.Blocks.texts={},i.Constants.Text={},i.Constants.Text.HUE=160,i.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"Â¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),i.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[i.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var t=i.utils.xml.createElement("mutation"),e=this.getInput("AT1").type==i.INPUT_VALUE;return t.setAttribute("at1",e),e=this.getInput("AT2").type==i.INPUT_VALUE,t.setAttribute("at2",e),t},domToMutation:function(t){var e="true"==t.getAttribute("at1");t="true"==t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(t,e){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),e?(this.appendValueInput("AT"+t).setCheck("Number"),i.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(i.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t),2==t&&i.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg.TEXT_GET_SUBSTRING_TAIL));var n=new i.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(i){var n="FROM_START"==i||"FROM_END"==i;if(n!=e){var o=this.getSourceBlock();return o.updateAt_(t,n),o.setFieldValue(i,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(n,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},i.Blocks.text_changeCase={init:function(){var t=[[i.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new i.FieldDropdown(t),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg.TEXT_CHANGECASE_TOOLTIP)}},i.Blocks.text_trim={init:function(){var t=[[i.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new i.FieldDropdown(t),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg.TEXT_TRIM_TOOLTIP)}},i.Blocks.text_print={init:function(){this.jsonInit({message0:i.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg.TEXT_PRINT_HELPURL})}},i.Blocks.text_prompt_ext={init:function(){var t=[[i.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var e=this;t=new i.FieldDropdown(t,(function(t){e.updateType_(t)})),this.appendValueInput("TEXT").appendField(t,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==e.getFieldValue("TYPE")?i.Msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:function(t){this.outputConnection.setCheck("NUMBER"==t?"Number":"String")},mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("type",this.getFieldValue("TYPE")),t},domToMutation:function(t){this.updateType_(t.getAttribute("type"))}},i.Blocks.text_prompt={init:function(){this.mixin(i.Constants.Text.QUOTE_IMAGE_MIXIN);var t=[[i.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],e=this;this.setHelpUrl(i.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),t=new i.FieldDropdown(t,(function(t){e.updateType_(t)})),this.appendDummyInput().appendField(t,"TYPE").appendField(this.newQuote_(!0)).appendField(new i.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"==e.getFieldValue("TYPE")?i.Msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:i.Blocks.text_prompt_ext.updateType_,mutationToDom:i.Blocks.text_prompt_ext.mutationToDom,domToMutation:i.Blocks.text_prompt_ext.domToMutation},i.Blocks.text_count={init:function(){this.jsonInit({message0:i.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg.TEXT_COUNT_HELPURL})}},i.Blocks.text_replace={init:function(){this.jsonInit({message0:i.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg.TEXT_REPLACE_HELPURL})}},i.Blocks.text_reverse={init:function(){this.jsonInit({message0:i.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg.TEXT_REVERSE_HELPURL})}},i.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(t){for(var e,i=0;e=this.inputList[i];i++)for(var n,o=0;n=e.fieldRow[o];o++)if(t==n.name)return e.insertFieldAt(o,this.newQuote_(!0)),void e.insertFieldAt(o+2,this.newQuote_(!1));console.warn('field named "'+t+'" not found in '+this.toDevString())},newQuote_:function(t){return t=this.RTL?!t:t,new i.FieldImage(t?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,t?"â€œ":"â€")}},i.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(i.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},i.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose:function(t){var e=t.newBlock("text_create_join_container");e.initSvg();for(var i=e.getInput("STACK").connection,n=0;n<this.itemCount_;n++){var o=t.newBlock("text_create_join_item");o.initSvg(),i.connect(o.previousConnection),i=o.nextConnection}return e},compose:function(t){var e=t.getInputTargetBlock("STACK");for(t=[];e&&!e.isInsertionMarker();)t.push(e.valueConnection_),e=e.nextConnection&&e.nextConnection.targetBlock();for(e=0;e<this.itemCount_;e++){var n=this.getInput("ADD"+e).connection.targetConnection;n&&-1==t.indexOf(n)&&n.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),e=0;e<this.itemCount_;e++)i.Mutator.reconnect(t[e],this,"ADD"+e)},saveConnections:function(t){t=t.getInputTargetBlock("STACK");for(var e=0;t;){var i=this.getInput("ADD"+e);t.valueConnection_=i&&i.connection.targetConnection,e++,t=t.nextConnection&&t.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){var e=this.appendValueInput("ADD"+t).setAlign(i.ALIGN_RIGHT);0==t&&e.appendField(i.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+t);)this.removeInput("ADD"+t),t++}},i.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(i.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.Mutator(["text_create_join_item"]))},i.Extensions.register("text_append_tooltip",i.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),i.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var t=this;this.setTooltip((function(){return i.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")}))},i.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var t=i.utils.xml.createElement("mutation");return t.setAttribute("at",!!this.isAt_),t},domToMutation:function(t){t="false"!=t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(t){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),t&&(this.appendValueInput("AT").setCheck("Number"),i.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg.ORDINAL_NUMBER_SUFFIX)),i.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg.TEXT_CHARAT_TAIL)),this.isAt_=t}},i.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator((function(t){(t="FROM_START"==t||"FROM_END"==t)!=this.isAt_&&this.getSourceBlock().updateAt_(t)})),this.updateAt_(!0);var t=this;this.setTooltip((function(){var e=t.getFieldValue("WHERE"),n=i.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==e||"FROM_END"==e)&&(e="FROM_START"==e?i.Msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(n+="  "+e.replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),n}))},i.Extensions.register("text_indexOf_tooltip",i.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),i.Extensions.register("text_quotes",i.Constants.Text.TEXT_QUOTES_EXTENSION),i.Extensions.registerMutator("text_join_mutator",i.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,i.Constants.Text.TEXT_JOIN_EXTENSION),i.Extensions.registerMutator("text_charAt_mutator",i.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,i.Constants.Text.TEXT_CHARAT_EXTENSION),i.Blocks.variables={},i.Constants.Variables={},i.Constants.Variables.HUE=330,i.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),i.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(e={text:i.Msg.RENAME_VARIABLE,enabled:!0,callback:i.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},r=this.getField("VAR").getText(),o={text:i.Msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:i.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(e),t.unshift(o));else{if("variables_get"==this.type)var e="variables_set",n=i.Msg.VARIABLES_GET_CREATE_SET;else e="variables_get",n=i.Msg.VARIABLES_SET_CREATE_GET;var o={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();o.text=n.replace("%1",r),(n=i.utils.xml.createElement("field")).setAttribute("name","VAR"),n.appendChild(i.utils.xml.createTextNode(r)),(r=i.utils.xml.createElement("block")).setAttribute("type",e),r.appendChild(n),o.callback=i.ContextMenu.callbackFactory(this,r),t.push(o)}}},i.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();i.Variables.renameVariable(e,n)}},i.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,i=t.getField("VAR").getVariable();e.deleteVariableById(i.getId()),e.refreshToolboxSelection()}},i.Extensions.registerMixin("contextMenu_variableSetterGetter",i.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),i.Constants.VariablesDynamic={},i.Constants.VariablesDynamic.HUE=310,i.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),i.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(e={text:i.Msg.RENAME_VARIABLE,enabled:!0,callback:i.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},s=this.getField("VAR").getText(),r={text:i.Msg.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:i.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(e),t.unshift(r));else{var e=this.getFieldValue("VAR"),n=this.workspace.getVariableById(e).type;if("variables_get_dynamic"==this.type){e="variables_set_dynamic";var o=i.Msg.VARIABLES_GET_CREATE_SET}else e="variables_get_dynamic",o=i.Msg.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()},s=this.getField("VAR").getText();r.text=o.replace("%1",s),(o=i.utils.xml.createElement("field")).setAttribute("name","VAR"),o.setAttribute("variabletype",n),o.appendChild(i.utils.xml.createTextNode(s)),(s=i.utils.xml.createElement("block")).setAttribute("type",e),s.appendChild(o),r.callback=i.ContextMenu.callbackFactory(this,s),t.push(r)}},onchange:function(t){t=this.getFieldValue("VAR"),t=i.Variables.getVariable(this.workspace,t),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(t.type):this.getInput("VALUE").connection.setCheck(t.type)}},i.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,n=t.getField("VAR").getVariable();i.Variables.renameVariable(e,n)}},i.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(t){return function(){var e=t.workspace,i=t.getField("VAR").getVariable();e.deleteVariableById(i.getId()),e.refreshToolboxSelection()}},i.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",i.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),i.Blocks)})),DL=CL((function(t,e){var i;t.exports=((i=OL).Blocks={},i.Blocks)})),NL=CL((function(t,e){var i;t.exports=((i=wL).JavaScript=new i.Generator("JavaScript"),i.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(i.utils.global).join(",")),i.JavaScript.ORDER_ATOMIC=0,i.JavaScript.ORDER_NEW=1.1,i.JavaScript.ORDER_MEMBER=1.2,i.JavaScript.ORDER_FUNCTION_CALL=2,i.JavaScript.ORDER_INCREMENT=3,i.JavaScript.ORDER_DECREMENT=3,i.JavaScript.ORDER_BITWISE_NOT=4.1,i.JavaScript.ORDER_UNARY_PLUS=4.2,i.JavaScript.ORDER_UNARY_NEGATION=4.3,i.JavaScript.ORDER_LOGICAL_NOT=4.4,i.JavaScript.ORDER_TYPEOF=4.5,i.JavaScript.ORDER_VOID=4.6,i.JavaScript.ORDER_DELETE=4.7,i.JavaScript.ORDER_AWAIT=4.8,i.JavaScript.ORDER_EXPONENTIATION=5,i.JavaScript.ORDER_MULTIPLICATION=5.1,i.JavaScript.ORDER_DIVISION=5.2,i.JavaScript.ORDER_MODULUS=5.3,i.JavaScript.ORDER_SUBTRACTION=6.1,i.JavaScript.ORDER_ADDITION=6.2,i.JavaScript.ORDER_BITWISE_SHIFT=7,i.JavaScript.ORDER_RELATIONAL=8,i.JavaScript.ORDER_IN=8,i.JavaScript.ORDER_INSTANCEOF=8,i.JavaScript.ORDER_EQUALITY=9,i.JavaScript.ORDER_BITWISE_AND=10,i.JavaScript.ORDER_BITWISE_XOR=11,i.JavaScript.ORDER_BITWISE_OR=12,i.JavaScript.ORDER_LOGICAL_AND=13,i.JavaScript.ORDER_LOGICAL_OR=14,i.JavaScript.ORDER_CONDITIONAL=15,i.JavaScript.ORDER_ASSIGNMENT=16,i.JavaScript.ORDER_YIELD=17,i.JavaScript.ORDER_COMMA=18,i.JavaScript.ORDER_NONE=99,i.JavaScript.ORDER_OVERRIDES=[[i.JavaScript.ORDER_FUNCTION_CALL,i.JavaScript.ORDER_MEMBER],[i.JavaScript.ORDER_FUNCTION_CALL,i.JavaScript.ORDER_FUNCTION_CALL],[i.JavaScript.ORDER_MEMBER,i.JavaScript.ORDER_MEMBER],[i.JavaScript.ORDER_MEMBER,i.JavaScript.ORDER_FUNCTION_CALL],[i.JavaScript.ORDER_LOGICAL_NOT,i.JavaScript.ORDER_LOGICAL_NOT],[i.JavaScript.ORDER_MULTIPLICATION,i.JavaScript.ORDER_MULTIPLICATION],[i.JavaScript.ORDER_ADDITION,i.JavaScript.ORDER_ADDITION],[i.JavaScript.ORDER_LOGICAL_AND,i.JavaScript.ORDER_LOGICAL_AND],[i.JavaScript.ORDER_LOGICAL_OR,i.JavaScript.ORDER_LOGICAL_OR]],i.JavaScript.isInitialized=!1,i.JavaScript.init=function(t){i.JavaScript.definitions_=Object.create(null),i.JavaScript.functionNames_=Object.create(null),i.JavaScript.variableDB_?i.JavaScript.variableDB_.reset():i.JavaScript.variableDB_=new i.Names(i.JavaScript.RESERVED_WORDS_),i.JavaScript.variableDB_.setVariableMap(t.getVariableMap());for(var e=[],n=i.Variables.allDeveloperVariables(t),o=0;o<n.length;o++)e.push(i.JavaScript.variableDB_.getName(n[o],i.Names.DEVELOPER_VARIABLE_TYPE));for(t=i.Variables.allUsedVarModels(t),o=0;o<t.length;o++)e.push(i.JavaScript.variableDB_.getName(t[o].getId(),i.VARIABLE_CATEGORY_NAME));e.length&&(i.JavaScript.definitions_.variables="var "+e.join(", ")+";"),this.isInitialized=!0},i.JavaScript.finish=function(t){var e,n=[];for(e in i.JavaScript.definitions_)n.push(i.JavaScript.definitions_[e]);return delete i.JavaScript.definitions_,delete i.JavaScript.functionNames_,i.JavaScript.variableDB_.reset(),n.join("\n\n")+"\n\n\n"+t},i.JavaScript.scrubNakedValue=function(t){return t+";\n"},i.JavaScript.quote_=function(t){return"'"+(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},i.JavaScript.multiline_quote_=function(t){return t.split(/\n/g).map(i.JavaScript.quote_).join(" + '\\n' +\n")},i.JavaScript.scrub_=function(t,e,n){var o="";if(!t.outputConnection||!t.outputConnection.targetConnection){var r=t.getCommentText();r&&(r=i.utils.string.wrap(r,i.JavaScript.COMMENT_WRAP-3),o+=i.JavaScript.prefixLines(r+"\n","// "));for(var s=0;s<t.inputList.length;s++)t.inputList[s].type==i.INPUT_VALUE&&(r=t.inputList[s].connection.targetBlock())&&(r=i.JavaScript.allNestedComments(r))&&(o+=i.JavaScript.prefixLines(r,"// "))}return t=t.nextConnection&&t.nextConnection.targetBlock(),o+e+(n=n?"":i.JavaScript.blockToCode(t))},i.JavaScript.getAdjusted=function(t,e,n,o,r){n=n||0,r=r||i.JavaScript.ORDER_NONE,t.workspace.options.oneBasedIndex&&n--;var s=t.workspace.options.oneBasedIndex?"1":"0";if(t=0<n?i.JavaScript.valueToCode(t,e,i.JavaScript.ORDER_ADDITION)||s:0>n?i.JavaScript.valueToCode(t,e,i.JavaScript.ORDER_SUBTRACTION)||s:o?i.JavaScript.valueToCode(t,e,i.JavaScript.ORDER_UNARY_NEGATION)||s:i.JavaScript.valueToCode(t,e,r)||s,i.isNumber(t))t=Number(t)+n,o&&(t=-t);else{if(0<n){t=t+" + "+n;var a=i.JavaScript.ORDER_ADDITION}else 0>n&&(t=t+" - "+-n,a=i.JavaScript.ORDER_SUBTRACTION);o&&(t=n?"-("+t+")":"-"+t,a=i.JavaScript.ORDER_UNARY_NEGATION),a=Math.floor(a),r=Math.floor(r),a&&r>=a&&(t="("+t+")")}return t},i.JavaScript.colour={},i.JavaScript.colour_picker=function(t){return[i.JavaScript.quote_(t.getFieldValue("COLOUR")),i.JavaScript.ORDER_ATOMIC]},i.JavaScript.colour_random=function(t){return[i.JavaScript.provideFunction_("colourRandom",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.colour_rgb=function(t){var e=i.JavaScript.valueToCode(t,"RED",i.JavaScript.ORDER_NONE)||0,n=i.JavaScript.valueToCode(t,"GREEN",i.JavaScript.ORDER_NONE)||0;return t=i.JavaScript.valueToCode(t,"BLUE",i.JavaScript.ORDER_NONE)||0,[i.JavaScript.provideFunction_("colourRgb",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+e+", "+n+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.colour_blend=function(t){var e=i.JavaScript.valueToCode(t,"COLOUR1",i.JavaScript.ORDER_NONE)||"'#000000'",n=i.JavaScript.valueToCode(t,"COLOUR2",i.JavaScript.ORDER_NONE)||"'#000000'";return t=i.JavaScript.valueToCode(t,"RATIO",i.JavaScript.ORDER_NONE)||.5,[i.JavaScript.provideFunction_("colourBlend",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+e+", "+n+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists={},i.JavaScript.lists_create_empty=function(t){return["[]",i.JavaScript.ORDER_ATOMIC]},i.JavaScript.lists_create_with=function(t){for(var e=Array(t.itemCount_),n=0;n<t.itemCount_;n++)e[n]=i.JavaScript.valueToCode(t,"ADD"+n,i.JavaScript.ORDER_NONE)||"null";return["["+e.join(", ")+"]",i.JavaScript.ORDER_ATOMIC]},i.JavaScript.lists_repeat=function(t){return[i.JavaScript.provideFunction_("listsRepeat",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(i.JavaScript.valueToCode(t,"ITEM",i.JavaScript.ORDER_NONE)||"null")+", "+(t=i.JavaScript.valueToCode(t,"NUM",i.JavaScript.ORDER_NONE)||"0")+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists_length=function(t){return[(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+".length",i.JavaScript.ORDER_MEMBER]},i.JavaScript.lists_isEmpty=function(t){return["!"+(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+".length",i.JavaScript.ORDER_LOGICAL_NOT]},i.JavaScript.lists_indexOf=function(t){var e="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",n=i.JavaScript.valueToCode(t,"FIND",i.JavaScript.ORDER_NONE)||"''";return e=(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"[]")+"."+e+"("+n+")",t.workspace.options.oneBasedIndex?[e+" + 1",i.JavaScript.ORDER_ADDITION]:[e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists_getIndex=function(t){var e=t.getFieldValue("MODE")||"GET",n=t.getFieldValue("WHERE")||"FROM_START",o=i.JavaScript.valueToCode(t,"VALUE","RANDOM"==n?i.JavaScript.ORDER_NONE:i.JavaScript.ORDER_MEMBER)||"[]";switch(n){case"FIRST":if("GET"==e)return[o+"[0]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[o+".shift()",i.JavaScript.ORDER_MEMBER];if("REMOVE"==e)return o+".shift();\n";break;case"LAST":if("GET"==e)return[o+".slice(-1)[0]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[o+".pop()",i.JavaScript.ORDER_MEMBER];if("REMOVE"==e)return o+".pop();\n";break;case"FROM_START":if(t=i.JavaScript.getAdjusted(t,"AT"),"GET"==e)return[o+"["+t+"]",i.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==e)return[o+".splice("+t+", 1)[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return o+".splice("+t+", 1);\n";break;case"FROM_END":if(t=i.JavaScript.getAdjusted(t,"AT",1,!0),"GET"==e)return[o+".slice("+t+")[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==e)return[o+".splice("+t+", 1)[0]",i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return o+".splice("+t+", 1);";break;case"RANDOM":if(o=i.JavaScript.provideFunction_("listsGetRandomItem",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+o+", "+("GET"!=e)+")","GET"==e||"GET_REMOVE"==e)return[o,i.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==e)return o+";\n"}throw Error("Unhandled combination (lists_getIndex).")},i.JavaScript.lists_setIndex=function(t){function e(){if(n.match(/^\w+$/))return"";var t=i.JavaScript.variableDB_.getDistinctName("tmpList",i.VARIABLE_CATEGORY_NAME),e="var "+t+" = "+n+";\n";return n=t,e}var n=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_MEMBER)||"[]",o=t.getFieldValue("MODE")||"GET",r=t.getFieldValue("WHERE")||"FROM_START",s=i.JavaScript.valueToCode(t,"TO",i.JavaScript.ORDER_ASSIGNMENT)||"null";switch(r){case"FIRST":if("SET"==o)return n+"[0] = "+s+";\n";if("INSERT"==o)return n+".unshift("+s+");\n";break;case"LAST":if("SET"==o)return(t=e())+(n+"[")+n+".length - 1] = "+s+";\n";if("INSERT"==o)return n+".push("+s+");\n";break;case"FROM_START":if(r=i.JavaScript.getAdjusted(t,"AT"),"SET"==o)return n+"["+r+"] = "+s+";\n";if("INSERT"==o)return n+".splice("+r+", 0, "+s+");\n";break;case"FROM_END":if(r=i.JavaScript.getAdjusted(t,"AT",1,!1,i.JavaScript.ORDER_SUBTRACTION),t=e(),"SET"==o)return t+(n+"[")+n+".length - "+r+"] = "+s+";\n";if("INSERT"==o)return t+(n+".splice(")+n+".length - "+r+", 0, "+s+");\n";break;case"RANDOM":if(t=e(),t+="var "+(r=i.JavaScript.variableDB_.getDistinctName("tmpX",i.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+n+".length);\n","SET"==o)return t+(n+"[")+r+"] = "+s+";\n";if("INSERT"==o)return t+(n+".splice(")+r+", 0, "+s+");\n"}throw Error("Unhandled combination (lists_setIndex).")},i.JavaScript.lists.getIndex_=function(t,e,i){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+i:"LAST"==e?t+".length - 1":i},i.JavaScript.lists_getSublist=function(t){var e=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_MEMBER)||"[]",n=t.getFieldValue("WHERE1"),o=t.getFieldValue("WHERE2");if("FIRST"==n&&"LAST"==o)e+=".slice(0)";else if(e.match(/^\w+$/)||"FROM_END"!=n&&"FROM_START"==o){switch(n){case"FROM_START":var r=i.JavaScript.getAdjusted(t,"AT1");break;case"FROM_END":r=e+".length - "+(r=i.JavaScript.getAdjusted(t,"AT1",1,!1,i.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":r="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(o){case"FROM_START":t=i.JavaScript.getAdjusted(t,"AT2",1);break;case"FROM_END":t=e+".length - "+(t=i.JavaScript.getAdjusted(t,"AT2",0,!1,i.JavaScript.ORDER_SUBTRACTION));break;case"LAST":t=e+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}e=e+".slice("+r+", "+t+")"}else{r=i.JavaScript.getAdjusted(t,"AT1"),t=i.JavaScript.getAdjusted(t,"AT2");var s=i.JavaScript.lists.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};e=i.JavaScript.provideFunction_("subsequence"+a[n]+a[o],["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==n||"FROM_START"==n?", at1":"")+("FROM_END"==o||"FROM_START"==o?", at2":"")+") {","  var start = "+s("sequence",n,"at1")+";","  var end = "+s("sequence",o,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+e+("FROM_END"==n||"FROM_START"==n?", "+r:"")+("FROM_END"==o||"FROM_START"==o?", "+t:"")+")"}return[e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists_sort=function(t){var e=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_FUNCTION_CALL)||"[]",n="1"===t.getFieldValue("DIRECTION")?1:-1;return t=t.getFieldValue("TYPE"),[e+".slice().sort("+i.JavaScript.provideFunction_("listsGetSortCompare",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+t+'", '+n+"))",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists_split=function(t){var e=i.JavaScript.valueToCode(t,"INPUT",i.JavaScript.ORDER_MEMBER),n=i.JavaScript.valueToCode(t,"DELIM",i.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(t=t.getFieldValue("MODE")))e||(e="''"),t="split";else{if("JOIN"!=t)throw Error("Unknown mode: "+t);e||(e="[]"),t="join"}return[e+"."+t+"("+n+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.lists_reverse=function(t){return[(i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.logic={},i.JavaScript.controls_if=function(t){var e=0,n="";i.JavaScript.STATEMENT_PREFIX&&(n+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,t));do{var o=i.JavaScript.valueToCode(t,"IF"+e,i.JavaScript.ORDER_NONE)||"false",r=i.JavaScript.statementToCode(t,"DO"+e);i.JavaScript.STATEMENT_SUFFIX&&(r=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,t),i.JavaScript.INDENT)+r),n+=(0<e?" else ":"")+"if ("+o+") {\n"+r+"}",++e}while(t.getInput("IF"+e));return(t.getInput("ELSE")||i.JavaScript.STATEMENT_SUFFIX)&&(r=i.JavaScript.statementToCode(t,"ELSE"),i.JavaScript.STATEMENT_SUFFIX&&(r=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,t),i.JavaScript.INDENT)+r),n+=" else {\n"+r+"}"),n+"\n"},i.JavaScript.controls_ifelse=i.JavaScript.controls_if,i.JavaScript.logic_compare=function(t){var e={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],n="=="==e||"!="==e?i.JavaScript.ORDER_EQUALITY:i.JavaScript.ORDER_RELATIONAL;return[(i.JavaScript.valueToCode(t,"A",n)||"0")+" "+e+" "+(t=i.JavaScript.valueToCode(t,"B",n)||"0"),n]},i.JavaScript.logic_operation=function(t){var e="AND"==t.getFieldValue("OP")?"&&":"||",n="&&"==e?i.JavaScript.ORDER_LOGICAL_AND:i.JavaScript.ORDER_LOGICAL_OR,o=i.JavaScript.valueToCode(t,"A",n);if(t=i.JavaScript.valueToCode(t,"B",n),o||t){var r="&&"==e?"true":"false";o||(o=r),t||(t=r)}else t=o="false";return[o+" "+e+" "+t,n]},i.JavaScript.logic_negate=function(t){var e=i.JavaScript.ORDER_LOGICAL_NOT;return["!"+(i.JavaScript.valueToCode(t,"BOOL",e)||"true"),e]},i.JavaScript.logic_boolean=function(t){return["TRUE"==t.getFieldValue("BOOL")?"true":"false",i.JavaScript.ORDER_ATOMIC]},i.JavaScript.logic_null=function(t){return["null",i.JavaScript.ORDER_ATOMIC]},i.JavaScript.logic_ternary=function(t){return[(i.JavaScript.valueToCode(t,"IF",i.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(i.JavaScript.valueToCode(t,"THEN",i.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(t=i.JavaScript.valueToCode(t,"ELSE",i.JavaScript.ORDER_CONDITIONAL)||"null"),i.JavaScript.ORDER_CONDITIONAL]},i.JavaScript.loops={},i.JavaScript.controls_repeat_ext=function(t){var e=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):i.JavaScript.valueToCode(t,"TIMES",i.JavaScript.ORDER_ASSIGNMENT)||"0",n=i.JavaScript.statementToCode(t,"DO");n=i.JavaScript.addLoopTrap(n,t),t="";var o=i.JavaScript.variableDB_.getDistinctName("count",i.VARIABLE_CATEGORY_NAME),r=e;return e.match(/^\w+$/)||i.isNumber(e)||(t+="var "+(r=i.JavaScript.variableDB_.getDistinctName("repeat_end",i.VARIABLE_CATEGORY_NAME))+" = "+e+";\n"),t+"for (var "+o+" = 0; "+o+" < "+r+"; "+o+"++) {\n"+n+"}\n"},i.JavaScript.controls_repeat=i.JavaScript.controls_repeat_ext,i.JavaScript.controls_whileUntil=function(t){var e="UNTIL"==t.getFieldValue("MODE"),n=i.JavaScript.valueToCode(t,"BOOL",e?i.JavaScript.ORDER_LOGICAL_NOT:i.JavaScript.ORDER_NONE)||"false",o=i.JavaScript.statementToCode(t,"DO");return e&&(n="!"+n),"while ("+n+") {\n"+(o=i.JavaScript.addLoopTrap(o,t))+"}\n"},i.JavaScript.controls_for=function(t){var e=i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),n=i.JavaScript.valueToCode(t,"FROM",i.JavaScript.ORDER_ASSIGNMENT)||"0",o=i.JavaScript.valueToCode(t,"TO",i.JavaScript.ORDER_ASSIGNMENT)||"0",r=i.JavaScript.valueToCode(t,"BY",i.JavaScript.ORDER_ASSIGNMENT)||"1",s=i.JavaScript.statementToCode(t,"DO");if(s=i.JavaScript.addLoopTrap(s,t),i.isNumber(n)&&i.isNumber(o)&&i.isNumber(r)){var a=Number(n)<=Number(o);t="for ("+e+" = "+n+"; "+e+(a?" <= ":" >= ")+o+"; "+e,t=(1==(e=Math.abs(Number(r)))?t+(a?"++":"--"):t+(a?" += ":" -= ")+e)+") {\n"+s+"}\n"}else t="",a=n,n.match(/^\w+$/)||i.isNumber(n)||(t+="var "+(a=i.JavaScript.variableDB_.getDistinctName(e+"_start",i.VARIABLE_CATEGORY_NAME))+" = "+n+";\n"),n=o,o.match(/^\w+$/)||i.isNumber(o)||(t+="var "+(n=i.JavaScript.variableDB_.getDistinctName(e+"_end",i.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),t+="var "+(o=i.JavaScript.variableDB_.getDistinctName(e+"_inc",i.VARIABLE_CATEGORY_NAME))+" = ",t=(t=i.isNumber(r)?t+(Math.abs(r)+";\n"):t+"Math.abs("+r+");\n")+"if ("+a+" > "+n+") {\n"+(i.JavaScript.INDENT+o)+" = -"+o+";\n",t+="}\n",t+="for ("+e+" = "+a+"; "+o+" >= 0 ? "+e+" <= "+n+" : "+e+" >= "+n+"; "+e+" += "+o+") {\n"+s+"}\n";return t},i.JavaScript.controls_forEach=function(t){var e=i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),n=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_ASSIGNMENT)||"[]",o=i.JavaScript.statementToCode(t,"DO");o=i.JavaScript.addLoopTrap(o,t),t="";var r=n;return n.match(/^\w+$/)||(t+="var "+(r=i.JavaScript.variableDB_.getDistinctName(e+"_list",i.VARIABLE_CATEGORY_NAME))+" = "+n+";\n"),t+"for (var "+(n=i.JavaScript.variableDB_.getDistinctName(e+"_index",i.VARIABLE_CATEGORY_NAME))+" in "+r+") {\n"+(o=i.JavaScript.INDENT+e+" = "+r+"["+n+"];\n"+o)+"}\n"},i.JavaScript.controls_flow_statements=function(t){var e="";if(i.JavaScript.STATEMENT_PREFIX&&(e+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,t)),i.JavaScript.STATEMENT_SUFFIX&&(e+=i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,t)),i.JavaScript.STATEMENT_PREFIX){var n=i.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(t);n&&!n.suppressPrefixSuffix&&(e+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,n))}switch(t.getFieldValue("FLOW")){case"BREAK":return e+"break;\n";case"CONTINUE":return e+"continue;\n"}throw Error("Unknown flow statement.")},i.JavaScript.math={},i.JavaScript.math_number=function(t){return[t=Number(t.getFieldValue("NUM")),0<=t?i.JavaScript.ORDER_ATOMIC:i.JavaScript.ORDER_UNARY_NEGATION]},i.JavaScript.math_arithmetic=function(t){var e={ADD:[" + ",i.JavaScript.ORDER_ADDITION],MINUS:[" - ",i.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",i.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",i.JavaScript.ORDER_DIVISION],POWER:[null,i.JavaScript.ORDER_NONE]}[t.getFieldValue("OP")],n=e[0];e=e[1];var o=i.JavaScript.valueToCode(t,"A",e)||"0";return t=i.JavaScript.valueToCode(t,"B",e)||"0",n?[o+n+t,e]:["Math.pow("+o+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.math_single=function(t){var e=t.getFieldValue("OP");if("NEG"==e)return"-"==(t=i.JavaScript.valueToCode(t,"NUM",i.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(t=" "+t),["-"+t,i.JavaScript.ORDER_UNARY_NEGATION];switch(t="SIN"==e||"COS"==e||"TAN"==e?i.JavaScript.valueToCode(t,"NUM",i.JavaScript.ORDER_DIVISION)||"0":i.JavaScript.valueToCode(t,"NUM",i.JavaScript.ORDER_NONE)||"0",e){case"ABS":var n="Math.abs("+t+")";break;case"ROOT":n="Math.sqrt("+t+")";break;case"LN":n="Math.log("+t+")";break;case"EXP":n="Math.exp("+t+")";break;case"POW10":n="Math.pow(10,"+t+")";break;case"ROUND":n="Math.round("+t+")";break;case"ROUNDUP":n="Math.ceil("+t+")";break;case"ROUNDDOWN":n="Math.floor("+t+")";break;case"SIN":n="Math.sin("+t+" / 180 * Math.PI)";break;case"COS":n="Math.cos("+t+" / 180 * Math.PI)";break;case"TAN":n="Math.tan("+t+" / 180 * Math.PI)"}if(n)return[n,i.JavaScript.ORDER_FUNCTION_CALL];switch(e){case"LOG10":n="Math.log("+t+") / Math.log(10)";break;case"ASIN":n="Math.asin("+t+") / Math.PI * 180";break;case"ACOS":n="Math.acos("+t+") / Math.PI * 180";break;case"ATAN":n="Math.atan("+t+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+e)}return[n,i.JavaScript.ORDER_DIVISION]},i.JavaScript.math_constant=function(t){return{PI:["Math.PI",i.JavaScript.ORDER_MEMBER],E:["Math.E",i.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",i.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",i.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",i.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",i.JavaScript.ORDER_ATOMIC]}[t.getFieldValue("CONSTANT")]},i.JavaScript.math_number_property=function(t){var e=i.JavaScript.valueToCode(t,"NUMBER_TO_CHECK",i.JavaScript.ORDER_MODULUS)||"0",n=t.getFieldValue("PROPERTY");if("PRIME"==n)return[i.JavaScript.provideFunction_("mathIsPrime",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+e+")",i.JavaScript.ORDER_FUNCTION_CALL];switch(n){case"EVEN":var o=e+" % 2 == 0";break;case"ODD":o=e+" % 2 == 1";break;case"WHOLE":o=e+" % 1 == 0";break;case"POSITIVE":o=e+" > 0";break;case"NEGATIVE":o=e+" < 0";break;case"DIVISIBLE_BY":o=e+" % "+(t=i.JavaScript.valueToCode(t,"DIVISOR",i.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[o,i.JavaScript.ORDER_EQUALITY]},i.JavaScript.math_change=function(t){var e=i.JavaScript.valueToCode(t,"DELTA",i.JavaScript.ORDER_ADDITION)||"0";return(t=i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME))+" = (typeof "+t+" == 'number' ? "+t+" : 0) + "+e+";\n"},i.JavaScript.math_round=i.JavaScript.math_single,i.JavaScript.math_trig=i.JavaScript.math_single,i.JavaScript.math_on_list=function(t){var e=t.getFieldValue("OP");switch(e){case"SUM":t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_MEMBER)||"[]",t+=".reduce(function(x, y) {return x + y;})";break;case"MIN":t="Math.min.apply(null, "+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":t="Math.max.apply(null, "+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":t=(e=i.JavaScript.provideFunction_("mathMean",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":t=(e=i.JavaScript.provideFunction_("mathMedian",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":t=(e=i.JavaScript.provideFunction_("mathModes",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":t=(e=i.JavaScript.provideFunction_("mathStandardDeviation",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":t=(e=i.JavaScript.provideFunction_("mathRandomList",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(t=i.JavaScript.valueToCode(t,"LIST",i.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+e)}return[t,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.math_modulo=function(t){return[(i.JavaScript.valueToCode(t,"DIVIDEND",i.JavaScript.ORDER_MODULUS)||"0")+" % "+(t=i.JavaScript.valueToCode(t,"DIVISOR",i.JavaScript.ORDER_MODULUS)||"0"),i.JavaScript.ORDER_MODULUS]},i.JavaScript.math_constrain=function(t){return["Math.min(Math.max("+(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||"0")+", "+(i.JavaScript.valueToCode(t,"LOW",i.JavaScript.ORDER_NONE)||"0")+"), "+(t=i.JavaScript.valueToCode(t,"HIGH",i.JavaScript.ORDER_NONE)||"Infinity")+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.math_random_int=function(t){var e=i.JavaScript.valueToCode(t,"FROM",i.JavaScript.ORDER_NONE)||"0";return t=i.JavaScript.valueToCode(t,"TO",i.JavaScript.ORDER_NONE)||"0",[i.JavaScript.provideFunction_("mathRandomInt",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+e+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.math_random_float=function(t){return["Math.random()",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.math_atan2=function(t){var e=i.JavaScript.valueToCode(t,"X",i.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(i.JavaScript.valueToCode(t,"Y",i.JavaScript.ORDER_NONE)||"0")+", "+e+") / Math.PI * 180",i.JavaScript.ORDER_DIVISION]},i.JavaScript.procedures={},i.JavaScript.procedures_defreturn=function(t){var e=i.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),n="";i.JavaScript.STATEMENT_PREFIX&&(n+=i.JavaScript.injectId(i.JavaScript.STATEMENT_PREFIX,t)),i.JavaScript.STATEMENT_SUFFIX&&(n+=i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,t)),n&&(n=i.JavaScript.prefixLines(n,i.JavaScript.INDENT));var o="";i.JavaScript.INFINITE_LOOP_TRAP&&(o=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.INFINITE_LOOP_TRAP,t),i.JavaScript.INDENT));var r=i.JavaScript.statementToCode(t,"STACK"),s=i.JavaScript.valueToCode(t,"RETURN",i.JavaScript.ORDER_NONE)||"",a="";r&&s&&(a=n),s&&(s=i.JavaScript.INDENT+"return "+s+";\n");for(var l=[],c=t.getVars(),d=0;d<c.length;d++)l[d]=i.JavaScript.variableDB_.getName(c[d],i.VARIABLE_CATEGORY_NAME);return n="function "+e+"("+l.join(", ")+") {\n"+n+o+r+a+s+"}",n=i.JavaScript.scrub_(t,n),i.JavaScript.definitions_["%"+e]=n,null},i.JavaScript.procedures_defnoreturn=i.JavaScript.procedures_defreturn,i.JavaScript.procedures_callreturn=function(t){for(var e=i.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),i.PROCEDURE_CATEGORY_NAME),n=[],o=t.getVars(),r=0;r<o.length;r++)n[r]=i.JavaScript.valueToCode(t,"ARG"+r,i.JavaScript.ORDER_NONE)||"null";return[e+"("+n.join(", ")+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.procedures_callnoreturn=function(t){return i.JavaScript.procedures_callreturn(t)[0]+";\n"},i.JavaScript.procedures_ifreturn=function(t){var e="if ("+(i.JavaScript.valueToCode(t,"CONDITION",i.JavaScript.ORDER_NONE)||"false")+") {\n";return i.JavaScript.STATEMENT_SUFFIX&&(e+=i.JavaScript.prefixLines(i.JavaScript.injectId(i.JavaScript.STATEMENT_SUFFIX,t),i.JavaScript.INDENT)),t.hasReturnValue_?(t=i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_NONE)||"null",e+=i.JavaScript.INDENT+"return "+t+";\n"):e+=i.JavaScript.INDENT+"return;\n",e+"}\n"},i.JavaScript.texts={},i.JavaScript.text=function(t){return[i.JavaScript.quote_(t.getFieldValue("TEXT")),i.JavaScript.ORDER_ATOMIC]},i.JavaScript.text_multiline=function(t){var e=-1!=(t=i.JavaScript.multiline_quote_(t.getFieldValue("TEXT"))).indexOf("+")?i.JavaScript.ORDER_ADDITION:i.JavaScript.ORDER_ATOMIC;return[t,e]},i.JavaScript.text.forceString_=function(t){return i.JavaScript.text.forceString_.strRegExp.test(t)?[t,i.JavaScript.ORDER_ATOMIC]:["String("+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,i.JavaScript.text_join=function(t){switch(t.itemCount_){case 0:return["''",i.JavaScript.ORDER_ATOMIC];case 1:return t=i.JavaScript.valueToCode(t,"ADD0",i.JavaScript.ORDER_NONE)||"''",i.JavaScript.text.forceString_(t);case 2:var e=i.JavaScript.valueToCode(t,"ADD0",i.JavaScript.ORDER_NONE)||"''";return t=i.JavaScript.valueToCode(t,"ADD1",i.JavaScript.ORDER_NONE)||"''",[t=i.JavaScript.text.forceString_(e)[0]+" + "+i.JavaScript.text.forceString_(t)[0],i.JavaScript.ORDER_ADDITION];default:e=Array(t.itemCount_);for(var n=0;n<t.itemCount_;n++)e[n]=i.JavaScript.valueToCode(t,"ADD"+n,i.JavaScript.ORDER_NONE)||"''";return[t="["+e.join(",")+"].join('')",i.JavaScript.ORDER_FUNCTION_CALL]}},i.JavaScript.text_append=function(t){var e=i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME);return t=i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_NONE)||"''",e+" += "+i.JavaScript.text.forceString_(t)[0]+";\n"},i.JavaScript.text_length=function(t){return[(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"''")+".length",i.JavaScript.ORDER_MEMBER]},i.JavaScript.text_isEmpty=function(t){return["!"+(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"''")+".length",i.JavaScript.ORDER_LOGICAL_NOT]},i.JavaScript.text_indexOf=function(t){var e="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",n=i.JavaScript.valueToCode(t,"FIND",i.JavaScript.ORDER_NONE)||"''";return e=(i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_MEMBER)||"''")+"."+e+"("+n+")",t.workspace.options.oneBasedIndex?[e+" + 1",i.JavaScript.ORDER_ADDITION]:[e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_charAt=function(t){var e=t.getFieldValue("WHERE")||"FROM_START",n=i.JavaScript.valueToCode(t,"VALUE","RANDOM"==e?i.JavaScript.ORDER_NONE:i.JavaScript.ORDER_MEMBER)||"''";switch(e){case"FIRST":return[n+".charAt(0)",i.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[n+".slice(-1)",i.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[n+".charAt("+(t=i.JavaScript.getAdjusted(t,"AT"))+")",i.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[n+".slice("+(t=i.JavaScript.getAdjusted(t,"AT",1,!0))+").charAt(0)",i.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[i.JavaScript.provideFunction_("textRandomLetter",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+n+")",i.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},i.JavaScript.text.getIndex_=function(t,e,i){return"FIRST"==e?"0":"FROM_END"==e?t+".length - 1 - "+i:"LAST"==e?t+".length - 1":i},i.JavaScript.text_getSubstring=function(t){var e=t.getFieldValue("WHERE1"),n=t.getFieldValue("WHERE2"),o="FROM_END"!=e&&"LAST"!=e&&"FROM_END"!=n&&"LAST"!=n,r=i.JavaScript.valueToCode(t,"STRING",o?i.JavaScript.ORDER_MEMBER:i.JavaScript.ORDER_NONE)||"''";if("FIRST"==e&&"LAST"==n)return[r,i.JavaScript.ORDER_NONE];if(r.match(/^'?\w+'?$/)||o){switch(e){case"FROM_START":o=i.JavaScript.getAdjusted(t,"AT1");break;case"FROM_END":o=r+".length - "+(o=i.JavaScript.getAdjusted(t,"AT1",1,!1,i.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":o="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(n){case"FROM_START":t=i.JavaScript.getAdjusted(t,"AT2",1);break;case"FROM_END":t=r+".length - "+(t=i.JavaScript.getAdjusted(t,"AT2",0,!1,i.JavaScript.ORDER_SUBTRACTION));break;case"LAST":t=r+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}e=r+".slice("+o+", "+t+")"}else{o=i.JavaScript.getAdjusted(t,"AT1"),t=i.JavaScript.getAdjusted(t,"AT2");var s=i.JavaScript.text.getIndex_,a={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};e=i.JavaScript.provideFunction_("subsequence"+a[e]+a[n],["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==e||"FROM_START"==e?", at1":"")+("FROM_END"==n||"FROM_START"==n?", at2":"")+") {","  var start = "+s("sequence",e,"at1")+";","  var end = "+s("sequence",n,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+r+("FROM_END"==e||"FROM_START"==e?", "+o:"")+("FROM_END"==n||"FROM_START"==n?", "+t:"")+")"}return[e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_changeCase=function(t){var e={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[t.getFieldValue("CASE")];return t=i.JavaScript.valueToCode(t,"TEXT",e?i.JavaScript.ORDER_MEMBER:i.JavaScript.ORDER_NONE)||"''",[e?t+e:i.JavaScript.provideFunction_("textToTitleCase",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_trim=function(t){var e={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[t.getFieldValue("MODE")];return[(i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_MEMBER)||"''")+e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_print=function(t){return"window.alert("+(i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_NONE)||"''")+");\n"},i.JavaScript.text_prompt_ext=function(t){var e="window.prompt("+(t.getField("TEXT")?i.JavaScript.quote_(t.getFieldValue("TEXT")):i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==t.getFieldValue("TYPE")&&(e="Number("+e+")"),[e,i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_prompt=i.JavaScript.text_prompt_ext,i.JavaScript.text_count=function(t){var e=i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_NONE)||"''";return t=i.JavaScript.valueToCode(t,"SUB",i.JavaScript.ORDER_NONE)||"''",[i.JavaScript.provideFunction_("textCount",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+e+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_replace=function(t){var e=i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_NONE)||"''",n=i.JavaScript.valueToCode(t,"FROM",i.JavaScript.ORDER_NONE)||"''";return t=i.JavaScript.valueToCode(t,"TO",i.JavaScript.ORDER_NONE)||"''",[i.JavaScript.provideFunction_("textReplace",["function "+i.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+e+", "+n+", "+t+")",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.text_reverse=function(t){return[(i.JavaScript.valueToCode(t,"TEXT",i.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",i.JavaScript.ORDER_FUNCTION_CALL]},i.JavaScript.variables={},i.JavaScript.variables_get=function(t){return[i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME),i.JavaScript.ORDER_ATOMIC]},i.JavaScript.variables_set=function(t){var e=i.JavaScript.valueToCode(t,"VALUE",i.JavaScript.ORDER_ASSIGNMENT)||"0";return i.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),i.VARIABLE_CATEGORY_NAME)+" = "+e+";\n"},i.JavaScript.variablesDynamic={},i.JavaScript.variables_get_dynamic=i.JavaScript.variables_get,i.JavaScript.variables_set_dynamic=i.JavaScript.variables_set,i.JavaScript)})),ML=CL((function(t,e){var i;t.exports=(i=NL,RL.JavaScript=i,i)})),LL=CL((function(t,e){var i,n,o,r;t.exports=(n=AL,o=DL,r=ML,(i=RL).setLocale(n),i.Blocks=i.Blocks||{},Object.keys(o).forEach((function(t){i.Blocks[t]=o[t]})),i.JavaScript=r,i)})),PL=CL((function(t,e){t.exports=LL}));const BL=st`
  .column {
    display: flex;
    flex-direction: column;
  }
  .row {
    display: flex;
    flex-direction: row;
  }
  .center-content {
    align-items: center;
    justify-content: center;
  }

  .vertical-divider {
    background-color: grey;
    width: 1px;
    height: 60%;
    opacity: 0.3;
    margin-bottom: 0;
  }
`,FL="AgentPubKey",HL="#ffad42",UL={type:"create_entry",message0:"create_entry %1",args0:[{type:"input_value",name:"ENTRY",check:"Entry"}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};function VL(t){t.defineBlocksWithJsonArray([UL]),t.JavaScript.create_entry=function(e){const i=t.JavaScript.valueToCode(e,"ENTRY",t.JavaScript.ORDER_ADDITION);if(!i)throw new Error('"create_entry": entry is empty');return`(await hdk.create_entry(${i}));\n`}}const GL={type:"create_link",message0:"create_link base %1 target %2 tag %3",args0:[{type:"input_value",name:"BASE",check:["EntryHash",FL],align:"right"},{type:"input_value",name:"TARGET",check:["EntryHash",FL],align:"right"},{type:"input_value",name:"TAG",align:"right"}],nextStatement:null,previousStatement:null,colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const WL={type:"get",message0:"get %1",args0:[{type:"input_value",name:"HASH",check:["EntryHash","HeaderHash",FL]}],inputsInline:!0,output:"Element",colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const zL={type:"hash_entry",message0:"hash_entry %1",args0:[{type:"input_value",name:"ENTRY",check:"Entry"}],inputsInline:!0,output:"EntryHash",colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const jL={type:"agent_info.agent_latest_pubkey",message0:"agent_info.agent_latest_pubkey",args0:[],inputsInline:!0,output:FL,colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const XL={type:"get_details",message0:"get_details %1",args0:[{type:"input_value",name:"HASH",check:["EntryHash",FL]}],inputsInline:!0,output:"EntryDetails",colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const YL={type:"get_links",message0:"get_links base: %1 tag: %2",args0:[{type:"input_value",name:"BASE",check:["EntryHash",FL]},{type:"input_value",name:"TAG"}],inputsInline:!0,output:"Array",colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const KL={type:"entry_def",message0:"entry_def id %1 public %2",args0:[{type:"field_input",name:"ENTRY_DEF_ID",check:"String"},{type:"field_checkbox",name:"PUBLIC",checked:!0}],colour:HL,output:"EntryDef",tooltip:"Creates a new entry with the given entry_def_id and content",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};const JL={type:"update_entry",message0:"update_entry original header %1 new entry %2",args0:[{type:"input_value",name:"ORIGINAL_HEADER",check:"HeaderHash"},{type:"input_value",name:"ENTRY",check:"Entry"}],inputsInline:!0,nextStatement:null,previousStatement:null,colour:HL,tooltip:"Returns number of letters in the provided text.",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};function $L(t){VL(t),function(t){t.defineBlocksWithJsonArray([GL]),t.JavaScript.create_link=function(e){const i=t.JavaScript.valueToCode(e,"BASE",t.JavaScript.ORDER_ADDITION),n=t.JavaScript.valueToCode(e,"TARGET",t.JavaScript.ORDER_ADDITION),o=t.JavaScript.valueToCode(e,"TAG",t.JavaScript.ORDER_ADDITION)||"null";if(!i)throw new Error('"create_link": base is empty');if(!n)throw new Error('"create_link": target is empty');return`(await hdk.create_link({base: ${i}, target: ${n}, tag: ${o}}));\n`}}(t),function(t){t.defineBlocksWithJsonArray([zL]),t.JavaScript.hash_entry=function(e){const i=t.JavaScript.valueToCode(e,"ENTRY",t.JavaScript.ORDER_ADDITION);if(!i)throw new Error('"hash_entry": entry is empty');return console.log(`(await hdk.hash_entry(${i}))`),[`(await hdk.hash_entry(${i}))`,t.JavaScript.ORDER_FUNCTION_CALL]}}(t),function(t){t.defineBlocksWithJsonArray([WL]),t.JavaScript.get=function(e){const i=t.JavaScript.valueToCode(e,"HASH",t.JavaScript.ORDER_ADDITION);if(!i)throw new Error('"get": hash is empty');return console.log(`(await hdk.get(${i}))`),[`(await hdk.get(${i}))`,t.JavaScript.ORDER_FUNCTION_CALL]}}(t),function(t){t.defineBlocksWithJsonArray([jL]),t.JavaScript["agent_info.agent_latest_pubkey"]=function(){return["(await hdk.agent_info()).agent_latest_pubkey",t.JavaScript.ORDER_FUNCTION_CALL]}}(t),function(t){t.defineBlocksWithJsonArray([XL]),t.JavaScript.get_details=function(e){const i=t.JavaScript.valueToCode(e,"HASH",t.JavaScript.ORDER_ADDITION);if(!i)throw new Error('"get_details": hash is empty');return[`(await hdk.get_details(${i}))`,t.JavaScript.ORDER_FUNCTION_CALL]}}(t),function(t){t.defineBlocksWithJsonArray([YL]),t.JavaScript.get_links=function(e){const i=t.JavaScript.valueToCode(e,"BASE",t.JavaScript.ORDER_ADDITION),n=t.JavaScript.valueToCode(e,"TAG",t.JavaScript.ORDER_ADDITION)||"null";if(!i)throw new Error('"get_links": base hash is empty');return[`(await hdk.get_links(${i}, ${n}))`,t.JavaScript.ORDER_FUNCTION_CALL]}}(t),function(t){t.Blocks.entry_defs={init(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setColour(HL),this.itemCount_=1,this.updateShape_(),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip("Entry definitions for this zome")},mutationToDom(){const t=document.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},decompose(t){const e=t.newBlock("lists_create_with_container");e.initSvg();let i=e.getInput("STACK").connection;for(let e=0;e<this.itemCount_;e++){const e=t.newBlock("lists_create_with_item");e.initSvg(),i.connect(e.previousConnection),i=e.nextConnection}return e},compose(e){let i=e.getInputTargetBlock("STACK");const n=[];for(;i;)n.push(i.valueConnection_),i=i.nextConnection&&i.nextConnection.targetBlock();for(var o=0;o<this.itemCount_;o++){const t=this.getInput(`ADD${o}`).connection.targetConnection;t&&-1==n.indexOf(t)&&t.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,`ADD${o}`)},saveConnections(t){let e=t.getInputTargetBlock("STACK"),i=0;for(;e;){const t=this.getInput(`ADD${i}`);e.valueConnection_=t&&t.connection.targetConnection,i++,e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput(`ADD${e}`)){const t=this.appendValueInput(`ADD${e}`).setCheck("EntryDef");0==e&&t.appendField("entry_defs")}for(;this.getInput(`ADD${e}`);)this.removeInput(`ADD${e}`),e++}},t.defineBlocksWithJsonArray([KL]),t.JavaScript.entry_def=function(e){return[`{id: "${e.getFieldValue("ENTRY_DEF_ID")}", visibility: "${e.getFieldValue("PUBLIC")?"Public":"Private"}"}`,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.entry_defs=function(e){const i=new Array(e.itemCount_);for(let n=0;n<e.itemCount_;n++)i[n]=t.JavaScript.valueToCode(e,`ADD${n}`,t.JavaScript.ORDER_NONE)||"null";return`export const entry_defs = [${i.join(", ")}]`}}(t),function(t){t.defineBlocksWithJsonArray([JL]),t.JavaScript.update_entry=function(e){const i=t.JavaScript.valueToCode(e,"ORIGINAL_HEADER",t.JavaScript.ORDER_ADDITION),n=t.JavaScript.valueToCode(e,"ENTRY",t.JavaScript.ORDER_ADDITION);if(!i)throw new Error('"update_entry": original header is empty');if(!n)throw new Error('"update_entry": entry is empty');return`(await hdk.create_entry(${i}, ${n}));\n`}}(t),VL(t)}const qL={kind:"categoryToolbox",contents:[{kind:"category",name:"HDK",contents:[{kind:"category",name:"Entries",contents:[]},{kind:"category",name:"CRUD",contents:[{kind:"block",type:"get"},{kind:"block",type:"get_details"},{kind:"block",type:"create_entry"},{kind:"block",type:"update_entry"},{kind:"block",type:"delete_entry"},{kind:"block",type:"hash_entry"}]},{kind:"category",name:"Links",contents:[{kind:"block",type:"get_links"},{kind:"block",type:"create_link"}]},{kind:"category",name:"Information",contents:[{kind:"block",type:"agent_info.agent_latest_pubkey"}]},{kind:"category",name:"Callbacks",contents:[{kind:"block",type:"entry_defs"},{kind:"block",type:"entry_def"}]}]},{kind:"category",name:"Control",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for"},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Logic",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_ternary"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_negate"}]},{kind:"category",name:"Math",contents:[{kind:"block",type:"math_number"},{kind:"block",type:"math_number"},{kind:"block",type:"math_trig"},{kind:"block",type:"math_constant"},{kind:"block",type:"math_number_property"},{kind:"block",type:"math_round"},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_constrain"},{kind:"block",type:"math_random_int"},{kind:"block",type:"math_random_float"}]},{kind:"category",name:"Text",contents:[{kind:"block",type:"text"},{kind:"block",type:"text_join"},{kind:"block",type:"text_append"},{kind:"block",type:"text_length"},{kind:"block",type:"text_isEmpty"},{kind:"block",type:"text_indexOf"},{kind:"block",type:"text_charAt"},{kind:"block",type:"text_getSubstring"},{kind:"block",type:"text_changeCase"},{kind:"block",type:"text_trim"}]},{kind:"category",name:"List",contents:[{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_repeat"},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_getSublist"},{kind:"block",type:"lists_getIndex"},{kind:"block",type:"lists_setIndex"},{kind:"block",type:"lists_sort"}]},{kind:"category",name:"Variables",custom:"VARIABLE"},{kind:"category",name:"Functions",custom:"PROCEDURE"}]};function ZL(t,...e){let i=t.raw[0];for(let n=0;n<e.length;n++)i+=e[n]+t.raw[n+1];return`data:text/javascript;base64,${btoa(unescape(encodeURIComponent(i)))}`}async function QL(t){const e=/function (\w*)\(([A-Za-z0-9_,\ ]*)\) \{/g,i=t.replace(e,"export const $1 = (hdk) => async ({ $2 }) => {"),n=t.split(e),o=await import(ZL`${i}`);console.log(i);const r=o.entry_defs;if(!r)throw new Error("There are no entry_defs defined in this zome");if(r.some((t=>null===t)))throw new Error("There are null entry defs");const s={};for(const t of Object.keys(o).filter((t=>"entry_defs"!==t))){const e=n.findIndex((e=>e===t))+1;let i=[];""!==n[e]&&(i=n[e].split(", ").map((t=>({name:t,type:"any"})))),s[t]={arguments:i,call:o[t]}}return{zome_functions:s,entry_defs:r}}function tP(t,e){const i=`new ${e}`;if(!t.JavaScript[i]){const n={type:i,message0:`new ${e} %1`,args0:[{type:"input_value",name:"CONTENT",check:"String",align:"right"}],output:"Entry",inputsInline:!0,colour:HL,tooltip:"Creates a new entry with the given entry_def_id and content",helpUrl:"http://www.w3schools.com/jsref/jsref_length_string.asp"};t.defineBlocksWithJsonArray([n]),t.JavaScript[i]=function(i){return[`{content: ${t.JavaScript.valueToCode(i,"CONTENT",t.JavaScript.ORDER_ADDITION)}, entry_def_id: "${e}"}`,t.JavaScript.ORDER_FUNCTION_CALL]}}return{kind:"block",type:i}}class eP extends(Nm(lt)){constructor(){super(...arguments),this._checkTimeout=void 0}static get styles(){return[st`
        :host {
          display: flex;
          flex: 1;
        }
        .blocklyFlyoutButton > .blocklyText {
          fill: white;
        }
      `,BL]}updated(t){super.updated(t),(t.has("zome")||t.has("editing"))&&this.zome&&setTimeout((()=>this.setupBlockly()))}firstUpdated(){$L(PL)}setupBlockly(){if(this._workspace&&this._workspace.dispose(),this.zome&&this.zome.entry_defs.forEach((t=>tP(PL,t.id))),this._workspace=PL.inject(this.blocklyArea,{toolbox:this.editing?qL:null,shadowRoot:this.shadowRoot}),this.zome.blocklyCode){const t=PL.Xml.textToDom(this.zome.blocklyCode);PL.Xml.domToWorkspace(t,this._workspace)}this.editing&&this._workspace.addChangeListener((async()=>{this._checkTimeout&&clearTimeout(this._checkTimeout),this._checkTimeout=setTimeout((async()=>{if(this.editing)try{const t=await this.getZome(),e=this._workspace.toolbox_.getToolboxItems()[0].getChildToolboxItems()[0],i=t.entry_defs.map((t=>tP(PL,t.id)));e.updateFlyoutContents({kind:"category",name:"Entries",contents:i}),this.dispatchEvent(new CustomEvent("zome-edited",{detail:{valid:!0,zome:t}}))}catch(t){console.error(t),this.dispatchEvent(new CustomEvent("zome-edited",{detail:{valid:!1}}))}clearTimeout(this._checkTimeout)}),500)}))}async isValid(){try{return await this.getZome(),!0}catch(t){return!1}}async getZome(){return async function(t,e,i){const n=t.JavaScript.workspaceToCode(e),{zome_functions:o,entry_defs:r}=await QL(n),s=t.Xml.domToText(t.Xml.workspaceToDom(e));return console.log(s),{name:i,entry_defs:r,zome_functions:o,blocklyCode:s}}(PL,this._workspace,this.zome.name)}render(){return F`
      <div
        class="row"
        style=${qt({flex:"1","pointer-events":this.editing?"all":"none"})}
      >
        <div id="blockly-area" style="flex: 1;"></div>
      </div>
    `}}t([$({type:Object})],eP.prototype,"zome",void 0),t([$({type:Boolean})],eP.prototype,"editing",void 0),t([Z("#blockly-area")],eP.prototype,"blocklyArea",void 0);class iP extends Mm{constructor(){super(...arguments),this._selectedZomeIndex=0,this._editingZomes=void 0,this._invalid=!1,this._newZomeCount=0}getActiveDna(){for(const t of this.conductors)for(const e of t.getAllCells())if(e.dnaHash===this.activeDna)return e.getSimulatedDna()}get _editing(){return void 0!==this._editingZomes}get _editZomeEl(){var t;return null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("edit-zome")}isDnaValid(){return this._editingZomes&&this._editingZomes.every((t=>t.valid))}async onZomeEdited(t){this.editDna();const e=t.detail.valid;this._editingZomes&&(this._editingZomes[this._selectedZomeIndex].valid=e,e&&(this._editingZomes[this._selectedZomeIndex].zome=t.detail.zome)),this.requestUpdate()}newEditingZome(){return this._newZomeCount++,{valid:!0,zome:{name:`sample${this._newZomeCount}`,entry_defs:[],zome_functions:{},blocklyCode:'<xml xmlns="https://developers.google.com/blockly/xml"><block type="entry_defs" id="a{AP^:MzvuAQf6=jI~[2" x="123" y="58"><mutation xmlns="http://www.w3.org/1999/xhtml" items="1"></mutation><value name="ADD0"><block type="entry_def" id="$SQ6P6OQ#1/hfOd4TA=@"><field name="ENTRY_DEF_ID">sample_entry</field><field name="PUBLIC">TRUE</field></block></value></block><block type="procedures_defnoreturn" id="D}syd|^_`$9k%uwyIdSn" x="164" y="126"><field name="NAME">sample function</field><comment pinned="false" h="80" w="160">Describe this function...</comment><statement name="STACK"><block type="create_entry" id="YbSju3KGV0}rR_PP}]b2"><value name="ENTRY"><block type="new sample_entry" id="tQuMSJo,+,v1tN,aAx9z"><field name="CONTENT">Hello world!</field></block></value></block></statement></block></xml>'}}}editDna(){if(!this._editing){const t=this.getActiveDna();this._editingZomes=t?t.zomes.map((t=>({valid:!0,zome:t}))):[this.newEditingZome()],this._editZomeEl.zome=this._editingZomes[this._selectedZomeIndex].zome,this._newZomeCount=0}}isCompileDisabled(){return!this._editing||!this.isDnaValid()}async showZome(t){var e;this._editing&&this._invalid?this.showMessage("Zome code is invalid"):(this._selectedZomeIndex=t,this._editingZomes?this._editZomeEl.zome=this._editingZomes[this._selectedZomeIndex].zome:this._editZomeEl.zome=null===(e=this.getActiveDna())||void 0===e?void 0:e.zomes[this._selectedZomeIndex])}addZome(){this._editingZomes&&(this._editingZomes=[...this._editingZomes,this.newEditingZome()])}getEditingDna(){if(this._editingZomes)return{properties:null,uuid:"",zomes:this._editingZomes.map((t=>t.zome))}}removeEditingZome(t){this._editingZomes&&(this._editingZomes.splice(t,1),t===this._selectedZomeIndex&&(this._selectedZomeIndex=0),this.requestUpdate())}async compileDna(){if(this._editingZomes){const t=this.conductors.map((async t=>{const e=await t.registerDna(this.getEditingDna());return t.installApp(e,null,null,"")})),e=await Promise.all(t);this.updatePlayground({activeDna:e[0].dnaHash,activeAgentPubKey:e[0].agentPubKey}),this._editingZomes=void 0,setTimeout((()=>{var t;this._editZomeEl.zome=null===(t=this.getActiveDna())||void 0===t?void 0:t.zomes[this._selectedZomeIndex]}))}}async cancelEdit(){this._editingZomes=void 0}renderContent(){const t=this.getEditingDna()||this.getActiveDna();return t?F`
      <div class="column" style="flex: 1;">
        <div
          class="row"
          style="align-items: center; margin: 0 16px; margin-left: 0;"
        >
          <mwc-tab-bar
            @MDCTabBar:activated=${t=>this.showZome(t.detail.index)}
          >
            ${t.zomes.map(((t,e)=>F`
                <mwc-tab label=${t.name}> </mwc-tab>

                ${this._editing?F`<mwc-icon-button
                        icon="delete"
                        style="opacity: 0.5; --mdc-icon-button-size: 36px; align-self: center; margin-right: 16px;"
                        @click=${()=>this.removeEditingZome(e)}
                      ></mwc-icon-button>
                      <span
                        class="vertical-divider"
                        style="align-self: center;"
                      ></span> `:F``}
              `))}
          </mwc-tab-bar>
          ${this._editing?F`
                <mwc-button
                  label="Add zome"
                  icon="add"
                  @click=${()=>this.addZome()}
                ></mwc-button>
              `:F``}
          <span style="flex: 1;"></span>
          ${this._editing?F`
                <mwc-button
                  label="CANCEL"
                  style="margin-right: 16px;"
                  @click=${()=>this.cancelEdit()}
                ></mwc-button>
                <mwc-button
                  label="COMPILE"
                  raised
                  .disabled=${this.isCompileDisabled()}
                  @click=${()=>this.compileDna()}
                ></mwc-button>
              `:F`
                <mwc-button
                  label="EDIT"
                  @click=${()=>this.editDna()}
                ></mwc-button>
              `}
        </div>

        <edit-zome
          id="edit-zome"
          .editing=${this._editing}
          style="flex: 1;"
          @zome-edited=${t=>this.onZomeEdited(t)}
        ></edit-zome>
      </div>
    `:F`<div class="row center-content" style="flex: 1;">
        <span>There is no active Dna</span>
      </div>`}render(){return F`
      <mwc-card style="width: auto; flex: 1">
        <div class="column" style="flex: 1;">
          <span style="font-size: 20px; margin: 16px;"
            >Dna
            Code${this.activeDna?F`<span style="opacity: 0.7"
                  >, for dna ${this.activeDna}
                </span>`:F``}</span
          >
          ${this.renderContent()}
        </div>
      </mwc-card>
    `}static get scopedElements(){return{"edit-zome":eP,"mwc-tab-bar":Ac,"mwc-tab":tc,"mwc-button":bl,"mwc-icon-button":ei,"mwc-card":ld}}}iP.styles=[st`
      :host {
        display: flex;
      }
    `,BL],t([$({type:Number})],iP.prototype,"_selectedZomeIndex",void 0),t([$({type:Array})],iP.prototype,"_editingZomes",void 0),t([$({type:Boolean})],iP.prototype,"_invalid",void 0);customElements.define("holochain-playground-container",Dm),customElements.define("dna-code",iP),customElements.define("dht-cells",CC),customElements.define("select-active-dna",class extends Mm{selectDNA(t){this.updatePlayground({activeAgentPubKey:null,activeHash:null,activeDna:t})}render(){const t=function(t){const e={};for(const i of t)for(const t of i.getAllCells())e[t.dnaHash]=!0;return Object.keys(e)}(this.conductors);return F(Cm||(Cm=Rm` <mwc-card class="block-card"> <div class="column" style="margin:16px"> <span class="block-title" style="margin-bottom:16px">Select Active Dna</span> <mwc-select outlined fullwidth @selected="${0}"> ${0} </mwc-select> </div> </mwc-card> `),(e=>this.selectDNA(t[e.detail.index])),t.map((t=>F(wm||(wm=Rm` <mwc-list-item ?selected="${0}" .value="${0}">${0}</mwc-list-item> `),this.activeDna===t,t,t))))}static get styles(){return[st(Im||(Im=Rm`:host{display:flex}`)),Lm]}static get scopedElements(){return{"mwc-list-item":xd,"mwc-select":Bg,"mwc-card":ld}}}),customElements.define("call-zome-fns",Qm),customElements.define("entry-graph",ZC);const nP=document.getElementById("container");nP.simulatedDnaTemplate={properties:null,uuid:"",zomes:[{name:"demo_entries",entry_defs:[{id:"sample_entry",visibility:"Public"}],blocklyCode:'<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="_?2#8+sn=^`fqd%E/Ffz">hash</variable><variable id="}+4NT8PIh-H~3?/]i:pq">contents</variable></variables><block type="entry_defs" id="Jjc~6G6Ezu-d^-@em_yh" x="115" y="28"><mutation xmlns="http://www.w3.org/1999/xhtml" items="1"></mutation><value name="ADD0"><block type="entry_def" id=":we9$r=tpV.ce6FC0$a@"><field name="ENTRY_DEF_ID">sample_entry</field><field name="PUBLIC">TRUE</field></block></value></block><block type="procedures_defreturn" id="M}4W;Z$EW[%Js=y4-XWx" x="208" y="111"><mutation><arg name="hash" varid="_?2#8+sn=^`fqd%E/Ffz"></arg></mutation><field name="NAME">get</field><comment pinned="false" h="80" w="160">Describe this function...</comment><value name="RETURN"><block type="get" id=";rtPS/KcSZp8;VN{1uKM"><value name="HASH"><block type="variables_get" id=")BCBF(.]MvZh6-XA]Y1*"><field name="VAR" id="_?2#8+sn=^`fqd%E/Ffz">hash</field></block></value></block></value></block><block type="procedures_defreturn" id="l-jj!v]JU[3gtFFrKl{)" x="118" y="256"><mutation><arg name="contents" varid="}+4NT8PIh-H~3?/]i:pq"></arg></mutation><field name="NAME">create_entry</field><comment pinned="false" h="80" w="160">Describe this function...</comment><statement name="STACK"><block type="create_entry" id=":Sgxw5iCag?!f,R$yHK5"><value name="ENTRY"><block type="new sample_entry" id="Vxav^_6z|in9trwJmorD"><value name="CONTENT"><block type="variables_get" id="a3-sS1)%cGR`5q4VuB:E"><field name="VAR" id="}+4NT8PIh-H~3?/]i:pq">contents</field></block></value></block></value></block></statement><value name="RETURN"><block type="hash_entry" id="@yEoC$H__6#Ql:m6%FBg"><value name="ENTRY"><block type="new sample_entry" id="IF[Lz57}#@!b3z/~-A6O"><value name="CONTENT"><block type="variables_get" id="wc1vbieNkjxWJ21[E;?z"><field name="VAR" id="}+4NT8PIh-H~3?/]i:pq">contents</field></block></value></block></value></block></value></block></xml>',zome_functions:{create_entry:{call:({hash_entry:t,create_entry:e})=>async({content:i})=>(await e({content:i,entry_def_id:"sample_entry"}),t({content:i})),arguments:[{name:"content",type:"any"}]},get:{call:({get:t})=>({hash:e})=>t(e),arguments:[{name:"hash",type:"any"}]}}}]},nP.numberOfSimulatedConductors=6,nP.addEventListener("ready",(t=>{const e=t.detail.conductors[0].getAllCells()[0];t.target.activeAgentPubKey=e.cellId[1]}));
